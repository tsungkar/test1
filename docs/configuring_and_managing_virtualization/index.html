<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/ dc: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/ og: http://ogp.me/ns# rdfs: http://www.w3.org/2000/01/rdf-schema# sioc: http://rdfs.org/sioc/ns# sioct: http://rdfs.org/sioc/types# skos: http://www.w3.org/2004/02/skos/core# xsd: http://www.w3.org/2001/XMLSchema# article: http://ogp.me/ns/article# book: http://ogp.me/ns/book# profile: http://ogp.me/ns/profile# video: http://ogp.me/ns/video#" >

<head profile="http://www.w3.org/1999/xhtml/vocab">
	  <!--[if IE]><![endif]-->
<meta charset="utf-8" />
<meta name="revision" title="d411d5d3-585a-43bf-afc9-272d36f0db79" product="f321f43a-4a79-48fe-8aae-117b9d973ec0" revision="710813f4dd2d9211945de26c88d825ad2461f04c:en-us" page="100cb501-4082-4b9f-b79b-ddc1d7a0b0de" />
<meta name="generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/index" />
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/index" />
<meta property="og:site_name" content="Red Hat Customer Portal" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/index" />
<meta property="og:title" content="Configuring and managing virtualization Red Hat Enterprise Linux 8 | Red Hat Customer Portal" />
<meta property="og:description" content="This document describes how to manage virtualization in Red Hat Enterprise Linux 8 (RHEL 8). In addition to general information about virtualization, it describes how to manage virtualization using command-line utilities, as well as using the web console." />
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/index" />
<meta name="twitter:title" content="Configuring and managing virtualization Red Hat Enterprise Linux 8 | Red Hat Customer Portal" />
<meta name="twitter:description" content="This document describes how to manage virtualization in Red Hat Enterprise Linux 8 (RHEL 8). In addition to general information about virtualization, it describes how to manage virtualization using command-line utilities, as well as using the web console." />
<meta name="twitter:image:src" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
  <title>Configuring and managing virtualization Red Hat Enterprise Linux 8 | Red Hat Customer Portal</title>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="kcs06.web.prod.ext.phx2.redhat.com" />
<meta name="avalon-version" content="2070d6b" />
<meta name="cp-chrome-build-date" content="2020-03-09T20:28:54.189Z" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml" />

 

<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en",  
        version   : "2070d6b",
        builddate : "2020-03-09T20:28:54.189Z",
        fetchdate : "2020-03-11T07:53:05-0400",
        nrid      : "14615289",
        nrlk      : "2a497fa56f"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="favicon.ico" />

<link media="all" rel="stylesheet" type="text/css" href="bootstrap.css%3Fv=2070d6b.css" />
<link media="all" rel="stylesheet" type="text/css" href="main.css%3Fv=2070d6b.css" />
<link media="all" rel="stylesheet" type="text/css" href="components.css%3Fv=2070d6b.css" />
<link media="all" rel="stylesheet" type="text/css" href="pages.css%3Fv=2070d6b.css" />

<link href="chosen.css%3Fv=2070d6b.css" rel="stylesheet" type="text/css" />

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]-->

<noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>

<!-- /cssInclude -->
<script type="text/javascript" src="require.js%3Fv=2070d6b" data-main="/webassets/avalon/j/"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->
  <link type="text/css" rel="stylesheet" href="css__c2Nkkx_5vYh8rvZbfBAGB4EMzMtH5ouFJDBlDsnhSR8__-ax0_8bam15ZDJT9j7LilCfJrDyEhGGAgc0KC8HYvJg__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__Jy3BSr8TrxptaufAzQDT1skBUlX2CnL_wm6BizzYuGw__-YZvqB8yuA4kK_iKklbk5HdZCoG2qAgz1l-8Qi2NFH4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="messages.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__m76iIFREtc70Nmw5xe1ZwHbNBlwOP2Zjc3DcacNWnFQ__STEh8aY3w8E_bKzhB4Xke2WOQ9XMDQquHIP5B8SeDIY__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__4sM4s6XOQ2Nm0pdkrWRLvrgtwpTmHAFzR_LcdesKYj8__vJ0jjVEhoPh3KBeLZfkqg51T3AFxhQCuXg1reipa__k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="print" />
  <link rel="stylesheet" type="text/css" media="all" href="list.css" />
  <script src="js__1YIht1y1Jlm9D0PyxEuhS3DlWdYAlEsNpsFDOaUsfRw__ZnC7278ZsqBG-1FOUqflDl8B3Y1kLiAWXAIkoLrHbYg__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__5ysXPc5KIyMmizxqRY68ILfrEGrj0P29WBIifnPTJvQ__Cap0DACEVMsefumg1gS1APLLd8stDkdGfp6c1uswMo4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>chrometwo_require(["analytics/attributes"], function(attributes) {
attributes.set('ResourceID',       'd411d5d3-585a-43bf-afc9-272d36f0db79');
attributes.set('ResourceTitle',    'Configuring and managing virtualization');
attributes.set('Language',         'en-us');
attributes.set('RevisionId',       '710813f4dd2d9211945de26c88d825ad2461f04c:en-us');
attributes.set('PublicationState', ['active','published']);
attributes.set('Product',          'Red Hat Enterprise Linux');
attributes.set('ProductVersion',   '8');
attributes.set('ProductId',        'Red Hat Enterprise Linux 8');
});</script>
<script>breadcrumbs = [ ["Products &amp; Services", "/products/"], ["Product Documentation", "/documentation/"], ["Red Hat Enterprise Linux", "/documentation/en-us/red_hat_enterprise_linux/"], ["8", "/documentation/en-us/red_hat_enterprise_linux/8/"], ["Configuring and managing virtualization", "/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/"] ];</script>
<script>window.siteMapState = "products";</script>
<script src="js__i6ieGBO-OPmIKm_f0srsb6gM7QELIWrBpKh6ub_yj8A__wjRg_duSK4rEZCRV2uwrCIPMl80Z_LJ9ew61H5hE-ZI__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__vGeEtorfXGI3aPAp71YA74N5p8wfpYVhnoIqwaJrOiQ__veGxEiPQW6fkzAPZnAFA23SFz1CyJy2dlu6x8XuHM4s__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"kcs","theme_token":"qfIh6-VSbJAKCTEd4RM6zxqY7AdJkz1LRIAbVnERb5E","js":{"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.jquery.min.js":1,"modules\/chosen\/chosen.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/prism.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/underscore.js":1,"sites\/all\/themes\/kcs\/js\/kcs_base.js":1,"sites\/all\/themes\/kcs\/js\/showdown.js":1,"sites\/all\/themes\/kcs\/js\/case_links.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"modules\/date\/date_api\/date.css":1,"modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/contrib\/user_prune\/css\/user_prune.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/contrib\/panels\/css\/panels.css":1,"sites\/all\/modules\/custom\/rate\/rate.css":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/plugins\/layouts\/docs_page\/docs_page.css":1,"https:\/\/access.redhat.com\/webassets\/avalon\/s\/messages.css":1,"sites\/all\/themes\/zen\/system.base.css":1,"sites\/all\/themes\/zen\/system.menus.css":1,"sites\/all\/themes\/zen\/system.messages.css":1,"sites\/all\/themes\/zen\/system.theme.css":1,"sites\/all\/themes\/zen\/comment.css":1,"sites\/all\/themes\/zen\/node.css":1,"sites\/all\/themes\/kcs\/css\/html-reset.css":1,"sites\/all\/themes\/kcs\/css\/wireframes.css":1,"sites\/all\/themes\/kcs\/css\/layout-fixed.css":1,"sites\/all\/themes\/kcs\/css\/page-backgrounds.css":1,"sites\/all\/themes\/kcs\/css\/tabs.css":1,"sites\/all\/themes\/kcs\/css\/pages.css":1,"sites\/all\/themes\/kcs\/css\/blocks.css":1,"sites\/all\/themes\/kcs\/css\/navigation.css":1,"sites\/all\/themes\/kcs\/css\/views-styles.css":1,"sites\/all\/themes\/kcs\/css\/nodes.css":1,"sites\/all\/themes\/kcs\/css\/comments.css":1,"sites\/all\/themes\/kcs\/css\/forms.css":1,"sites\/all\/themes\/kcs\/css\/fields.css":1,"sites\/all\/themes\/kcs\/css\/kcs.css":1,"sites\/all\/themes\/kcs\/css\/print.css":1}},"chosen":{"selector":"#edit-field-kcs-component-select-und, #edit-field-kcs-sbr-select-und, #edit-field-kcs-product-select-und, #edit-field-kcs-type-select-und, #edit-language, #edit-field-kcs-a-category-select-und, #edit-field-kcs-state-select-und, #edit-field-kcs-tags-select-und, #edit-field-kcs-state-select-value, #edit-field-vid-reference-product-und, #edit-state, #edit-product, #edit-category, #edit-field-kcs-product-select-tid, #edit-field-kcs-type-select-tid, #edit-field-kcs-a-category-select-tid, #edit-sort-bef-combine, #edit-kcs-state, #edit-field-category-tid, #edit-field-product-tid, #edit-field-tags-tid, #edit-field-category-und, #edit-field-product-und, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-category, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-product, #views-exposed-form-questions-list-questions-filter-block #edit-field-tags, #edit-field-mega-menu-tab-und, #edit-field-internal-tags-tid, #edit-tags, #edit-field-kcs-tags-select-tid, #edit-subscriptions-and-choose-field-select, #edit-subscriptions-and-type, #edit-vid-13, #edit-vid-4, #edit-vid-5, #edit-vid-53, #edit-vid-1, #edit-vid-3, #edit-group-blog, #edit-group-group, #edit-subscriptions-and-choose-field-select-two, #edit-subscriptions-and-type-two, #edit-vid-13-two, #edit-vid-4-two, #edit-vid-5-two, #edit-vid-53-two, #edit-vid-1-two, #edit-vid-3-two, #edit-group-blog-two, #edit-group-group-two, #edit-subscriptions-and-edit-choose-field-select, #edit-subscriptions-and-type-edit, #edit-subscriptions-and-edit-type-two, #edit-vid-13-edit-two, #edit-vid-4-edit-two, #edit-vid-5-edit-two, #edit-vid-53-edit-two, #edit-vid-1-edit-two, #edit-vid-3-edit-two, #edit-group-group-edit-two, #edit-subscriptions-and-edit-choose-field-select-two, #edit-vid-13-edit, #edit-vid-4-edit, #edit-vid-5-edit, #edit-vid-53-edit, #edit-vid-1-edit, #edit-vid-3-edit, #edit-group-group-edit, #edit-group-blog-edit, #edit-field-supported-languages-tid, #edit-field-geography-und, #edit-field-supported-products-und, #edit-field-supported-languages-und, #edit-field-vendor-und, #edit-field-errata-type-text-und, #edit-field-errata-severity-text-und, #edit-field-software-partner-level-und, #edit-field-scert-product-category-und, #edit-field-certifications-und-0-field-product-und, #edit-kcs-article-type, #edit-field-eco-industry-tag-select-tid, #edit-field-eco-software-catego-select-tid, #edit-field-ecosystem-tag-select-und, #edit-field-eco-industry-tag-select-und, #edit-field-eco-software-catego-select-und, #edit-field-vendor-tsanet-member-ref-und, #edit-field-og-vendor-ref-und-0-default, #edit-field-eco-products-enabled-col-und-0-field-eco-subscription-model-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-support-level-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-archite-select-und, #edit-field-eco-certifications-select-und-0-field-eco-certificati-lvl-select-und, #edit-field-eco-certifications-select-und-0-field-eco-hypervisor-str-und, #edit-field-eco-supported-language-ref-und, #edit-field-eco-region-ref-und, #edit-field-cs-product-category-str-und, #edit-field-eco-certifications-select-und-0-field-eco-format-ref-und, #edit-field-eco-group-access-ref-und, #edit-field-hw-category-tag-ref-und, #edit-field-profile-industry-und, #edit-field-profile-tech-interests-und, #edit-field-product-page-features-ref-und, #edit-field-eco-product-select-und, #edit-field-base-product-ref-und, #edit-field-eco-product-archite-select-und, #edit-field-eco-format-ref-und, #edit-field-certification-status-ref-und, #edit-field-certification-result-ref-und, #edit-field-og-certified-product-ref-und-0-default, #edit-field-eco-subscription-model-ref-und, #edit-field-eco-support-level-ref-und, #edit-field-eco-certificati-lvl-select-und, #edit-field-eco-hypervisor-str-und, #edit-field-ccp-thirdparty-cert-select-und, .use_, #edit-field-eco-cert-product-tag-und, #edit-field-documentation-location-ref-und, #edit-field-documentation-title-und, #edit-field-accelerator-products-und","minimum":"0"},"rh_doc_fetcher":{"page_type":"single"},"section":"","kcs":{"nodeType":null,"nodeId":null}});</script>
    <!--[if lt IE 9]>
  <script src="https://access.redhat.com/sites/all/themes/kcs/js/html5shiv.js"></script>
  <![endif]-->
  
      


    <!--kcs07-->
<script type="text/javascript">
  Drupal.portal = {"version":{"redhat_portal":"package drupal7-redhat_portal is not installed"}};
  Drupal.portal.currentUser = {};
  </script>

</head>

<body class="portal-page admin-bar  kcs_external" >

  
  <div id="page-wrap" class="page-wrap">
    <div class="top-page-wrap">

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <!-- Accessibility Nav & Header -->
<div class="accessibility-nav sr-only">
    <a href="https://access.redhat.com/">
        <h1>Red Hat <span>Customer </span><span>Portal</span></h1>
    </a>
    <p><a href="index.html#cp-main">Skip to main content</a></p>
    <nav aria-labelledby="accessibility-nav-heading">
        <h2 id="accessibility-nav-heading">Main Navigation</h2>
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/support/policy/update_policies/">Product Life Cycle &amp; Update Policies</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/ecosystem/">Ecosystem</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="accessibility-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="accessibility-accountUser">
                    <div class="account-name"><strong id="accessibility-userFullName"></strong></div>
                    <div class="account-org"><span id="accessibility-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="accessibility-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="accessibility-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="accessibility-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="accessibility-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="accessibility-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="accessibility-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- Mobile Header -->
<nav class="mobile-nav-bar hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <button id="menu-btn" class="menu menu-white" type="button" aria-label="Toggle Navigation">
        <span class="lines"></span>
    </button>
    <a class="logo" href="https://access.redhat.com/">
        <span class="logo-crop">
          <!-- logo -->
          <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
            <defs>
              <style>
                .rh-logo-hat {
                  fill: #e00;
                }
                .rh-logo-type {
                  fill: #fff;
                }
              </style>
            </defs>
            <title>Red Hat</title>
            <path
              class="rh-logo-hat"
              d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
              <path class="rh-logo-band"
              d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
              <path
              class="rh-logo-type"
              d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
          </svg>
        </span>
        <span class="site-title"><span>Customer </span><span>Portal</span></span>
    </a>
    <button class="btn btn-search btn-utility" data-target="#site-search">
        <span class="web-icon-search"></span>
        <span class="link-text">Search</span>
    </button>
</nav>

<!-- Mobile Menu Drawer -->
<div class="nav-drawer mobile-nav-drawer hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <nav class="nav-container">
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/support/policy/update_policies/">Product Life Cycle &amp; Update Policies</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/ecosystem/">Ecosystem</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="mobile-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="mobile-accountUser">
                    <div class="account-name"><strong id="mobile-userFullName"></strong></div>
                    <div class="account-org"><span id="mobile-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="mobile-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="mobile-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="mobile-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="mobile-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="mobile-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="mobile-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- White Utility Menu for large screens -->
<div class="utility-wrap" aria-hidden="true">
    <div class="utility-container">
        <div class="utility-bar hidden-xs">
            <div role="navigation" class="top-nav">
                <ul>
                    <li id="nav-subscription" data-portal-tour-1="1"><a class="top-nav-subscriptions" href="https://access.redhat.com/management/">Subscriptions</a></li>
                    <li id="nav-downloads" data-portal-tour-1="2"><a class="top-nav-downloads" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li id="nav-containers"><a class="top-nav-containers" href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
                    <li id="nav-support" data-portal-tour-1="3"><a class="top-nav-support-cases" href="https://access.redhat.com/support/cases/">Support Cases</a></li>
                </ul>
            </div>

            <div role="navigation" class="utility-nav">
                <ul>
                    <li id="searchABTestHide">
                        <a class="btn-search" data-target="#site-search" title="Search" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-search" aria-label="search"></span>
                            <span class="link-text">Search</span>
                        </a>
                    </li>
                    <!-- AB Test -->
                    <li id="searchABTestShow">
                        <form id="topSearchFormABTest" name="topSearchFormABTest">
                            <label for="topSearchInputABTest" class="sr-only">Search</label>
                            <input id="topSearchInputABTest" name="keyword" placeholder="Search" value="" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="form-control">
                            <button type="submit" class="btn btn-app btn-sm btn-link"><span class="web-icon-search" aria-label="search"></span></button>
                        </form>
                    </li>
                    <!-- End of AB Test -->
                    <li>
                        <a class="btn-profile" data-target="#account-info" data-portal-tour-1="4a" title="Account" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-user" aria-label="log in"></span>
                            <span class="link-text">Log In</span>
                            <span class="account-user" id="accountUserName"></span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-language" data-target="#language" data-portal-tour-1="6" title="Language" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-globe" aria-label="language"></span>
                            <span class="link-text">Language</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Utility Tray -->
        <div class="utility-tray-container">
            <div class="utility-tray">
                <div id="site-search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="https://access.redhat.com/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <div class="input-group push-bottom">

                                <input class="form-control searchField" id="topSearchInput" name="keyword" value="" placeholder="Enter your search term" type="text">
                                <span class="input-group-btn">
                                    <button type="submit" class="btn btn-primary">Search</button>
                                </span>
                            </div>
                            <div>Troubleshooting an issue? Try <a href="https://access.redhat.com/solution-engine">Solution Engine</a>&mdash;our new support tool.</div>
                        </form>
                    </div>
                </div>
                <div id="account-info" class="utility-link account-info">
                    <div class="content">

                        <!-- Account Unauthenticated -->
                        <div id="accountLinksLoggedOut" class="unauthenticated">
                            <h2 class="utility-header">Log in to Your Red Hat Account</h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border">
                                    <p><a href="https://access.redhat.com/login" id="accountLogin" class="btn btn-primary">Log In</a></p>
                                    <p>Your Red Hat account gives you access to your profile, preferences, and services, depending on your status.</p>
                                </div>
                                <div class="col-sm-6 col-border col-border-left">
                                    <p><a href="https://www.redhat.com/wapps/ugc/register.html" class="btn btn-primary">Register</a></p>
                                    <p>If you are a new customer, register now for access to product evaluations and purchasing capabilities. </p>

                                    <strong>Need access to an account?</strong><p>If your company has an existing Red Hat account, your organization administrator can grant you access.</p>

                                    <p><a href="https://access.redhat.com/support/contact/customerService/">If you have any questions, please contact customer service.</a></p>
                                </div>
                            </div>
                        </div>

                        <!-- Account Authenticated -->
                        <div id="accountLinksLoggedIn" class="authenticated">
                            <h2 class="utility-header"><span id="userFirstName"></span></h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border col-border-right">
                                    <div class="account-info" id="accountUser">
                                        <div class="avatar"><!-- placeholder--></div>
                                        <div class="account-name"><strong id="userFullName"></strong></div>
                                        <div class="account-org"><span id="userOrg"></span></div>
                                        <div class="account-number accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                                    </div>

                                    <div class="row account-settings">
                                        <div class="col-md-6" data-portal-tour-1="4">
                                            <h3>Red Hat Account</h3>
                                            <ul class="reset">
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
                                                <!-- <li><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
                                                <li><a href="https://access.redhat.com/account-team">Account Team</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6" data-portal-tour-1="5">
                                            <h3>Customer Portal</h3>
                                            <ul class="reset">
                                                <li><a href="https://access.redhat.com/user">My Profile</a></li>
                                                <li><a href="https://access.redhat.com/user" id="userNotificationsLink">Notifications</a></li>
                                                <li><a href="https://access.redhat.com/help/">Help</a></li>
                                            </ul>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-sm-6 col-border">
                                    <p>For your security, if you’re on a public computer and have finished using your Red Hat services, please be sure to log out.</p>
                                    <p><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout" id="accountLogout" class="btn btn-primary">Log Out</a></p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div id="language" class="utility-link language">
                    <div class="content">
                        <h2 class="utility-header">Select Your Language</h2>
                        <div class="row" id="localesMenu">
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=en" data-lang="en" id="en">English</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ko" data-lang="ko" id="ko">한국어</a></li>
                                </ul>
                            </div>
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ja"    data-lang="ja"    id="ja">日本語</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" data-lang="zh_CN" id="zh_CN">中文 (中国)</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="scroll-anchor"></div>

<!-- Main Menu for large screens -->
<div class="header-nav visible-sm visible-md visible-lg" aria-hidden="true">
    <div id="header-nav">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">

                    <a href="https://access.redhat.com/" class="logo">
                        <span class="logo-crop">
                          <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                            <defs>
                              <style>
                                .rh-logo-hat {
                                  fill: #e00;
                                }
                                .rh-logo-type {
                                  fill: #fff;
                                }
                              </style>
                            </defs>
                            <title>Red Hat</title>
                            <path
                              class="rh-logo-hat"
                              d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                              <path class="rh-logo-band"
                              d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                              <path
                              class="rh-logo-type"
                              d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                          </svg>
                        </span>
                        <span class="site-title"><span>Customer </span><span>Portal</span></span>
                    </a>

                    <nav class="primary-nav hidden-sm">
                        <ul>
                            <li id="nav-products"><a class="products" data-link="mega" data-target="products-menu" href="https://access.redhat.com/products/" id="products-menu">Products &amp; Services</a></li>
                            <li id="nav-tools"><a class="tools" data-link="mega" data-target="tools-menu" href="https://access.redhat.com/labs/" id="tools-menu">Tools</a></li>
                            <li id="nav-security"><a class="security" data-link="mega" data-target="security-menu" href="https://access.redhat.com/security/" id="security-menu">Security</a></li>
                            <li id="nav-community"><a class="community" data-link="mega" data-target="community-menu" href="https://access.redhat.com/community/" id="community-menu">Community</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Mega Menu for large screens -->
<div class="mega-wrap visible-sm visible-md visible-lg" aria-hidden="true">
    <nav class="mega">
        <div class="container">
            <div class="mega-menu-wrap">

                <!-- Products Menu -->
                <div aria-labelledby="products-menu" class="products-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-md-6 col-sm-8">
                            <div class="root clearfix" data-portal-tour-1="7">
                                <ul class="subnav subnav-root">
                                    <li data-target="infrastructure-menu" class="active">
                                        <h3>Infrastructure and Management</h3>
                                    </li>
                                    <li data-target="cloud-menu">
                                        <h3>Cloud Computing</h3>
                                    </li>
                                    <li data-target="storage-menu">
                                        <h3>Storage</h3>
                                    </li>
                                    <li data-target="jboss-dev-menu">
                                        <h3>Runtimes</h3>
                                    </li>
                                    <li data-target="jboss-int-menu">
                                        <h3>Integration and Automation</h3>
                                    </li>
                                </ul>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="infrastructure-menu" style="display: block;">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="cloud-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="storage-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a>
                                        </li>
                                        <li>
                                          <a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-dev-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                        </li>
                                    </ul>
                                </div> -->
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul class="border-bottom" id="portal-menu-border-bottom">
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                      </li>
                                    </ul>
                                    <ul>
                                      <li>
                                        <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Automation</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                      </li>
                                    </ul>
                                </div>
                            </div>
                            <a href="https://access.redhat.com/products" class="btn btn-primary">View All Products</a>
                        </div>

                        <div class="col-md-6 col-sm-4 pull-right" data-portal-tour-1="8">
                            <div class="row">
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/support" class="cta-link cta-link-darkbg">Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
                                        <li><a href="https://access.redhat.com/support/policy/update_policies/">Product Life Cycle &amp; Update Policies</a></li>
                                    </ul>
                                    <h4 class="nav-title">Services</h4>
                                    <ul>
                                        <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
                                        <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/documentation" class="cta-link cta-link-darkbg">Documentation</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>
                                    </ul>
                                    <ul>
                                        <li><a href="https://access.redhat.com/ecosystem/" class="cta-link cta-link-darkbg">Ecosystem</a></li>
                                        <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
                                        <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tools Menu -->
                <div aria-labelledby="tools-menu" class="tools-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row" data-portal-tour-1="9">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h3 class="nav-title">Tools</h3>
                                    <ul>
                                        <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
                                        <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
                                        <li><a href="https://access.redhat.com/errata/">Errata</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <ul class="list-flat">
                                        <li><a href="https://access.redhat.com/labs/" class="cta-link cta-link-darkbg">Customer Portal Labs</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <div class="card card-dark-grey">
                                        <h4 class="card-heading">Red Hat Insights</h4>
                                        <p class="text-white">Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                        <ul class="list-flat rh-l-grid rh-m-gutters rh-m-all-6-col-on-md">
                                          <li><a href="https://www.redhat.com/en/technologies/management/insights" class="cta-link cta-link-md cta-link-darkbg">Learn more</a></li>
                                          <li><a href="https://cloud.redhat.com/insights" class="cta-link cta-link-md cta-link-darkbg">Go to Insights</a></li>
                                        </ul>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>

                <!-- Security Menu -->
                <div aria-labelledby="security-menu" class="security-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="10">

                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Red Hat Product Security Center</h2>
                                    <p class="text-white">Engage with our Red Hat Product Security team, access security updates, and ensure your environments are not exposed to any known security vulnerabilities.</p>
                                    <p><a href="https://access.redhat.com/security/" class="btn btn-primary">Product Security Center</a></p>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Security Updates</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
                                    </ul>
                                    <p class="text-white">Keep your systems secure with Red Hat&#039;s specialized responses for high-priority security vulnerabilities.</p>
                                    <ul>
                                        <li class="more-link"><a href="https://access.redhat.com/security/vulnerability">View Responses</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Resources</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
                                        <li><a href="https://www.redhat.com/en/blog/channel/security">Security Blog</a></li>
                                        <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
                                        <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community Menu -->
                <div aria-labelledby="community-menu" class="community-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="11">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Portal Community</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
                                        <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
                                        <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
                                        <p class="push-top"><a href="https://access.redhat.com/community/" class="btn btn-primary">Community Activity</a></p>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Events</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
                                        <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Stories</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
                                        <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
                                        <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!--<a href="https://access.redhat.com/community/" class="btn btn-primary">Explore Community</a>-->
                    </div>
                </div>
            </div>
        </div>
    </nav>
</div>

            <!--[if IE 8]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
            </div>
            <![endif]-->
            <!--[if IE 9]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
            </div>
            <![endif]-->
            <div id="site-section"></div>
        </header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">
  <script type="text/javascript">
    chrometwo_require(['jquery-ui']);
  </script>


      <article class="rh_docs">
  <div class="container">
        <!-- Display: Book Page Content -->
    
  

<div class="row">
  <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
  <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
  


<a class="toc-toggle toc-show" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
  <span class="sr-only">Show Table of Contents</span>
  <span class="web-icon-mobile-menu" aria-hidden="true"></span>
</a>
<nav id="toc-main" class="toc-main collapse in">
  <div class="toc-menu affix-top">
    <a class="toc-toggle toc-hide" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
      <span class="sr-only">Hide Table of Contents</span>
      <span class="icon-remove" aria-hidden="true"></span>
    </a>
    <div class="doc-options">
      <div class="doc-language btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          English <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="index.html">English</a></li>
                      <li><a href="https://access.redhat.com/documentation/ja-jp/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/">日本語</a></li>
                  </ul>
      </div>
      <div class="doc-format btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          Single-page HTML <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/">Multi-page HTML</a></li>
                                <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/pdf/configuring_and_managing_virtualization/Red_Hat_Enterprise_Linux-8-Configuring_and_managing_virtualization-en-US.pdf">PDF</a></li>
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/epub/configuring_and_managing_virtualization/Red_Hat_Enterprise_Linux-8-Configuring_and_managing_virtualization-en-US.epub">ePub</a></li>
                  </ul>
      </div>
    </div>
    <ol class="menu"><li class=" leaf"><a href="index.html">Configuring and managing virtualization</a></li><li class=" leaf"><a href="index.html#proc_providing-feedback-on-red-hat-documentation_configuring-and-managing-virtualization">Providing feedback on Red Hat documentation</a></li><li class=" leaf"><a href="index.html#virtualization-in-rhel-8-an-overview_configuring-and-managing-virtualization">1. Virtualization in RHEL 8 - an overview</a><ol class="menu"><li class=" leaf"><a href="index.html#what-is-virtualization-in-rhel-8-virt-overview">1.1. What is virtualization?</a></li><li class=" leaf"><a href="index.html#advantages-of-virtualization_virt-overview">1.2. Advantages of virtualization</a></li><li class=" leaf"><a href="index.html#rhel-8-virtual-machine-components-and-their-interaction_virt-overview">1.3. Virtual machine components and their interaction</a></li><li class=" leaf"><a href="index.html#con_tools-and-interfaces-for-virtualization-management-in-RHEl8_virt-overview">1.4. Tools and interfaces for virtualization management</a></li><li class=" leaf"><a href="index.html#red-hat-virtualization-solutions_virt-overview">1.5. Red Hat virtualization solutions</a></li></ol></li><li class=" leaf"><a href="index.html#getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization">2. Getting started with virtualization</a><ol class="menu"><li class=" leaf"><a href="index.html#enabling-virtualization-in-rhel8_virt-getting-started">2.1. Enabling virtualization</a></li><li class=" leaf"><a href="index.html#assembly_creating-virtual-machines_virt-getting-started">2.2. Creating virtual machines</a><ol class="menu"><li class=" leaf"><a href="index.html#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines">2.2.1. Creating virtual machines using the command-line interface</a></li><li class=" leaf"><a href="index.html#creating-vms-using-the-rhel-8-web-console_assembly_creating-virtual-machines">2.2.2. Creating virtual machines using the web console</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_starting-virtual-machines_virt-getting-started">2.3. Starting virtual machines</a><ol class="menu"><li class=" leaf"><a href="index.html#starting-a-virtual-machine-using-the-command-line-interface_assembly_starting-virtual-machines">2.3.1. Starting a virtual machine using the command-line interface</a></li><li class=" leaf"><a href="index.html#powering-up-vms-using-the-rhel-8-web-console_assembly_starting-virtual-machines">2.3.2. Powering up virtual machines using the web console</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_connecting-to-virtual-machines_virt-getting-started">2.4. Connecting to virtual machines</a><ol class="menu"><li class=" leaf"><a href="index.html#viewing-guest-graphical-console-in-the-rhel-8-web-console_assembly_connecting-to-virtual-machines">2.4.1. Viewing the virtual machine graphical console in the web console</a></li><li class=" leaf"><a href="index.html#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines">2.4.2. Opening a virtual machine graphical console using Virt Viewer</a></li><li class=" leaf"><a href="index.html#proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines">2.4.3. Connecting to a virtual machine using SSH</a></li><li class=" leaf"><a href="index.html#proc_opening-a-virtual-machine-serial-console_assembly_connecting-to-virtual-machines">2.4.4. Opening a virtual machine serial console</a></li><li class=" leaf"><a href="index.html#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines">2.4.5. Setting up easy access to remote virtualization hosts</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_shutting-down-virtual-machines_virt-getting-started">2.5. Shutting down virtual machines</a><ol class="menu"><li class=" leaf"><a href="index.html#shutting-down-a-virtual-machine-using-the-command-line-interface_assembly_shutting-down-virtual-machines">2.5.1. Shutting down a virtual machine using the command-line interface</a></li><li class=" leaf"><a href="index.html#powering-down-vms-using-the-rhel-8-web-console_assembly_shutting-down-virtual-machines">2.5.2. Powering down virtual machines in the web console</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_deleting-virtual-machines_virt-getting-started">2.6. Deleting virtual machines</a><ol class="menu"><li class=" leaf"><a href="index.html#deleting-virtual-machines-using-cli_assembly_deleting-virtual-machines">2.6.1. Deleting virtual machines using the command line interface</a></li><li class=" leaf"><a href="index.html#deleting-vms-using-the-rhel-8-web-console_assembly_deleting-virtual-machines">2.6.2. Deleting virtual machines using the web console</a></li></ol></li><li class=" leaf"><a href="index.html#related-information-virt-getting-started">2.7. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#getting-started-with-virtualization-in-rhel-8-on-ibm-power_configuring-and-managing-virtualization">3. Getting started with virtualization on IBM POWER</a><ol class="menu"><li class=" leaf"><a href="index.html#enabling-virtualization-on-ibm-power_getting-started-with-virtualization-in-rhel-8-on-ibm-power">3.1. Enabling virtualization on IBM POWER</a></li><li class=" leaf"><a href="index.html#how-virtualization-on-ibm-power-differs-from-amd64-and-intel64_getting-started-with-virtualization-in-rhel-8-on-ibm-power">3.2. How virtualization on IBM POWER differs from AMD64 and Intel 64</a></li></ol></li><li class=" leaf"><a href="index.html#getting-started-with-virtualization-in-rhel-8-on-ibm-z_configuring-and-managing-virtualization">4. Getting started with virtualization on IBM Z</a><ol class="menu"><li class=" leaf"><a href="index.html#enabling-virtualization-on-ibm-z_getting-started-with-virtualization-in-rhel-8-on-ibm-z">4.1. Enabling virtualization on IBM Z</a></li><li class=" leaf"><a href="index.html#how-virtualization-on-ibm-z-differs-from-amd64-and-intel64_getting-started-with-virtualization-in-rhel-8-on-ibm-z">4.2. How virtualization on IBM Z differs from AMD64 and Intel 64</a></li><li class=" leaf"><a href="index.html#related-information-getting-started-with-virtualization-in-rhel-8-on-ibm-z">4.3. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization">5. Using the web console for managing virtual machines</a><ol class="menu"><li class=" leaf"><a href="index.html#con_using-the-rhel-8-web-console-for-managing-vms_using-the-rhel-8-web-console-for-managing-vms">5.1. Overview of virtual machine management using the web console</a></li><li class=" leaf"><a href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms">5.2. Setting up the web console to manage virtual machines</a></li><li class=" leaf"><a href="index.html#creating-vms-and-installing-an-os-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms">5.3. Creating virtual machines and installing guest operating systems using the web console</a><ol class="menu"><li class=" leaf"><a href="index.html#creating-vms-using-the-rhel-8-web-console_creating-vms-and-installing-an-os-using-the-rhel-8-web-console">5.3.1. Creating virtual machines using the web console</a></li><li class=" leaf"><a href="index.html#installing-an-os-using-the-rhel-8-web-console_creating-vms-and-installing-an-os-using-the-rhel-8-web-console">5.3.2. Installing guest operating systems using the web console</a></li></ol></li><li class=" leaf"><a href="index.html#deleting-vms-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms">5.4. Deleting virtual machines using the web console</a></li><li class=" leaf"><a href="index.html#powering-up-and-powering-down-vms-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms">5.5. Powering up and powering down virtual machines using the web console</a><ol class="menu"><li class=" leaf"><a href="index.html#powering-up-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console">5.5.1. Powering up virtual machines using the web console</a></li><li class=" leaf"><a href="index.html#powering-down-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console">5.5.2. Powering down virtual machines in the web console</a></li><li class=" leaf"><a href="index.html#restarting-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console">5.5.3. Restarting virtual machines using the web console</a></li><li class=" leaf"><a href="index.html#sending-NMIs-to-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console">5.5.4. Sending non-maskable interrupts to VMs using the web console</a></li></ol></li><li class=" leaf"><a href="index.html#viewing-vm-information-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms">5.6. Viewing virtual machine information using the web console</a><ol class="menu"><li class=" leaf"><a href="index.html#viewing-vm-state-and-connection-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console">5.6.1. Viewing a virtualization overview in the web console</a></li><li class=" leaf"><a href="index.html#viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-8-web-console">5.6.2. Viewing storage pool information using the web console</a></li><li class=" leaf"><a href="index.html#viewing-basic-vm-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console">5.6.3. Viewing basic virtual machine information in the web console</a></li><li class=" leaf"><a href="index.html#viewing-vm-resource-usage-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console">5.6.4. Viewing virtual machine resource usage in the web console</a></li><li class=" leaf"><a href="index.html#viewing-vm-disk-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console">5.6.5. Viewing virtual machine disk information in the web console</a></li><li class=" leaf"><a href="index.html#viewing-vNIC-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console">5.6.6. Viewing and editing virtual network interface information in the web console</a></li></ol></li><li class=" leaf"><a href="index.html#managing-virtual-cpus-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms">5.7. Managing virtual CPUs using the web console</a></li><li class=" leaf"><a href="index.html#managing-virtual-machine-disks-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms">5.8. Managing virtual machine disks using the web console</a><ol class="menu"><li class=" leaf"><a href="index.html#viewing-vm-disk-information-in-the-rhel-8-web-console_managing-virtual-machine-disks-using-the-rhel-8-web-console">5.8.1. Viewing virtual machine disk information in the web console</a></li><li class=" leaf"><a href="index.html#creating-and-attaching-disks-to-virtual-machines-using-the-rhel-8-web-console_managing-virtual-machine-disks-using-the-rhel-8-web-console">5.8.2. Adding new disks to virtual machines using the web console</a></li><li class=" leaf"><a href="index.html#attaching-existing-disks-to-virtual-machines-using-the-rhel-8-web-console_managing-virtual-machine-disks-using-the-rhel-8-web-console">5.8.3. Attaching existing disks to virtual machines using the web console</a></li><li class=" leaf"><a href="index.html#detaching-disks-from-virtual-machines_managing-virtual-machine-disks-using-the-rhel-8-web-console">5.8.4. Detaching disks from virtual machines</a></li></ol></li><li class=" leaf"><a href="index.html#using-the-rhel-8-web-console-for-managing-vm-vNICs_using-the-rhel-8-web-console-for-managing-vms">5.9. Using the web console for managing virtual machine network interfaces</a><ol class="menu"><li class=" leaf"><a href="index.html#viewing-vNIC-information-in-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vm-vNICs">5.9.1. Viewing and editing virtual network interface information in the web console</a></li><li class=" leaf"><a href="index.html#connecting-vNICs-in-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vm-vNICs">5.9.2. Connecting virtual network interfaces in the web console</a></li><li class=" leaf"><a href="index.html#disconnecting-vNICs-in-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vm-vNICs">5.9.3. Disconnecting virtual network interfaces in the web console</a></li></ol></li><li class=" leaf"><a href="index.html#viewing-vm-consoles-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms">5.10. Interacting with virtual machines using the web console</a><ol class="menu"><li class=" leaf"><a href="index.html#viewing-guest-graphical-console-in-the-rhel-8-web-console_viewing-vm-consoles-using-the-rhel-8-web-console">5.10.1. Viewing the virtual machine graphical console in the web console</a></li><li class=" leaf"><a href="index.html#viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-8-web-console">5.10.2. Viewing the graphical console in a remote viewer using the web console</a></li><li class=" leaf"><a href="index.html#viewing-vm-serial-console-in-the-rhel-8-web-console_viewing-vm-consoles-using-the-rhel-8-web-console">5.10.3. Viewing the virtual machine serial console in the web console</a></li></ol></li><li class=" leaf"><a href="index.html#creating-storage-pools-using-the-web-console_using-the-rhel-8-web-console-for-managing-vms">5.11. Creating storage pools using the web console</a></li><li class=" leaf"><a href="index.html#differences-between-virtualization-features-in-virtual-machine-manager-and-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms">5.12. Differences between virtualization features in virtual machine manager and the web console</a></li></ol></li><li class=" leaf"><a href="index.html#saving-and-restoring-virtual-machines_configuring-and-managing-virtualization">6. Saving and restoring virtual machines</a><ol class="menu"><li class=" leaf"><a href="index.html#how-saving-and-restoring-vms-works_saving-and-restoring-virtual-machines">6.1. How saving and restoring virtual machines works</a></li><li class=" leaf"><a href="index.html#saving-a-virtual-machines-using-cli_saving-and-restoring-virtual-machines">6.2. Saving a virtual machine using the command line interface</a></li><li class=" leaf"><a href="index.html#starting-a-virtual-machine-using-the-command-line-interface_saving-and-restoring-virtual-machines">6.3. Starting a virtual machine using the command-line interface</a></li><li class=" leaf"><a href="index.html#powering-up-vms-using-the-rhel-8-web-console_saving-and-restoring-virtual-machines">6.4. Powering up virtual machines using the web console</a></li></ol></li><li class=" leaf"><a href="index.html#cloning-virtual-machines_configuring-and-managing-virtualization">7. Cloning virtual machines</a><ol class="menu"><li class=" leaf"><a href="index.html#how-cloning-virtual-machines-works_cloning-virtual-machines">7.1. How cloning virtual machines works</a></li><li class=" leaf"><a href="index.html#preparing-a-virtual-machine-template_cloning-virtual-machines">7.2. Creating a virtual machine template</a></li><li class=" leaf"><a href="index.html#cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines">7.3. Cloning a virtual machine using the command-line interface</a></li></ol></li><li class=" leaf"><a href="index.html#managing-virtual-devices_configuring-and-managing-virtualization">8. Managing virtual devices</a><ol class="menu"><li class=" leaf"><a href="index.html#how-virtual-devices-work_managing-virtual-devices">8.1. How virtual devices work</a></li><li class=" leaf"><a href="index.html#attaching-devices-to-virtual-machines_managing-virtual-devices">8.2. Attaching devices to virtual machines</a></li><li class=" leaf"><a href="index.html#modifying-devices-attached-to-virtual-machines_managing-virtual-devices">8.3. Modifying devices attached to virtual machines</a></li><li class=" leaf"><a href="index.html#removing-devices-from-virtual-machines_managing-virtual-devices">8.4. Removing devices from virtual machines</a></li><li class=" leaf"><a href="index.html#types-of-virtual-devices_managing-virtual-devices">8.5. Types of virtual devices</a></li><li class=" leaf"><a href="index.html#managing-sr-iov-devices_managing-virtual-devices">8.6. Managing SR-IOV devices</a><ol class="menu"><li class=" leaf"><a href="index.html#what-is-sr-iov_managing-sr-iov-devices">8.6.1. What is SR-IOV?</a></li><li class=" leaf"><a href="index.html#attaching-sr-iov-networking-devices-to-virtual-machines_managing-sr-iov-devices">8.6.2. Attaching SR-IOV networking devices to virtual machines</a></li><li class=" leaf"><a href="index.html#supported-devices-for-sr-iov-assignment-in-rhel-8_managing-sr-iov-devices">8.6.3. Supported devices for SR-IOV assignment</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#managing-storage-for-virtual-machines_configuring-and-managing-virtualization">9. Managing storage for virtual machines</a><ol class="menu"><li class=" leaf"><a href="index.html#understanding-virtual-machine-storage_managing-storage-for-virtual-machines">9.1. Understanding virtual machine storage</a><ol class="menu"><li class=" leaf"><a href="index.html#virtual-machine-storage_understanding-virtual-machine-storage">9.1.1. Virtual machine storage</a></li><li class=" leaf"><a href="index.html#understanding-storage-pools_understanding-virtual-machine-storage">9.1.2. Storage pools</a></li><li class=" leaf"><a href="index.html#storage-volumes_understanding-virtual-machine-storage">9.1.3. Storage volumes</a></li></ol></li><li class=" leaf"><a href="index.html#managing-storage-for-virtual-machines-using-the-cli_managing-storage-for-virtual-machines">9.2. Managing storage for virtual machines using the CLI</a><ol class="menu"><li class=" leaf"><a href="index.html#viewing-virtual-machine-storage-information-using-the-cli_managing-storage-for-virtual-machines-using-the-cli">9.2.1. Viewing virtual machine storage information using the CLI</a></li><li class=" leaf"><a href="index.html#creating-storage-for-virtual-machines-using-the-cli_managing-storage-for-virtual-machines-using-the-cli">9.2.2. Creating and assigning storage for virtual machines using the CLI</a></li><li class=" leaf"><a href="index.html#deleting-storage-for-virtual-machines-using-the-cli_managing-storage-for-virtual-machines-using-the-cli">9.2.3. Deleting storage for virtual machines using the CLI</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#assembly_managing-nvidia-vgpu-devices_configuring-and-managing-virtualization">10. Managing NVIDIA vGPU devices</a><ol class="menu"><li class=" leaf"><a href="index.html#proc_setting-up-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices">10.1. Setting up NVIDIA vGPU devices</a></li><li class=" leaf"><a href="index.html#proc_removing-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices">10.2. Removing NVIDIA vGPU devices</a></li><li class=" leaf"><a href="index.html#proc_obtaining-nvidia-vgpu-information-about-your-system_assembly_managing-nvidia-vgpu-devices">10.3. Obtaining NVIDIA vGPU information about your system</a></li><li class=" leaf"><a href="index.html#ref_remote-desktop-streaming-services-for-nvidia-vgpu_assembly_managing-nvidia-vgpu-devices">10.4. Remote desktop streaming services for NVIDIA vGPU</a></li><li class=" leaf"><a href="index.html#related-information-assembly_managing-nvidia-vgpu-devices">10.5. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#migrating-virtual-machines_configuring-and-managing-virtualization">11. Migrating virtual machines</a><ol class="menu"><li class=" leaf"><a href="index.html#how-migrating-virtual-machines-works_migrating-virtual-machines">11.1. How migrating virtual machines works</a></li><li class=" leaf"><a href="index.html#requirements-and-limitations-for-migrating-virtual-machines_migrating-virtual-machines">11.2. Requirements and limitations for migrating virtual machines</a></li><li class=" leaf"><a href="index.html#sharing-virtual-machine-images-with-other-hosts_migrating-virtual-machines">11.3. Sharing virtual machine images with other hosts</a></li><li class=" leaf"><a href="index.html#migrating-a-virtual-machine-using-the-cli_migrating-virtual-machines">11.4. Migrating a virtual machine using the command-line interface</a></li><li class=" leaf"><a href="index.html#supported-hosts-for-virtual-machine-migration_migrating-virtual-machines">11.5. Supported hosts for virtual machine migration</a></li><li class=" leaf"><a href="index.html#additional_resources">11.6. Additional resources</a></li></ol></li><li class=" leaf"><a href="index.html#optimizing-virtual-machine-performance-in-rhel-8_configuring-and-managing-virtualization">12. Optimizing virtual machine performance</a><ol class="menu"><li class=" leaf"><a href="index.html#what-influences-virtual-machine-performance_optimizing-virtual-machine-performance-in-rhel-8">12.1. What influences virtual machine performance</a></li><li class=" leaf"><a href="index.html#optimizing-virtual-machine-performance-using-tuned_optimizing-virtual-machine-performance-in-rhel-8">12.2. Optimizing virtual machine performance using tuned</a></li><li class=" leaf"><a href="index.html#optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel-8">12.3. Optimizing virtual machine I/O performance</a><ol class="menu"><li class=" leaf"><a href="index.html#tuning-block-i-o-in-virtual-machines_optimizing-virtual-machine-i-o-performance">12.3.1. Tuning block I/O in virtual machines</a></li><li class=" leaf"><a href="index.html#disk-i-o-throttling-in-virtual-machines_optimizing-virtual-machine-i-o-performance">12.3.2. Disk I/O throttling in virtual machines</a></li><li class=" leaf"><a href="index.html#configuring-multi-queue-virtio-scsi_optimizing-virtual-machine-i-o-performance">12.3.3. Enabling multi-queue virtio-scsi</a></li></ol></li><li class=" leaf"><a href="index.html#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel-8">12.4. Optimizing virtual machine CPU performance</a><ol class="menu"><li class=" leaf"><a href="index.html#configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance">12.4.1. Configuring NUMA in a virtual machine</a></li><li class=" leaf"><a href="index.html#sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance">12.4.2. Sample vCPU performance tuning scenario</a></li></ol></li><li class=" leaf"><a href="index.html#optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel-8">12.5. Optimizing virtual machine network performance</a></li><li class=" leaf"><a href="index.html#virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel-8">12.6. Virtual machine performance monitoring tools</a></li><li class=" leaf"><a href="index.html#related-information-optimizing-virtual-machine-performance-in-rhel-8">12.7. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#sharing-files-between-the-host-and-its-virtual-machines_configuring-and-managing-virtualization">13. Sharing files between the host and its virtual machines</a><ol class="menu"><li class=" leaf"><a href="index.html#sharing-files-between-the-host-and-linux-virtual-machines_sharing-files-between-the-host-and-its-virtual-machines">13.1. Sharing files between the host and Linux virtual machines</a></li><li class=" leaf"><a href="index.html#sharing-files-between-the-host-and-windows-virtual-machines_sharing-files-between-the-host-and-its-virtual-machines">13.2. Sharing files between the host and Windows virtual machines</a></li></ol></li><li class=" leaf"><a href="index.html#understanding-virtual-networking-overview_configuring-and-managing-virtualization">14. Understanding virtual networking</a><ol class="menu"><li class=" leaf"><a href="index.html#virtual-networking-routed-mode_understanding-virtual-networking-overview">14.1. Virtual networking in routed mode</a></li><li class=" leaf"><a href="index.html#virtual-networking-bridged-mode_understanding-virtual-networking-overview">14.2. Virtual networking in bridged mode</a></li><li class=" leaf"><a href="index.html#virtual-networking-isolated-mode_understanding-virtual-networking-overview">14.3. Virtual networking in isolated mode</a></li><li class=" leaf"><a href="index.html#virtual-networking-network-address-translation_understanding-virtual-networking-overview">14.4. Virtual networking Network Address Translation</a></li><li class=" leaf"><a href="index.html#virtual-networking-open-mode_understanding-virtual-networking-overview">14.5. Virtual networking in open mode</a></li><li class=" leaf"><a href="index.html#virtual-networking-dns-and-dhcp_understanding-virtual-networking-overview">14.6. Virtual networking DNS and DHCP</a></li><li class=" leaf"><a href="index.html#virtual-networking-default-configuration_understanding-virtual-networking-overview">14.7. Virtual networking default configuration</a></li></ol></li><li class=" leaf"><a href="index.html#securing-virtual-machines-in-rhel-8_configuring-and-managing-virtualization">15. Securing virtual machines</a><ol class="menu"><li class=" leaf"><a href="index.html#how-security-works-in-virtual-machines_securing-virtual-machines-in-rhel-8">15.1. How security works in virtual machines</a></li><li class=" leaf"><a href="index.html#best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel-8">15.2. Best practices for securing virtual machines</a></li><li class=" leaf"><a href="index.html#creating-a-secureboot-virtual-machine_securing-virtual-machines-in-rhel-8">15.3. Creating a SecureBoot virtual machine</a></li><li class=" leaf"><a href="index.html#automatic-features-for-virtual-machine-security_securing-virtual-machines-in-rhel-8">15.4. Automatic features for virtual machine security</a></li><li class=" leaf"><a href="index.html#virtualization-booleans-in-rhel-8_securing-virtual-machines-in-rhel-8">15.5. Virtualization booleans</a></li></ol></li><li class=" leaf"><a href="index.html#installing-and-managing-windows-virtual-machines-on-rhel8_configuring-and-managing-virtualization">16. Installing and managing Windows virtual machines</a><ol class="menu"><li class=" leaf"><a href="index.html#installing-windows-virtual-machines-on-rhel-8_installing-and-managing-windows-virtual-machines-on-rhel8">16.1. Installing Windows virtual machines</a></li><li class=" leaf"><a href="index.html#optimizing-windows-virtual-machines-on-rhel-8_installing-and-managing-windows-virtual-machines-on-rhel8">16.2. Optimizing Windows virtual machines</a><ol class="menu"><li class=" leaf"><a href="index.html#installing-kvm-paravirtualized-drivers-for-rhel-8-virtual-machines_optimizing-windows-virtual-machines-on-rhel-8">16.2.1. Installing KVM paravirtualized drivers for Windows virtual machines</a></li><li class=" leaf"><a href="index.html#enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel-8">16.2.2. Enabling Hyper-V enlightenments</a></li><li class=" leaf"><a href="index.html#configuring-netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel-8">16.2.3. Configuring NetKVM driver parameters</a></li><li class=" leaf"><a href="index.html#netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel-8">16.2.4. NetKVM driver parameters</a></li></ol></li><li class=" leaf"><a href="index.html#related-information-installing-and-managing-windows-virtual-machines-on-rhel8">16.3. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#feature-support-and-limitations-in-rhel8-virtualization_configuring-and-managing-virtualization">17. Feature support and limitations in RHEL 8 virtualization</a><ol class="menu"><li class=" leaf"><a href="index.html#how-rhel8-virtualization-support-works_feature-support-and-limitations-in-rhel8-virtualization">17.1. How RHEL 8 virtualization support works</a></li><li class=" leaf"><a href="index.html#recommended-features-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization">17.2. Recommended features in RHEL 8 virtualization</a></li><li class=" leaf"><a href="index.html#unsupported-features-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization">17.3. Unsupported features in RHEL 8 virtualization</a></li><li class=" leaf"><a href="index.html#resource-allocation-limits-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization">17.4. Resource allocation limits in RHEL 8 virtualization</a></li></ol></li><li class=" leaf"><a href="index.html#idm140329484785824">Legal Notice</a></li></ol>  </div>
</nav>


  <div class="doc-wrapper">
    <div class="panel-pane pane-training-banner"  >
  
      
  
  <div class="card card-light card-md push-bottom">
  <h2 class="card-heading card-heading-red card-heading-sm card-heading-flush">Red Hat Training</h2>
  <p>A Red Hat training course is available for <a href="https://www.redhat.com/en/services/training/courses-by-curriculum?intcmp=701f2000001D4OtAAK&amp;#Red-Hat-Enterprise-Linux" class="cta-link">RHEL 8</a></p>
</div>

  
  </div>
<div class="panel-pane pane-page-title"  >
  
      
  
  <h1 class="title" itemprop="name">Configuring and managing virtualization</h1>
  
  </div>
<div class="panel-pane pane-page-body"  >
  
      
  
  <div class="body"><div xml:lang="en-US" class="book" id="idm140329482400800"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Enterprise Linux</span> <span class="productnumber">8</span></div><div><h2 class="subtitle">Setting up your host, creating and administering virtual machines, and understanding virtualization features in Red Hat Enterprise Linux 8</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat</span> <span class="orgdiv">Customer Content Services</span></div></div><div><a href="index.html#idm140329484785824">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				This document describes how to manage virtualization in Red Hat Enterprise Linux 8 (RHEL 8). In addition to general information about virtualization, it describes how to manage virtualization using command-line utilities, as well as using the web console.
			</div></div></div></div><hr/></div><section class="preface" id="proc_providing-feedback-on-red-hat-documentation_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Providing feedback on Red Hat documentation</h1></div></div></div><p>
			We appreciate your input on our documentation. Please let us know how we could make it better. To do so:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					For simple comments on specific passages:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Make sure you are viewing the documentation in the <span class="emphasis"><em>Multi-page HTML</em></span> format. In addition, ensure you see the <span class="strong strong"><strong>Feedback</strong></span> button in the upper right corner of the document.
						</li><li class="listitem">
							Use your mouse cursor to highlight the part of text that you want to comment on.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Add Feedback</strong></span> pop-up that appears below the highlighted text.
						</li><li class="listitem">
							Follow the displayed instructions.
						</li></ol></div></li><li class="listitem"><p class="simpara">
					For submitting more complex feedback, create a Bugzilla ticket:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Go to the <a class="link" href="https://bugzilla.redhat.com/enter_bug.cgi?product=Red%20Hat%20Enterprise%20Linux%208">Bugzilla</a> website.
						</li><li class="listitem">
							As the Component, use <span class="strong strong"><strong>Documentation</strong></span>.
						</li><li class="listitem">
							Fill in the <span class="strong strong"><strong>Description</strong></span> field with your suggestion for improvement. Include a link to the relevant part(s) of documentation.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Submit Bug</strong></span>.
						</li></ol></div></li></ul></div></section><section class="chapter" id="virtualization-in-rhel-8-an-overview_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Virtualization in RHEL 8 - an overview</h1></div></div></div><p>
			If you are unfamiliar with the concept of virtualization or its implementation in Linux, the following sections provide a general overview of virtualization in RHEL 8: its basics, advantages, components, and other possible virtualization solutions provided by Red Hat.
		</p><section class="section" id="what-is-virtualization-in-rhel-8-virt-overview"><div class="titlepage"><div><div><h2 class="title">1.1. What is virtualization?</h2></div></div></div><p>
				RHEL 8 provides the <span class="emphasis"><em>virtualization</em></span> functionality, which enables a machine running RHEL 8 to <span class="emphasis"><em>host</em></span> multiple virtual machines (VMs), also referred to as <span class="emphasis"><em>guests</em></span>. VMs use the host’s physical hardware and computing resources to run a separate, virtualized operating system (<span class="emphasis"><em>guest OS</em></span>) as a user-space process on the host’s operating system.
			</p><p>
				In other words, virtualization makes it possible to have operating systems within operating systems.
			</p><p>
				VMs enable you to safely test software configurations and features, run legacy software, or optimize the workload efficiency of your hardware. For more information on the benefits, see <a class="xref" href="index.html#advantages-of-virtualization_virt-overview" title="1.2. Advantages of virtualization">Section 1.2, “Advantages of virtualization”</a>.
			</p><p>
				For more information on what virtualization is, see <a class="link" href="https://www.redhat.com/en/topics/virtualization/what-is-virtualization">the Red Hat Customer Portal</a>.
			</p><p>
				To try out virtualization in RHEL 8, see <a class="xref" href="index.html#getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization" title="Chapter 2. Getting started with virtualization">Chapter 2, <em>Getting started with virtualization</em></a>.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					In addition to RHEL 8 virtualization, Red Hat offers a number of specialized virtualization solutions, each with a different user focus and features. For more information, see <a class="xref" href="index.html#red-hat-virtualization-solutions_virt-overview" title="1.5. Red Hat virtualization solutions">Section 1.5, “Red Hat virtualization solutions”</a>.
				</p></div></div></section><section class="section" id="advantages-of-virtualization_virt-overview"><div class="titlepage"><div><div><h2 class="title">1.2. Advantages of virtualization</h2></div></div></div><p>
				Using virtual machines (VMs) has the following benefits in comparison to using physical machines:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Flexible and fine-grained allocation of resources</strong></span>
					</p><p class="simpara">
						A VM runs on a host machine, which is usually physical, and physical hardware can also be assigned for the guest OS to use. However, the allocation of physical resources to the VM is done on the software level, and is therefore very flexible. A VM uses a configurable fraction of the host memory, CPUs, or storage space, and that configuration can specify very fine-grained resource requests.
					</p><p class="simpara">
						For example, what the guest OS sees as its disk can be represented as a file on the host file system, and the size of that disk is less constrained than the available sizes for physical disks.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Software-controlled configurations</strong></span>
					</p><p class="simpara">
						The entire configuration of a VM is saved as data on the host, and is under software control. Therefore, a VM can easily be created, removed, cloned, migrated, operated remotely, or connected to remote storage.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Separation from the host</strong></span>
					</p><p class="simpara">
						A guest OS runs on a virtualized kernel, separate from the host OS. This means that any OS can be installed on a VM, and even if the guest OS becomes unstable or is compromised, the host is not affected in any way.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Space and cost efficiency</strong></span>
					</p><p class="simpara">
						A single physical machine can host a large number of VMs. Therefore, it avoids the need for multiple physical machines to do the same tasks, and thus lowers the space, power, and maintenance requirements associated with physical hardware.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Software compatibility</strong></span>
					</p><p class="simpara">
						Because a VM can use a different OS than its host, virtualization makes it possible to run applications that were not originally released for your host OS. For example, using a RHEL 6 guest OS, you can run applications released for RHEL 6 on a RHEL 8 host system.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Not all operating systems are supported as a guest OS in a RHEL 8 host. For details, see <a class="xref" href="index.html#recommended-features-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization" title="17.2. Recommended features in RHEL 8 virtualization">Section 17.2, “Recommended features in RHEL 8 virtualization”</a>.
						</p></div></div></li></ul></div></section><section class="section" id="rhel-8-virtual-machine-components-and-their-interaction_virt-overview"><div class="titlepage"><div><div><h2 class="title">1.3. Virtual machine components and their interaction</h2></div></div></div><p>
				Virtualization in RHEL 8 consists of the following principal software components:
			</p><div class="formalpara"><p class="title"><strong>Hypervisor</strong></p><p>
					The basis of creating virtual machines (VMs) in RHEL 8 is the <span class="emphasis"><em>hypervisor</em></span>, a software layer that controls hardware and enables running multiple operating systems on a host machine.
				</p></div><p>
				The hypervisor includes the <span class="strong strong"><strong>Kernel-based Virtual Machine (KVM)</strong></span> module and virtualization kernel drivers, such as <code class="literal">virtio</code> and <code class="literal">vfio</code>. These components ensure that the Linux kernel on the host machine provides resources for virtualization to user-space software.
			</p><p>
				At the user-space level, the <span class="strong strong"><strong>QEMU</strong></span> emulator simulates a complete virtualized hardware platform that the guest operating system can run in, and manages how resources are allocated on the host and presented to the guest.
			</p><p>
				In addition, the <code class="literal package">libvirt</code> software suite serves as a management and communication layer, making QEMU easier to interact with, enforcing security rules, and providing a number of additional tools for configuring and running VMs.
			</p><div class="formalpara"><p class="title"><strong>XML configuration</strong></p><p>
					A host-based XML configuration file (also known as a <span class="emphasis"><em>domain XML</em></span> file) describes a specific VM. It includes:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Metadata such as the name of the VM, time zone, and other information about the VM.
					</li><li class="listitem">
						A description of the devices in the VM, including virtual CPUs (vCPUS), storage devices, input/output devices, network interface cards, and other hardware, real and virtual.
					</li><li class="listitem">
						VM settings such as the maximum amount of memory it can use, restart settings, and other settings about the behavior of the VM.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Component interaction</strong></p><p>
					When a VM is started, the hypervisor uses the XML configuration to create an instance of the VM as a user-space process on the host. The hypervisor also makes the VM process accessible to the host-based interfaces, such as the <code class="literal command">virsh</code>, <code class="literal command">virt-install</code>, and <code class="literal command">guestfish</code> utilities, or the web console GUI.
				</p></div><p>
				When these virtualization tools are used, libvirt translates their input into instructions for QEMU. QEMU communicates the instructions to KVM, which ensures that the kernel appropriately assigns the resources necessary to carry out the instructions. As a result, QEMU can execute the corresponding user-space changes, such as creating or modifying a VM, or performing an action in the VM’s guest operating system.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					While QEMU is an essential component of the architecture, it is not intended to be used directly on RHEL 8 systems, due to security concerns. Therefore, using <code class="literal command">qemu-*</code> commands is not supported by Red Hat, and it is highly recommended to interact with QEMU using libvirt.
				</p></div></div><p>
				For more information on the host-based interfaces, see <a class="xref" href="index.html#con_tools-and-interfaces-for-virtualization-management-in-RHEl8_virt-overview" title="1.4. Tools and interfaces for virtualization management">Section 1.4, “Tools and interfaces for virtualization management”</a>.
			</p><div class="figure" id="idm140329465284848"><p class="title"><strong>Figure 1.1. RHEL 8 virtualization architecture</strong></p><div class="figure-contents"><div class="mediaobject"><img src="virt-architecture.png" alt="virt architecture"/></div></div></div></section><section class="section" id="con_tools-and-interfaces-for-virtualization-management-in-RHEl8_virt-overview"><div class="titlepage"><div><div><h2 class="title">1.4. Tools and interfaces for virtualization management</h2></div></div></div><p>
				You can manage virtualization in RHEL 8 using the command-line interface (CLI) or several graphical user interfaces (GUIs).
			</p><div class="formalpara"><p class="title"><strong>Command-line interface</strong></p><p>
					The CLI is the most powerful method of managing virtualization in RHEL 8. Prominent CLI commands for virtual machine (VM) management include:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>virsh</strong></span> - A versatile virtualization command-line utility and shell with a great variety of purposes, depending on the provided arguments. For example:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Starting and shutting down a VM - <code class="literal">virsh start</code> and <code class="literal">virsh shutdown</code>
							</li><li class="listitem">
								Listing available VMs - <code class="literal">virsh list</code>
							</li><li class="listitem">
								Creating a VM from a configuration file - <code class="literal">virsh create</code>
							</li><li class="listitem">
								Entering a virtualization shell - <code class="literal">virsh</code>
							</li></ul></div><p class="simpara">
						For more information, see the <code class="literal">virsh(1)</code> man page.
					</p></li><li class="listitem">
						<code class="literal">virt-install</code> - A CLI utility for creating new VMs. For more information, see the <code class="literal">virt-install(1)</code> man page.
					</li><li class="listitem">
						<code class="literal">virt-xml</code> - A utility for editing the configuration of a VM.
					</li><li class="listitem">
						<code class="literal">guestfish</code> - A utility for examining and modifying VM disk images. For more information, see the <code class="literal">guestfish(1)</code> man page.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Graphical interfaces</strong></p><p>
					You can use the following GUIs to manage virtualization in RHEL 8:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The <span class="strong strong"><strong>RHEL 8 web console</strong></span>, also known as <span class="emphasis"><em>Cockpit</em></span>, provides a remotely accessible and easy to use graphical user interface for managing VMs and virtualization hosts.
					</p><p class="simpara">
						For instructions on basic virtualization management with the web console, see <a class="xref" href="index.html#using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization" title="Chapter 5. Using the web console for managing virtual machines">Chapter 5, <em>Using the web console for managing virtual machines</em></a>.
					</p></li><li class="listitem"><p class="simpara">
						The Virtual Machine Manager (<span class="strong strong"><strong>virt-manager</strong></span>) application provides a specialized GUI for managing VMs and virtualization hosts.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Although still supported in RHEL 8, <span class="strong strong"><strong>virt-manager</strong></span> has been deprecated. The web console is intended to become its replacement in a subsequent release. It is, therefore, recommended that you get familiar with the web console for managing virtualization in a GUI.
						</p><p>
							However, in RHEL 8, some features may only be accessible from either <span class="strong strong"><strong>virt-manager</strong></span> or the command line. For details, see <a class="xref" href="index.html#differences-between-virtualization-features-in-virtual-machine-manager-and-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms" title="5.12. Differences between virtualization features in virtual machine manager and the web console">Section 5.12, “Differences between virtualization features in virtual machine manager and the web console”</a>.
						</p></div></div></li><li class="listitem"><p class="simpara">
						The <span class="strong strong"><strong>Gnome Boxes</strong></span> application is a lightweight graphical interface to view and access VMs and remote systems. Gnome Boxes is primarily designed for use on desktop systems.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							<span class="strong strong"><strong>Gnome Boxes</strong></span> is provided as a part of the GNOME desktop environment and is supported on RHEL 8, but Red Hat recommends that you use the web console for managing virtualization in a GUI.
						</p></div></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For instructions on basic virtualization management using CLI and GUI, see <a class="xref" href="index.html#getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization" title="Chapter 2. Getting started with virtualization">Chapter 2, <em>Getting started with virtualization</em></a>.
					</li></ul></div></section><section class="section" id="red-hat-virtualization-solutions_virt-overview"><div class="titlepage"><div><div><h2 class="title">1.5. Red Hat virtualization solutions</h2></div></div></div><p>
				The following Red Hat products are built on top of RHEL 8 virtualization features and expand the KVM virtualization capabilities available in RHEL 8. In addition, many <a class="link" href="index.html#feature-support-and-limitations-in-rhel8-virtualization_configuring-and-managing-virtualization" title="Chapter 17. Feature support and limitations in RHEL 8 virtualization">limitations of RHEL 8 virtualization</a> do not apply to these products:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Red Hat Virtualization (RHV)</span></dt><dd><p class="simpara">
							RHV is designed for enterprise-class scalability and performance, and enables the management of your entire virtual infrastructure, including hosts, virtual machines, networks, storage, and users from a centralized graphical interface.
						</p><p class="simpara">
							For information about the differences between virtualization in Red Hat Enterprise Linux and Red Hat Virtualization, see <a class="link" href="https://access.redhat.com/solutions/629513">the Red Hat Customer Portal</a>.
						</p><p class="simpara">
							Red Hat Virtualization can be used by enterprises running large deployments or mission-critical applications. Examples of large deployments suited to Red Hat Virtualization include databases, trading platforms, and messaging systems that must run continuously without any downtime.
						</p><p class="simpara">
							For more information about Red Hat Virtualization, see <a class="link" href="http://www.redhat.com/en/technologies/virtualization/enterprise-virtualization">the Red Hat Customer Portal</a> or the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_virtualization/">Red Hat Virtualization documentation suite</a>.
						</p><p class="simpara">
							To download a fully supported 60-day evaluation version of Red Hat Virtualization, see <a class="link" href="https://access.redhat.com/products/red-hat-virtualization/evaluation">https://access.redhat.com/products/red-hat-virtualization/evaluation</a>
						</p></dd><dt><span class="term">Red Hat OpenStack Platform (RHOSP)</span></dt><dd><p class="simpara">
							Red Hat OpenStack Platform offers an integrated foundation to create, deploy, and scale a secure and reliable public or private <a class="link" href="https://www.redhat.com/en/topics/openstack">OpenStack</a> cloud.
						</p><p class="simpara">
							For more information about Red Hat OpenStack Platform, see <a class="link" href="https://www.redhat.com/en/technologies/linux-platforms/openstack-platform">the Red Hat Customer Portal</a> or the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/">Red Hat OpenStack Platform documentation suite</a>.
						</p><p class="simpara">
							To download a fully supported 60-day evaluation version of Red Hat OpenStack Platform, see <a class="link" href="https://access.redhat.com/products/red-hat-openstack-platform/evaluation">https://access.redhat.com/products/red-hat-openstack-platform/evaluation</a>
						</p></dd></dl></div><p>
				In addition, specific Red Hat products provide <span class="emphasis"><em>operating-system-level virtualization</em></span>, also known as <span class="strong strong"><strong>containerization</strong></span>:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Containers are isolated instances of the host OS and operate on top of an existing OS kernel. For more information on containers, see the <a class="link" href="https://www.redhat.com/en/topics/containers">Red Hat Customer Portal</a>.
					</li><li class="listitem">
						Containers do not have the versatility of KVM virtualization, but are more lightweight and flexible to handle. For a more detailed comparison, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/overview_of_containers_in_red_hat_systems/introduction_to_linux_containers">Introduction to Linux Containers</a>.
					</li></ul></div></section></section><section class="chapter" id="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Getting started with virtualization</h1></div></div></div><p>
			To start using <a class="link" href="virtualization-in-rhel-8-an-overview_configuring-and-managing-virtualization.html">virtualization in RHEL 8</a>, follow the steps below. The default method for this is using the command-line interface (CLI), but for user convenience, some of the steps can be completed in the <a class="link" href="index.html#using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization" title="Chapter 5. Using the web console for managing virtual machines">the web console GUI</a>.
		</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
					Enable the virtualization module and install the virtualization packages - see <a class="xref" href="index.html#enabling-virtualization-in-rhel8_virt-getting-started" title="2.1. Enabling virtualization">Section 2.1, “Enabling virtualization”</a>.
				</li><li class="listitem"><p class="simpara">
					Create a virtual machine (VM):
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							For CLI, see <a class="xref" href="index.html#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines" title="2.2.1. Creating virtual machines using the command-line interface">Section 2.2.1, “Creating virtual machines using the command-line interface”</a>.
						</li><li class="listitem">
							For GUI, see <a class="xref" href="index.html#creating-vms-using-the-rhel-8-web-console_assembly_creating-virtual-machines" title="2.2.2. Creating virtual machines using the web console">Section 2.2.2, “Creating virtual machines using the web console”</a>.
						</li></ul></div></li><li class="listitem"><p class="simpara">
					Start the VM:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							For CLI, see <a class="xref" href="index.html#starting-a-virtual-machine-using-the-command-line-interface_assembly_starting-virtual-machines" title="2.3.1. Starting a virtual machine using the command-line interface">Section 2.3.1, “Starting a virtual machine using the command-line interface”</a>.
						</li><li class="listitem">
							For GUI, see <a class="xref" href="index.html#powering-up-vms-using-the-rhel-8-web-console_assembly_starting-virtual-machines" title="2.3.2. Powering up virtual machines using the web console">Section 2.3.2, “Powering up virtual machines using the web console”</a>.
						</li></ul></div></li><li class="listitem"><p class="simpara">
					Connect to the VM:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							For CLI, see <a class="xref" href="index.html#proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines" title="2.4.3. Connecting to a virtual machine using SSH">Section 2.4.3, “Connecting to a virtual machine using SSH”</a> or <a class="xref" href="index.html#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines" title="2.4.2. Opening a virtual machine graphical console using Virt Viewer">Section 2.4.2, “Opening a virtual machine graphical console using Virt Viewer”</a>.
						</li><li class="listitem">
							For GUI, see <a class="xref" href="index.html#viewing-guest-graphical-console-in-the-rhel-8-web-console_assembly_connecting-to-virtual-machines" title="2.4.1. Viewing the virtual machine graphical console in the web console">Section 2.4.1, “Viewing the virtual machine graphical console in the web console”</a>.
						</li></ul></div></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				The web console currently provides only a subset of VM management functions, so using the command line is recommended for advanced use of virtualization in RHEL 8.
			</p></div></div><section class="section" id="enabling-virtualization-in-rhel8_virt-getting-started"><div class="titlepage"><div><div><h2 class="title">2.1. Enabling virtualization</h2></div></div></div><p>
				To use virtualization in RHEL 8, you must enable the virtualization module, install virtualization packages, and ensure your system is configured to host virtual machines (VMs).
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Red Hat Enterprise Linux 8 must be <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/index">installed and registered</a> on your host machine.
					</li><li class="listitem"><p class="simpara">
						Your system must meet the following hardware requirements to work as a virtualization host:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The architecture of your host machine <a class="link" href="index.html#recommended-features-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization" title="17.2. Recommended features in RHEL 8 virtualization">supports KVM virtualization</a>.
							</li><li class="listitem"><p class="simpara">
								The following minimum system resources are available:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
										6 GB free disk space for the host, plus another 6 GB for each intended VM.
									</li><li class="listitem">
										2 GB of RAM for the host, plus another 2 GB for each intended VM.
									</li></ul></div></li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the packages in the RHEL 8 virtualization module:
					</p><pre class="literallayout"># <span class="strong strong"><strong>yum module install virt</strong></span></pre></li><li class="listitem"><p class="simpara">
						Install the <code class="literal">virt-install</code> and <code class="literal">virt-viewer</code> packages:
					</p><pre class="literallayout"># <span class="strong strong"><strong>yum install virt-install virt-viewer</strong></span></pre></li><li class="listitem"><p class="simpara">
						Verify that your system is prepared to be a virtualization host:
					</p><pre class="literallayout"># <span class="strong strong"><strong>virt-host-validate</strong></span>
[...]
QEMU: Checking for device assignment IOMMU support         : PASS
QEMU: Checking if IOMMU is enabled by kernel               : WARN (IOMMU appears to be disabled in kernel. Add intel_iommu=on to kernel cmdline arguments)
LXC: Checking for Linux &gt;= 2.6.26                          : PASS
[...]
LXC: Checking for cgroup 'blkio' controller mount-point    : PASS
LXC: Checking if device /sys/fs/fuse/connections exists    : FAIL (Load the 'fuse' module to enable /proc/ overrides)</pre></li><li class="listitem"><p class="simpara">
						If all <span class="strong strong"><strong>virt-host-validate</strong></span> checks return a <code class="literal">PASS</code> value, your system is prepared for <a class="link" href="index.html#assembly_creating-virtual-machines_virt-getting-started" title="2.2. Creating virtual machines">creating VMs</a>.
					</p><p class="simpara">
						If any of the checks return a <code class="literal">FAIL</code> value, follow the displayed instructions to fix the problem.
					</p><p class="simpara">
						If any of the checks return a <code class="literal">WARN</code> value, consider following the displayed instructions to improve virtualization capabilities.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional information</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Note that if virtualization is not supported by your host CPU, <span class="strong strong"><strong>virt-host-validate</strong></span> generates the following output:
					</p><pre class="literallayout">QEMU: Checking for hardware virtualization: FAIL (Only emulated CPUs are available, performance will be significantly limited)</pre><p class="simpara">
						However, attempting to create VMs on such a host system will fail, rather than have performance problems.
					</p></li></ul></div></section><section class="section" id="assembly_creating-virtual-machines_virt-getting-started"><div class="titlepage"><div><div><h2 class="title">2.2. Creating virtual machines</h2></div></div></div><p>
				To create a virtual machine (VM) in RHEL 8, use the <a class="link" href="index.html#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines" title="2.2.1. Creating virtual machines using the command-line interface">command line interface</a> or the <a class="link" href="index.html#creating-vms-using-the-rhel-8-web-console_assembly_creating-virtual-machines" title="2.2.2. Creating virtual machines using the web console">RHEL 8 web console</a>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Virtualization must be <a class="link" href="index.html#enabling-virtualization-in-rhel8_virt-getting-started" title="2.1. Enabling virtualization">installed and enabled</a> on your system.
					</li><li class="listitem"><p class="simpara">
						Make sure you have sufficient amount of system resources to allocate to your VMs, such as disk space, RAM, or CPUs. The recommended values may vary significantly depending on the intended tasks and workload of the VMs.
					</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							Installing from a host CD-ROM or DVD-ROM device is not possible in RHEL 8. If you select a CD-ROM or DVD-ROM as the installation source when using any VM installation method available in RHEL 8, the installation will fail. For more information, see the <a class="link" href="https://access.redhat.com/solutions/1185913">Red Hat Knowledge Base</a>.
						</p></div></div></li></ul></div><section class="section" id="creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines"><div class="titlepage"><div><div><h3 class="title">2.2.1. Creating virtual machines using the command-line interface</h3></div></div></div><p>
					To create a virtual machine (VM) on your RHEL 8 host using the <code class="literal">virt-install</code> utility, follow the instructions below.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							An operating system (OS) installation source, which can be one of the following, and be available locally or on a network:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									An ISO image of an installation medium
								</li><li class="listitem">
									A disk image of an existing VM installation
								</li></ul></div></li><li class="listitem">
							Optionally, a Kickstart file can also be provided for faster and easier configuration of the installation.
						</li><li class="listitem">
							Virtualization must be <a class="link" href="index.html#enabling-virtualization-in-rhel8_virt-getting-started" title="2.1. Enabling virtualization">enabled</a> on your host system.
						</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						To create a VM and start its OS installation, use the <code class="literal">virt-install</code> command, along with the following mandatory arguments:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The name of the new machine
						</li><li class="listitem">
							The amount of allocated memory
						</li><li class="listitem">
							The number of allocated virtual CPUs (vCPUs)
						</li><li class="listitem">
							The type and size of the allocated storage
						</li><li class="listitem">
							The type and location of the OS installation source
						</li></ul></div><p>
					Based on the chosen installation method, the necessary options and values can vary. See below for examples:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The following creates a VM named <span class="strong strong"><strong>demo-guest1</strong></span> that installs the Windows 10 OS from an ISO image locally stored in the <span class="strong strong"><strong>/home/username/Downloads/Win10install.iso</strong></span> file. This VM is also allocated with 2048 MiB of RAM and 2 vCPUs, and an 80 GiB qcow2 virtual disk is automatically configured for the VM.
						</p><pre class="literallayout"># <span class="strong strong"><strong>virt-install --name demo-guest1 --memory 2048 --vcpus 2 --disk size=80 --os-variant win10 --cdrom /home/username/Downloads/Win10install.iso</strong></span></pre></li><li class="listitem"><p class="simpara">
							The following creates a VM named <span class="strong strong"><strong>demo-guest2</strong></span> that uses the <span class="strong strong"><strong>/home/username/Downloads/rhel8.iso</strong></span> image to run a RHEL 8 OS from a live CD. No disk space is assigned to this VM, so changes made during the session will not be preserved. In addition, the VM is allocated with 4096 MiB of RAM and 4 vCPUs.
						</p><pre class="literallayout"># <span class="strong strong"><strong>virt-install --name demo-guest2 --memory 4096 --vcpus 4 --disk none --livecd --os-variant rhel8.0 --cdrom /home/username/Downloads/rhel8.iso</strong></span></pre></li><li class="listitem"><p class="simpara">
							The following creates a RHEL 8 VM named <span class="strong strong"><strong>demo-guest3</strong></span> that connects to an existing disk image, <span class="strong strong"><strong>/home/username/backup/disk.qcow2</strong></span>. This is similar to physically moving a hard drive between machines, so the OS and data available to demo-guest3 are determined by how the image was handled previously. In addition, this VM is allocated with 2048 MiB of RAM and 2 vCPUs.
						</p><pre class="literallayout"># <span class="strong strong"><strong>virt-install --name demo-guest3 --memory 2048 --vcpus 2 --os-variant rhel8.0 --import --disk /home/username/backup/disk.qcow2</strong></span></pre><p class="simpara">
							Note that the <code class="literal">--os-variant</code> option is highly recommended when importing a disk image. If it is not provided, the performance of the created VM will be negatively affected.
						</p></li><li class="listitem"><p class="simpara">
							The following creates a VM named <span class="strong strong"><strong>demo-guest4</strong></span> that installs from the <code class="literal"><a class="link" href="http://example.com/OS-install">http://example.com/OS-install</a></code> URL. For the installation to start successfully, the URL must contain a working OS installation tree. In addition, the OS is automatically configured using the <span class="strong strong"><strong>/home/username/ks.cfg</strong></span> kickstart file. This VM is also allocated with 2048 MiB of RAM, 2 vCPUs, and a 160 GiB qcow2 virtual disk.
						</p><pre class="literallayout"># <span class="strong strong"><strong>virt-install --name demo-guest4 --memory 2048 --vcpus 2 --disk size=160 --os-variant rhel8.0 --location http://example.com/OS-install --initrd-inject /home/username/ks.cfg --extra-args="ks=file:/ks.cfg console=tty0 console=ttyS0,115200n8"</strong></span></pre></li><li class="listitem"><p class="simpara">
							The following creates a VM named <span class="strong strong"><strong>demo-guest5</strong></span> that installs from a <code class="literal">RHEL8.iso</code> image file in text-only mode, without graphics. It connects the guest console to the serial console. The VM has 16384 MiB of memory, 16 vCPUs, and 280 GiB disk. This kind of installation is useful when connecting to a host over a slow network link.
						</p><pre class="literallayout"># <span class="strong strong"><strong>virt-install --name demo-guest5 --memory 16384 --vcpus 16 --disk size=280 --os-variant rhel8.0 --location RHEL8.iso --graphics none --extra-args='console=ttyS0'</strong></span></pre></li><li class="listitem"><p class="simpara">
							The following creates a VM named <span class="strong strong"><strong>demo-guest6</strong></span>, which has the same configuration as demo-guest5, but resides on the 10.0.0.1 remote host.
						</p><pre class="literallayout"># <span class="strong strong"><strong>virt-install --connect qemu+ssh://root@10.0.0.1/system --name demo-guest6 --memory 16384 --vcpus 16 --disk size=280 --os-variant rhel8.0 --location RHEL8.iso --graphics none --extra-args='console=ttyS0'</strong></span></pre></li></ul></div><p>
					If the VM is created successfully, a <a class="link" href="index.html#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines" title="2.4.2. Opening a virtual machine graphical console using Virt Viewer">virt-viewer</a> window opens with a graphical console of the VM and starts the guest OS installation.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A number of other options can be specified for <span class="strong strong"><strong>virt-install</strong></span> to further configure the VM and its OS installation. For details, see the <span class="strong strong"><strong>virt-install</strong></span> man page.
						</li><li class="listitem">
							If you already have a functional VM, you can clone it to quickly create a new VM with the same configuration and data. For details, see <a class="xref" href="index.html#cloning-virtual-machines_configuring-and-managing-virtualization" title="Chapter 7. Cloning virtual machines">Chapter 7, <em>Cloning virtual machines</em></a>.
						</li></ul></div></section><section class="section" id="creating-vms-using-the-rhel-8-web-console_assembly_creating-virtual-machines"><div class="titlepage"><div><div><h3 class="title">2.2.2. Creating virtual machines using the web console</h3></div></div></div><p>
					To create a virtual machine (VM) on the host machine to which the web console is connected, follow the instructions below.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li><li class="listitem">
							Make sure you have sufficient amount of system resources to allocate to your VMs, such as disk space, RAM, or CPUs. The recommended values may vary significantly depending on the intended tasks and workload of the VMs.
						</li><li class="listitem"><p class="simpara">
							A locally available operating system (OS) installation source, which can be one of the following:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									An ISO image of an installation medium
								</li><li class="listitem">
									A disk image of an existing VM installation
								</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface of the web console, click <span class="strong strong"><strong><span class="guibutton">Create VM</span></strong></span>.
						</p><p class="simpara">
							The Create New Virtual Machine dialog appears.
						</p><div class="informalfigure"><div class="mediaobject"><img src="cockpit_create_new_vm.png" alt="cockpit create new vm"/></div></div></li><li class="listitem"><p class="simpara">
							Enter the basic configuration of the VM you want to create.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Connection</strong></span> - The connection to the host to be used by the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Name</strong></span> - The name of the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Installation Source Type</strong></span> - The installation can use a local installation medium, a URL, a PXE network boot, or a disk image of an existing VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Installation Source</strong></span> - The path or URL that points to the installation source.
								</li><li class="listitem">
									<span class="strong strong"><strong>OS Vendor</strong></span> - The vendor of the VM’s operating system.
								</li><li class="listitem">
									<span class="strong strong"><strong>Operating System</strong></span> - The VM’s operating system. Note that Red Hat provides support only for <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/feature-support-and-limitations-in-rhel8-virtualization_configuring-and-managing-virtualization#recommended-features-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization">a limited set of guest operating systems</a>.
								</li><li class="listitem">
									<span class="strong strong"><strong>Memory</strong></span> - The amount of memory with which to configure the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Storage Size</strong></span> - The amount of storage space with which to configure the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Immediately Start VM</strong></span> - Whether or not the VM will start immediately after it is created.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Create</span>.
						</p><p class="simpara">
							The VM is created. If the <span class="strong strong"><strong>Immediately Start VM</strong></span> checkbox is selected, the VM will immediately start and begin installing the guest operating system.
						</p></li></ol></div><p>
					If you did not choose <code class="literal">Existing Disk Image</code> as the installation source type, you must install the operating system the first time the VM is run.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For information on installing an operating system on a VM, see <a class="xref" href="index.html#installing-an-os-using-the-rhel-8-web-console_creating-vms-and-installing-an-os-using-the-rhel-8-web-console" title="5.3.2. Installing guest operating systems using the web console">Section 5.3.2, “Installing guest operating systems using the web console”</a>.
						</li></ul></div></section></section><section class="section" id="assembly_starting-virtual-machines_virt-getting-started"><div class="titlepage"><div><div><h2 class="title">2.3. Starting virtual machines</h2></div></div></div><p>
				To start a virtual machine (VM) in RHEL 8, you can use <a class="link" href="index.html#starting-a-virtual-machine-using-the-command-line-interface_assembly_starting-virtual-machines" title="2.3.1. Starting a virtual machine using the command-line interface">the command line interface</a> or <a class="link" href="index.html#powering-up-vms-using-the-rhel-8-web-console_assembly_starting-virtual-machines" title="2.3.2. Powering up virtual machines using the web console">the web console GUI</a>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Before a VM can be started, it must be created and, ideally, also installed with an OS. For instruction to do so, see <a class="xref" href="index.html#assembly_creating-virtual-machines_virt-getting-started" title="2.2. Creating virtual machines">Section 2.2, “Creating virtual machines”</a>.
					</li></ul></div><section class="section" id="starting-a-virtual-machine-using-the-command-line-interface_assembly_starting-virtual-machines"><div class="titlepage"><div><div><h3 class="title">2.3.1. Starting a virtual machine using the command-line interface</h3></div></div></div><p>
					You can use the command line interface to start a shutdown virtual machine (VM) or restore a saved VM. Follow the procedure below.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							An inactive VM that is already defined.
						</li><li class="listitem">
							The name of the VM.
						</li><li class="listitem"><p class="simpara">
							For remote VMs,
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									The IP address of the host where the VM is located.
								</li><li class="listitem">
									Root access privileges to the host.
								</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							For a local VM, use the <code class="literal">virsh start</code> utility.
						</p><p class="simpara">
							For example, the following command starts the <span class="emphasis"><em>demo-guest1</em></span> VM.
						</p><pre class="literallayout"><span class="strong strong"><strong># virsh start demo-guest1</strong></span>
Domain demo-guest1 started</pre></li><li class="listitem"><p class="simpara">
							For a VM located on a remote host, use the <code class="literal">virsh start</code> utility along with the QEMU+SSH connection to the host.
						</p><p class="simpara">
							For example, the following command starts the <span class="emphasis"><em>demo-guest1</em></span> VM on the 192.168.123.123 host.
						</p><pre class="literallayout"><span class="strong strong"><strong># virsh -c qemu+ssh://root@192.168.123.123/system start demo-guest1</strong></span>

root@192.168.123.123's password:
Last login: Mon Feb 18 07:28:55 2019

Domain demo-guest1 started</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional Resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more <code class="literal">virsh start</code> arguments, see the <code class="literal">virsh</code> man page.
						</li><li class="listitem">
							For simplifying VM management on remote hosts, see <a class="link" href="index.html#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines" title="2.4.5. Setting up easy access to remote virtualization hosts">modifying your libvirt and SSH configuration</a>.
						</li><li class="listitem">
							You can use the <code class="literal">virsh autostart</code> utility to configure a VM to start automatically when the host boots up. For more information about autostart, see the <code class="literal">virsh autostart</code> help page.
						</li></ul></div></section><section class="section" id="powering-up-vms-using-the-rhel-8-web-console_assembly_starting-virtual-machines"><div class="titlepage"><div><div><h3 class="title">2.3.2. Powering up virtual machines using the web console</h3></div></div></div><p>
					If a virtual machine (VM) is in the <span class="strong strong"><strong>shut off</strong></span> state, you can start it using the RHEL 8 web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							An inactive VM that is already defined.
						</li><li class="listitem">
							The name of the VM.
						</li><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM you want to start.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Run</span>.
						</p><p class="simpara">
							The VM starts, and you can <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#assembly_connecting-to-virtual-machines_virt-getting-started">connect to its console or graphical output</a>.
						</p></li><li class="listitem">
							<span class="strong strong"><strong>Optional:</strong></span> To set up the VM to start automatically when the host starts, click the <code class="literal">Autostart</code> checkbox.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For information on shutting down a VM, see <a class="xref" href="index.html#powering-down-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.2. Powering down virtual machines in the web console">Section 5.5.2, “Powering down virtual machines in the web console”</a>.
						</li><li class="listitem">
							For information on restarting a VM, see <a class="xref" href="index.html#restarting-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.3. Restarting virtual machines using the web console">Section 5.5.3, “Restarting virtual machines using the web console”</a>.
						</li><li class="listitem">
							For information on sending a non-maskable interrupt to a VM, see <a class="xref" href="index.html#sending-NMIs-to-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.4. Sending non-maskable interrupts to VMs using the web console">Section 5.5.4, “Sending non-maskable interrupts to VMs using the web console”</a>.
						</li></ul></div></section></section><section class="section" id="assembly_connecting-to-virtual-machines_virt-getting-started"><div class="titlepage"><div><div><h2 class="title">2.4. Connecting to virtual machines</h2></div></div></div><p>
				To interact with a virtual machine (VM) in RHEL 8, you need to connect to it by doing one of the following:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						When using the web console interface, use the Virtual Machines pane in the web console interface. For more information, see <a class="xref" href="index.html#viewing-guest-graphical-console-in-the-rhel-8-web-console_assembly_connecting-to-virtual-machines" title="2.4.1. Viewing the virtual machine graphical console in the web console">Section 2.4.1, “Viewing the virtual machine graphical console in the web console”</a>
					</li><li class="listitem">
						If you need to interact with a VM graphical display without using the web console, use the Virt Viewer application. For details, see <a class="xref" href="index.html#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines" title="2.4.2. Opening a virtual machine graphical console using Virt Viewer">Section 2.4.2, “Opening a virtual machine graphical console using Virt Viewer”</a>
					</li><li class="listitem">
						When a graphical display is not possible or not necessary, use <a class="link" href="index.html#proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines" title="2.4.3. Connecting to a virtual machine using SSH">an SSH terminal connection</a>.
					</li><li class="listitem">
						When the virtual machine is not reachable from your system by using a network, use <a class="link" href="index.html#proc_opening-a-virtual-machine-serial-console_assembly_connecting-to-virtual-machines" title="2.4.4. Opening a virtual machine serial console">the virsh console</a>.
					</li></ul></div><p>
				If the VMs to which you are connecting are on a remote host rather than a local one, you can optionally configure your system for <a class="link" href="index.html#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines" title="2.4.5. Setting up easy access to remote virtualization hosts">more convenient access to remote hosts</a>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The VMs you want to interact with are <a class="link" href="index.html#assembly_creating-virtual-machines_virt-getting-started" title="2.2. Creating virtual machines">installed</a> and <a class="link" href="index.html#assembly_starting-virtual-machines_virt-getting-started" title="2.3. Starting virtual machines">started</a>.
					</li></ul></div><section class="section" id="viewing-guest-graphical-console-in-the-rhel-8-web-console_assembly_connecting-to-virtual-machines"><div class="titlepage"><div><div><h3 class="title">2.4.1. Viewing the virtual machine graphical console in the web console</h3></div></div></div><p>
					Using the virtual machine (VM) console interface, you can view the graphical output of a selected VM in the RHEL 8 web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li><li class="listitem">
							Ensure that both the host and the VM support a graphical interface.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM whose graphical console you want to view.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Consoles</span>.
						</p><p class="simpara">
							The graphical console appears in the web interface.
						</p></li></ol></div><div class="informalfigure"><div class="mediaobject"><img src="cockpit_graphical_console_in_cockpit.png" alt="cockpit graphical console in cockpit"/></div></div><p>
					You can interact with the VM console using the mouse and keyboard in the same manner you interact with a real machine. The display in the VM console reflects the activities being performed on the VM.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The host on which the web console is running may intercept specific key combinations, such as <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span>, preventing them from being sent to the VM.
					</p><p>
						To send such key combinations, click the <span class="guibutton">Send key</span> menu and select the key sequence to send.
					</p><p>
						For example, to send the <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span> combination to the VM, click the <span class="guibutton">Send key</span> menu and select the <span class="guibutton">Ctrl+Alt+F1</span> menu entry.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions on viewing the graphical console in a remote viewer, see <a class="xref" href="index.html#viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-8-web-console" title="5.10.2. Viewing the graphical console in a remote viewer using the web console">Section 5.10.2, “Viewing the graphical console in a remote viewer using the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing the serial console in the web console, see <a class="xref" href="index.html#viewing-vm-serial-console-in-the-rhel-8-web-console_viewing-vm-consoles-using-the-rhel-8-web-console" title="5.10.3. Viewing the virtual machine serial console in the web console">Section 5.10.3, “Viewing the virtual machine serial console in the web console”</a>.
						</li></ul></div></section><section class="section" id="proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines"><div class="titlepage"><div><div><h3 class="title">2.4.2. Opening a virtual machine graphical console using Virt Viewer</h3></div></div></div><p>
					To connect to a graphical console of a KVM virtual machine (VM) and open it in the <code class="literal">Virt Viewer</code> desktop application, follow the procedure below.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Your system, as well as the VM you are connecting to, must support graphical displays.
						</li><li class="listitem">
							If the target VM is located on a remote host, connection and root access privileges to the host are needed.
						</li><li class="listitem">
							<span class="strong strong"><strong>Optional:</strong></span> If the target VM is located on a remote host, set up your libvirt and SSH for <a class="link" href="index.html#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines" title="2.4.5. Setting up easy access to remote virtualization hosts">more convenient access to remote hosts</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To connect to a local VM, use the following command and replace <span class="emphasis"><em>guest-name</em></span> with the name of the VM you want to connect to:
						</p><pre class="literallayout"><span class="strong strong"><strong># virt-viewer guest-name</strong></span></pre></li><li class="listitem"><p class="simpara">
							To connect to a remote VM, use the <code class="literal">virt-viewer</code> command with the SSH protocol. For example, the following command connects as root to a VM called <span class="emphasis"><em>guest-name</em></span>, located on remote system 10.0.0.1. The connection also requires root authentication for 10.0.0.1.
						</p><pre class="literallayout"><span class="strong strong"><strong># virt-viewer --direct --connect qemu+ssh://root@10.0.0.1/system guest-name</strong></span>
root@10.0.0.1's password:</pre></li></ul></div><p>
					If the connection works correctly, the VM display is shown in the <code class="literal">Virt Viewer</code> window.
				</p><div class="informalfigure"><div class="mediaobject"><img src="virt-viewer-GUI.png" alt="Virt Viewer displaying a RHEL 7 guest OS"/></div></div><p>
					You can interact with the VM console using the mouse and keyboard in the same manner you interact with a real machine. The display in the VM console reflects the activities being performed on the VM.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information on using Virt Viewer, see the <code class="literal">virt-viewer</code> man page.
						</li><li class="listitem">
							Connecting to VMs on a remote host can be simplified by <a class="link" href="index.html#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines" title="2.4.5. Setting up easy access to remote virtualization hosts">modifying your libvirt and SSH configuration</a>.
						</li><li class="listitem">
							For management of VMs in an interactive GUI in RHEL 8, you can use the web console interface. For more information, see <a class="xref" href="index.html#viewing-vm-consoles-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms" title="5.10. Interacting with virtual machines using the web console">Section 5.10, “Interacting with virtual machines using the web console”</a>.
						</li></ul></div></section><section class="section" id="proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines"><div class="titlepage"><div><div><h3 class="title">2.4.3. Connecting to a virtual machine using SSH</h3></div></div></div><p>
					To interact with the terminal of a virtual machine (VM) using the SSH connection protocol, follow the procedure below:
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Network connection and root access privileges to the target VM.
						</li><li class="listitem"><p class="simpara">
							The <code class="literal">libvirt-nss</code> component must be installed and enabled on the VM’s host. If it is not, do the following:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Install the <code class="literal">libvirt-nss</code> package:
								</p><pre class="literallayout"># <span class="strong strong"><strong>yum install libvirt-nss</strong></span></pre></li><li class="listitem"><p class="simpara">
									Edit the <code class="literal">/etc/nsswitch.conf</code> file and add <code class="literal">libvirt_guest</code> to the <code class="literal">hosts</code> line:
								</p><pre class="literallayout">[...]
passwd:      compat
shadow:      compat
group:       compat
hosts:       files libvirt_guest dns
[...]</pre></li></ol></div></li><li class="listitem">
							If the target VM is located on a remote host, connection and root access privileges to the host are also needed.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Optional</strong></span>: When connecting to a remote VM, SSH into its physical host first. The following example demonstrates connecting to a host machine 10.0.0.1 using its root credentials:
						</p><pre class="literallayout"><span class="strong strong"><strong># ssh root@10.0.0.1</strong></span>
root@10.0.0.1's password:
Last login: Mon Sep 24 12:05:36 2018
root~#</pre></li><li class="listitem"><p class="simpara">
							Use the VM’s name and user access credentials to connect to it. For example, the following connects to to the "testguest1" VM using its root credentials:
						</p><pre class="literallayout"><span class="strong strong"><strong># ssh root@testguest1</strong></span>
root@testguest1's password:
Last login: Wed Sep 12 12:05:36 2018
root~]#</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If you do not know the VM’s name, you can list all VMs available on the host using the <code class="literal">virsh list --all</code> command:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh list --all</strong></span>
Id    Name                           State
----------------------------------------------------
2     testguest1                    running
-     testguest2                    shut off</pre></li></ul></div></section><section class="section" id="proc_opening-a-virtual-machine-serial-console_assembly_connecting-to-virtual-machines"><div class="titlepage"><div><div><h3 class="title">2.4.4. Opening a virtual machine serial console</h3></div></div></div><p>
					Using the <code class="literal">virsh console</code> command, it is possible to connect to the serial console of a virtual machine (VM).
				</p><p>
					This is useful when the VM:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Does not provide VNC or SPICE protocols, and thus does not offer video display for GUI tools.
						</li><li class="listitem">
							Does not have a network connection, and thus cannot be interacted with <a class="link" href="index.html#proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines" title="2.4.3. Connecting to a virtual machine using SSH">using SSH</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The VM must have the serial console configured in its kernel command line. To verify this, the <code class="literal">cat /proc/cmdline</code> command output on the VM should include <span class="emphasis"><em>console=ttyS0</em></span>. For example:
						</p><pre class="literallayout"><span class="strong strong"><strong># cat /proc/cmdline</strong></span>
BOOT_IMAGE=/vmlinuz-3.10.0-948.el7.x86_64 root=/dev/mapper/rhel-root ro console=tty0 console=ttyS0,9600n8 rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb</pre><p class="simpara">
							If the serial console is not set up properly on a VM, using <span class="strong strong"><strong>virsh console</strong></span> to connect to the VM connects you to an unresponsive guest console. However, you can still exit the unresponsive console by using the <span class="keycap"><strong>Ctrl+</strong></span>] shortcut.
						</p></li><li class="listitem"><p class="simpara">
							To set up serial console on the VM, do the following:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									On the VM, edit the <code class="literal">/etc/default/grub</code> file and add <span class="strong strong"><strong>console=ttyS0</strong></span> to the line that starts with <span class="strong strong"><strong>GRUB_CMDLINE_LINUX</strong></span>.
								</li><li class="listitem"><p class="simpara">
									Clear the kernel options that may prevent your changes from taking effect
								</p><pre class="literallayout"># <span class="strong strong"><strong>grub2-editenv - unset kernelopts</strong></span></pre></li><li class="listitem"><p class="simpara">
									Reload the Grub configuration:
								</p><pre class="literallayout"><span class="strong strong"><strong># grub2-mkconfig -o /boot/grub2/grub.cfg</strong></span>
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-3.10.0-948.el7.x86_64
Found initrd image: /boot/initramfs-3.10.0-948.el7.x86_64.img
[...]
done</pre></li><li class="listitem">
									Reboot the VM.
								</li></ol></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							On your host system, use the <code class="literal">virsh console</code> command. The following example connects to the <span class="emphasis"><em>guest1</em></span> VM, if the libvirt driver supports safe console handling:
						</p><pre class="literallayout"><span class="strong strong"><strong># virsh console guest1 --safe</strong></span>
Connected to domain guest1
Escape character is ^]

<span class="emphasis"><em>Subscription-name</em></span>
Kernel 3.10.0-948.el7.x86_64 on an x86_64

localhost login:</pre></li><li class="listitem">
							You can interact with the virsh console in the same way as with a standard command-line interface.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about the VM serial console, see the virsh man page.
						</li></ul></div></section><section class="section" id="setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines"><div class="titlepage"><div><div><h3 class="title">2.4.5. Setting up easy access to remote virtualization hosts</h3></div></div></div><p>
					When managing VMs on a remote host system using libvirt utilities, it is recommended to use the <code class="literal">-c qemu+ssh://root@hostname/system</code> syntax. For example, to use the <code class="literal">virsh list</code> command as root on the 10.0.0.1 host:
				</p><pre class="literallayout"># <span class="strong strong"><strong>virsh -c qemu+ssh://root@10.0.0.1/system list</strong></span>

root@10.0.0.1's password:
Last login: Mon Feb 18 07:28:55 2019

Id   Name              State
---------------------------------
1    remote-guest      running</pre><p>
					However, for convenience, you can remove the need to specify the connection details in full by modifying your SSH and libvirt configuration. For example, you will be able to do:
				</p><pre class="literallayout"># <span class="strong strong"><strong>virsh -c remote-host list</strong></span>

root@10.0.0.1's password:
Last login: Mon Feb 18 07:28:55 2019

Id   Name              State
---------------------------------
1    remote-guest      running</pre><p>
					To enable this improvement, follow the instructions below.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Edit or create the <code class="literal">~/.ssh/config</code> file and add the following to it, where <span class="emphasis"><em>host-alias</em></span> is a shortened name associated with a specific remote host, and <span class="emphasis"><em>hosturl</em></span> is the URL address of the host.
						</p><pre class="literallayout">Host <span class="emphasis"><em>host-alias</em></span>
        User                    root
        Hostname                <span class="emphasis"><em>hosturl</em></span></pre><p class="simpara">
							For example, the following sets up the <span class="emphasis"><em>tyrannosaurus</em></span> alias for root@10.0.0.1:
						</p><pre class="literallayout">Host tyrannosaurus
        User                    root
        Hostname                10.0.0.1</pre></li><li class="listitem"><p class="simpara">
							Edit or create the <code class="literal">/etc/libvirt/libvirt.conf</code> file, and add the following, where <span class="emphasis"><em>qemu-host-alias</em></span> is a host alias that QEMU and libvirt utilities will associate with the intended host:
						</p><pre class="literallayout">uri_aliases = [
  "<span class="emphasis"><em>qemu-host-alias</em></span>=qemu+ssh://<span class="emphasis"><em>host-alias</em></span>/system",
]</pre><p class="simpara">
							For example, the following uses the <span class="emphasis"><em>tyrannosaurus</em></span> alias configured in the previous step to set up the <span class="emphasis"><em>t-rex</em></span> alias, which stands for <code class="literal">qemu+ssh://10.0.0.1/system</code>:
						</p><pre class="literallayout">uri_aliases = [
  "t-rex=qemu+ssh://tyrannosaurus/system",
]</pre></li><li class="listitem"><p class="simpara">
							As a result, you can manage remote VMs by using libvirt-based utilities on the local system with an added <code class="literal">-c <span class="emphasis"><em>qemu-host-alias</em></span></code> parameter. This automatically performs the commands over SSH on the remote host.
						</p><p class="simpara">
							For example, the following lists VMs on the 10.0.0.1 remote host, the connection to which was set up as <span class="emphasis"><em>t-rex</em></span> in the previous steps:
						</p><pre class="literallayout">$ <span class="strong strong"><strong>virsh -c t-rex list</strong></span>

root@10.0.0.1's password:
Last login: Mon Feb 18 07:28:55 2019

Id   Name              State
---------------------------------
1    velociraptor      running</pre></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Optional:</strong></span> If you want to use libvirt utilities exclusively on a single remote host, you can also set a specific connection as the default target for libvirt-based utilities. To do so, edit the <code class="literal">/etc/libvirt/libvirt.conf</code> file and set the value of the <code class="literal">uri_default</code> parameter to <span class="emphasis"><em>qemu-host-alias</em></span>. For example, the following uses the <span class="emphasis"><em>t-rex</em></span> host alias set up in the previous steps as a default libvirt target.
						</p><pre class="literallayout"># These can be used in cases when no URI is supplied by the application
# (@uri_default also prevents probing of the hypervisor driver).
#
uri_default = "t-rex"</pre><p class="simpara">
							As a result, all libvirt-based commands will automatically be performed on the specified remote host.
						</p><pre class="literallayout">$ <span class="strong strong"><strong>virsh list</strong></span>
root@10.0.0.1's password:
Last login: Mon Feb 18 07:28:55 2019

Id   Name              State
---------------------------------
1    velociraptor      running</pre><p class="simpara">
							However, this is not recommended if you also want to manage VMs on your local host or on different remote hosts.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							When connecting to a remote host, you can avoid having to provide the root password to the remote system. To do so, use one or more of the following methods:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/getting-started-with-system-administration#sec-SSH">Set up key-based SSH access to the remote host</a>.
								</li><li class="listitem">
									Use SSH connection multiplexing to connect to the remote system.
								</li><li class="listitem">
									Set up a kerberos authentication ticket on the remote system.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Utilities that can use the <code class="literal">-c</code> (or <code class="literal">--connect</code>) option and the remote host access configuration described above include:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<a class="link" href="index.html#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines" title="2.2.1. Creating virtual machines using the command-line interface">virt-install</a>
								</li><li class="listitem">
									<a class="link" href="index.html#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines" title="2.4.2. Opening a virtual machine graphical console using Virt Viewer">virt-viewer</a>
								</li><li class="listitem">
									virsh
								</li><li class="listitem">
									virt-manager
								</li></ul></div></li></ul></div></section></section><section class="section" id="assembly_shutting-down-virtual-machines_virt-getting-started"><div class="titlepage"><div><div><h2 class="title">2.5. Shutting down virtual machines</h2></div></div></div><p>
				To shut down a running virtual machine in Red Hat Enterprise Linux 8, use <a class="link" href="index.html#shutting-down-a-virtual-machine-using-the-command-line-interface_assembly_shutting-down-virtual-machines" title="2.5.1. Shutting down a virtual machine using the command-line interface">the command line interface</a> or <a class="link" href="index.html#powering-down-vms-using-the-rhel-8-web-console_assembly_shutting-down-virtual-machines" title="2.5.2. Powering down virtual machines in the web console">the web console GUI</a>.
			</p><section class="section" id="shutting-down-a-virtual-machine-using-the-command-line-interface_assembly_shutting-down-virtual-machines"><div class="titlepage"><div><div><h3 class="title">2.5.1. Shutting down a virtual machine using the command-line interface</h3></div></div></div><p>
					To shut down a responsive virtual machine (VM), do one of the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Use a shutdown command appropriate to the guest OS while <a class="link" href="index.html#assembly_connecting-to-virtual-machines_virt-getting-started" title="2.4. Connecting to virtual machines">connected to the guest</a>.
						</li><li class="listitem"><p class="simpara">
							Use the <code class="literal">virsh shutdown</code> command on the host:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									If the VM is on a local host:
								</p><pre class="literallayout"><span class="strong strong"><strong># virsh shutdown demo-guest1</strong></span>
Domain demo-guest1 is being shutdown</pre></li><li class="listitem"><p class="simpara">
									If the VM is on a remote host, in this example 10.0.0.1:
								</p><pre class="literallayout"><span class="strong strong"><strong># virsh -c qemu+ssh://root@10.0.0.1/system shutdown demo-guest1</strong></span>

root@10.0.0.1's password:
Last login: Mon Feb 18 07:28:55 2019
Domain demo-guest1 is being shutdown</pre></li></ul></div></li></ul></div><p>
					To force a guest to shut down, for example if it has become unresponsive, use the <code class="literal">virsh destroy</code> command on the host:
				</p><pre class="literallayout"><span class="strong strong"><strong># virsh destroy demo-guest1</strong></span>
Domain demo-guest1 destroyed</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The <code class="literal">virsh destroy</code> command does not actually delete or remove the VM configuration or disk images. It only destroys the running VM instance. However, in rare cases, this command may cause corruption of the VM’s file system, so using <span class="strong strong"><strong>virsh destroy</strong></span> is only recommended if all other shutdown methods have failed.
					</p></div></div></section><section class="section" id="powering-down-vms-using-the-rhel-8-web-console_assembly_shutting-down-virtual-machines"><div class="titlepage"><div><div><h3 class="title">2.5.2. Powering down virtual machines in the web console</h3></div></div></div><p>
					If a virtual machine (VM) is in the <span class="strong strong"><strong>running</strong></span> state, you can shut it down using the RHEL 8 web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM you want to shut down.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Shut Down</span>.
						</p><p class="simpara">
							The VM shuts down.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							If the VM does not shut down, click the arrow next to the <span class="guibutton">Shut Down</span> button and select <span class="guimenu">Force Shut Down</span>.
						</li><li class="listitem">
							To shut down an unresponsive VM, you can also send a non-maskable interrupt. For more information, see <a class="xref" href="index.html#sending-NMIs-to-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.4. Sending non-maskable interrupts to VMs using the web console">Section 5.5.4, “Sending non-maskable interrupts to VMs using the web console”</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For information on starting a VM, see <a class="xref" href="index.html#powering-up-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.1. Powering up virtual machines using the web console">Section 5.5.1, “Powering up virtual machines using the web console”</a>.
						</li><li class="listitem">
							For information on restarting a VM, see <a class="xref" href="index.html#restarting-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.3. Restarting virtual machines using the web console">Section 5.5.3, “Restarting virtual machines using the web console”</a>.
						</li></ul></div></section></section><section class="section" id="assembly_deleting-virtual-machines_virt-getting-started"><div class="titlepage"><div><div><h2 class="title">2.6. Deleting virtual machines</h2></div></div></div><p>
				To delete virtual machines in Red Hat Enterprise Linux 8, use the <a class="link" href="index.html#deleting-virtual-machines-using-cli_assembly_deleting-virtual-machines" title="2.6.1. Deleting virtual machines using the command line interface">command line interface</a> or the <a class="link" href="index.html#deleting-vms-using-the-rhel-8-web-console_assembly_deleting-virtual-machines" title="2.6.2. Deleting virtual machines using the web console">web console GUI</a>.
			</p><section class="section" id="deleting-virtual-machines-using-cli_assembly_deleting-virtual-machines"><div class="titlepage"><div><div><h3 class="title">2.6.1. Deleting virtual machines using the command line interface</h3></div></div></div><p>
					To delete a virtual machine (VM), you can remove its XML configuration and associated storage files from the host using the command line. Follow the procedure below:
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Back up important data from the VM.
						</li><li class="listitem">
							Shut down the VM.
						</li><li class="listitem">
							Make sure no other VMs use the same associated storage.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the <code class="literal">virsh undefine</code> utility.
						</p><p class="simpara">
							For example, the following command removes the <span class="emphasis"><em>guest1</em></span> VM, its associated storage volumes, and non-volatile RAM, if any.
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh undefine guest1 --remove-all-storage --nvram</strong></span>
Domain guest1 has been undefined
Volume 'vda'(/home/images/guest1.qcow2) removed.</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For other <code class="literal">virsh undefine</code> arguments, see the <code class="literal">virsh</code> man page.
						</li></ul></div></section><section class="section" id="deleting-vms-using-the-rhel-8-web-console_assembly_deleting-virtual-machines"><div class="titlepage"><div><div><h3 class="title">2.6.2. Deleting virtual machines using the web console</h3></div></div></div><p>
					To delete a virtual machine (VM) and its associated storage files from the host to which the RHEL 8 web console is connected with, follow the procedure below:
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, install the <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">web console VM plug-in</a>.
						</li><li class="listitem">
							Back up important data from the VM.
						</li><li class="listitem">
							Shut down the VM.
						</li><li class="listitem">
							Make sure no other VMs use the same associated storage.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click the name of the VM you want to delete.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p><div class="informalfigure"><div class="mediaobject"><img src="cockpit_1_vm_info.png" alt="cockpit 1 vm info"/></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Delete</span>.
						</p><p class="simpara">
							A confirmation dialog appears.
						</p><div class="informalfigure"><div class="mediaobject"><img src="cockpit_vm_delete_confirm.png" alt="cockpit vm delete confirm"/></div></div></li><li class="listitem">
							<span class="strong strong"><strong>Optional:</strong></span> To delete all or some of the storage files associated with the VM, select the checkboxes next to the storage files you want to delete.
						</li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Delete</span>.
						</p><p class="simpara">
							The VM and any selected storage files are deleted.
						</p></li></ol></div></section></section><section class="section" id="related-information-virt-getting-started"><div class="titlepage"><div><div><h2 class="title">2.7. Related information</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The information above apply to the AMD64 and Intel 64 architectures. If you want to use RHEL8 virtualization on other supported architectures, different setup procedures are needed and certain features may be restricted or work differently. For details, see the appropriate section below:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="xref" href="index.html#getting-started-with-virtualization-in-rhel-8-on-ibm-z_configuring-and-managing-virtualization" title="Chapter 4. Getting started with virtualization on IBM Z">Chapter 4, <em>Getting started with virtualization on IBM Z</em></a>
							</li><li class="listitem">
								<a class="xref" href="index.html#getting-started-with-virtualization-in-rhel-8-on-ibm-power_configuring-and-managing-virtualization" title="Chapter 3. Getting started with virtualization on IBM POWER">Chapter 3, <em>Getting started with virtualization on IBM POWER</em></a>
							</li></ul></div></li></ul></div></section></section><section class="chapter" id="getting-started-with-virtualization-in-rhel-8-on-ibm-power_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Getting started with virtualization on IBM POWER</h1></div></div></div><p>
			You can use KVM virtualization when using RHEL 8 on IBM POWER8 or POWER9 hardware. However, <a class="link" href="index.html#enabling-virtualization-on-ibm-power_getting-started-with-virtualization-in-rhel-8-on-ibm-power" title="3.1. Enabling virtualization on IBM POWER">enabling the KVM hypervisor</a> on your system requires extra steps compared to virtualization on AMD64 and Intel64 architectures. Certain RHEL 8 virtualization features also have <a class="link" href="index.html#how-virtualization-on-ibm-power-differs-from-amd64-and-intel64_getting-started-with-virtualization-in-rhel-8-on-ibm-power" title="3.2. How virtualization on IBM POWER differs from AMD64 and Intel 64">different or restricted functionality</a> on IBM POWER.
		</p><p>
			Apart from the information in the following sections, using virtualization on IBM POWER works the same as on AMD64 and Intel 64. Therefore, you can see other RHEL 8 virtualization documentation for more information about using virtualization on IBM POWER.
		</p><section class="section" id="enabling-virtualization-on-ibm-power_getting-started-with-virtualization-in-rhel-8-on-ibm-power"><div class="titlepage"><div><div><h2 class="title">3.1. Enabling virtualization on IBM POWER</h2></div></div></div><p>
				To set up a KVM hypervisor and create virtual machines (VMs) on an IBM POWER8 or IBM POWER9 system running RHEL 8, follow the instructions below.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						RHEL 8 is installed and registered on your host machine.
					</li><li class="listitem"><p class="simpara">
						The following minimum system resources are available:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								6 GB free disk space for the host, plus another 6 GB for each intended VM.
							</li><li class="listitem">
								2 GB of RAM for the host, plus another 2 GB for each intended VM.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Your CPU machine type must support IBM POWER virtualization.
					</p><p class="simpara">
						To verify this, query the platform information in your <code class="literal">/proc/cpuinfo</code> file.
					</p><pre class="literallayout"># <span class="strong strong"><strong>grep ^platform /proc/cpuinfo/</strong></span>
platform        : PowerNV</pre><p class="simpara">
						If the output of this command includes the <code class="literal">PowerNV</code> entry, you are running a PowerNV machine type and can use virtualization on IBM POWER.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Load the KVM-HV kernel module
					</p><pre class="literallayout"># <span class="strong strong"><strong>modprobe kvm_hv</strong></span></pre></li><li class="listitem"><p class="simpara">
						Verify that the KVM kernel module is loaded
					</p><pre class="literallayout"># <span class="strong strong"><strong>lsmod | grep kvm</strong></span></pre><p class="simpara">
						If KVM loaded successfully, the output of this command includes <code class="literal">kvm_hv</code>.
					</p></li><li class="listitem"><p class="simpara">
						Install the packages in the virtualization module:
					</p><pre class="literallayout"># <span class="strong strong"><strong>yum module install virt</strong></span></pre></li><li class="listitem"><p class="simpara">
						Install the <code class="literal">virt-install</code> package:
					</p><pre class="literallayout"># <span class="strong strong"><strong>yum install virt-install</strong></span></pre></li><li class="listitem"><p class="simpara">
						Verify that your system is prepared to be a virtualization host:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>virt-host-validate</strong></span>
[...]
QEMU: Checking if device /dev/vhost-net exists                          : PASS
QEMU: Checking if device /dev/net/tun exists                            : PASS
QEMU: Checking for cgroup 'memory' controller support                   : PASS
QEMU: Checking for cgroup 'memory' controller mount-point               : PASS
[...]
QEMU: Checking for cgroup 'blkio' controller support                    : PASS
QEMU: Checking for cgroup 'blkio' controller mount-point                : PASS
QEMU: Checking if IOMMU is enabled by kernel                            : PASS</pre></li><li class="listitem"><p class="simpara">
						If all <span class="strong strong"><strong>virt-host-validate</strong></span> checks return a <code class="literal">PASS</code> value, your system is prepared for <a class="link" href="index.html#assembly_creating-virtual-machines_virt-getting-started" title="2.2. Creating virtual machines">creating VMs</a>.
					</p><p class="simpara">
						If any of the checks return a <code class="literal">FAIL</code> value, follow the displayed instructions to fix the problem.
					</p><p class="simpara">
						If any of the checks return a <code class="literal">WARN</code> value, consider following the displayed instructions to improve virtualization capabilities.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional information</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Note that if virtualization is not supported by your host CPU, <span class="strong strong"><strong>virt-host-validate</strong></span> generates the following output:
					</p><pre class="literallayout">QEMU: Checking for hardware virtualization: FAIL (Only emulated CPUs are available, performance will be significantly limited)</pre><p class="simpara">
						However, attempting to create VMs on such a host system will fail, rather than have performance problems.
					</p></li></ul></div></section><section class="section" id="how-virtualization-on-ibm-power-differs-from-amd64-and-intel64_getting-started-with-virtualization-in-rhel-8-on-ibm-power"><div class="titlepage"><div><div><h2 class="title">3.2. How virtualization on IBM POWER differs from AMD64 and Intel 64</h2></div></div></div><p>
				KVM virtualization in RHEL 8 on IBM POWER systems is different from KVM on AMD64 and Intel 64 systems in a number of aspects, notably:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Memory requirements</span></dt><dd>
							VMs on IBM POWER consume more memory. Therefore, the recommended minimum memory allocation for a virtual machine (VM) on an IBM POWER host is 2GB RAM.
						</dd><dt><span class="term">Display protocols</span></dt><dd><p class="simpara">
							The SPICE protocol is not supported on IBM POWER systems. To display the graphical output of a VM, use the <code class="literal">VNC</code> protocol. In addition, only the following virtual graphics card devices are supported:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">vga</code> - only supported in <code class="literal">-vga std</code> mode and not in <code class="literal">-vga cirrus</code> mode.
								</li><li class="listitem">
									<code class="literal">virtio-vga</code>
								</li><li class="listitem">
									<code class="literal">virtio-gpu</code>
								</li></ul></div></dd><dt><span class="term">SMBIOS</span></dt><dd>
							SMBIOS configuration is not available
						</dd><dt><span class="term">Memory allocation errors</span></dt><dd><p class="simpara">
							POWER8 VMs, including compatibility mode VMs, may fail with an error similar to:
						</p><pre class="literallayout">qemu-kvm: Failed to allocate KVM HPT of order 33 (try smaller maxmem?): Cannot allocate memory</pre><p class="simpara">
							This is significantly more likely to occur on VMs that use RHEL 7.3 and prior as the guest OS.
						</p><p class="simpara">
							To fix the problem, increase the CMA memory pool available for the guest’s hashed page table (HPT) by adding <code class="literal">kvm_cma_resv_ratio=<span class="emphasis"><em>memory</em></span></code> to the host’s kernel command line, where <span class="emphasis"><em>memory</em></span> is the percentage of the host memory that should be reserved for the CMA pool (defaults to 5).
						</p></dd><dt><span class="term">Huge pages</span></dt><dd><p class="simpara">
							Transparent huge pages (THPs) do not provide any notable performance benefits on IBM POWER8 VMs. However, IBM POWER9 VMs can benefit from THPs as expected.
						</p><p class="simpara">
							In addition, the size of static huge pages on IBM POWER8 systems are 16 MiB and 16 GiB, as opposed to 2 MiB and 1 GiB on AMD64, Intel 64, and IBM POWER9. As a consequence, to migrate a VM configured with static huge pages from an IBM POWER8 host to an IBM POWER9 host, you must first set up 1GiB huge pages on the VM.
						</p></dd><dt><span class="term">kvm-clock</span></dt><dd>
							The <code class="literal">kvm-clock</code> service does not have to be configured for time management in VMs on IBM POWER9.
						</dd><dt><span class="term">pvpanic</span></dt><dd><p class="simpara">
							IBM POWER9 systems do not support the <code class="literal">pvpanic</code> device. However, an equivalent functionality is available and activated by default on this architecture. To enable it in a VM, use the <code class="literal">&lt;on_crash&gt;</code> XML configuration element with the <code class="literal">preserve</code> value.
						</p><p class="simpara">
							In addition, make sure to remove the <code class="literal">&lt;panic&gt;</code> element from the <code class="literal">&lt;devices&gt;</code> section, as its presence can lead to the VM failing to boot on IBM POWER systems.
						</p></dd><dt><span class="term">Single-threaded host</span></dt><dd>
							On IBM POWER8 systems, the host machine must run in <span class="strong strong"><strong>single-threaded mode</strong></span> to support VMs. This is automatically configured if the <span class="emphasis"><em>qemu-kvm</em></span> packages are installed. However, VMs running on single-threaded hosts can still use multiple threads.
						</dd><dt><span class="term">Peripheral devices</span></dt><dd><p class="simpara">
							A number of peripheral devices supported on AMD64 and Intel 64 systems are not supported on IBM POWER systems, or a different device is supported as a replacement.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Devices used for PCI-E hierarchy, including <code class="literal">ioh3420</code> and <code class="literal">xio3130-downstream</code>, are not supported. This functionality is replaced by multiple independent PCI root bridges provided by the <code class="literal">spapr-pci-host-bridge</code> device.
								</li><li class="listitem">
									UHCI and EHCI PCI controllers are not supported. Use OHCI and XHCI controllers instead.
								</li><li class="listitem">
									IDE devices, including the virtual IDE CD-ROM (<code class="literal">ide-cd</code>) and the virtual IDE disk (<code class="literal">ide-hd</code>), are not supported. Use the <code class="literal">virtio-scsi</code> and <code class="literal">virtio-blk</code> devices instead.
								</li><li class="listitem">
									Emulated PCI NICs (<code class="literal">rtl8139</code>) are not supported. Use the <code class="literal">virtio-net</code> device instead.
								</li><li class="listitem">
									Sound devices, including <code class="literal">intel-hda</code>, <code class="literal">hda-output</code>, and <code class="literal">AC97</code>, are not supported.
								</li><li class="listitem">
									USB redirection devices, including <code class="literal">usb-redir</code> and <code class="literal">usb-tablet</code>, are not supported.
								</li></ul></div></dd><dt><span class="term">v2v and p2v</span></dt><dd>
							The <code class="literal">virt-v2v</code> and <code class="literal">virt-p2v</code> utilities are supported only on the AMD64 and Intel 64 architecture, and are not provided on IBM POWER.
						</dd></dl></div></section></section><section class="chapter" id="getting-started-with-virtualization-in-rhel-8-on-ibm-z_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Getting started with virtualization on IBM Z</h1></div></div></div><p>
			You can use KVM virtualization when using RHEL 8 on IBM Z hardware. However, <a class="link" href="index.html#enabling-virtualization-on-ibm-z_getting-started-with-virtualization-in-rhel-8-on-ibm-z" title="4.1. Enabling virtualization on IBM Z">enabling the KVM hypervisor</a> on your system requires extra steps compared to virtualization on AMD64 and Intel 64 architectures. Certain RHEL 8 virtualization features also have <a class="link" href="index.html#how-virtualization-on-ibm-z-differs-from-amd64-and-intel64_getting-started-with-virtualization-in-rhel-8-on-ibm-z" title="4.2. How virtualization on IBM Z differs from AMD64 and Intel 64">different or restricted functionality</a> on IBM Z.
		</p><p>
			Nevertheless, apart from the information in the following sections, using virtualization on IBM Z works the same as on AMD64 and Intel 64. Therefore, you can see other RHEL 8 virtualization documentation for more information about using virtualization on IBM Z.
		</p><section class="section" id="enabling-virtualization-on-ibm-z_getting-started-with-virtualization-in-rhel-8-on-ibm-z"><div class="titlepage"><div><div><h2 class="title">4.1. Enabling virtualization on IBM Z</h2></div></div></div><p>
				To set up a KVM hypervisor and create virtual machines (VMs) on an IBM Z system running RHEL 8, follow the instructions below.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						RHEL 8 is installed and registered on your host machine.
					</li><li class="listitem"><p class="simpara">
						The following minimum system resources are available:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								6 GB free disk space for the host, plus another 6 GB for each intended VM.
							</li><li class="listitem">
								2 GB of RAM for the host, plus another 2 GB for each intended VM.
							</li></ul></div></li><li class="listitem">
						Your IBM Z host system must be using a z13 CPU or later.
					</li><li class="listitem"><p class="simpara">
						RHEL 8 has to be installed on a logical partition (LPAR). In addition, the LPAR must support the <span class="emphasis"><em>start-interpretive execution</em></span> (SIE) virtualization functions.
					</p><p class="simpara">
						To verify this, search for <code class="literal">sie</code> in your <code class="literal">/proc/cpuinfo</code> file.
					</p><pre class="literallayout"># <span class="strong strong"><strong>grep sie /proc/cpuinfo/</strong></span>
features        : esan3 zarch stfle msa ldisp eimm dfp edat etf3eh highgprs te sie</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Load the KVM kernel module:
					</p><pre class="literallayout"># <span class="strong strong"><strong>modprobe kvm</strong></span></pre></li><li class="listitem"><p class="simpara">
						Verify that the KVM kernel module is loaded:
					</p><pre class="literallayout"># <span class="strong strong"><strong>lsmod | grep kvm</strong></span></pre><p class="simpara">
						If KVM loaded successfully, the output of this command includes <code class="literal">kvm</code>:
					</p></li><li class="listitem"><p class="simpara">
						Install the packages in the virtualization module:
					</p><pre class="literallayout"># <span class="strong strong"><strong>yum module install virt</strong></span></pre></li><li class="listitem"><p class="simpara">
						Install the <code class="literal">virt-install</code> package:
					</p><pre class="literallayout"># <span class="strong strong"><strong>yum install virt-install</strong></span></pre></li><li class="listitem"><p class="simpara">
						Verify that your system is prepared to be a virtualization host:
					</p><pre class="literallayout"># <span class="strong strong"><strong>virt-host-validate</strong></span>
[...]
QEMU: Checking if device /dev/kvm is accessible                : PASS
QEMU: Checking if device /dev/vhost-net exists                 : PASS
QEMU: Checking if device /dev/net/tun exists                   : PASS
QEMU: Checking for cgroup 'memory' controller support          : PASS
QEMU: Checking for cgroup 'memory' controller mount-point      : PASS
[...]</pre></li><li class="listitem"><p class="simpara">
						If all <span class="strong strong"><strong>virt-host-validate</strong></span> checks return a <code class="literal">PASS</code> value, your system is prepared for <a class="link" href="index.html#assembly_creating-virtual-machines_virt-getting-started" title="2.2. Creating virtual machines">creating VMs</a>.
					</p><p class="simpara">
						If any of the checks return a <code class="literal">FAIL</code> value, follow the displayed instructions to fix the problem.
					</p><p class="simpara">
						If any of the checks return a <code class="literal">WARN</code> value, consider following the displayed instructions to improve virtualization capabilities.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional information</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Note that if virtualization is not supported by your host CPU, <span class="strong strong"><strong>virt-host-validate</strong></span> generates the following output:
					</p><pre class="literallayout">QEMU: Checking for hardware virtualization: FAIL (Only emulated CPUs are available, performance will be significantly limited)</pre><p class="simpara">
						However, attempting to create VMs on such a host system will fail, rather than have performance problems.
					</p></li></ul></div></section><section class="section" id="how-virtualization-on-ibm-z-differs-from-amd64-and-intel64_getting-started-with-virtualization-in-rhel-8-on-ibm-z"><div class="titlepage"><div><div><h2 class="title">4.2. How virtualization on IBM Z differs from AMD64 and Intel 64</h2></div></div></div><p>
				KVM virtualization in RHEL 8 on IBM Z systems differs from KVM on AMD64 and Intel 64 systems in the following:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">No graphical output</span></dt><dd>
							Displaying the VM graphical output is not possible when connecting to the VM using the VNC protocol. This is due to the <code class="literal">gnome-desktop</code> utility not being supported on IBM Z.
						</dd><dt><span class="term">PCI and USB devices</span></dt><dd><p class="simpara">
							Virtual PCI and USB devices are not supported on IBM Z. This also means that <code class="literal">virtio-<span class="emphasis"><em>*</em></span>-pci</code> devices are unsupported, and <code class="literal">virtio-<span class="emphasis"><em>*</em></span>-ccw</code> devices should be used instead. For example, use <code class="literal">virtio-net-ccw</code> instead of <code class="literal">virtio-net-pci</code>.
						</p><p class="simpara">
							Note that direct attachment of PCI devices, also known as PCI passthrough, is supported.
						</p></dd><dt><span class="term">Device boot order</span></dt><dd><p class="simpara">
							IBM Z does not support the <code class="literal">&lt;boot dev='<span class="emphasis"><em>device</em></span>'&gt;</code> XML configuration element. To define device boot order, use the <code class="literal">&lt;boot order='<span class="emphasis"><em>number</em></span>'&gt;</code> element in the <code class="literal">&lt;devices&gt;</code> section of the XML. For example:
						</p><pre class="programlisting language-xml">&lt;devices&gt;
  &lt;disk type='file' snapshot='external'&gt;
    &lt;driver name="tap" type="aio" cache="default"/&gt;
    &lt;source file='/var/lib/xen/images/fv0' startupPolicy='optional'&gt;
      &lt;seclabel relabel='no'/&gt;
    &lt;/source&gt;
    &lt;target dev='hda' bus='ide'/&gt;
    &lt;iotune&gt;
      &lt;total_bytes_sec&gt;10000000&lt;/total_bytes_sec&gt;
      &lt;read_iops_sec&gt;400000&lt;/read_iops_sec&gt;
      &lt;write_iops_sec&gt;100000&lt;/write_iops_sec&gt;
    &lt;/iotune&gt;
    &lt;boot order='2'/&gt;
    [...]
  &lt;/disk&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Using <code class="literal">&lt;boot order='<span class="emphasis"><em>number</em></span>'&gt;</code> for boot order management is also preferred on AMD64 and Intel 64 hosts.
							</p></div></div></dd><dt><span class="term">NUMA topology</span></dt><dd>
							Non-Uniform Memory Access (NUMA) topology for CPUs is not supported by <code class="literal">libvirt</code> on IBM Z. Therefore, tuning vCPU performance using NUMA is not possible on these systems.
						</dd><dt><span class="term">vfio-ap</span></dt><dd>
							VMs on an IBM Z host can use the <span class="emphasis"><em>vfio-ap</em></span> cryptographic device passthrough, which is not supported on any other architectures.
						</dd><dt><span class="term">SMBIOS</span></dt><dd>
							SMBIOS configuration is not available on IBM Z.
						</dd><dt><span class="term">Watchdog devices</span></dt><dd><p class="simpara">
							If using watchdog devices in your VM on an IBM Z host, use the <code class="literal">diag288</code> model. For example:
						</p><pre class="programlisting language-xml">&lt;devices&gt;
  &lt;watchdog model='diag288' action='poweroff'/&gt;
&lt;/devices&gt;</pre></dd><dt><span class="term">kvm-clock</span></dt><dd>
							The <code class="literal">kvm-clock</code> service is specific to AMD64 and Intel 64 systems, and does not have to be configured for VM time management on IBM Z.
						</dd><dt><span class="term">v2v and p2v</span></dt><dd>
							The <code class="literal">virt-v2v</code> and <code class="literal">virt-p2v</code> utilities are supported only on the AMD64 and Intel 64 architecture, and are not provided on IBM Z.
						</dd></dl></div></section><section class="section" id="related-information-getting-started-with-virtualization-in-rhel-8-on-ibm-z"><div class="titlepage"><div><div><h2 class="title">4.3. Related information</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						When setting up a VM on an IBM Z system, it is recommended to protect the guest OS from the <a class="link" href="https://access.redhat.com/security/vulnerabilities/speculativeexecution">"Spectre"</a> vulnerability. To do so, use the <code class="literal">virsh edit</code> command to modify the VM’s XML configuration and configure its CPU in one of the following ways:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								Use the host CPU model, for example as follows:
							</p><pre class="programlisting language-xml">&lt;cpu mode='host-model' check='partial'&gt;
  &lt;model fallback='allow'/&gt;
&lt;/cpu&gt;</pre><p class="simpara">
								This makes the <code class="literal">ppa15</code> and <code class="literal">bpb</code> features available to the guest if the host supports them.
							</p></li><li class="listitem"><p class="simpara">
								If using a specific host model, add the <code class="literal">ppa15</code> and <code class="literal">pbp</code> features. The following example uses the zEC12 CPU model:
							</p><pre class="programlisting language-xml">&lt;cpu mode='custom' match='exact' check='partial'&gt;
    &lt;model fallback='allow'&gt;zEC12&lt;/model&gt;
    &lt;feature policy='force' name='ppa15'/&gt;
    &lt;feature policy='force' name='bpb'/&gt;
&lt;/cpu&gt;</pre><p class="simpara">
								Note that when using the <code class="literal">ppa15</code> feature with the <code class="literal">z114</code> and <code class="literal">z196</code> CPU models on a host machine that uses a z12 CPU, you also need to use the latest microcode level (bundle 95 or later).
							</p></li></ul></div></li><li class="listitem">
						Note that running KVM on the z/VM OS is not supported.
					</li></ul></div></section></section><section class="chapter" id="using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Using the web console for managing virtual machines</h1></div></div></div><p>
			To manage virtual machines in a graphical interface on a RHEL 8 host, you can use the <code class="literal">Virtual Machines</code> pane in the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_systems_using_the_rhel_8_web_console">RHEL 8 web console</a>.
		</p><div class="informalfigure"><div class="mediaobject"><img src="web_console-overview.png" alt="web console overview"/></div></div><p>
			The following sections describe the web console’s virtualization management capabilities and provide instructions for using them.
		</p><section class="section" id="con_using-the-rhel-8-web-console-for-managing-vms_using-the-rhel-8-web-console-for-managing-vms"><div class="titlepage"><div><div><h2 class="title">5.1. Overview of virtual machine management using the web console</h2></div></div></div><p>
				The RHEL 8 web console is a web-based interface for system administration. With the installation of <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">a web console plug-in</a>, the web console can be used to manage virtual machines (VMs) on connected servers. It provides a graphical view of VMs on a host system to which the web console can connect, and allows monitoring system resources and adjusting configuration with ease.
			</p><p>
				Using the web console for VM management, you can do for example the following:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="index.html#creating-vms-using-the-rhel-8-web-console_creating-vms-and-installing-an-os-using-the-rhel-8-web-console" title="5.3.1. Creating virtual machines using the web console">Create</a> and <a class="link" href="index.html#deleting-vms-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms" title="5.4. Deleting virtual machines using the web console">delete</a> VMs
					</li><li class="listitem">
						<a class="link" href="index.html#installing-an-os-using-the-rhel-8-web-console_creating-vms-and-installing-an-os-using-the-rhel-8-web-console" title="5.3.2. Installing guest operating systems using the web console">Install operating systems</a> on VMs
					</li><li class="listitem">
						<a class="link" href="index.html#powering-up-and-powering-down-vms-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms" title="5.5. Powering up and powering down virtual machines using the web console">Start and shut down</a> VMs
					</li><li class="listitem">
						<a class="link" href="index.html#viewing-vm-information-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms" title="5.6. Viewing virtual machine information using the web console">View information</a> about VMs
					</li><li class="listitem">
						<a class="link" href="index.html#managing-virtual-machine-disks-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms" title="5.8. Managing virtual machine disks using the web console">Create and attach disks</a> to VMs
					</li><li class="listitem">
						<a class="link" href="index.html#managing-virtual-cpus-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms" title="5.7. Managing virtual CPUs using the web console">Configure virtual CPU settings</a> for VMs
					</li><li class="listitem">
						<a class="link" href="index.html#using-the-rhel-8-web-console-for-managing-vm-vNICs_using-the-rhel-8-web-console-for-managing-vms" title="5.9. Using the web console for managing virtual machine network interfaces">Manage virtual network interfaces</a>
					</li><li class="listitem">
						<a class="link" href="index.html#viewing-vm-consoles-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms" title="5.10. Interacting with virtual machines using the web console">Interact with VMs</a> using VM consoles
					</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The Virtual Machine Manager (<span class="strong strong"><strong>virt-manager</strong></span>) application is still supported in RHEL 8 but has been deprecated. The web console is intended to become its replacement in a subsequent release. It is, therefore, recommended that you get familiar with the web console for managing virtualization in a GUI.
				</p><p>
					However, in RHEL 8, some features may only be accessible from either <span class="strong strong"><strong>virt-manager</strong></span> or the command line. For details, see <a class="xref" href="index.html#differences-between-virtualization-features-in-virtual-machine-manager-and-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms" title="5.12. Differences between virtualization features in virtual machine manager and the web console">Section 5.12, “Differences between virtualization features in virtual machine manager and the web console”</a>.
				</p><p>
					For more information on the Virtual Machine Manager, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/virtualization_getting_started_guide/chap-virtualization_manager-introduction">RHEL 7 documentation</a>.
				</p></div></div></section><section class="section" id="setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms"><div class="titlepage"><div><div><h2 class="title">5.2. Setting up the web console to manage virtual machines</h2></div></div></div><p>
				Before using the RHEL 8 web console to manage VMs, you must install the web console virtual machine plug-in.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Ensure that the web console is installed on your machine.
					</p><pre class="literallayout">$ <span class="strong strong"><strong>yum info cockpit</strong></span>
Installed Packages
Name         : cockpit
[...]</pre><p class="simpara">
						If the web console is not installed, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_systems_using_the_rhel_8_web_console/getting-started-with-the-rhel-8-web-console_system-management-using-the-rhel-8-web-console"><span class="emphasis"><em>Managing systems using the web console</em></span></a> guide for more information about installing the web console.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Install the <code class="literal package">cockpit-machines</code> plug-in.
					</p><pre class="literallayout"># <span class="strong strong"><strong>yum install cockpit-machines</strong></span></pre><p class="simpara">
						If the installation is successful, <span class="guimenu">Virtual Machines</span> appears in the web console side menu.
					</p><div class="informalfigure"><div class="mediaobject"><img src="cockpit_vms_info.png" alt="cockpit vms info"/></div></div></li></ul></div></section><section class="section" id="creating-vms-and-installing-an-os-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms"><div class="titlepage"><div><div><h2 class="title">5.3. Creating virtual machines and installing guest operating systems using the web console</h2></div></div></div><p>
				The following sections provide information on how to use the RHEL 8 web console to create virtual machines and install operating systems on VMs.
			</p><section class="section" id="creating-vms-using-the-rhel-8-web-console_creating-vms-and-installing-an-os-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.3.1. Creating virtual machines using the web console</h3></div></div></div><p>
					To create a virtual machine (VM) on the host machine to which the web console is connected, follow the instructions below.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li><li class="listitem">
							Make sure you have sufficient amount of system resources to allocate to your VMs, such as disk space, RAM, or CPUs. The recommended values may vary significantly depending on the intended tasks and workload of the VMs.
						</li><li class="listitem"><p class="simpara">
							A locally available operating system (OS) installation source, which can be one of the following:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									An ISO image of an installation medium
								</li><li class="listitem">
									A disk image of an existing VM installation
								</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface of the web console, click <span class="strong strong"><strong><span class="guibutton">Create VM</span></strong></span>.
						</p><p class="simpara">
							The Create New Virtual Machine dialog appears.
						</p><div class="informalfigure"><div class="mediaobject"><img src="cockpit_create_new_vm.png" alt="cockpit create new vm"/></div></div></li><li class="listitem"><p class="simpara">
							Enter the basic configuration of the VM you want to create.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Connection</strong></span> - The connection to the host to be used by the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Name</strong></span> - The name of the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Installation Source Type</strong></span> - The installation can use a local installation medium, a URL, a PXE network boot, or a disk image of an existing VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Installation Source</strong></span> - The path or URL that points to the installation source.
								</li><li class="listitem">
									<span class="strong strong"><strong>OS Vendor</strong></span> - The vendor of the VM’s operating system.
								</li><li class="listitem">
									<span class="strong strong"><strong>Operating System</strong></span> - The VM’s operating system. Note that Red Hat provides support only for <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/feature-support-and-limitations-in-rhel8-virtualization_configuring-and-managing-virtualization#recommended-features-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization">a limited set of guest operating systems</a>.
								</li><li class="listitem">
									<span class="strong strong"><strong>Memory</strong></span> - The amount of memory with which to configure the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Storage Size</strong></span> - The amount of storage space with which to configure the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Immediately Start VM</strong></span> - Whether or not the VM will start immediately after it is created.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Create</span>.
						</p><p class="simpara">
							The VM is created. If the <span class="strong strong"><strong>Immediately Start VM</strong></span> checkbox is selected, the VM will immediately start and begin installing the guest operating system.
						</p></li></ol></div><p>
					If you did not choose <code class="literal">Existing Disk Image</code> as the installation source type, you must install the operating system the first time the VM is run.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For information on installing an operating system on a VM, see <a class="xref" href="index.html#installing-an-os-using-the-rhel-8-web-console_creating-vms-and-installing-an-os-using-the-rhel-8-web-console" title="5.3.2. Installing guest operating systems using the web console">Section 5.3.2, “Installing guest operating systems using the web console”</a>.
						</li></ul></div></section><section class="section" id="installing-an-os-using-the-rhel-8-web-console_creating-vms-and-installing-an-os-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.3.2. Installing guest operating systems using the web console</h3></div></div></div><p>
					The first time a virtual machine (VM) loads, you must install an operating system on the VM.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If the <span class="emphasis"><em>Immediately Start VM</em></span> checkbox in the Create New Virtual Machine dialog is checked, the installation routine of the operating system starts automatically when the VM is created.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li><li class="listitem">
							A VM on which to install an operating system.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM on which you want to install a guest OS.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for installing and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Install</span>.
						</p><p class="simpara">
							The installation routine of the operating system runs in the VM console.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							If the installation routine fails, the VM must be deleted and recreated.
						</li></ul></div></section></section><section class="section" id="deleting-vms-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms"><div class="titlepage"><div><div><h2 class="title">5.4. Deleting virtual machines using the web console</h2></div></div></div><p>
				To delete a virtual machine (VM) and its associated storage files from the host to which the RHEL 8 web console is connected with, follow the procedure below:
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						To use the web console to manage VMs, install the <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">web console VM plug-in</a>.
					</li><li class="listitem">
						Back up important data from the VM.
					</li><li class="listitem">
						Shut down the VM.
					</li><li class="listitem">
						Make sure no other VMs use the same associated storage.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In the <span class="guimenu">Virtual Machines</span> interface, click the name of the VM you want to delete.
					</p><p class="simpara">
						The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
					</p><div class="informalfigure"><div class="mediaobject"><img src="cockpit_1_vm_info.png" alt="cockpit 1 vm info"/></div></div></li><li class="listitem"><p class="simpara">
						Click <span class="guibutton">Delete</span>.
					</p><p class="simpara">
						A confirmation dialog appears.
					</p><div class="informalfigure"><div class="mediaobject"><img src="cockpit_vm_delete_confirm.png" alt="cockpit vm delete confirm"/></div></div></li><li class="listitem">
						<span class="strong strong"><strong>Optional:</strong></span> To delete all or some of the storage files associated with the VM, select the checkboxes next to the storage files you want to delete.
					</li><li class="listitem"><p class="simpara">
						Click <span class="guibutton">Delete</span>.
					</p><p class="simpara">
						The VM and any selected storage files are deleted.
					</p></li></ol></div></section><section class="section" id="powering-up-and-powering-down-vms-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms"><div class="titlepage"><div><div><h2 class="title">5.5. Powering up and powering down virtual machines using the web console</h2></div></div></div><p>
				Using the RHEL 8 web console, you can <a class="link" href="index.html#powering-up-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.1. Powering up virtual machines using the web console">run</a>, <a class="link" href="index.html#powering-down-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.2. Powering down virtual machines in the web console">shut down</a>, and <a class="link" href="index.html#restarting-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.3. Restarting virtual machines using the web console">restart</a> virtual machines. You can also send a non-maskable interrupt to an unresponsive virtual machine.
			</p><section class="section" id="powering-up-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.5.1. Powering up virtual machines using the web console</h3></div></div></div><p>
					If a virtual machine (VM) is in the <span class="strong strong"><strong>shut off</strong></span> state, you can start it using the RHEL 8 web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							An inactive VM that is already defined.
						</li><li class="listitem">
							The name of the VM.
						</li><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM you want to start.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Run</span>.
						</p><p class="simpara">
							The VM starts, and you can <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#assembly_connecting-to-virtual-machines_virt-getting-started">connect to its console or graphical output</a>.
						</p></li><li class="listitem">
							<span class="strong strong"><strong>Optional:</strong></span> To set up the VM to start automatically when the host starts, click the <code class="literal">Autostart</code> checkbox.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For information on shutting down a VM, see <a class="xref" href="index.html#powering-down-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.2. Powering down virtual machines in the web console">Section 5.5.2, “Powering down virtual machines in the web console”</a>.
						</li><li class="listitem">
							For information on restarting a VM, see <a class="xref" href="index.html#restarting-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.3. Restarting virtual machines using the web console">Section 5.5.3, “Restarting virtual machines using the web console”</a>.
						</li><li class="listitem">
							For information on sending a non-maskable interrupt to a VM, see <a class="xref" href="index.html#sending-NMIs-to-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.4. Sending non-maskable interrupts to VMs using the web console">Section 5.5.4, “Sending non-maskable interrupts to VMs using the web console”</a>.
						</li></ul></div></section><section class="section" id="powering-down-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.5.2. Powering down virtual machines in the web console</h3></div></div></div><p>
					If a virtual machine (VM) is in the <span class="strong strong"><strong>running</strong></span> state, you can shut it down using the RHEL 8 web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM you want to shut down.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Shut Down</span>.
						</p><p class="simpara">
							The VM shuts down.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							If the VM does not shut down, click the arrow next to the <span class="guibutton">Shut Down</span> button and select <span class="guimenu">Force Shut Down</span>.
						</li><li class="listitem">
							To shut down an unresponsive VM, you can also send a non-maskable interrupt. For more information, see <a class="xref" href="index.html#sending-NMIs-to-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.4. Sending non-maskable interrupts to VMs using the web console">Section 5.5.4, “Sending non-maskable interrupts to VMs using the web console”</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For information on starting a VM, see <a class="xref" href="index.html#powering-up-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.1. Powering up virtual machines using the web console">Section 5.5.1, “Powering up virtual machines using the web console”</a>.
						</li><li class="listitem">
							For information on restarting a VM, see <a class="xref" href="index.html#restarting-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.3. Restarting virtual machines using the web console">Section 5.5.3, “Restarting virtual machines using the web console”</a>.
						</li></ul></div></section><section class="section" id="restarting-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.5.3. Restarting virtual machines using the web console</h3></div></div></div><p>
					If a virtual machine (VM) is in the <span class="strong strong"><strong>running</strong></span> state, you can restart it using the RHEL 8 web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM you want to restart.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Restart</span>.
						</p><p class="simpara">
							The VM shuts down and restarts.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							If the VM does not restart, click the arrow next to the <span class="guibutton">Restart</span> button and select <span class="guimenu">Force Restart</span>.
						</li><li class="listitem">
							To restart an unresponsive VM, you can also send a non-maskable interrupt. For more information, see <a class="xref" href="index.html#sending-NMIs-to-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.4. Sending non-maskable interrupts to VMs using the web console">Section 5.5.4, “Sending non-maskable interrupts to VMs using the web console”</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For information on starting a VM, see <a class="xref" href="index.html#powering-up-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.1. Powering up virtual machines using the web console">Section 5.5.1, “Powering up virtual machines using the web console”</a>.
						</li><li class="listitem">
							For information on shutting down a VM, see <a class="xref" href="index.html#powering-down-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.2. Powering down virtual machines in the web console">Section 5.5.2, “Powering down virtual machines in the web console”</a>.
						</li></ul></div></section><section class="section" id="sending-NMIs-to-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.5.4. Sending non-maskable interrupts to VMs using the web console</h3></div></div></div><p>
					Sending a non-maskable interrupt (NMI) may cause an unresponsive running virtual machine (VM) to respond or shut down. For example, you can send the <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Del</strong></span> NMI to a VM that is not responding to standard input.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM to which you want to send an NMI.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click the arrow next to the <span class="guibutton">Shut Down</span> button and select <span class="guimenu">Send Non-Maskable Interrupt</span>.
						</p><p class="simpara">
							An NMI is sent to the VM.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For information on starting a VM, see <a class="xref" href="index.html#powering-up-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.1. Powering up virtual machines using the web console">Section 5.5.1, “Powering up virtual machines using the web console”</a>.
						</li><li class="listitem">
							For information on restarting a VM, see <a class="xref" href="index.html#restarting-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.3. Restarting virtual machines using the web console">Section 5.5.3, “Restarting virtual machines using the web console”</a>.
						</li><li class="listitem">
							For information on shutting down a VM, see <a class="xref" href="index.html#powering-down-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.2. Powering down virtual machines in the web console">Section 5.5.2, “Powering down virtual machines in the web console”</a>.
						</li></ul></div></section></section><section class="section" id="viewing-vm-information-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms"><div class="titlepage"><div><div><h2 class="title">5.6. Viewing virtual machine information using the web console</h2></div></div></div><p>
				Using the RHEL 8 web console, you can view information about the virtual storage and VMs to which the web console is connected.
			</p><section class="section" id="viewing-vm-state-and-connection-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.6.1. Viewing a virtualization overview in the web console</h3></div></div></div><p>
					The following procedure describes how to view an overview of virtual machines (VMs) and the available virtual storage to which the web console session is connected.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Click <span class="guimenu">Virtual Machines</span> in the web console’s side menu.
						</p><p class="simpara">
							A dialog box appears with information about the available storage and the VMs to which the web console is connected.
						</p></li></ul></div><div class="informalfigure"><div class="mediaobject"><img src="cockpit_vms_info.png" alt="cockpit vms info"/></div></div><p>
					The information includes the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Storage Pools</strong></span> - The number of storage pools that can be accessed by the web console and their state.
						</li><li class="listitem">
							<span class="strong strong"><strong>Networks</strong></span> - The number of networks that can be accessed by the web console and their state.
						</li><li class="listitem">
							<span class="strong strong"><strong>Name</strong></span> - The name of the VM.
						</li><li class="listitem">
							<span class="strong strong"><strong>Connection</strong></span> - The type of libvirt connection, system or session.
						</li><li class="listitem">
							<span class="strong strong"><strong>State</strong></span> - The state of the VM.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions on viewing detailed information about the storage pools the web console session can access, see <a class="xref" href="index.html#viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.2. Viewing storage pool information using the web console">Section 5.6.2, “Viewing storage pool information using the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing basic information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-basic-vm-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.3. Viewing basic virtual machine information in the web console">Section 5.6.3, “Viewing basic virtual machine information in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing resource usage for a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-resource-usage-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.4. Viewing virtual machine resource usage in the web console">Section 5.6.4, “Viewing virtual machine resource usage in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing disk information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-disk-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.5. Viewing virtual machine disk information in the web console">Section 5.6.5, “Viewing virtual machine disk information in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing virtual network interface information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vNIC-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.6. Viewing and editing virtual network interface information in the web console">Section 5.6.6, “Viewing and editing virtual network interface information in the web console”</a>.
						</li></ul></div></section><section class="section" id="viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.6.2. Viewing storage pool information using the web console</h3></div></div></div><p>
					The following procedure describes how to view detailed storage pool information about the virtual machine (VM) storage pools that the web console session can access.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Storage Pools</span> at the top of the <span class="guimenu">Virtual Machines</span> interface. The Storage Pools window appears, showing a list of configured storage pools.
						</p><div class="informalfigure"><div class="mediaobject"><img src="web-console-storage-pools-window.png" alt="web console storage pools window"/></div></div><p class="simpara">
							The information includes the following:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Name</strong></span> - The name of the storage pool.
								</li><li class="listitem">
									<span class="strong strong"><strong>Size</strong></span> - The size of the storage pool.
								</li><li class="listitem">
									<span class="strong strong"><strong>Connection</strong></span> - The connection used to access the storage pool.
								</li><li class="listitem">
									<span class="strong strong"><strong>State</strong></span> - The state of the storage pool.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click a row with the name of the storage whose information you want to see.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with the following information about the selected storage pool:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Path</strong></span> - The path to the storage pool.
								</li><li class="listitem">
									<span class="strong strong"><strong>Persistent</strong></span> - Whether or not the storage pool is persistent.
								</li><li class="listitem">
									<span class="strong strong"><strong>Autostart</strong></span> - Whether or not the storage pool starts automatically.
								</li><li class="listitem">
									<span class="strong strong"><strong>Type</strong></span> - The type of the storage pool.
								</li></ul></div><div class="informalfigure"><div class="mediaobject"><img src="web-console-storage-pool-overview.png" alt="web console storage pool overview"/></div></div></li><li class="listitem"><p class="simpara">
							To view a list of storage volumes created from the storage pool, click <span class="guibutton">Storage Volumes</span>.
						</p><p class="simpara">
							The Storage Volumes pane appears, showing a list of configured storage volumes with their sizes and the amount of space used.
						</p><div class="informalfigure"><div class="mediaobject"><img src="web-console-storage-pool-storage-volumes.png" alt="web console storage pool storage volumes"/></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions on viewing information about all of the VMs to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-state-and-connection-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.1. Viewing a virtualization overview in the web console">Section 5.6.1, “Viewing a virtualization overview in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing basic information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-basic-vm-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.3. Viewing basic virtual machine information in the web console">Section 5.6.3, “Viewing basic virtual machine information in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing resource usage for a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-resource-usage-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.4. Viewing virtual machine resource usage in the web console">Section 5.6.4, “Viewing virtual machine resource usage in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing disk information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-disk-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.5. Viewing virtual machine disk information in the web console">Section 5.6.5, “Viewing virtual machine disk information in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing virtual network interface information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vNIC-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.6. Viewing and editing virtual network interface information in the web console">Section 5.6.6, “Viewing and editing virtual network interface information in the web console”</a>.
						</li></ul></div></section><section class="section" id="viewing-basic-vm-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.6.3. Viewing basic virtual machine information in the web console</h3></div></div></div><p>
					The following describes how to view basic information about a selected virtual machine (VM) to which the web console session is connected.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Click <span class="guimenu">Virtual Machines</span> in the web console side menu.
						</li><li class="listitem"><p class="simpara">
							Click a row with the name of the VM whose information you want to see.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							If another tab is selected, click <span class="guibutton">Overview</span>.
						</p><div class="informalfigure"><div class="mediaobject"><img src="cockpit_basic_vm_info.png" alt="cockpit basic vm info"/></div></div></li></ol></div><p>
					The information includes the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Memory</strong></span> - The amount of memory assigned to the VM.
						</li><li class="listitem">
							<span class="strong strong"><strong>Emulated Machine</strong></span> - The machine type emulated by the VM.
						</li><li class="listitem">
							<span class="strong strong"><strong>vCPUs</strong></span> - The number of virtual CPUs configured for the VM.
						</li><li class="listitem">
							<span class="strong strong"><strong>Boot Order</strong></span> - The boot order configured for the VM.
						</li><li class="listitem">
							<span class="strong strong"><strong>CPU Type</strong></span> - The architecture of the virtual CPUs configured for the VM.
						</li><li class="listitem">
							<span class="strong strong"><strong>Autostart</strong></span> - Whether or not autostart is enabled for the VM.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions on viewing information about all of the VMs to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-state-and-connection-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.1. Viewing a virtualization overview in the web console">Section 5.6.1, “Viewing a virtualization overview in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing information about the storage pools to which the web console session is connected, see <a class="xref" href="index.html#viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.2. Viewing storage pool information using the web console">Section 5.6.2, “Viewing storage pool information using the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing resource usage for a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-resource-usage-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.4. Viewing virtual machine resource usage in the web console">Section 5.6.4, “Viewing virtual machine resource usage in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing disk information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-disk-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.5. Viewing virtual machine disk information in the web console">Section 5.6.5, “Viewing virtual machine disk information in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing virtual network interface information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vNIC-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.6. Viewing and editing virtual network interface information in the web console">Section 5.6.6, “Viewing and editing virtual network interface information in the web console”</a>.
						</li><li class="listitem">
							To see more detailed virtual CPU information and configure the virtual CPUs configured for a VM, see <a class="xref" href="index.html#managing-virtual-cpus-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms" title="5.7. Managing virtual CPUs using the web console">Section 5.7, “Managing virtual CPUs using the web console”</a>.
						</li></ul></div></section><section class="section" id="viewing-vm-resource-usage-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.6.4. Viewing virtual machine resource usage in the web console</h3></div></div></div><p>
					The following procedure describes how to view the memory and virtual CPU usage information about a selected virtual machine (VM) to which the web console session is connected.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM whose information you want to see.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Usage</span>.
						</p><p class="simpara">
							The Usage pane appears with information about the memory and virtual CPU usage of the VM.
						</p></li></ol></div><div class="informalfigure"><div class="mediaobject"><img src="cockpit_resource_usage.png" alt="cockpit resource usage"/></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions on viewing information about all of the VMs to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-state-and-connection-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.1. Viewing a virtualization overview in the web console">Section 5.6.1, “Viewing a virtualization overview in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing information about the storage pools to which the web console session is connected, see <a class="xref" href="index.html#viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.2. Viewing storage pool information using the web console">Section 5.6.2, “Viewing storage pool information using the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing basic information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-basic-vm-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.3. Viewing basic virtual machine information in the web console">Section 5.6.3, “Viewing basic virtual machine information in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing disk information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-disk-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.5. Viewing virtual machine disk information in the web console">Section 5.6.5, “Viewing virtual machine disk information in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing virtual network interface information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vNIC-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.6. Viewing and editing virtual network interface information in the web console">Section 5.6.6, “Viewing and editing virtual network interface information in the web console”</a>.
						</li></ul></div></section><section class="section" id="viewing-vm-disk-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.6.5. Viewing virtual machine disk information in the web console</h3></div></div></div><p>
					The following procedure describes how to view the disk information of a virtual machine (VM) to which the web console session is connected.
				</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
						To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
					</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Click a row with the name of the VM whose information you want to see.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Disks</span>.
						</p><p class="simpara">
							The Disks pane appears with information about the disks assigned to the VM.
						</p></li></ol></div><div class="informalfigure"><div class="mediaobject"><img src="cockpit_disk_info.png" alt="cockpit disk info"/></div></div><p>
					The information includes the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Device</strong></span> - The device type of the disk.
						</li><li class="listitem">
							<span class="strong strong"><strong>Target</strong></span> - The controller type of the disk.
						</li><li class="listitem">
							<span class="strong strong"><strong>Used</strong></span> - The amount of the disk that is used.
						</li><li class="listitem">
							<span class="strong strong"><strong>Capacity</strong></span> - The size of the disk.
						</li><li class="listitem">
							<span class="strong strong"><strong>Bus</strong></span> - The bus type of the disk.
						</li><li class="listitem">
							<span class="strong strong"><strong>Readonly</strong></span> - Whether or not the disk is read-only.
						</li><li class="listitem">
							<span class="strong strong"><strong>Source</strong></span> - The disk device or file.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions on viewing information about all of the VMs to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-state-and-connection-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.1. Viewing a virtualization overview in the web console">Section 5.6.1, “Viewing a virtualization overview in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing information about the storage pools to which the web console session is connected, see <a class="xref" href="index.html#viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.2. Viewing storage pool information using the web console">Section 5.6.2, “Viewing storage pool information using the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing basic information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-basic-vm-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.3. Viewing basic virtual machine information in the web console">Section 5.6.3, “Viewing basic virtual machine information in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing resource usage for a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-resource-usage-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.4. Viewing virtual machine resource usage in the web console">Section 5.6.4, “Viewing virtual machine resource usage in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing virtual network interface information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vNIC-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.6. Viewing and editing virtual network interface information in the web console">Section 5.6.6, “Viewing and editing virtual network interface information in the web console”</a>.
						</li></ul></div></section><section class="section" id="viewing-vNIC-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.6.6. Viewing and editing virtual network interface information in the web console</h3></div></div></div><p>
					The following procedure describes how to view information about the virtual network interfaces on a selected virtual machine (VM):
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM whose information you want to see.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Network Interfaces</span>.
						</p><p class="simpara">
							The Networks Interfaces pane appears with information about the virtual network interface configured for the VM.
						</p><div class="informalfigure"><div class="mediaobject"><img src="cockpit_vNIC_info.png" alt="cockpit vNIC info"/></div></div><p class="simpara">
							The information includes the following:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Type</strong></span> - The type of network interface for the VM. Types include direct, network, bridge, ethernet, hostdev, mcast, user, and server.
								</li><li class="listitem">
									<span class="strong strong"><strong>Model type</strong></span> - The model of the virtual network interface.
								</li><li class="listitem">
									<span class="strong strong"><strong>MAC Address</strong></span> - The MAC address of the virtual network interface.
								</li><li class="listitem">
									<span class="strong strong"><strong>Source</strong></span> - The source of the network interface. This is dependent on the network type.
								</li><li class="listitem">
									<span class="strong strong"><strong>State</strong></span> - The state of the virtual network interface.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							To edit the virtual network interface settings, Click <span class="guibutton">Edit</span>. The Virtual Network Interface Settings dialog opens.
						</p><div class="informalfigure"><div class="mediaobject"><img src="web-console_virtual-network-if-settings.png" alt="web console virtual network if settings"/></div></div></li><li class="listitem">
							Change the interface type, source, or model.
						</li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Save</span>. The network interface is modified.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Changes to the virtual network interface settings take effect only after restarting the VM.
							</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions on viewing information about all of the VMs to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-state-and-connection-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.1. Viewing a virtualization overview in the web console">Section 5.6.1, “Viewing a virtualization overview in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing information about the storage pools to which the web console session is connected, see <a class="xref" href="index.html#viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.2. Viewing storage pool information using the web console">Section 5.6.2, “Viewing storage pool information using the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing basic information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-basic-vm-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.3. Viewing basic virtual machine information in the web console">Section 5.6.3, “Viewing basic virtual machine information in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing resource usage for a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-resource-usage-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.4. Viewing virtual machine resource usage in the web console">Section 5.6.4, “Viewing virtual machine resource usage in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing disk information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-disk-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.5. Viewing virtual machine disk information in the web console">Section 5.6.5, “Viewing virtual machine disk information in the web console”</a>.
						</li></ul></div></section></section><section class="section" id="managing-virtual-cpus-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms"><div class="titlepage"><div><div><h2 class="title">5.7. Managing virtual CPUs using the web console</h2></div></div></div><p>
				Using the RHEL 8 web console, you can review and configure virtual CPUs used by virtual machines (VMs) to which the web console is connected.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VMs for which you want to view and configure virtual CPU parameters.
					</p><p class="simpara">
						The row expands to reveal the Overview pane with basic information about the selected VMs, including the number of virtual CPUs, and controls for shutting down and deleting the VM.
					</p></li><li class="listitem"><p class="simpara">
						Click the number of vCPUs in the Overview pane.
					</p><p class="simpara">
						The vCPU details dialog appears.
					</p><p class="simpara">
						<span class="inlinemediaobject"><img src="cockpit_configure_vCPUs.png" alt="cockpit configure vCPUs"/></span>

					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The warning in the vCPU details dialog only appears after the virtual CPU settings are changed.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Configure the virtual CPUs for the selected VM.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>vCPU Count</strong></span> - Enter the number of virtual CPUs for the VM.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									The vCPU count cannot be greater than the vCPU Maximum.
								</p></div></div></li><li class="listitem">
								<span class="strong strong"><strong>vCPU Maximum</strong></span> - Enter the maximum number of virtual CPUs that can be configured for the VM.
							</li><li class="listitem">
								<span class="strong strong"><strong>Sockets</strong></span> - Select the number of sockets to expose to the VM.
							</li><li class="listitem">
								<span class="strong strong"><strong>Cores per socket</strong></span> - Select the number of cores for each socket to expose to the VM.
							</li><li class="listitem">
								<span class="strong strong"><strong>Threads per core</strong></span> - Select the number of threads for each core to expose to the VM.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Click <span class="guibutton">Apply</span>.
					</p><p class="simpara">
						The virtual CPUs for the VM are configured.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Changes to virtual CPU settings only take effect after the VM is restarted.
						</p></div></div></li></ol></div></section><section class="section" id="managing-virtual-machine-disks-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms"><div class="titlepage"><div><div><h2 class="title">5.8. Managing virtual machine disks using the web console</h2></div></div></div><p>
				Using the RHEL 8 web console, you can manage the disks configured for the virtual machines to which the web console is connected.
			</p><p>
				You can:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="index.html#viewing-vm-disk-information-in-the-rhel-8-web-console_managing-virtual-machine-disks-using-the-rhel-8-web-console" title="5.8.1. Viewing virtual machine disk information in the web console">View information about disks.</a>
					</li><li class="listitem">
						<a class="link" href="index.html#creating-and-attaching-disks-to-virtual-machines-using-the-rhel-8-web-console_managing-virtual-machine-disks-using-the-rhel-8-web-console" title="5.8.2. Adding new disks to virtual machines using the web console">Create and attach new virtual disks to virtual machines.</a>
					</li><li class="listitem">
						<a class="link" href="index.html#attaching-existing-disks-to-virtual-machines-using-the-rhel-8-web-console_managing-virtual-machine-disks-using-the-rhel-8-web-console" title="5.8.3. Attaching existing disks to virtual machines using the web console">Attach existing virtual disks to virtual machines.</a>
					</li><li class="listitem">
						<a class="link" href="index.html#detaching-disks-from-virtual-machines_managing-virtual-machine-disks-using-the-rhel-8-web-console" title="5.8.4. Detaching disks from virtual machines">Detach virtual disks from virtual machines.</a>
					</li></ul></div><section class="section" id="viewing-vm-disk-information-in-the-rhel-8-web-console_managing-virtual-machine-disks-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.8.1. Viewing virtual machine disk information in the web console</h3></div></div></div><p>
					The following procedure describes how to view the disk information of a virtual machine (VM) to which the web console session is connected.
				</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
						To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
					</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Click a row with the name of the VM whose information you want to see.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Disks</span>.
						</p><p class="simpara">
							The Disks pane appears with information about the disks assigned to the VM.
						</p></li></ol></div><div class="informalfigure"><div class="mediaobject"><img src="cockpit_disk_info.png" alt="cockpit disk info"/></div></div><p>
					The information includes the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Device</strong></span> - The device type of the disk.
						</li><li class="listitem">
							<span class="strong strong"><strong>Target</strong></span> - The controller type of the disk.
						</li><li class="listitem">
							<span class="strong strong"><strong>Used</strong></span> - The amount of the disk that is used.
						</li><li class="listitem">
							<span class="strong strong"><strong>Capacity</strong></span> - The size of the disk.
						</li><li class="listitem">
							<span class="strong strong"><strong>Bus</strong></span> - The bus type of the disk.
						</li><li class="listitem">
							<span class="strong strong"><strong>Readonly</strong></span> - Whether or not the disk is read-only.
						</li><li class="listitem">
							<span class="strong strong"><strong>Source</strong></span> - The disk device or file.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions on viewing information about all of the VMs to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-state-and-connection-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.1. Viewing a virtualization overview in the web console">Section 5.6.1, “Viewing a virtualization overview in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing information about the storage pools to which the web console session is connected, see <a class="xref" href="index.html#viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.2. Viewing storage pool information using the web console">Section 5.6.2, “Viewing storage pool information using the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing basic information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-basic-vm-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.3. Viewing basic virtual machine information in the web console">Section 5.6.3, “Viewing basic virtual machine information in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing resource usage for a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-resource-usage-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.4. Viewing virtual machine resource usage in the web console">Section 5.6.4, “Viewing virtual machine resource usage in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing virtual network interface information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vNIC-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.6. Viewing and editing virtual network interface information in the web console">Section 5.6.6, “Viewing and editing virtual network interface information in the web console”</a>.
						</li></ul></div></section><section class="section" id="creating-and-attaching-disks-to-virtual-machines-using-the-rhel-8-web-console_managing-virtual-machine-disks-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.8.2. Adding new disks to virtual machines using the web console</h3></div></div></div><p>
					You can add new disks to virtual machines (VMs) by creating a new storage volume and attaching it to a VM using the RHEL 8 web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM for which you want to create and attach a new disk.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Disks</span>.
						</p><p class="simpara">
							The Disks pane appears with information about the disks configured for the VM.
						</p><p class="simpara">
							<span class="inlinemediaobject"><img src="cockpit_disk_info.png" alt="cockpit disk info"/></span>

						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Add Disk</span>.
						</p><p class="simpara">
							The Add Disk dialog appears. 
							<span class="inlinemediaobject"><img src="cockpit_add_disk.png" alt="cockpit add disk"/></span>

						</p></li><li class="listitem">
							Select the <span class="emphasis"><em>Create New</em></span> option.
						</li><li class="listitem"><p class="simpara">
							Configure the new disk.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Pool</strong></span> - Select the storage pool from which the virtual disk will be created.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										When creating new disks for VMs using the web console, you can select only directory-type storage pools.
									</p></div></div></li><li class="listitem">
									<span class="strong strong"><strong>Target</strong></span> - Select a target for the virtual disk that will be created.
								</li><li class="listitem">
									<span class="strong strong"><strong>Name</strong></span> - Enter a name for the virtual disk that will be created.
								</li><li class="listitem">
									<span class="strong strong"><strong>Size</strong></span> - Enter the size and select the unit (MiB or GiB) of the virtual disk that will be created.
								</li><li class="listitem">
									<span class="strong strong"><strong>Format</strong></span> - Select the format for the virtual disk that will be created. The supported types are <code class="literal">qcow2</code> and <code class="literal">raw</code>.
								</li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Persistence</strong></span> - If checked, the virtual disk is persistent. If not checked, the virtual disk is transient.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										Transient disks can only be added to VMs that are running.
									</p></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Add</span>.
						</p><p class="simpara">
							The virtual disk is created and connected to the VM.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions on viewing disk information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-disk-information-in-the-rhel-8-web-console_managing-virtual-machine-disks-using-the-rhel-8-web-console" title="5.8.1. Viewing virtual machine disk information in the web console">Section 5.8.1, “Viewing virtual machine disk information in the web console”</a>.
						</li><li class="listitem">
							For information on attaching existing disks to VMs, see <a class="xref" href="index.html#attaching-existing-disks-to-virtual-machines-using-the-rhel-8-web-console_managing-virtual-machine-disks-using-the-rhel-8-web-console" title="5.8.3. Attaching existing disks to virtual machines using the web console">Section 5.8.3, “Attaching existing disks to virtual machines using the web console”</a>.
						</li><li class="listitem">
							For information on detaching disks from VMs, see <a class="xref" href="index.html#detaching-disks-from-virtual-machines_managing-virtual-machine-disks-using-the-rhel-8-web-console" title="5.8.4. Detaching disks from virtual machines">Section 5.8.4, “Detaching disks from virtual machines”</a>.
						</li></ul></div></section><section class="section" id="attaching-existing-disks-to-virtual-machines-using-the-rhel-8-web-console_managing-virtual-machine-disks-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.8.3. Attaching existing disks to virtual machines using the web console</h3></div></div></div><p>
					The following procedure describes how to attach existing storage volumes as disks to a virtual machine (VM) using the RHEL 8 web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM to which you want to attach an existing disk.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Disks</span>.
						</p><p class="simpara">
							The Disks pane appears with information about the disks configured for the VM.
						</p><p class="simpara">
							<span class="inlinemediaobject"><img src="cockpit_disk_info.png" alt="cockpit disk info"/></span>

						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Add Disk</span>.
						</p><p class="simpara">
							The Add Disk dialog appears.
						</p><p class="simpara">
							<span class="inlinemediaobject"><img src="cockpit_add_disk.png" alt="cockpit add disk"/></span>

						</p></li><li class="listitem"><p class="simpara">
							Click the <span class="strong strong"><strong>Use Existing</strong></span> button.
						</p><p class="simpara">
							The appropriate configuration fields appear in the Add Disk dialog.
						</p><p class="simpara">
							<span class="inlinemediaobject"><img src="cockpit_attach_disk.png" alt="cockpit attach disk"/></span>

						</p></li><li class="listitem"><p class="simpara">
							Configure the disk for the VM.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Pool</strong></span> - Select the storage pool from which the virtual disk will be attached.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										When using the web console, you can select only directory-type storage pools for attaching disks to VMs.
									</p></div></div></li><li class="listitem">
									<span class="strong strong"><strong>Target</strong></span> - Select a target for the virtual disk.
								</li><li class="listitem">
									<span class="strong strong"><strong>Volume</strong></span> - Select the storage volume that will be attached.
								</li><li class="listitem">
									<span class="strong strong"><strong>Persistence</strong></span> - Check to make the virtual disk persistent. Clear to make the virtual disk transient.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Add</span>
						</p><p class="simpara">
							The selected virtual disk is attached to the VM.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions on viewing disk information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-disk-information-in-the-rhel-8-web-console_managing-virtual-machine-disks-using-the-rhel-8-web-console" title="5.8.1. Viewing virtual machine disk information in the web console">Section 5.8.1, “Viewing virtual machine disk information in the web console”</a>.
						</li><li class="listitem">
							For information on creating new disks and attaching them to VMs, see <a class="xref" href="index.html#creating-and-attaching-disks-to-virtual-machines-using-the-rhel-8-web-console_managing-virtual-machine-disks-using-the-rhel-8-web-console" title="5.8.2. Adding new disks to virtual machines using the web console">Section 5.8.2, “Adding new disks to virtual machines using the web console”</a>.
						</li><li class="listitem">
							For information on detaching disks from VMs, see <a class="xref" href="index.html#detaching-disks-from-virtual-machines_managing-virtual-machine-disks-using-the-rhel-8-web-console" title="5.8.4. Detaching disks from virtual machines">Section 5.8.4, “Detaching disks from virtual machines”</a>.
						</li></ul></div></section><section class="section" id="detaching-disks-from-virtual-machines_managing-virtual-machine-disks-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.8.4. Detaching disks from virtual machines</h3></div></div></div><p>
					The following describes how to detach disks from virtual machines (VMs) using the RHEL 8 web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM from which you want to detach an existing disk.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Disks</span>.
						</p><p class="simpara">
							The Disks pane appears with information about the disks configured for the VM.
						</p><p class="simpara">
							<span class="inlinemediaobject"><img src="cockpit_disk_info.png" alt="cockpit disk info"/></span>

						</p></li><li class="listitem">
							Click the <span class="guibutton">Remove</span> button next to the disk you want to detach from the VM. A <code class="literal">Remove Disk</code> confirmation dialog appears.
						</li><li class="listitem"><p class="simpara">
							In the confirmation dialog, click <span class="guibutton">Remove</span>.
						</p><p class="simpara">
							The virtual disk is detached from the VM.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions on viewing disk information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-disk-information-in-the-rhel-8-web-console_managing-virtual-machine-disks-using-the-rhel-8-web-console" title="5.8.1. Viewing virtual machine disk information in the web console">Section 5.8.1, “Viewing virtual machine disk information in the web console”</a>.
						</li><li class="listitem">
							For information on creating new disks and attaching them to VMs, see <a class="xref" href="index.html#creating-and-attaching-disks-to-virtual-machines-using-the-rhel-8-web-console_managing-virtual-machine-disks-using-the-rhel-8-web-console" title="5.8.2. Adding new disks to virtual machines using the web console">Section 5.8.2, “Adding new disks to virtual machines using the web console”</a>.
						</li><li class="listitem">
							For information on attaching existing disks to VMs, see <a class="xref" href="index.html#attaching-existing-disks-to-virtual-machines-using-the-rhel-8-web-console_managing-virtual-machine-disks-using-the-rhel-8-web-console" title="5.8.3. Attaching existing disks to virtual machines using the web console">Section 5.8.3, “Attaching existing disks to virtual machines using the web console”</a>.
						</li></ul></div></section></section><section class="section" id="using-the-rhel-8-web-console-for-managing-vm-vNICs_using-the-rhel-8-web-console-for-managing-vms"><div class="titlepage"><div><div><h2 class="title">5.9. Using the web console for managing virtual machine network interfaces</h2></div></div></div><p>
				Using the RHEL 8 web console, you can manage the virtual network interfaces for the virtual machines to which the web console is connected. You can:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="index.html#viewing-vNIC-information-in-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vm-vNICs" title="5.9.1. Viewing and editing virtual network interface information in the web console">View information about network interfaces and edit them</a>.
					</li><li class="listitem">
						<a class="link" href="index.html#connecting-vNICs-in-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vm-vNICs" title="5.9.2. Connecting virtual network interfaces in the web console">Add network interfaces to virtual machines</a>, and <a class="link" href="index.html#disconnecting-vNICs-in-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vm-vNICs" title="5.9.3. Disconnecting virtual network interfaces in the web console">disconnect or delete the interfaces</a>.
					</li></ul></div><section class="section" id="viewing-vNIC-information-in-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vm-vNICs"><div class="titlepage"><div><div><h3 class="title">5.9.1. Viewing and editing virtual network interface information in the web console</h3></div></div></div><p>
					The following procedure describes how to view information about the virtual network interfaces on a selected virtual machine (VM):
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM whose information you want to see.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Network Interfaces</span>.
						</p><p class="simpara">
							The Networks Interfaces pane appears with information about the virtual network interface configured for the VM.
						</p><div class="informalfigure"><div class="mediaobject"><img src="cockpit_vNIC_info.png" alt="cockpit vNIC info"/></div></div><p class="simpara">
							The information includes the following:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Type</strong></span> - The type of network interface for the VM. Types include direct, network, bridge, ethernet, hostdev, mcast, user, and server.
								</li><li class="listitem">
									<span class="strong strong"><strong>Model type</strong></span> - The model of the virtual network interface.
								</li><li class="listitem">
									<span class="strong strong"><strong>MAC Address</strong></span> - The MAC address of the virtual network interface.
								</li><li class="listitem">
									<span class="strong strong"><strong>Source</strong></span> - The source of the network interface. This is dependent on the network type.
								</li><li class="listitem">
									<span class="strong strong"><strong>State</strong></span> - The state of the virtual network interface.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							To edit the virtual network interface settings, Click <span class="guibutton">Edit</span>. The Virtual Network Interface Settings dialog opens.
						</p><div class="informalfigure"><div class="mediaobject"><img src="web-console_virtual-network-if-settings.png" alt="web console virtual network if settings"/></div></div></li><li class="listitem">
							Change the interface type, source, or model.
						</li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Save</span>. The network interface is modified.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Changes to the virtual network interface settings take effect only after restarting the VM.
							</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions on viewing information about all of the VMs to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-state-and-connection-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.1. Viewing a virtualization overview in the web console">Section 5.6.1, “Viewing a virtualization overview in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing information about the storage pools to which the web console session is connected, see <a class="xref" href="index.html#viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.2. Viewing storage pool information using the web console">Section 5.6.2, “Viewing storage pool information using the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing basic information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-basic-vm-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.3. Viewing basic virtual machine information in the web console">Section 5.6.3, “Viewing basic virtual machine information in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing resource usage for a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-resource-usage-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.4. Viewing virtual machine resource usage in the web console">Section 5.6.4, “Viewing virtual machine resource usage in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing disk information about a selected VM to which the web console session is connected, see <a class="xref" href="index.html#viewing-vm-disk-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.5. Viewing virtual machine disk information in the web console">Section 5.6.5, “Viewing virtual machine disk information in the web console”</a>.
						</li></ul></div></section><section class="section" id="connecting-vNICs-in-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vm-vNICs"><div class="titlepage"><div><div><h3 class="title">5.9.2. Connecting virtual network interfaces in the web console</h3></div></div></div><p>
					Using the RHEL 8 web console, you can reconnect disconnected virtual network interface configured for a selected virtual machine (VM).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM whose virtual network interface you want to connect.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Networks</span>.
						</p><p class="simpara">
							The Networks pane appears with information about the virtual network interfaces configured for the VM.
						</p><p class="simpara">
							<span class="inlinemediaobject"><img src="cockpit_vNIC_plug.png" alt="cockpit vNIC plug"/></span>

						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Plug</span> in the row of the virtual network interface you want to connect.
						</p><p class="simpara">
							The selected virtual network interface connects to the VM.
						</p></li></ol></div></section><section class="section" id="disconnecting-vNICs-in-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vm-vNICs"><div class="titlepage"><div><div><h3 class="title">5.9.3. Disconnecting virtual network interfaces in the web console</h3></div></div></div><p>
					Using the RHEL 8 web console, you can disconnect the virtual network interfaces connected to a selected virtual machine (VM).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM whose virtual network interface you want to disconnect.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Network Interfaces</span>.
						</p><p class="simpara">
							The Network Interfaces pane appears with information about the virtual network interfaces configured for the VM.
						</p><div class="informalfigure"><div class="mediaobject"><img src="cockpit_vNIC_disconnect.png" alt="cockpit vNIC disconnect"/></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Unplug</span> in the row of the virtual network interface you want to disconnect.
						</p><p class="simpara">
							The selected virtual network interface disconnects from the VM.
						</p></li></ol></div></section></section><section class="section" id="viewing-vm-consoles-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms"><div class="titlepage"><div><div><h2 class="title">5.10. Interacting with virtual machines using the web console</h2></div></div></div><p>
				To interact with a virtual machine (VM) in the RHEL 8 web console, you need to connect to the VM’s console. These include both graphical and serial consoles.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						To interact with the VM’s graphical interface in the web console, use <a class="link" href="index.html#viewing-guest-graphical-console-in-the-rhel-8-web-console_viewing-vm-consoles-using-the-rhel-8-web-console" title="5.10.1. Viewing the virtual machine graphical console in the web console">the graphical console</a>.
					</li><li class="listitem">
						To interact with the VM’s graphical interface in a remote viewer, use <a class="link" href="index.html#viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-8-web-console" title="5.10.2. Viewing the graphical console in a remote viewer using the web console">the graphical console in remote viewers</a>.
					</li><li class="listitem">
						To interact with the VM’s CLI in the web console, use <a class="link" href="index.html#viewing-vm-serial-console-in-the-rhel-8-web-console_viewing-vm-consoles-using-the-rhel-8-web-console" title="5.10.3. Viewing the virtual machine serial console in the web console">the serial console</a>.
					</li></ul></div><section class="section" id="viewing-guest-graphical-console-in-the-rhel-8-web-console_viewing-vm-consoles-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.10.1. Viewing the virtual machine graphical console in the web console</h3></div></div></div><p>
					Using the virtual machine (VM) console interface, you can view the graphical output of a selected VM in the RHEL 8 web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li><li class="listitem">
							Ensure that both the host and the VM support a graphical interface.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM whose graphical console you want to view.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Consoles</span>.
						</p><p class="simpara">
							The graphical console appears in the web interface.
						</p></li></ol></div><div class="informalfigure"><div class="mediaobject"><img src="cockpit_graphical_console_in_cockpit.png" alt="cockpit graphical console in cockpit"/></div></div><p>
					You can interact with the VM console using the mouse and keyboard in the same manner you interact with a real machine. The display in the VM console reflects the activities being performed on the VM.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The host on which the web console is running may intercept specific key combinations, such as <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span>, preventing them from being sent to the VM.
					</p><p>
						To send such key combinations, click the <span class="guibutton">Send key</span> menu and select the key sequence to send.
					</p><p>
						For example, to send the <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span> combination to the VM, click the <span class="guibutton">Send key</span> menu and select the <span class="guibutton">Ctrl+Alt+F1</span> menu entry.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions on viewing the graphical console in a remote viewer, see <a class="xref" href="index.html#viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-8-web-console" title="5.10.2. Viewing the graphical console in a remote viewer using the web console">Section 5.10.2, “Viewing the graphical console in a remote viewer using the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing the serial console in the web console, see <a class="xref" href="index.html#viewing-vm-serial-console-in-the-rhel-8-web-console_viewing-vm-consoles-using-the-rhel-8-web-console" title="5.10.3. Viewing the virtual machine serial console in the web console">Section 5.10.3, “Viewing the virtual machine serial console in the web console”</a>.
						</li></ul></div></section><section class="section" id="viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.10.2. Viewing the graphical console in a remote viewer using the web console</h3></div></div></div><p>
					You can view the graphical console of a selected virtual machine (VM) in a remote viewer, such as virt-viewer. For instructions, see below.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You can launch Virt Viewer from within the web console. Other VNC and SPICE remote viewers can be launched manually.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li><li class="listitem">
							Ensure that both the host and the VM support a graphical interface.
						</li><li class="listitem"><p class="simpara">
							Before you can view the graphical console in Virt Viewer, Virt Viewer must be installed on the machine to which the web console is connected.
						</p><p class="simpara">
							To view information on installing Virt Viewer, select the <span class="guimenu">Graphics Console in Desktop Viewer</span> Console Type and click <span class="strong strong"><strong>More Information</strong></span> in the Consoles window.
						</p><div class="informalfigure"><div class="mediaobject"><img src="cockpit_install_vv_info.png" alt="cockpit install vv info"/></div></div></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Some browser extensions and plug-ins do not allow the web console to open Virt Viewer.
					</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM whose graphical console you want to view.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Consoles</span>.
						</p><p class="simpara">
							The graphical console appears in the web interface.
						</p></li><li class="listitem"><p class="simpara">
							Select the <span class="guimenu">Graphics Console in Desktop Viewer</span> Console Type.
						</p><div class="informalfigure"><div class="mediaobject"><img src="cockpit_launch_graphical_console_in_vv.png" alt="cockpit launch graphical console in vv"/></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Launch Remote Viewer</span>.
						</p><p class="simpara">
							The graphical console appears in Virt Viewer.
						</p><div class="informalfigure"><div class="mediaobject"><img src="virt-viewer-GUI.png" alt="virt viewer GUI"/></div></div></li></ol></div><p>
					You can interact with the VM console using the mouse and keyboard in the same manner you interact with a real machine. The display in the VM console reflects the activities being performed on the VM.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The server on which the web console is running can intercept specific key combinations, such as <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span>, preventing them from being sent to the VM.
					</p><p>
						To send such key combinations, click the <span class="guibutton">Send key</span> menu and select the key sequence to send.
					</p><p>
						For example, to send the <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span> combination to the VM, click the <span class="guibutton">Send key</span> menu and select the <span class="guibutton">Ctrl+Alt+F1</span> menu entry.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If launching a remote viewer graphics console in the web console does not work or is not optimal, you can use the <code class="literal">Manual Connection</code> information, displayed on the right side of the <span class="guimenu">Graphics Console</span> pane.
						</p><div class="informalfigure"><div class="mediaobject"><img src="cockpit_manual_viewer_info.png" alt="cockpit manual viewer info"/></div></div><p class="simpara">
							Enter the information in a SPICE or VNC viewer application, such as Virt Viewer.
						</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions on viewing the graphical console in the web console, see <a class="xref" href="index.html#viewing-guest-graphical-console-in-the-rhel-8-web-console_viewing-vm-consoles-using-the-rhel-8-web-console" title="5.10.1. Viewing the virtual machine graphical console in the web console">Section 5.10.1, “Viewing the virtual machine graphical console in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing the serial console in the web console, see <a class="xref" href="index.html#viewing-vm-serial-console-in-the-rhel-8-web-console_viewing-vm-consoles-using-the-rhel-8-web-console" title="5.10.3. Viewing the virtual machine serial console in the web console">Section 5.10.3, “Viewing the virtual machine serial console in the web console”</a>.
						</li></ul></div></section><section class="section" id="viewing-vm-serial-console-in-the-rhel-8-web-console_viewing-vm-consoles-using-the-rhel-8-web-console"><div class="titlepage"><div><div><h3 class="title">5.10.3. Viewing the virtual machine serial console in the web console</h3></div></div></div><p>
					You can view the serial console of a selected virtual machine (VM) in the RHEL 8 web console. This is useful when the host machine or the VM is not configured with a graphical interface.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> pane, click a row with the name of the VM whose serial console you want to view.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Consoles</span>.
						</p><p class="simpara">
							The graphical console appears in the web interface.
						</p></li><li class="listitem"><p class="simpara">
							Select the <span class="guimenu">Serial Console</span> Console Type.
						</p><p class="simpara">
							The serial console appears in the web interface.
						</p><div class="informalfigure"><div class="mediaobject"><img src="cockpit_serial_console_in_cockpit.png" alt="cockpit serial console in cockpit"/></div></div></li></ol></div><p>
					You can disconnect and reconnect the serial console from the VM.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							To disconnect the serial console from the VM, click <span class="guibutton">Disconnect</span>.
						</li><li class="listitem">
							To reconnect the serial console to the VM, click <span class="guibutton">Reconnect</span>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions on viewing the graphical console in the web console, see <a class="xref" href="index.html#viewing-guest-graphical-console-in-the-rhel-8-web-console_viewing-vm-consoles-using-the-rhel-8-web-console" title="5.10.1. Viewing the virtual machine graphical console in the web console">Section 5.10.1, “Viewing the virtual machine graphical console in the web console”</a>.
						</li><li class="listitem">
							For instructions on viewing the graphical console in a remote viewer, see <a class="xref" href="index.html#viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-8-web-console" title="5.10.2. Viewing the graphical console in a remote viewer using the web console">Section 5.10.2, “Viewing the graphical console in a remote viewer using the web console”</a>.
						</li></ul></div></section></section><section class="section" id="creating-storage-pools-using-the-web-console_using-the-rhel-8-web-console-for-managing-vms"><div class="titlepage"><div><div><h2 class="title">5.11. Creating storage pools using the web console</h2></div></div></div><p>
				You can create storage pools using the RHEL 8 web console. For instructions, see below.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						To use the web console to manage virtual machines (VMs), you must <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Click <span class="guibutton">Storage Pools</span> at the top of the Virtual Machines tab. The Storage Pools window appears, showing a list of configured storage pools.
					</p><div class="informalfigure"><div class="mediaobject"><img src="web-console-storage-pools-window.png" alt="web console storage pools window"/></div></div></li><li class="listitem"><p class="simpara">
						Click <span class="guibutton">Create Storage Pool</span>. The Create Storage Pool dialog appears.
					</p><div class="informalfigure"><div class="mediaobject"><img src="cockpit_create-storage-pool.png" alt="cockpit create storage pool"/></div></div></li><li class="listitem"><p class="simpara">
						Enter the following information in the Create Storage Pool dialog:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Connection</strong></span> - The connection to the host to be used by the storage pool.
							</li><li class="listitem">
								<span class="strong strong"><strong>Name</strong></span> - The name of the storage pool.
							</li><li class="listitem">
								<span class="strong strong"><strong>Type</strong></span> - The type of the storage pool. This can be a file-system directory, a network file system, or an iSCSI target.
							</li><li class="listitem">
								<span class="strong strong"><strong>Target Path</strong></span> - The storage pool path on the host’s file system.
							</li><li class="listitem">
								<span class="strong strong"><strong>Startup</strong></span> - Whether or not the storage pool starts when the host boots.
							</li></ul></div></li><li class="listitem">
						Click <span class="guibutton">Create</span>. The storage pool is created, the Create Storage Pool dialog closes, and the new storage pool appears in the list of storage pools.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about storage pools, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#understanding-storage-pools_understanding-virtual-machine-storage">Understanding storage pools</a>.
					</li><li class="listitem">
						For instructions on viewing information about storage pools using the web console, see <a class="xref" href="index.html#viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-8-web-console" title="5.6.2. Viewing storage pool information using the web console">Section 5.6.2, “Viewing storage pool information using the web console”</a>.
					</li></ul></div></section><section class="section" id="differences-between-virtualization-features-in-virtual-machine-manager-and-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms"><div class="titlepage"><div><div><h2 class="title">5.12. Differences between virtualization features in virtual machine manager and the web console</h2></div></div></div><p>
				The deprecated Virtual Machine Manager (<code class="literal">virt-manager</code>) application and its replacement, the RHEL 8 web console, do not have the same functionality. The following table highlights the features that are available in virt-manager but not available in the RHEL 8.0 web console.
			</p><p>
				If a feature is available in a later version of RHEL 8, the minimum RHEL 8 version appears in the <span class="emphasis"><em>Web console</em></span> column.
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><tbody><tr><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>Feature</strong></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>Web console</strong></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>Alternative method using CLI</strong></span>
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								Setting a virtual machine to start when the host boots
							</p>
							 </td><td align="left" valign="top"> <p>
								8.1
							</p>
							 </td><td align="left" valign="top"> <p>
								<code class="literal">virsh autostart</code>
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								Suspending a virtual machine
							</p>
							 </td><td align="left" valign="top"> <p>
								8.1
							</p>
							 </td><td align="left" valign="top"> <p>
								<code class="literal">virsh suspend</code>
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								Resuming a suspended virtual machine
							</p>
							 </td><td align="left" valign="top"> <p>
								8.1
							</p>
							 </td><td align="left" valign="top"> <p>
								<code class="literal">virsh resume</code>
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								Creating new storage pools of the following types:
							</p>
							 <p>
								• Partition-based
							</p>
							 <p>
								• GlusterFS-based
							</p>
							 <p>
								• LVM-based
							</p>
							 <p>
								• vHBA-based with SCSI devices
							</p>
							 <p>
								• Multipath-based
							</p>
							 <p>
								• RBD-based
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="emphasis"><em>UNAVAILABLE</em></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<code class="literal">virsh pool-define</code>
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								Creating an iSCSI storage pool
							</p>
							 </td><td align="left" valign="top"> <p>
								8.1
							</p>
							 </td><td align="left" valign="top"> <p>
								<code class="literal">virsh pool-define</code>
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								Creating a new storage volume
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="emphasis"><em>UNAVAILABLE</em></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<code class="literal">virsh vol-create</code>
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								Adding a new virtual network
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="emphasis"><em>UNAVAILABLE</em></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<code class="literal">virsh net-create</code> or <code class="literal">virsh net-define</code>
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								Deleting a virtual network
							</p>
							 </td><td align="left" valign="top"> <p>
								UNAVAILABLE
							</p>
							 </td><td align="left" valign="top"> <p>
								<code class="literal">virsh net-undefine</code>
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								Creating a bridge from a host machine’s interface to a virtual machine
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="emphasis"><em>UNAVAILABLE</em></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<code class="literal">virsh iface-bridge</code>
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								Creating a snapshot
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="emphasis"><em>UNAVAILABLE</em></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<code class="literal">virsh snapshot-create-as</code>
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								Reverting to a snapshot
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="emphasis"><em>UNAVAILABLE</em></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<code class="literal">virsh snapshot-revert</code>
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								Deleting a snapshot
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="emphasis"><em>UNAVAILABLE</em></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<code class="literal">virsh snapshot-delete</code>
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								Cloning a virtual machine
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="emphasis"><em>UNAVAILABLE</em></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<code class="literal">virt-clone</code>
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								Migrating a virtual machine to another host machine
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="emphasis"><em>UNAVAILABLE</em></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<code class="literal">virsh migrate</code>
							</p>
							 </td></tr></tbody></table></div></section></section><section class="chapter" id="saving-and-restoring-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Saving and restoring virtual machines</h1></div></div></div><p>
			To free up system resources, you can shut down a virtual machine (VM) running on that system. However, when you require the VM again, you must boot up the guest operating system (OS) and restart the applications, which may take a considerable amount of time. To reduce this downtime and enable the VM workload to start running sooner, you can use the save and restore feature to avoid the OS shutdown and boot sequence entirely.
		</p><p>
			This section provides information about saving VMs, as well as about restoring them to the same state without a full VM boot-up.
		</p><section class="section" id="how-saving-and-restoring-vms-works_saving-and-restoring-virtual-machines"><div class="titlepage"><div><div><h2 class="title">6.1. How saving and restoring virtual machines works</h2></div></div></div><p>
				Saving a virtual machine (VM) saves its memory and device state to the host’s disk, and immediately stops the VM process. You can save a VM that is either in a running or paused state, and upon restoring, the VM will return to that state.
			</p><p>
				This process frees up RAM and CPU resources on the host system in exchange for disk space, which may improve the host system performance. When the VM is restored, because the guest OS does not need to be booted, the long boot-up period is avoided as well.
			</p><p>
				To save a VM, you can use the command-line interface (CLI). For instructions, see <a class="link" href="index.html#saving-a-virtual-machines-using-cli_saving-and-restoring-virtual-machines" title="6.2. Saving a virtual machine using the command line interface">Saving virtual machines using the command line interface</a>.
			</p><p>
				To restore a VM you can use the <a class="link" href="index.html#starting-a-virtual-machine-using-the-command-line-interface_saving-and-restoring-virtual-machines" title="6.3. Starting a virtual machine using the command-line interface">CLI</a> or the <a class="link" href="index.html#powering-up-vms-using-the-rhel-8-web-console_saving-and-restoring-virtual-machines" title="6.4. Powering up virtual machines using the web console">web console GUI</a>.
			</p></section><section class="section" id="saving-a-virtual-machines-using-cli_saving-and-restoring-virtual-machines"><div class="titlepage"><div><div><h2 class="title">6.2. Saving a virtual machine using the command line interface</h2></div></div></div><p>
				To save a virtual machine (VM) using the command line, follow the procedure below.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Make sure you have sufficient disk space to save the VM and its configuration. Note that the space occupied by the VM depends on the amount of RAM allocated to that VM.
					</li><li class="listitem">
						Make sure the VM is persistent.
					</li><li class="listitem">
						<span class="strong strong"><strong>Optional:</strong></span> Back up important data from the VM if required.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the <code class="literal">virsh managedsave</code> utility.
					</p><p class="simpara">
						For example, the following command stops the <span class="emphasis"><em>demo-guest1</em></span> VM and saves its configuration.
					</p><pre class="literallayout"><span class="strong strong"><strong># virsh managedsave demo-guest1</strong></span>
Domain demo-guest1 saved by libvirt</pre><p class="simpara">
						The saved VM file is located by default in the <span class="strong strong"><strong>/var/lib/libvirt/qemu/save</strong></span> directory as <span class="strong strong"><strong>demo-guest1.save</strong></span>.
					</p><p class="simpara">
						The next time the VM is <a class="link" href="index.html#starting-a-virtual-machine-using-the-command-line-interface_saving-and-restoring-virtual-machines" title="6.3. Starting a virtual machine using the command-line interface">started</a>, it will automatically restore the saved state from the above file.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You can make sure that the VM is in a saved state or shut off using the <code class="literal">virsh list</code> utility.
					</p><p class="simpara">
						To list the VMs that have managed save enabled, use the following command. The VMs listed as <span class="emphasis"><em>saved</em></span> have their managed save enabled.
					</p><pre class="literallayout"><span class="strong strong"><strong># virsh list --managed-save --all</strong></span>
Id    Name                           State
----------------------------------------------------
-     demo-guest1                    saved
-     demo-guest2                    shut off</pre><p class="simpara">
						To list the VMs that have a managed save image:
					</p><pre class="literallayout"><span class="strong strong"><strong># virsh list --with-managed-save --all</strong></span>
Id    Name                           State
----------------------------------------------------
-     demo-guest1                    shut off</pre><p class="simpara">
						Note that to list the saved VMs that are in a shut off state, you must use the <code class="literal">--all</code> or <code class="literal">--inactive</code> options with the command.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If the saved VM file becomes corrupted or unreadable, restoring the VM will initiate a standard VM boot instead.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more <code class="literal">virsh managedsave</code> arguments, see the <code class="literal">virsh</code> man page.
					</li><li class="listitem">
						For instructions on restoring a saved VM using the command-line interface, see <a class="xref" href="index.html#starting-a-virtual-machine-using-the-command-line-interface_saving-and-restoring-virtual-machines" title="6.3. Starting a virtual machine using the command-line interface">Section 6.3, “Starting a virtual machine using the command-line interface”</a>.
					</li><li class="listitem">
						For instructions on restoring a saved VM using the web console, see <a class="xref" href="index.html#powering-up-vms-using-the-rhel-8-web-console_saving-and-restoring-virtual-machines" title="6.4. Powering up virtual machines using the web console">Section 6.4, “Powering up virtual machines using the web console”</a>.
					</li></ul></div></section><section class="section" id="starting-a-virtual-machine-using-the-command-line-interface_saving-and-restoring-virtual-machines"><div class="titlepage"><div><div><h2 class="title">6.3. Starting a virtual machine using the command-line interface</h2></div></div></div><p>
				You can use the command line interface to start a shutdown virtual machine (VM) or restore a saved VM. Follow the procedure below.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An inactive VM that is already defined.
					</li><li class="listitem">
						The name of the VM.
					</li><li class="listitem"><p class="simpara">
						For remote VMs,
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The IP address of the host where the VM is located.
							</li><li class="listitem">
								Root access privileges to the host.
							</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						For a local VM, use the <code class="literal">virsh start</code> utility.
					</p><p class="simpara">
						For example, the following command starts the <span class="emphasis"><em>demo-guest1</em></span> VM.
					</p><pre class="literallayout"><span class="strong strong"><strong># virsh start demo-guest1</strong></span>
Domain demo-guest1 started</pre></li><li class="listitem"><p class="simpara">
						For a VM located on a remote host, use the <code class="literal">virsh start</code> utility along with the QEMU+SSH connection to the host.
					</p><p class="simpara">
						For example, the following command starts the <span class="emphasis"><em>demo-guest1</em></span> VM on the 192.168.123.123 host.
					</p><pre class="literallayout"><span class="strong strong"><strong># virsh -c qemu+ssh://root@192.168.123.123/system start demo-guest1</strong></span>

root@192.168.123.123's password:
Last login: Mon Feb 18 07:28:55 2019

Domain demo-guest1 started</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional Resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more <code class="literal">virsh start</code> arguments, see the <code class="literal">virsh</code> man page.
					</li><li class="listitem">
						For simplifying VM management on remote hosts, see <a class="link" href="index.html#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines" title="2.4.5. Setting up easy access to remote virtualization hosts">modifying your libvirt and SSH configuration</a>.
					</li><li class="listitem">
						You can use the <code class="literal">virsh autostart</code> utility to configure a VM to start automatically when the host boots up. For more information about autostart, see the <code class="literal">virsh autostart</code> help page.
					</li></ul></div></section><section class="section" id="powering-up-vms-using-the-rhel-8-web-console_saving-and-restoring-virtual-machines"><div class="titlepage"><div><div><h2 class="title">6.4. Powering up virtual machines using the web console</h2></div></div></div><p>
				If a virtual machine (VM) is in the <span class="strong strong"><strong>shut off</strong></span> state, you can start it using the RHEL 8 web console.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An inactive VM that is already defined.
					</li><li class="listitem">
						The name of the VM.
					</li><li class="listitem">
						To use the web console to manage VMs, <a class="link" href="index.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="5.2. Setting up the web console to manage virtual machines">install the web console VM plug-in</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VM you want to start.
					</p><p class="simpara">
						The row expands to reveal the Overview pane with basic information about the selected VM and controls for shutting down and deleting the VM.
					</p></li><li class="listitem"><p class="simpara">
						Click <span class="guibutton">Run</span>.
					</p><p class="simpara">
						The VM starts, and you can <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#assembly_connecting-to-virtual-machines_virt-getting-started">connect to its console or graphical output</a>.
					</p></li><li class="listitem">
						<span class="strong strong"><strong>Optional:</strong></span> To set up the VM to start automatically when the host starts, click the <code class="literal">Autostart</code> checkbox.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For information on shutting down a VM, see <a class="xref" href="index.html#powering-down-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.2. Powering down virtual machines in the web console">Section 5.5.2, “Powering down virtual machines in the web console”</a>.
					</li><li class="listitem">
						For information on restarting a VM, see <a class="xref" href="index.html#restarting-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.3. Restarting virtual machines using the web console">Section 5.5.3, “Restarting virtual machines using the web console”</a>.
					</li><li class="listitem">
						For information on sending a non-maskable interrupt to a VM, see <a class="xref" href="index.html#sending-NMIs-to-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="5.5.4. Sending non-maskable interrupts to VMs using the web console">Section 5.5.4, “Sending non-maskable interrupts to VMs using the web console”</a>.
					</li></ul></div></section></section><section class="chapter" id="cloning-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Chapter 7. Cloning virtual machines</h1></div></div></div><p>
			To quickly create a new virtual machine (VM) with a specific set of properties, you can <span class="emphasis"><em>clone</em></span> an existing VM.
		</p><p>
			Cloning creates a new VM that uses its own disk image for storage, but most of the clone’s configuration and stored data is identical to the source VM. This makes it possible to prepare a number of VMs optimized for a certain task without the need to optimize each VM individually.
		</p><section class="section" id="how-cloning-virtual-machines-works_cloning-virtual-machines"><div class="titlepage"><div><div><h2 class="title">7.1. How cloning virtual machines works</h2></div></div></div><p>
				Cloning a virtual machine (VM) copies the XML configuration of the source VM and its disk images, and makes adjustments to the configurations to ensure the uniqueness of the new VM. This includes changing the name of the VM and ensuring it uses the disk image clones. Nevertheless, the data stored on the clone’s virtual disks is identical to the source VM.
			</p><p>
				This process is faster than creating a new VM and installing it with a guest operating system, and can be used to rapidly generate VMs with a specific configuration and content.
			</p><p>
				If you are planning to create multiple clones of a VM, first create a VM <span class="emphasis"><em>template</em></span> that does not contain:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						unique settings, such as persistent network MAC configuration, which can prevent the clones from working correctly.
					</li><li class="listitem">
						sensitive data, such as SSH keys and password files.
					</li></ul></div><p>
				For instructions, see <a class="xref" href="index.html#preparing-a-virtual-machine-template_cloning-virtual-machines" title="7.2. Creating a virtual machine template">Section 7.2, “Creating a virtual machine template”</a>.
			</p><p>
				To clone a VM, you can use the RHEL 8 CLI. For details, see <a class="xref" href="index.html#cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines" title="7.3. Cloning a virtual machine using the command-line interface">Section 7.3, “Cloning a virtual machine using the command-line interface”</a>.
			</p></section><section class="section" id="preparing-a-virtual-machine-template_cloning-virtual-machines"><div class="titlepage"><div><div><h2 class="title">7.2. Creating a virtual machine template</h2></div></div></div><p>
				To ensure that the virtual machine (VM) clones run correctly, remove information and configurations that are unique to the source VM, such as SSH keys or persistent network MAC configuration, before cloning the source VM.
			</p><p>
				This creates a VM <span class="emphasis"><em>template</em></span>, which can be used to easily and safely create VM clones.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The <code class="literal">virt-sysprep</code> utility is installed on your host:
					</p><pre class="literallayout"># <span class="strong strong"><strong>yum install /usr/bin/virt-sysprep</strong></span></pre></li><li class="listitem">
						The VM intended as a template is shut down.
					</li><li class="listitem"><p class="simpara">
						You must know where the disk image for the source VM is located, and be the owner of the VM’s disk image file.
					</p><p class="simpara">
						Note that disk images for VMs created in the <a class="link" href="index.html#automatic-features-for-virtual-machine-security_securing-virtual-machines-in-rhel-8" title="15.4. Automatic features for virtual machine security">system session</a> of libvirt are by default located in the <code class="literal">/var/lib/libvirt/images</code> directory and owned by the root user:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>ls -la /var/lib/libvirt/images</strong></span>
-rw-------.  1 root root  9665380352 Jul 23 14:50 a-really-important-vm.qcow2
-rw-------.  1 root root  8591507456 Jul 26  2017 an-actual-vm-that-i-use.qcow2
-rw-------.  1 root root  8591507456 Jul 26  2017 totally-not-a-fake-vm.qcow2
-rw-------.  1 root root 10739318784 Sep 20 17:57 another-vm-example.qcow2</pre></li><li class="listitem">
						<span class="strong strong"><strong>Optional:</strong></span> Any important data on the VM’s disk has been backed up. If you want to preserve the source VM intact, <a class="link" href="index.html#cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines" title="7.3. Cloning a virtual machine using the command-line interface">clone</a> it first and edit the clone to create a template.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Ensure you are logged in as the owner of the VM’s disk image:
					</p><pre class="literallayout"># <span class="strong strong"><strong>whoami</strong></span>
root</pre></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Optional:</strong></span> Copy the disk image of the VM.
					</p><pre class="literallayout"># <span class="strong strong"><strong>cp /var/lib/libvirt/images/a-really-important-vm.qcow2 /var/lib/libvirt/images/a-really-important-vm-original.qcow2</strong></span></pre><p class="simpara">
						This is used later to verify the VM was successfully turned into a template.
					</p></li><li class="listitem"><p class="simpara">
						Use the following command, and replace <span class="emphasis"><em>/var/lib/libvirt/images/a-really-important-vm.qcow2</em></span> with the path to the disk image of the source VM.
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>virt-sysprep -a <span class="emphasis"><em>/var/lib/libvirt/images/a-really-important-vm.qcow2</em></span></strong></span>
[   0.0] Examining the guest ...
[   7.3] Performing "abrt-data" ...
[   7.3] Performing "backup-files" ...
[   9.6] Performing "bash-history" ...
[   9.6] Performing "blkid-tab" ...
[...]</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To confirm that the process was successful, compare the modified disk image to the original one. The following example shows a successful creation of a template:
					</p><pre class="literallayout"># <span class="strong strong"><strong>virt-diff -a <span class="emphasis"><em>/var/lib/libvirt/images/a-really-important-vm-orig.qcow2</em></span> -A <span class="emphasis"><em>/var/lib/libvirt/images/a-really-important-vm.qcow2</em></span></strong></span>
- - 0644       1001 /etc/group-
- - 0000        797 /etc/gshadow-
= - 0444         33 /etc/machine-id
[...]
- - 0600        409 /home/username/.bash_history
- d 0700          6 /home/username/.ssh
- - 0600        868 /root/.bash_history
[...]</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Using the <code class="literal">virt-sysprep</code> command as shown above performs the standard VM template preparation. For more information, see the <code class="literal">OPERATIONS</code> section in the <code class="literal">virt-sysprep</code> man page.
					</p><p class="simpara">
						To customize which specific operations you want <code class="literal">virt-sysprep</code> to perform, use the <code class="literal">--operations</code> option, and specify the intended operations as a comma-separated list.
					</p></li><li class="listitem">
						For instructions on cloning a VM template, see <a class="xref" href="index.html#cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines" title="7.3. Cloning a virtual machine using the command-line interface">Section 7.3, “Cloning a virtual machine using the command-line interface”</a>.
					</li></ul></div></section><section class="section" id="cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines"><div class="titlepage"><div><div><h2 class="title">7.3. Cloning a virtual machine using the command-line interface</h2></div></div></div><p>
				To quickly create a new virtual machine (VM) with a specific set of properties, for example for testing purposes, you can clone an existing VM. To do so using the CLI, follow the instructions below.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The source VM is shut down.
					</li><li class="listitem">
						Ensure that there is sufficient disk space to store the cloned disk images.
					</li><li class="listitem">
						<span class="strong strong"><strong>Optional:</strong></span> When creating multiple VM clones, remove unique data and settings from the source VM to ensure the cloned VMs work properly. For instructions, see <a class="xref" href="index.html#preparing-a-virtual-machine-template_cloning-virtual-machines" title="7.2. Creating a virtual machine template">Section 7.2, “Creating a virtual machine template”</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the <code class="literal">virt-clone</code> utility with options that are appropriate for your environment and use case.
					</p><p class="simpara">
						<span class="strong strong"><strong>Sample use cases</strong></span>
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								The following command clones a local VM named <span class="emphasis"><em>doppelganger</em></span> and creates the <span class="emphasis"><em>doppelganger-clone</em></span> VM. It also creates the <span class="emphasis"><em>doppelganger-clone.qcow2</em></span> disk image in the same location as the disk image of the original VM, and with the same data:
							</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>virt-clone --original doppelganger --auto-clone</strong></span>
Allocating 'doppelganger-clone.qcow2'                            | 50.0 GB  00:05:37

Clone 'doppelganger-clone' created successfully.</pre></li><li class="listitem"><p class="simpara">
								The following command clones a VM named <span class="emphasis"><em>kal-el</em></span> located on the remote system 10.0.0.1, and creates a local VM named <span class="emphasis"><em>bizarro</em></span>, which uses only two of <span class="emphasis"><em>kal-el</em></span>'s multiple disks. Note that running this command also requires root privileges for 10.0.0.1.
							</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>virt-clone --connect qemu+ssh://root@10.0.0.1/system --original <span class="emphasis"><em>kal-el</em></span> --name <span class="emphasis"><em>bizarro</em></span> --file /var/lib/libvirt/images/solitude1.qcow2 --file /var/lib/libvirt/images/solitude2.qcow2</strong></span>
Allocating 'solitude1.qcow2'                                      | 78.0 GB  00:05:37
Allocating 'solitude2.qcow2'                                      | 80.0 GB  00:05:37

Clone 'bizzaro' created successfully.</pre></li></ul></div></li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
					To verify the VM has been successfully cloned and is working correctly:
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Confirm the clone has been added to the list of VMs on your host.
					</p><pre class="literallayout"># <span class="strong strong"><strong>virsh list --all</strong></span>
Id   Name                  State
---------------------------------------
-    doppelganger          shut off
-    doppelganger-clone    shut off</pre></li><li class="listitem"><p class="simpara">
						Start the clone and observe if it boots up.
					</p><pre class="literallayout"><span class="strong strong"><strong># virsh start doppelganger-clone</strong></span>
Domain doppelganger-clone started</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For additional options for cloning VMs, see the <code class="literal">virt-clone</code> man page.
					</li></ul></div></section></section><section class="chapter" id="managing-virtual-devices_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Chapter 8. Managing virtual devices</h1></div></div></div><p>
			One of the most effective ways to manage the functionality, features, and performance of a virtual machine (VM) is to adjust its <span class="emphasis"><em>virtual devices</em></span>.
		</p><p>
			The following sections provide a <a class="link" href="index.html#how-virtual-devices-work_managing-virtual-devices" title="8.1. How virtual devices work">general overview</a> of what virtual devices are, and instructions on how they can be <a class="link" href="index.html#attaching-devices-to-virtual-machines_managing-virtual-devices" title="8.2. Attaching devices to virtual machines">attached</a>, <a class="link" href="index.html#attaching-devices-to-virtual-machines_managing-virtual-devices" title="8.2. Attaching devices to virtual machines">modified</a>, or <a class="link" href="index.html#removing-devices-from-virtual-machines_managing-virtual-devices" title="8.4. Removing devices from virtual machines">removed</a> from a VM.
		</p><section class="section" id="how-virtual-devices-work_managing-virtual-devices"><div class="titlepage"><div><div><h2 class="title">8.1. How virtual devices work</h2></div></div></div><div class="formalpara"><p class="title"><strong>The basics</strong></p><p>
					Just like physical machines, virtual machines (VMs) require specialized devices to provide functions to the system, such as processing power, memory, storage, networking, or graphics. Physical systems usually use hardware devices for these purposes. However, because VMs work as software implements, they need to use software abstractions of such devices instead, referred to as <span class="emphasis"><em>virtual devices</em></span>.
				</p></div><p>
				Virtual devices attached to a VM can be configured when <a class="link" href="index.html#assembly_creating-virtual-machines_virt-getting-started" title="2.2. Creating virtual machines">creating the VM</a>, and can also be managed on an existing VM. Generally, virtual devices can be attached or detached from a VM only when the VM is shut off, but some can be added or removed when the VM is running. This feature is referred to as device <span class="emphasis"><em>hot plug</em></span> and <span class="emphasis"><em>hot unplug</em></span>.
			</p><p>
				When creating a new VM, <code class="literal">libvirt</code> automatically creates and configures a default set of essential virtual devices, unless specified otherwise by the user. These are based on the host system architecture and machine type, and usually include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						the CPU
					</li><li class="listitem">
						memory
					</li><li class="listitem">
						a keyboard
					</li><li class="listitem">
						a network interface controller (NIC)
					</li><li class="listitem">
						various device controllers
					</li><li class="listitem">
						a video card
					</li><li class="listitem">
						a sound card
					</li></ul></div><p>
				To manage virtual devices after the VM is created, use the command-line interface (CLI). However, to manage <a class="link" href="index.html#managing-virtual-machine-disks-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms" title="5.8. Managing virtual machine disks using the web console">virtual storage devices</a> and <a class="link" href="index.html#using-the-rhel-8-web-console-for-managing-vm-vNICs_using-the-rhel-8-web-console-for-managing-vms" title="5.9. Using the web console for managing virtual machine network interfaces">NICs</a>, you can also use the RHEL 8 web console.
			</p><div class="formalpara"><p class="title"><strong>Performance or flexibility</strong></p><p>
					For some types of devices, RHEL 8 supports multiple implementations, often with a trade-off between performance and flexibility.
				</p></div><p>
				For example, the physical storage used for virtual disks can be represented by files in various formats, such as <code class="literal">qcow2</code> or <code class="literal">raw</code>, and presented to the VM using a variety of controllers:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						an emulated controller
					</li><li class="listitem">
						<code class="literal">virtio-scsi</code>
					</li><li class="listitem">
						<code class="literal">virtio-blk</code>
					</li></ul></div><p>
				An emulated controller is slower than a <code class="literal">virtio</code> controller, because <code class="literal">virtio</code> devices are designed specifically for virtualization purposes. On the other hand, emulated controllers make it possible to run operating systems that have no drivers for <code class="literal">virtio</code> devices. Similarly, <code class="literal">virtio-scsi</code> offers a more complete support for SCSI commands, and makes it possible to attach a larger number of disks to the VM. Finally, <code class="literal">virtio-blk</code> provides better performance than both <code class="literal">virtio-scsi</code> and emulated controllers, but a more limited range of use-cases. For example, attaching a physical disk as a LUN device to a VM is not possible when using <code class="literal">virtio-blk</code>.
			</p><p>
				For more information on types of virtual devices, see <a class="xref" href="index.html#types-of-virtual-devices_managing-virtual-devices" title="8.5. Types of virtual devices">Section 8.5, “Types of virtual devices”</a>.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For instructions how to attach, remove, or modify VM storage devices using the CLI, see <a class="xref" href="index.html#managing-storage-for-virtual-machines_configuring-and-managing-virtualization" title="Chapter 9. Managing storage for virtual machines">Chapter 9, <em>Managing storage for virtual machines</em></a>.
					</li><li class="listitem">
						For instructions how to manage VM disks using the web console, see <a class="xref" href="index.html#managing-virtual-machine-disks-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms" title="5.8. Managing virtual machine disks using the web console">Section 5.8, “Managing virtual machine disks using the web console”</a>.
					</li><li class="listitem">
						For instructions how to manage VM NICs using the web console, see <a class="xref" href="index.html#using-the-rhel-8-web-console-for-managing-vm-vNICs_using-the-rhel-8-web-console-for-managing-vms" title="5.9. Using the web console for managing virtual machine network interfaces">Section 5.9, “Using the web console for managing virtual machine network interfaces”</a>.
					</li><li class="listitem">
						For instructions how to create and manage NVIDIA vGPUs, see <a class="xref" href="index.html#assembly_managing-nvidia-vgpu-devices_configuring-and-managing-virtualization" title="Chapter 10. Managing NVIDIA vGPU devices">Chapter 10, <em>Managing NVIDIA vGPU devices</em></a>.
					</li></ul></div></section><section class="section" id="attaching-devices-to-virtual-machines_managing-virtual-devices"><div class="titlepage"><div><div><h2 class="title">8.2. Attaching devices to virtual machines</h2></div></div></div><p>
				The following provides general information about creating and attaching virtual devices to your virtual machines (VMs) using the command-line interface (CLI). Some devices can also be attached to VMs <a class="link" href="index.html#using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization" title="Chapter 5. Using the web console for managing virtual machines">using the RHEL 8 web console</a>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Obtain the required options for the device you intend to attach to a VM. To see the available options for a specific device, use the <code class="literal">virt-xml --<span class="emphasis"><em>device</em></span>=?</code> command. For example:
					</p><pre class="literallayout"><span class="strong strong"><strong># virt-xml --network=?</strong></span>
--network options:
[...]
address.unit
boot_order
clearxml
driver_name
[...]</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To attach a device to a VM, use the <code class="literal">virt-xml --add-device</code> command, including the definition of the device and the required options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								For example, the following command creates a 20GB <span class="emphasis"><em>newdisk</em></span> qcow2 disk image in the <code class="literal">/var/lib/libvirt/images/</code> directory, and attaches it as a virtual disk to the running <span class="emphasis"><em>testguest</em></span> VM on the next start-up of the VM:
							</p><pre class="literallayout"><span class="strong strong"><strong># virt-xml testguest --add-device --disk /var/lib/libvirt/images/newdisk.qcow2,format=qcow2,size=20</strong></span>
Domain 'testguest' defined successfully.
Changes will take effect after the domain is fully powered off.</pre></li><li class="listitem"><p class="simpara">
								The following attaches a USB flash drive, attached as device 004 on bus 002 on the host, to the <span class="emphasis"><em>testguest2</em></span> VM while the VM is running:
							</p><pre class="literallayout"><span class="strong strong"><strong># virt-xml testguest2 --add-device --update --hostdev 002.004</strong></span>
Device hotplug successful.
Domain 'testguest2' defined successfully.</pre><p class="simpara">
								The bus-device combination for defining the USB can be obtained using the <code class="literal">lsusb</code> command.
							</p></li></ul></div></li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
					To verify the device has been added, do any of the following:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Use the <code class="literal">virsh dumpxml</code> command and see if the device’s XML definition has been added to the <code class="literal">&lt;devices&gt;</code> section in the VM’s XML configuration.
					</li><li class="listitem"><p class="simpara">
						Run the VM and test if the device is present and works properly.
					</p><p class="simpara">
						For example, the following output shows the configuration of the <span class="emphasis"><em>testguest</em></span> VM and confirms that the 002.004 USB flash disk device has been added.
					</p><pre class="literallayout"><span class="strong strong"><strong># virsh dumpxml testguest</strong></span>
[...]
&lt;hostdev mode='subsystem' type='usb' managed='yes'&gt;
  &lt;source&gt;
    &lt;vendor id='0x4146'/&gt;
    &lt;product id='0x902e'/&gt;
    &lt;address bus='2' device='4'/&gt;
  &lt;/source&gt;
  &lt;alias name='hostdev0'/&gt;
  &lt;address type='usb' bus='0' port='3'/&gt;
&lt;/hostdev&gt;
[...]</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For further information on using the <code class="literal">virt-xml</code> command, use <code class="literal">man virt-xml</code>.
					</li></ul></div></section><section class="section" id="modifying-devices-attached-to-virtual-machines_managing-virtual-devices"><div class="titlepage"><div><div><h2 class="title">8.3. Modifying devices attached to virtual machines</h2></div></div></div><p>
				The following procedure provides general instructions for modifying virtual devices using the command-line interface (CLI). Some devices attached to your VM, such as disks and NICs, can also be modified <a class="link" href="index.html#using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization" title="Chapter 5. Using the web console for managing virtual machines">using the RHEL 8 web console</a>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Obtain the required options for the device you intend to attach to a VM. To see the available options for a specific device, use the <code class="literal">virt-xml --<span class="emphasis"><em>device</em></span>=?</code> command. For example:
					</li></ul></div><pre class="literallayout"># <span class="strong strong"><strong>virt-xml --network=?</strong></span>
--network options:
[...]
address.unit
boot_order
clearxml
driver_name
[...]</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>Optional:</strong></span> Back up the XML configuration of your VM by using <code class="literal">virsh dumpxml <span class="emphasis"><em>vm-name</em></span></code> and sending the output to a file. For example, the following backs up the configuration of your <span class="emphasis"><em>Motoko</em></span> VM as the <code class="literal">motoko.xml</code> file:
					</li></ul></div><pre class="literallayout"># <span class="strong strong"><strong>virsh dumpxml Motoko &gt; motoko.xml</strong></span>
# <span class="strong strong"><strong>cat motoko.xml</strong></span>
&lt;domain type='kvm' xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0'&gt;
  &lt;name&gt;Motoko&lt;/name&gt;
  &lt;uuid&gt;ede29304-fe0c-4ca4-abcd-d246481acd18&lt;/uuid&gt;
  [...]
&lt;/domain&gt;</pre><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the <code class="literal">virt-xml --edit</code> command, including the definition of the device and the required options:
					</p><p class="simpara">
						For example, the following clears the <span class="emphasis"><em>&lt;cpu&gt;</em></span> configuration of the shut-off <span class="emphasis"><em>testguest</em></span> VM and sets it to <span class="emphasis"><em>host-model</em></span>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>virt-xml testguest --edit --cpu host-model,clearxml=yes</strong></span>
Domain 'testguest' defined successfully.</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
					To verify the device has been modified, do any of the following:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Run the VM and test if the device is present and reflects the modifications.
					</li><li class="listitem"><p class="simpara">
						Use the <code class="literal">virsh dumpxml</code> command and see if the device’s XML definition has been modified in the VM’s XML configuration.
					</p><p class="simpara">
						For example, the following output shows the configuration of the <span class="emphasis"><em>testguest</em></span> VM and confirms that the CPU mode has been configured as <span class="emphasis"><em>host-model</em></span>.
					</p><pre class="literallayout"># <span class="strong strong"><strong>virsh dumpxml testguest</strong></span>
[...]
&lt;cpu mode='host-model' check='partial'&gt;
  &lt;model fallback='allow'/&gt;
&lt;/cpu&gt;
[...]</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						If modifying a device causes your VM to become unbootable, use the <code class="literal">virsh define</code> utility to restore the XML configuration by reloading the XML configuration file you backed up previously.
					</p><pre class="literallayout"># <span class="strong strong"><strong>virsh define testguest.xml</strong></span></pre></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					For small changes to the XML configuration of your VM, you can use the <code class="literal">virsh edit</code> command - for example <code class="literal">virsh edit testguest</code>. However, do not use this method for more extensive changes, as it is more likely to break the configuration in ways that could prevent the VM from booting.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For details on using the <code class="literal">virt-xml</code> command, use <code class="literal">man virt-xml</code>.
					</li></ul></div></section><section class="section" id="removing-devices-from-virtual-machines_managing-virtual-devices"><div class="titlepage"><div><div><h2 class="title">8.4. Removing devices from virtual machines</h2></div></div></div><p>
				The following provides general information for removing virtual devices from your virtual machines (VMs) using the command-line interface (CLI). Some devices, such as disks or NICs, can also be removed from VMs <a class="link" href="index.html#using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization" title="Chapter 5. Using the web console for managing virtual machines">using the RHEL 8 web console</a>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>Optional:</strong></span> Back up the XML configuration of your VM by using <code class="literal">virsh dumpxml <span class="emphasis"><em>vm-name</em></span></code> and sending the output to a file. For example, the following backs up the configuration of your <span class="emphasis"><em>Motoko</em></span> VM as the <code class="literal">motoko.xml</code> file:
					</li></ul></div><pre class="literallayout"># <span class="strong strong"><strong>virsh dumpxml Motoko &gt; motoko.xml</strong></span>
# <span class="strong strong"><strong>cat motoko.xml</strong></span>
&lt;domain type='kvm' xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0'&gt;
  &lt;name&gt;Motoko&lt;/name&gt;
  &lt;uuid&gt;ede29304-fe0c-4ca4-abcd-d246481acd18&lt;/uuid&gt;
  [...]
&lt;/domain&gt;</pre><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the <code class="literal">virt-xml --remove-device</code> command, including a definition of the device. For example:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								The following removes the storage device marked as <span class="emphasis"><em>vdb</em></span> from the running <span class="emphasis"><em>testguest</em></span> VM after it shuts down:
							</p><pre class="literallayout"># <span class="strong strong"><strong>virt-xml testguest --remove-device --disk target=vdb</strong></span>
Domain 'testguest' defined successfully.
Changes will take effect after the domain is fully powered off.</pre></li><li class="listitem"><p class="simpara">
								The following immediately removes a USB flash drive device from the running <span class="emphasis"><em>testguest2</em></span> VM:
							</p><pre class="literallayout"># <span class="strong strong"><strong>virt-xml testguest2 --remove-device --update --hostdev type=usb</strong></span>
Device hotunplug successful.
Domain '7.4-workstation' defined successfully.</pre></li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						If removing a device causes your VM to become unbootable, use the <code class="literal">virsh define</code> utility to restore the XML configuration by reloading the XML configuration file you backed up previously.
					</p><pre class="literallayout"># <span class="strong strong"><strong>virsh define testguest.xml</strong></span></pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For details on using the <code class="literal">virt-xml</code> command, use <code class="literal">man virt-xml</code>.
					</li></ul></div></section><section class="section" id="types-of-virtual-devices_managing-virtual-devices"><div class="titlepage"><div><div><h2 class="title">8.5. Types of virtual devices</h2></div></div></div><p>
				Virtualization in RHEL 8 can present several distinct types of virtual devices that you can attach to virtual machines (VMs):
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Emulated devices</span></dt><dd><p class="simpara">
							Emulated devices are software implementations of widely used physical devices. Drivers designed for physical devices are also compatible with emulated devices. Therefore, emulated devices can be used very flexibly.
						</p><p class="simpara">
							However, since they need to faithfully emulate a particular type of hardware, emulated devices may suffer a significant performance loss compared with the corresponding physical devices or more optimized virtual devices.
						</p><p class="simpara">
							The following types of emulated devices are supported:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Virtual CPUs (vCPUs), with a large choice of CPU models available. The performance impact of emulation depends significantly on the differences between the host CPU and the emulated vCPU.
								</li><li class="listitem">
									Emulated system components, such as PCI bus controllers
								</li><li class="listitem">
									Emulated storage controllers, such as SATA, SCSI or even IDE
								</li><li class="listitem">
									Emulated sound devices, such as ICH9, ICH6 or AC97
								</li><li class="listitem">
									Emulated graphics cards, such as VGA or QXL cards
								</li><li class="listitem">
									Emulated network devices, such as rtl8139
								</li></ul></div></dd><dt><span class="term">Paravirtualized devices</span></dt><dd><p class="simpara">
							Paravirtualization provides a fast and efficient method for exposing virtual devices to VMs. Paravirtualized devices expose interfaces that are designed specifically for use in VMs, and thus significantly increase device performance. RHEL 8 provides paravirtualized devices to VMs using the <span class="emphasis"><em>virtio</em></span> API as a layer between the hypervisor and the VM. The drawback of this approach is that it requires a specific device driver in the guest operating system.
						</p><p class="simpara">
							It is recommended to use paravirtualized devices instead of emulated devices for VM whenever possible, notably if they are running I/O intensive applications. Paravirtualized devices decrease I/O latency and increase I/O throughput, in some cases bringing them very close to bare-metal performance. Other paravirtualized devices also add functionality to VMs that is not otherwise available.
						</p><p class="simpara">
							The following types of paravirtualized devices are supported:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The paravirtualized network device (<code class="literal">virtio-net</code>).
								</li><li class="listitem"><p class="simpara">
									Paravirtualized storage controllers:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											<code class="literal">virtio-blk</code> - provides block device emulation.
										</li><li class="listitem">
											<code class="literal">virtio-scsi</code> - provides more complete SCSI emulation.
										</li></ul></div></li><li class="listitem">
									The paravirtualized clock.
								</li><li class="listitem">
									The paravirtualized serial device (<code class="literal">virtio-serial</code>).
								</li><li class="listitem"><p class="simpara">
									The balloon device (<code class="literal">virtio-balloon</code>), used to share information about guest memory usage with the hypervisor.
								</p><p class="simpara">
									Note, however, that the balloon device also requires the balloon service to be installed.
								</p></li><li class="listitem">
									The paravirtualized random number generator (<code class="literal">virtio-rng</code>).
								</li><li class="listitem">
									The paravirtualized graphics card (<code class="literal">QXL</code>).
								</li></ul></div></dd><dt><span class="term">Physically shared devices</span></dt><dd><p class="simpara">
							Certain hardware platforms enable VMs to directly access various hardware devices and components. This process is known as <span class="emphasis"><em>device assignment</em></span> or <span class="emphasis"><em>passthrough</em></span>.
						</p><p class="simpara">
							When attached in this way, some aspects of the physical device are directly available to the VM as they would be to a physical machine. This provides superior performance for the device when used in the VM. However, devices physically attached to a VM become unavailable to the host, and also cannot be migrated.
						</p><p class="simpara">
							Nevertheless, some devices can be <span class="emphasis"><em>shared</em></span> across multiple VMs. For example, a single physical device can in certain cases provide multiple <span class="emphasis"><em>mediated devices</em></span>, which can then be assigned to distinct VMs.
						</p><p class="simpara">
							The following types of passthrough devices are supported:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Virtual Function I/O (VFIO) device assignment - safely exposes devices to applications or VMs using hardware-enforced DMA and interrupt isolation.
								</li><li class="listitem">
									USB, PCI, and SCSI passthrough - expose common industry standard buses directly to VMs in order to make their specific features available to guest software.
								</li><li class="listitem">
									Single-root I/O virtualization (SR-IOV) - a specification that enables hardware-enforced isolation of PCI Express resources. This makes it safe and efficient to partition a single physical PCI resource into virtual PCI functions. It is commonly used for network interface cards (NICs).
								</li><li class="listitem">
									N_Port ID virtualization (NPIV) - a Fibre Channel technology to share a single physical host bus adapter (HBA) with multiple virtual ports.
								</li><li class="listitem">
									GPUs and vGPUs - accelerators for specific kinds of graphic or compute workloads. Some GPUs can be attached directly to a VM, while certain types also offer the ability to create virtual GPUs (vGPUs) that share the underlying physical hardware.
								</li></ul></div></dd></dl></div></section><section class="section" id="managing-sr-iov-devices_managing-virtual-devices"><div class="titlepage"><div><div><h2 class="title">8.6. Managing SR-IOV devices</h2></div></div></div><p>
				An emulated virtual device often uses more CPU and memory than a hardware network device. This can limit the performance of a virtual machine (VM). However, if any devices on your virtualization host support Single Root I/O Virtualization (SR-IOV), you can use this feature to improve the device performance, and possibly also the overall performance of your VMs.
			</p><section class="section" id="what-is-sr-iov_managing-sr-iov-devices"><div class="titlepage"><div><div><h3 class="title">8.6.1. What is SR-IOV?</h3></div></div></div><p>
					Single-root I/O virtualization (SR-IOV) is a specification that enables a single PCI Express (PCIe) device to present multiple separate PCI devices, called <span class="emphasis"><em>virtual functions</em></span> (VFs), to the host system. Each of these devices:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							is able to provide the same or similar service as the original PCIe device.
						</li><li class="listitem">
							appears at a different address on the host PCI bus.
						</li><li class="listitem">
							can be assigned to a different VM using VFIO assignment.
						</li></ul></div><p>
					For example, a single SR-IOV capable network device can present VFs to multiple VMs. While all of the VFs use the same physical card, the same network connection, and the same network cable, each of the VMs directly controls its own hardware network device, and uses no extra resources from the host.
				</p><div class="formalpara"><p class="title"><strong>How SR-IOV works</strong></p><p>
						The SR-IOV functionality is possible thanks to the introduction of the following PCIe functions:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Physical functions (PFs)</strong></span> - A PCIe function that provides the functionality of its device (for example networking) to the host, but can also create and manage a set of VFs. Each SR-IOV capable device has one or more PFs.
						</li><li class="listitem">
							<span class="strong strong"><strong>Virtual functions (VFs)</strong></span> - Lightweight PCIe functions that behave as independent devices. Each VF is derived from a PF. The maximum number of VFs a device can have depends on the device hardware. Each VF can be assigned only to a single VM at a time, but a VM can have multiple VFs assigned to it.
						</li></ul></div><p>
					VMs recognize VFs as virtual devices. For example, a VF created by an SR-IOV network device appears as a network card to a VM to which it is assigned, in the same way as a physical network card appears to the host system.
				</p><div class="figure" id="idm140329466311840"><p class="title"><strong>Figure 8.1. SR-IOV architecture</strong></p><div class="figure-contents"><div class="mediaobject"><img src="virt_SR-IOV.png" alt="virt SR IOV"/></div></div></div><div class="formalpara"><p class="title"><strong>Benefits</strong></p><p>
						The primary advantages of using SR-IOV VFs rather than emulated devices are:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Improved performance
						</li><li class="listitem">
							Reduced use of host CPU and memory resources
						</li></ul></div><p>
					For example, a VF attached to a VM as a vNIC performs at almost the same level as a physical NIC, and much better than paravirtualized or emulated NICs. In particular, when multiple VFs are used simultaneously on a single host, the performance benefits can be significant.
				</p><div class="itemizedlist"><p class="title"><strong>Disadvantages</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To modify the configuration of a PF, you must first change the number of VFs exposed by the PF to zero. Therefore, you also need to remove the devices provided by these VFs from the VM to which they are assigned.
						</li><li class="listitem">
							A VM with an VFIO-assigned devices attached, including SR-IOV VFs, cannot be migrated to another host. In some cases, you can work around this limitation by pairing the assigned device with an emulated device. For example, you can <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/networking_guide/ch-configure_network_bonding">bond</a> an assigned networking VF to an emulated vNIC, and remove the VF before the migration.
						</li><li class="listitem">
							In addition, VFIO-assigned devices require pinning of VM memory, which increases the memory consumption of the VM and prevents the use of memory ballooning on the VM.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For a list of device types that support SR-IOV, see <a class="xref" href="index.html#supported-devices-for-sr-iov-assignment-in-rhel-8_managing-sr-iov-devices" title="8.6.3. Supported devices for SR-IOV assignment">Section 8.6.3, “Supported devices for SR-IOV assignment”</a>.
						</li></ul></div></section><section class="section" id="attaching-sr-iov-networking-devices-to-virtual-machines_managing-sr-iov-devices"><div class="titlepage"><div><div><h3 class="title">8.6.2. Attaching SR-IOV networking devices to virtual machines</h3></div></div></div><p>
					To attach an SR-IOV networking device to a virtual machine (VM) on an Intel or AMD host, you must create a virtual function (VF) from an SR-IOV capable network interface on the host and assign the VF as a device to a specified VM. For details, see the following instructions.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The CPU and the firmware of your host must support the I/O Memory Management Unit (IOMMU).
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									If using an Intel CPU, it must support the Intel Virtualization Technology for Directed I/O (VT-d).
								</li><li class="listitem">
									If using an AMD CPU, it must support the AMD-Vi feature.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Verify with the system vendor that the system uses Access Control Service (ACS) to provide direct memory access (DMA) isolation for PCIe topology.
						</p><p class="simpara">
							For additional information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.0/html/hardware_considerations_for_implementing_sr-iov/index">Hardware Considerations for Implementing SR-IOV</a>.
						</p></li><li class="listitem"><p class="simpara">
							The physical network device must support SR-IOV. To verify if any network devices on your system support SR-IOV, use the <code class="literal">lspci -v</code> command and look for <code class="literal">Single Root I/O Virtualization (SR-IOV)</code> in the output.
						</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>lspci -v</strong></span>
[...]
02:00.0 Ethernet controller: Intel Corporation 82576 Gigabit Network Connection (rev 01)
	Subsystem: Intel Corporation Gigabit ET Dual Port Server Adapter
	Flags: bus master, fast devsel, latency 0, IRQ 16, NUMA node 0
	Memory at fcba0000 (32-bit, non-prefetchable) [size=128K]
[...]
	Capabilities: [150] Alternative Routing-ID Interpretation (ARI)
	Capabilities: [160] Single Root I/O Virtualization (SR-IOV)
	Kernel driver in use: igb
	Kernel modules: igb
[...]</pre></li><li class="listitem"><p class="simpara">
							The host network interface you want to use for creating VFs must be running. For example, to activate the <span class="emphasis"><em>eth1</em></span> interface and verify it is running:
						</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>ip link set eth1 up</strong></span>
# <span class="strong strong"><strong>ip link show eth1</strong></span>
8: eth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
   link/ether a0:36:9f:8f:3f:b8 brd ff:ff:ff:ff:ff:ff
   vf 0 MAC 00:00:00:00:00:00, spoof checking on, link-state auto
   vf 1 MAC 00:00:00:00:00:00, spoof checking on, link-state auto
   vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto
   vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto</pre></li><li class="listitem"><p class="simpara">
							For SR-IOV device assignment to work, the IOMMU feature must be enabled in the host BIOS and kernel. To do so:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									On an Intel host, enable VT-d:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p class="simpara">
											If your Intel host uses multiple boot entries:
										</p><div class="orderedlist"><ol class="orderedlist" type="A"><li class="listitem"><p class="simpara">
													Edit the <code class="literal">/etc/default/grub</code> file and add the <code class="literal">intel_iommu=on</code> and <code class="literal">iommu=pt</code> parameters at the end of the <span class="emphasis"><em>GRUB_CMDLINE_LINUX</em></span> line:
												</p><pre class="programlisting language-bash">GRUB_CMDLINE_LINUX="crashkernel=auto resume=/dev/mapper/rhel_dell-per730-27-swap rd.lvm.lv=rhel_dell-per730-27/root rd.lvm.lv=rhel_dell-per730-27/swap console=ttyS0,115200n81 intel_iommu=on iommu=pt"</pre></li><li class="listitem"><p class="simpara">
													Regenerate the GRUB configuration:
												</p><pre class="literallayout"># <span class="strong strong"><strong>grub2-mkconfig -o /boot/grub2/grub.cfg</strong></span></pre></li><li class="listitem">
													Reboot the host.
												</li></ol></div></li><li class="listitem"><p class="simpara">
											If your Intel host uses a single boot entry:
										</p><div class="orderedlist"><ol class="orderedlist" type="A"><li class="listitem"><p class="simpara">
													Regenerate the GRUB configuration with the <code class="literal">intel_iommu=on</code> parameter:
												</p><pre class="literallayout"># <span class="strong strong"><strong>grubby --args="intel_iommu=on" --update-kernel DEFAULT</strong></span></pre></li><li class="listitem">
													Reboot the host.
												</li></ol></div></li></ul></div></li><li class="listitem"><p class="simpara">
									On an AMD host, enable AMD-Vi:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p class="simpara">
											If your AMD host uses multiple boot entries:
										</p><div class="orderedlist"><ol class="orderedlist" type="A"><li class="listitem"><p class="simpara">
													Edit the <code class="literal">/etc/default/grub</code> file and add the <code class="literal">iommu=pt</code> parameter at the end of the <span class="emphasis"><em>GRUB_CMDLINE_LINUX</em></span> line:
												</p><pre class="programlisting language-bash">GRUB_CMDLINE_LINUX="crashkernel=auto resume=/dev/mapper/rhel_dell-per730-27-swap rd.lvm.lv=rhel_dell-per730-27/root rd.lvm.lv=rhel_dell-per730-27/swap console=ttyS0,115200n81 iommu=pt"</pre></li><li class="listitem"><p class="simpara">
													Regenerate the GRUB configuration:
												</p><pre class="literallayout"># <span class="strong strong"><strong>grub2-mkconfig -o /boot/grub2/grub.cfg</strong></span></pre></li><li class="listitem">
													Reboot the host.
												</li></ol></div></li><li class="listitem"><p class="simpara">
											If your AMD host uses a single boot entry:
										</p><div class="orderedlist"><ol class="orderedlist" type="A"><li class="listitem"><p class="simpara">
													Regenerate the GRUB configuration with the <code class="literal">iommu=pt</code> parameter:
												</p><pre class="literallayout"># <span class="strong strong"><strong>grubby --args="iommu=pt" --update-kernel DEFAULT</strong></span></pre></li><li class="listitem">
													Reboot the host.
												</li></ol></div></li></ul></div></li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Optional:</strong></span> Confirm the maximum number of VFs your network device can use. To do so, use the following command and replace <span class="emphasis"><em>eth1</em></span> with your SR-IOV compatible network device.
						</p><pre class="literallayout"># <span class="strong strong"><strong>cat /sys/class/net/eth1/device/sriov_totalvfs</strong></span>
7</pre></li><li class="listitem"><p class="simpara">
							Use the following command to create a virtual function (VF):
						</p><pre class="literallayout"># <span class="strong strong"><strong>echo <span class="emphasis"><em>VF-number</em></span> &gt; /sys/class/net/<span class="emphasis"><em>network-interface</em></span>/device/sriov_numvfs</strong></span></pre><p class="simpara">
							In the command, replace:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="emphasis"><em>VF-number</em></span> with the number of VFs you want to create on the PF.
								</li><li class="listitem">
									<span class="emphasis"><em>network-interface</em></span> with the name of the network interface for which the VFs will be created.
								</li></ul></div><p class="simpara">
							The following example creates 2 VFs from the eth1 network interface:
						</p><pre class="literallayout"># <span class="strong strong"><strong>echo 2 &gt; /sys/class/net/eth1/device/sriov_numvfs</strong></span></pre></li><li class="listitem"><p class="simpara">
							Verify the VFs have been added:
						</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>lspci | grep Ethernet</strong></span>
01:00.0 Ethernet controller: Intel Corporation Ethernet Controller 10-Gigabit X540-AT2 (rev 01)
01:00.1 Ethernet controller: Intel Corporation Ethernet Controller 10-Gigabit X540-AT2 (rev 01)
07:00.0 Ethernet controller: Intel Corporation I350 Gigabit Network Connection (rev 01)
07:00.1 Ethernet controller: Intel Corporation I350 Gigabit Network Connection (rev 01)</pre></li><li class="listitem"><p class="simpara">
							Make the created VFs persistent by creating a udev rule for the network interface you used to create the VFs. For example, for the <span class="emphasis"><em>eth1</em></span> interface, create the <code class="literal">/etc/udev/rules.d/eth1.rules</code> file, and add the following line:
						</p><pre class="programlisting language-bash">ACTION=="add", SUBSYSTEM=="net", ENV{ID_NET_DRIVER}=="ixgbe", ATTR{device/sriov_numvfs}="2"</pre><p class="simpara">
							This ensures that the two VFs that use the <code class="literal">ixgbe</code> driver will automatically be available for the <code class="literal">eth1</code> interface when the host starts.
						</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								Currently, this command does not work correctly when attempting to make VFs persistent on Broadcom NetXtreme II BCM57810 adapters. In addition, attaching VFs based on these adapters to Windows VMs is currently not reliable.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Use the <code class="literal">virsh nodedev-list</code> command to verify that <span class="emphasis"><em>libvirt</em></span> recognizes the added VF devices. For example, the following shows that the 01:00.0 and 07:00.0 PFs from the previous example have been successfully converted into VFs:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh nodedev-list | grep pci_</strong></span>
pci_0000_01_00_0
pci_0000_01_00_1
pci_0000_07_10_0
pci_0000_07_10_1
[...]</pre></li><li class="listitem"><p class="simpara">
							Obtain the <code class="literal">bus</code>, <code class="literal">slot</code>, and <code class="literal">function</code> values of a PF and one of its corresponding VFs. For example, for <code class="literal">pci_0000_01_00_0</code> and <code class="literal">pci_0000_01_00_1</code>:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh nodedev-dumpxml pci_0000_01_00_0</strong></span>
&lt;device&gt;
  &lt;name&gt;pci_0000_01_00_0&lt;/name&gt;
  &lt;path&gt;/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0&lt;/path&gt;
  &lt;parent&gt;pci_0000_00_01_0&lt;/parent&gt;
  &lt;driver&gt;
    &lt;name&gt;ixgbe&lt;/name&gt;
  &lt;/driver&gt;
  &lt;capability type='pci'&gt;
    &lt;domain&gt;0&lt;/domain&gt;
    <span class="emphasis"><em>&lt;bus&gt;1&lt;/bus&gt;</em></span>
    <span class="emphasis"><em>&lt;slot&gt;0&lt;/slot&gt;</em></span>
    <span class="emphasis"><em>&lt;function&gt;0&lt;/function&gt;</em></span>
[...]
# <span class="strong strong"><strong>virsh nodedev-dumpxml pci_0000_01_00_1</strong></span>
&lt;device&gt;
  &lt;name&gt;pci_0000_01_00_1&lt;/name&gt;
  &lt;path&gt;/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.1&lt;/path&gt;
  &lt;parent&gt;pci_0000_00_01_0&lt;/parent&gt;
  &lt;driver&gt;
    &lt;name&gt;vfio-pci&lt;/name&gt;
  &lt;/driver&gt;
  &lt;capability type='pci'&gt;
    &lt;domain&gt;0&lt;/domain&gt;
    <span class="emphasis"><em>&lt;bus&gt;1&lt;/bus&gt;</em></span>
    <span class="emphasis"><em>&lt;slot&gt;0&lt;/slot&gt;</em></span>
    <span class="emphasis"><em>&lt;function&gt;1&lt;/function&gt;</em></span>
[...]</pre></li><li class="listitem"><p class="simpara">
							Create a temporary XML file and add a configuration into using the <code class="literal">bus</code>, <code class="literal">slot</code>, and <code class="literal">function</code> values you obtained in the previous step. For example:
						</p><pre class="programlisting language-xml">&lt;interface type='hostdev' managed='yes'&gt;
  &lt;source&gt;
    &lt;address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x2'/&gt;
  &lt;/source&gt;
&lt;/interface&gt;</pre></li><li class="listitem"><p class="simpara">
							Add the VF to a VM using the temporary XML file. For example, the following attaches a VF saved in the <code class="literal">/tmp/holdmyfunction.xml</code> to a running <span class="emphasis"><em>testguest1</em></span> VM and ensures it is available after the VM restarts:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh attach-device testguest1 /tmp/holdmyfunction.xml --live --config</strong></span>
Device attached successfully.</pre><p class="simpara">
							If this is successful, the guest operating system detects a new network interface card.
						</p></li></ol></div></section><section class="section" id="supported-devices-for-sr-iov-assignment-in-rhel-8_managing-sr-iov-devices"><div class="titlepage"><div><div><h3 class="title">8.6.3. Supported devices for SR-IOV assignment</h3></div></div></div><p>
					Not all devices can be used for SR-IOV. The following devices have been tested and verified as compatible with SR-IOV in RHEL 8.
				</p><div class="itemizedlist"><p class="title"><strong>Networking devices</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Intel 82599ES 10 Gigabit Ethernet Controller - uses the <code class="literal">ixgbe</code> driver
						</li><li class="listitem">
							Intel Ethernet Controller XL710 Series - uses the <code class="literal">i40e</code> driver
						</li><li class="listitem">
							Mellanox ConnectX-5 Ethernet Adapter Cards - use the <code class="literal">mlx5_core</code> driver
						</li><li class="listitem">
							Intel Ethernet Network Adapter XXV710 - uses the <code class="literal">i40e</code> driver
						</li><li class="listitem">
							Intel 82576 Gigabit Ethernet Controller - uses the <code class="literal">igb</code> driver
						</li><li class="listitem">
							Broadcom NetXtreme II BCM57810 - uses the <code class="literal">bnx2x</code> driver
						</li></ul></div></section></section></section><section class="chapter" id="managing-storage-for-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Chapter 9. Managing storage for virtual machines</h1></div></div></div><p>
			You can manage virtual machine storage using the <a class="link" href="index.html#managing-storage-for-virtual-machines-using-the-cli_managing-storage-for-virtual-machines" title="9.2. Managing storage for virtual machines using the CLI">CLI</a> or the <a class="link" href="index.html#managing-virtual-machine-disks-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms" title="5.8. Managing virtual machine disks using the web console">web console</a>.
		</p><p>
			This documentation provides information on how to manage virtual machine storage using the <code class="literal command">virsh</code> command.
		</p><section class="section" id="understanding-virtual-machine-storage_managing-storage-for-virtual-machines"><div class="titlepage"><div><div><h2 class="title">9.1. Understanding virtual machine storage</h2></div></div></div><p>
				The following sections provide information about storage for virtual machines (VMs), including information about storage pools, storage volumes, and how they are used to provide storage for VMs.
			</p><section class="section" id="virtual-machine-storage_understanding-virtual-machine-storage"><div class="titlepage"><div><div><h3 class="title">9.1.1. Virtual machine storage</h3></div></div></div><p>
					The following provides information about how storage pools and storage volumes are used to create storage for virtual machines (VMs).
				</p><p>
					A <span class="emphasis"><em>storage pool</em></span> is a quantity of storage managed by the host and set aside for use by VMs. <span class="emphasis"><em>Storage volumes</em></span> can be created from space in the storage pools. Each storage volume can be assigned to a VM as a block device, such as a disk, on a guest bus.
				</p><p>
					Storage pools and volumes are managed using <code class="literal">libvirt</code>. With the <code class="literal">libvirt</code> remote protocol, you can manage all aspects of VM storage. These operations can be performed on a remote host. As a result, a management application that uses <code class="literal">libvirt</code>, such as the RHEL web console, can be used to perform all the required tasks for configuring the storage for a VM.
				</p><p>
					The <code class="literal">libvirt</code> API can be used to query the list of volumes in the storage pool or to get information regarding the capacity, allocation, and available storage in the storage pool. A storage volume in the storage pool may be queried to get information such as allocation and capacity, which may differ for sparse volumes.
				</p><p>
					For storage pools that support it, the <code class="literal">libvirt</code> API can be used to create, clone, resize, and delete storage volumes. The APIs can also be used to upload data to storage volumes, download data from storage volumes, or wipe data from storage volumes.
				</p><p>
					Once a storage pool is started, a storage volume can be assigned to a VM using the storage pool name and storage volume name instead of the host path to the volume in the XML configuration files of the VM.
				</p></section><section class="section" id="understanding-storage-pools_understanding-virtual-machine-storage"><div class="titlepage"><div><div><h3 class="title">9.1.2. Storage pools</h3></div></div></div><p>
					A storage pool is a file, directory, or storage device, managed by <code class="literal">libvirt</code> to provide storage to virtual machines (VMs). Storage pools are divided into storage volumes that store VM images or are attached to VMs as additional storage. Multiple VMs can share the same storage pool, allowing for better allocation of storage resources.
				</p><p>
					Storage pools can be persistent or transient:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							A persistent storage pool survives a system restart of the host machine.
						</li><li class="listitem">
							A transient storage pool only exists until the host reboots.
						</li></ul></div><p>
					The <code class="literal command">virsh pool-define</code> command is used to create a persistent storage pool, and the <code class="literal command">virsh pool-create</code> command is used to create a transient storage pool.
				</p><div class="formalpara"><p class="title"><strong>Storage pool storage types</strong></p><p>
						Storage pools can be either local or network-based (shared):
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Local storage pools</strong></span>
						</p><p class="simpara">
							Local storage pools are attached directly to the host server. They include local directories, directly attached disks, physical partitions, and Logical Volume Management (LVM) volume groups on local devices.
						</p><p class="simpara">
							Local storage pools are useful for development, testing, and small deployments that do not require migration or large numbers of VMs.
						</p></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Networked (shared) storage pools</strong></span>
						</p><p class="simpara">
							Networked storage pools include storage devices shared over a network using standard protocols.
						</p></li></ul></div><div class="formalpara"><p class="title"><strong>Storage pool usage example</strong></p><p>
						To illustrate the available options for managing storage pools, the following describes a sample NFS server that uses <code class="literal command">mount -t nfs nfs.example.com:/path/to/share /path/to/data</code>.
					</p></div><p>
					A storage administrator could define an NFS Storage Pool on the virtualization host to describe the exported server path and the client target path. This will allow <code class="literal">libvirt</code> to perform the mount either automatically when <code class="literal">libvirt</code> is started or as needed while <code class="literal">libvirt</code> is running. Files with the NFS Server exported directory are listed as storage volumes within the NFS storage pool.
				</p><p>
					When the storage volume is added to the VM, the administrator does not need to add the target path to the volume. They just needs to add the storage pool and storage volume by name. Therefore, if the target client path changes, it does not affect the VM.
				</p><p>
					When the storage pool is started, <code class="literal">libvirt</code> mounts the share on the specified directory, just as if the system administrator logged in and executed <code class="literal command">mount nfs.example.com:/path/to/share /vmdata</code>. If the storage pool is configured to autostart, <code class="literal">libvirt</code> ensures that the NFS shared disk is mounted on the directory specified when <code class="literal">libvirt</code> is started.
				</p><p>
					Once the storage pool is started, the files in the NFS shared disk are reported as storage volumes, and the storage volumes' paths may be queried using the <code class="literal">libvirt</code> API. The storage volumes' paths can then be copied into the section of a VM’s XML definition that describes the source storage for the VM’s block devices. In the case of NFS, an application that uses the <code class="literal">libvirt</code> API can create and delete storage volumes in the storage pool (files in the NFS share) up to the limit of the size of the pool (the storage capacity of the share).
				</p><p>
					Stopping (destroying) a storage pool removes the abstraction of the data, but keeps the data intact.
				</p><p>
					Not all storage pool types support creating and deleting volumes. Stopping the storage pool (<code class="literal command">pool-destroy</code>) undoes the start operation, in this case, unmounting the NFS share. The data on the share is not modified by the destroy operation, despite what the name of the command suggests. For more details, see <code class="literal">man virsh</code>.
				</p><div class="formalpara"><p class="title"><strong>Supported and unsupported storage pool types</strong></p><p>
						The following is a list of storage pool types supported by RHEL:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Directory-based storage pools
						</li><li class="listitem">
							Disk-based storage pools
						</li><li class="listitem">
							Partition-based storage pools
						</li><li class="listitem">
							GlusterFS storage pools
						</li><li class="listitem">
							iSCSI-based storage pools
						</li><li class="listitem">
							LVM-based storage pools
						</li><li class="listitem">
							NFS-based storage pools
						</li><li class="listitem">
							vHBA-based storage pools with SCSI devices
						</li><li class="listitem">
							Multipath-based storage pools
						</li><li class="listitem">
							RBD-based storage pools
						</li></ul></div><p>
					The following is a list of <code class="literal">libvirt</code> storage pool types that are not supported by RHEL:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Sheepdog-based storage pools
						</li><li class="listitem">
							Vstorage-based storage pools
						</li><li class="listitem">
							ZFS-based storage pools
						</li></ul></div></section><section class="section" id="storage-volumes_understanding-virtual-machine-storage"><div class="titlepage"><div><div><h3 class="title">9.1.3. Storage volumes</h3></div></div></div><p>
					Storage pools are divided into <code class="literal">storage volumes</code>. Storage volumes are abstractions of physical partitions, LVM logical volumes, file-based disk images, and other storage types handled by <code class="literal">libvirt</code>. Storage volumes are presented to VMs as local storage devices, such as disks, regardless of the underlying hardware.
				</p><p>
					On the host machine, a storage volume is referred to by its name and an identifier for the storage pool from which it derives. On the <code class="literal">virsh</code> command line, this takes the form <code class="literal">--pool <span class="emphasis"><em>storage_pool</em></span> <span class="emphasis"><em>volume_name</em></span></code>.
				</p><p>
					For example, to display information about a volume named <span class="emphasis"><em>firstimage</em></span> in the <span class="emphasis"><em>guest_images</em></span> pool.
				</p><pre class="literallayout"># <span class="strong strong"><strong>virsh vol-info --pool guest_images firstimage</strong></span>
  Name:             firstimage
  Type:             block
  Capacity:         20.00 GB
  Allocation:       20.00 GB</pre></section></section><section class="section" id="managing-storage-for-virtual-machines-using-the-cli_managing-storage-for-virtual-machines"><div class="titlepage"><div><div><h2 class="title">9.2. Managing storage for virtual machines using the CLI</h2></div></div></div><p>
				The following documentation provides information on how to manage virtual machine (VM) storage using the <code class="literal command">virsh</code> command-line utility.
			</p><p>
				Using <code class="literal">virsh</code>, you can add, remove, and modify VM storage, as well as view information about VM storage.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					In many cases, storage for a VM is created at the same time <a class="link" href="index.html#assembly_creating-virtual-machines_virt-getting-started" title="2.2. Creating virtual machines">the VM is created</a>. Therefore, the following information primarily relates to advanced management of VM storage.
				</p></div></div><section class="section" id="viewing-virtual-machine-storage-information-using-the-cli_managing-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h3 class="title">9.2.1. Viewing virtual machine storage information using the CLI</h3></div></div></div><p>
					The following provides information about viewing information about storage pools and storage volumes using the CLI.
				</p><section class="section" id="viewing-storage-pool-information-using-the-cli_viewing-virtual-machine-storage-information-using-the-cli"><div class="titlepage"><div><div><h4 class="title">9.2.1.1. Viewing storage pool information using the CLI</h4></div></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Use the <code class="literal command">virsh pool-list</code> command to view storage pool information.
							</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all --details</strong></span>
 Name                State    Autostart  Persistent    Capacity  Allocation   Available
 default             running  yes        yes          48.97 GiB   23.93 GiB   25.03 GiB
 Downloads           running  yes        yes         175.62 GiB   62.02 GiB  113.60 GiB
 RHEL8-Storage-Pool  running  yes        yes         214.62 GiB   93.02 GiB  168.60 GiB</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								For information on the available <code class="literal command">virsh pool-list</code> options, see the relevant <code class="literal command">man</code> pages.
							</li></ul></div></section><section class="section" id="viewing-storage-volume-information-using-the-cli_viewing-virtual-machine-storage-information-using-the-cli"><div class="titlepage"><div><div><h4 class="title">9.2.1.2. Viewing storage volume information using the CLI</h4></div></div></div><p>
						The following provides information on viewing information about storage pools. You can view a list of all storage pools in a specified storage pool and details about a specified storage pool.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Use the <code class="literal command">virsh vol-list</code> command to list the storage volumes in a specified storage pool.
							</p><pre class="literallayout"># <span class="strong strong"><strong>virsh vol-list --pool RHEL8-Storage-Pool --details</strong></span>
 Name                Path                                               Type   Capacity  Allocation
---------------------------------------------------------------------------------------------
 .bash_history       /home/VirtualMachines/.bash_history       file  18.70 KiB   20.00 KiB
 .bash_logout        /home/VirtualMachines/.bash_logout        file    18.00 B    4.00 KiB
 .bash_profile       /home/VirtualMachines/.bash_profile       file   193.00 B    4.00 KiB
 .bashrc             /home/VirtualMachines/.bashrc             file   1.29 KiB    4.00 KiB
 .git-prompt.sh      /home/VirtualMachines/.git-prompt.sh      file  15.84 KiB   16.00 KiB
 .gitconfig          /home/VirtualMachines/.gitconfig          file   167.00 B    4.00 KiB
 RHEL8_Volume.qcow2  /home/VirtualMachines/RHEL8_Volume.qcow2  file  60.00 GiB   13.93 GiB</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									For information on the available <code class="literal command">virsh vol-list</code> options, see the relevant <code class="literal command">man</code> pages.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Use the <code class="literal command">virsh vol-info</code> command to list the storage volumes in a specified storage pool.
							</p><pre class="literallayout"># <span class="strong strong"><strong>vol-info --pool RHEL8-Storage-Pool --vol RHEL8_Volume.qcow2</strong></span>
Name:           RHEL8_Volume.qcow2
Type:           file
Capacity:       60.00 GiB
Allocation:     13.93 GiB</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									For information on the available <code class="literal command">virsh vol-info</code> options, see the relevant <code class="literal command">man</code> pages.
								</p></div></div></li></ol></div></section></section><section class="section" id="creating-storage-for-virtual-machines-using-the-cli_managing-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h3 class="title">9.2.2. Creating and assigning storage for virtual machines using the CLI</h3></div></div></div><p>
					The following is a high-level procedure for creating and assigning storage for virtual machines (VMs):
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Create storage pools</strong></span>
						</p><p class="simpara">
							Create one or more storage pools from available storage media. For a list of supported storage pool types, see <a class="link" href="index.html#understanding-storage-pools_understanding-virtual-machine-storage" title="9.1.2. Storage pools">Storage pool types</a>.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To create persistent storage pools, use the <code class="literal command">virsh pool-define</code> and <code class="literal command">virsh pool-define-as</code> commands.
								</p><p class="simpara">
									The <code class="literal command">virsh pool-define</code> command uses an XML file for the pool options. The <code class="literal command">virsh pool-define-as</code> command places the options in the command line.
								</p></li><li class="listitem"><p class="simpara">
									To create temporary storage pools, use the <code class="literal command">virsh pool-create</code> and <code class="literal command">virsh pool-create-as</code> commands.
								</p><p class="simpara">
									The <code class="literal command">virsh pool-create</code> command uses an XML file for the pool options. The <code class="literal command">virsh pool-create-as</code> command places the options in the command line.
								</p></li></ul></div></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						All examples and procedures in this documentation are for creating persistent storage pools using the <code class="literal command">virsh pool-define</code> command. For more information on the <code class="literal command">virsh pool-create</code>, <code class="literal command">virsh pool-define-as</code>, and <code class="literal command">virsh pool-create-as</code> commands, see the relevant man pages.
					</p></div></div><div class="orderedlist"><ol class="orderedlist" start="2" type="1"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Create storage volumes</strong></span>
						</p><p class="simpara">
							Create one or more <a class="link" href="index.html#creating-and-assigning-storage-volumes-using-the-cli_creating-storage-for-virtual-machines-using-the-cli" title="9.2.2.9. Creating and assigning storage volumes using the CLI">storage volumes</a> from the available storage pools.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								All examples and procedures in this documentation are for creating storage using the <code class="literal command">virsh vol‑create</code> command. For more information on the <code class="literal command">virsh vol-create-as</code> command, see the relevant man pages.
							</p></div></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Assign storage devices to a VM</strong></span>
						</p><p class="simpara">
							Assign one or more storage devices abstracted from storage volumes to a VM.
						</p></li></ol></div><p>
					The following sections provide information on creating and assigning storage using the CLI:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="index.html#creating-and-assigning-directory-based-storage-for-virtual-machines-using-the-cli_creating-storage-for-virtual-machines-using-the-cli" title="9.2.2.1. Creating and assigning directory-based storage for virtual machines using the CLI">Directory-based storage</a>
						</li><li class="listitem">
							<a class="link" href="index.html#creating-and-assigning-partition-based-storage-for-virtual-machines-using-the-cli_creating-storage-for-virtual-machines-using-the-cli" title="9.2.2.3. Creating and assigning filesystem-based storage for virtual machines using the CLI">Filesystem-based storage</a>
						</li><li class="listitem">
							<a class="link" href="index.html#creating-and-assigning-glusterfs-storage-for-virtual-machines-using-the-cli_creating-storage-for-virtual-machines-using-the-cli" title="9.2.2.4. Creating and assigning GlusterFS storage for virtual machines using the CLI">GlusterFS-based storage</a>
						</li><li class="listitem">
							<a class="link" href="index.html#creating-and-assigning-iscsi-based-storage-for-virtual-machines-using-the-cli_creating-storage-for-virtual-machines-using-the-cli" title="9.2.2.5. Creating and assigning iSCSI-based storage for virtual machines using the CLI">iSCSI-based storage</a>
						</li><li class="listitem">
							<a class="link" href="index.html#creating-and-assigning-lvm-based-storage-for-virtual-machines-using-the-cli_creating-storage-for-virtual-machines-using-the-cli" title="9.2.2.6. Creating and assigning LVM-based storage for virtual machines using the CLI">LVM-based storage</a>
						</li><li class="listitem">
							<a class="link" href="index.html#creating-and-assigning-nfs-storage-for-virtual-machines-using-the-cli_creating-storage-for-virtual-machines-using-the-cli" title="9.2.2.7. Creating and assigning network-based storage for virtual machines using the CLI">NFS-based storage</a>
						</li><li class="listitem">
							<a class="link" href="index.html#creating-and-assigning-vhba-based-storage-for-virtual-machines-using-the-cli_creating-storage-for-virtual-machines-using-the-cli" title="9.2.2.8. Creating and assigning vHBA-based storage for virtual machines using the CLI">vHBA-based storage</a>
						</li></ul></div><section class="section" id="creating-and-assigning-directory-based-storage-for-virtual-machines-using-the-cli_creating-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h4 class="title">9.2.2.1. Creating and assigning directory-based storage for virtual machines using the CLI</h4></div></div></div><p>
						The following provides information about creating directory-based storage pools and storage volumes, and assigning volumes to virtual machines.
					</p><section class="section" id="creating-directory-based-storage-pools-using-the-cli_creating-and-assigning-directory-based-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.1.1. Creating directory-based storage pools using the CLI</h5></div></div></div><p>
							The following provides instructions for creating directory-based storage pools.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Define the storage pool in an XML file</strong></span>
								</p><p class="simpara">
									Create a temporary XML file containing the storage pool parameters required for the new device.
								</p><p class="simpara">
									For information on the required parameters, refer to <a class="link" href="index.html#directory-based-storage-pool-parameters_creating-and-assigning-directory-based-storage-for-virtual-machines-using-the-cli" title="9.2.2.1.2. Directory-based storage pool parameters">Parameters</a>.
								</p></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Create a storage pool</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-define</code> command to create a persistent storage pool based on the XML file created in the previous step.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-define ~/guest_images.xml</strong></span>
  Pool defined from guest_images_fs</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You can delete the XML file created in step 1 after running the <code class="literal command">virsh pool-define</code> command.
							</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Define the storage pool target path</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-build</code> command to create a storage pool target path for a pre-formatted file system storage pool, initialize the storage source device, and define the format of the data.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-build guest_images_fs</strong></span>
  Pool guest_images_fs built

# <span class="strong strong"><strong>ls -la /guest_images</strong></span>
  total 8
  drwx------.  2 root root 4096 May 31 19:38 .
  dr-xr-xr-x. 25 root root 4096 May 31 19:38 ..</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify that the pool was created</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-list</code> command to verify that the pool was created.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   no</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Start the storage pool</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-start</code> command to mount the storage pool.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-start guest_images_fs</strong></span>
  Pool guest_images_fs started</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The <code class="literal command">virsh pool-start</code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.
									</p></div></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>[Optional] Turn on autostart</strong></span>
								</p><p class="simpara">
									By default, a storage pool defined with the <code class="literal command">virsh</code> command is not set to automatically start each time libvirtd starts. Use the <code class="literal command">virsh pool-autostart</code> command to configure the storage pool to autostart.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-autostart guest_images_fs</strong></span>
  Pool guest_images_fs marked as autostarted</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-list</code> command to verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   yes</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify the storage pool</strong></span>
								</p><p class="simpara">
									Verify that the storage pool was created correctly, the sizes reported are as expected, and the state is reported as <code class="literal"><span class="emphasis"><em>running</em></span></code>. Verify there is a <code class="literal filename">lost+found</code> directory in the target path on the file system, indicating that the device is mounted.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-info guest_images_fs</strong></span>
  Name:           guest_images_fs
  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0
  State:          running
  Persistent:     yes
  Autostart:      yes
  Capacity:       458.39 GB
  Allocation:     197.91 MB
  Available:      458.20 GB

# <span class="strong strong"><strong>mount | grep /guest_images</strong></span>
  /dev/sdc1 on /guest_images type ext4 (rw)

# <span class="strong strong"><strong>ls -la /guest_images</strong></span>
  total 24
  drwxr-xr-x.  3 root root  4096 May 31 19:47 .
  dr-xr-xr-x. 25 root root  4096 May 31 19:38 ..
  drwx------.  2 root root 16384 May 31 14:18 lost+found</pre></li></ol></div></section><section class="section" id="directory-based-storage-pool-parameters_creating-and-assigning-directory-based-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.1.2. Directory-based storage pool parameters</h5></div></div></div><p>
							The following provides information about the required parameters for a directory-based storage pool and an example.
						</p><div class="formalpara"><p class="title"><strong>Parameters</strong></p><p>
								The following table provides a list of required parameters for the XML file for a directory-based storage pool.
							</p></div><div class="table" id="idm140329465277872"><p class="title"><strong>Table 9.1. Directory-based storage pool parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140329465273136" scope="col">Description</th><th align="left" valign="top" id="idm140329465272048" scope="col">XML</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140329465273136"> <p>
											The type of storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329465272048"> <p>
											<code class="literal">&lt;pool type='dir'&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329465273136"> <p>
											The name of the storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329465272048"> <p>
											<code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>name</em></span></code>&lt;/name&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329465273136"> <p>
											The path specifying the target. This will be the path used for the storage pool.
										</p>
										 </td><td align="left" valign="top" headers="idm140329465272048"> <p>
											<code class="literal">&lt;target&gt;<br/>    &lt;path&gt;<code class="literal"><span class="emphasis"><em>target_path</em></span></code>&lt;/path&gt;<br/> &lt;/target&gt;</code>
										</p>
										 </td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
								The following is an example of an XML file for a storage pool based on the <code class="literal filename">/guest_images</code> directory:
							</p></div><pre class="programlisting language-xml">&lt;pool type='dir'&gt;
  &lt;name&gt;dirpool&lt;/name&gt;
  &lt;target&gt;
    &lt;path&gt;/guest_images&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre></section></section><section class="section" id="creating-and-assigning-disk-based-storage-for-virtual-machines-using-the-cli_creating-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h4 class="title">9.2.2.2. Creating and assigning disk-based storage for virtual machines using the CLI</h4></div></div></div><p>
						The following provides information about creating disk-based storage pools and storage volumes and assigning volumes to virtual machines.
					</p><section class="section" id="creating-disk-based-storage-pools-using-the-cli_creating-and-assigning-disk-based-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.2.1. Creating disk-based storage pools using the CLI</h5></div></div></div><p>
							The following provides instructions for creating disk-based storage pools.
						</p><div class="formalpara"><p class="title"><strong>Recommendations</strong></p><p>
								Be aware of the following before creating a disk-based storage pool:
							</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Depending on the version of <code class="literal package">libvirt</code> being used, dedicating a disk to a storage pool may reformat and erase all data currently stored on the disk device. It is strongly recommended that you back up the data on the storage device before creating a storage pool.
								</li><li class="listitem"><p class="simpara">
									VMs should not be given write access to whole disks or block devices (for example, <code class="literal filename">/dev/sdb</code>). Use partitions (for example, <code class="literal filename">/dev/sdb1</code>) or LVM volumes.
								</p><p class="simpara">
									If you pass an entire block device to a VM, the VM will likely partition it or create its own LVM groups on it. This can cause the host machine to detect these partitions or LVM groups and cause errors.
								</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Relabel the disk with a GUID Partition Table (GPT) disk label. GPT disk labels allow for creating up to 128 partitions on each device.
								</p><pre class="literallayout"># <span class="strong strong"><strong>parted /dev/sdb</strong></span>
GNU Parted 2.1
Using /dev/sdb
Welcome to GNU Parted! Type 'help' to view a list of commands.
(parted) mklabel
New disk label type? gpt
(parted) quit
Information: You may need to update /etc/fstab.
#</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Define the storage pool in an XML file</strong></span>
								</p><p class="simpara">
									Create a temporary XML file containing the storage pool parameters required for the new device.
								</p><p class="simpara">
									For information on the required parameters, refer to <a class="link" href="index.html#disk-based-storage-pool-parameters_creating-and-assigning-disk-based-storage-for-virtual-machines-using-the-cli" title="9.2.2.2.2. Disk-based storage pool parameters">Parameters</a>.
								</p></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Create a storage pool</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-define</code> command to create a persistent storage pool based on the XML file created in the previous step.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-define ~/guest_images.xml</strong></span>
  Pool defined from guest_images_fs</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You can delete the XML file created in step 1 after running the <code class="literal command">virsh pool-define</code> command.
							</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Define the storage pool target path</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-build</code> command to create a storage pool target path for a pre-formatted file-system storage pool, initialize the storage source device, and define the format of the data.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-build guest_images_fs</strong></span>
  Pool guest_images_fs built

# <span class="strong strong"><strong>ls -la /guest_images</strong></span>
  total 8
  drwx------.  2 root root 4096 May 31 19:38 .
  dr-xr-xr-x. 25 root root 4096 May 31 19:38 ..</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										Building the target path is only necessary for disk-based, file system-based, and logical storage pools. If <code class="literal">libvirt</code> detects that the source storage device’s data format differs from the selected storage pool type, the build fails, unless the <code class="literal"><span class="emphasis"><em>overwrite</em></span></code> option is specified.
									</p></div></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify that the pool was created</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-list</code> command to verify that the pool was created.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   no</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Start the storage pool</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-start</code> command to mount the storage pool.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-start guest_images_fs</strong></span>
  Pool guest_images_fs started</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The <code class="literal command">virsh pool-start</code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.
									</p></div></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>[Optional] Turn on autostart</strong></span>
								</p><p class="simpara">
									By default, a storage pool defined with the <code class="literal command">virsh</code> command is not set to automatically start each time libvirtd starts. Use the <code class="literal command">virsh pool-autostart</code> command to configure the storage pool to autostart.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-autostart guest_images_fs</strong></span>
  Pool guest_images_fs marked as autostarted</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-list</code> command to verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   yes</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify the storage pool</strong></span>
								</p><p class="simpara">
									Verify that the storage pool was created correctly, the sizes reported are as expected, and the state is reported as <code class="literal"><span class="emphasis"><em>running</em></span></code>. Verify there is a <code class="literal filename">lost+found</code> directory in the target path on the file system, indicating that the device is mounted.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-info guest_images_fs</strong></span>
  Name:           guest_images_fs
  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0
  State:          running
  Persistent:     yes
  Autostart:      yes
  Capacity:       458.39 GB
  Allocation:     197.91 MB
  Available:      458.20 GB

# <span class="strong strong"><strong>mount | grep /guest_images</strong></span>
  /dev/sdc1 on /guest_images type ext4 (rw)

# <span class="strong strong"><strong>ls -la /guest_images</strong></span>
  total 24
  drwxr-xr-x.  3 root root  4096 May 31 19:47 .
  dr-xr-xr-x. 25 root root  4096 May 31 19:38 ..
  drwx------.  2 root root 16384 May 31 14:18 lost+found</pre></li></ol></div></section><section class="section" id="disk-based-storage-pool-parameters_creating-and-assigning-disk-based-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.2.2. Disk-based storage pool parameters</h5></div></div></div><p>
							The following provides information about the required parameters for a directory-based storage pool and an example.
						</p><div class="formalpara"><p class="title"><strong>Parameters</strong></p><p>
								The following table provides a list of required parameters for the XML file for a disk-based storage pool.
							</p></div><div class="table" id="idm140329470093632"><p class="title"><strong>Table 9.2. Disk-based storage pool parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140329470088784" scope="col">Description</th><th align="left" valign="top" id="idm140329470087696" scope="col">XML</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140329470088784"> <p>
											The type of storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329470087696"> <p>
											<code class="literal">&lt;pool type='disk'&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329470088784"> <p>
											The name of the storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329470087696"> <p>
											<code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>name</em></span></code>&lt;/name&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329470088784"> <p>
											The path specifying the storage device. For example, <code class="literal">/dev/sdb</code>.
										</p>
										 </td><td align="left" valign="top" headers="idm140329470087696"> <p>
											<code class="literal">&lt;source&gt;<br/>    &lt;path&gt;<code class="literal"><span class="emphasis"><em>source_path</em></span></code>&lt;/path&gt;<br/> &lt;/source&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329470088784"> <p>
											The path specifying the target device. This will be the path used for the storage pool.
										</p>
										 </td><td align="left" valign="top" headers="idm140329470087696"> <p>
											<code class="literal">&lt;target&gt;<br/>    &lt;path&gt;<code class="literal"><span class="emphasis"><em>target_path</em></span></code>&lt;/path&gt;<br/> &lt;/target&gt;</code>
										</p>
										 </td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
								The following is an example of an XML file for a disk-based storage pool:
							</p></div><pre class="programlisting language-xml">&lt;pool type='disk'&gt;
  &lt;name&gt;phy_disk&lt;/name&gt;
  &lt;source&gt;
    &lt;device path='/dev/sdb'/&gt;
    &lt;format type='gpt'/&gt;
  &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/dev&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre></section></section><section class="section" id="creating-and-assigning-partition-based-storage-for-virtual-machines-using-the-cli_creating-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h4 class="title">9.2.2.3. Creating and assigning filesystem-based storage for virtual machines using the CLI</h4></div></div></div><p>
						The following provides information about creating directory-based storage pools and storage volumes, and assigning volumes to virtual machines.
					</p><section class="section" id="creating-filesystem-based-storage-pools-using-the-cli_creating-and-assigning-partition-based-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.3.1. Creating filesystem-based storage pools using the CLI</h5></div></div></div><p>
							The following provides instructions for creating filesystem-based storage pools.
						</p><div class="formalpara"><p class="title"><strong>Recommendations</strong></p><p>
								Do not use this procedure to assign an entire disk as a storage pool (for example, <code class="literal filename">/dev/sdb</code>). VMs should not be given write access to whole disks or block devices. This method should only be used to assign partitions (for example, <code class="literal filename">/dev/sdb1</code>) to storage pools.
							</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Define the storage pool in an XML file</strong></span>
								</p><p class="simpara">
									Create a temporary XML file containing the storage pool parameters required for the new device.
								</p><p class="simpara">
									For information on the required parameters, refer to <a class="link" href="index.html#filesystem-based-storage-pool-parameters_creating-and-assigning-partition-based-storage-for-virtual-machines-using-the-cli" title="9.2.2.3.2. Filesystem-based storage pool parameters">Parameters</a>.
								</p></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Create a storage pool</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-define</code> command to create a persistent storage pool based on the XML file created in the previous step.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-define ~/guest_images.xml</strong></span>
  Pool defined from guest_images_fs</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You can delete the XML file created in step 1 after running the <code class="literal command">virsh pool-define</code> command.
							</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Define the storage pool target path</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-build</code> command to create a storage pool target path for a pre-formatted filesystem storage pool, initialize the storage source device, and define the format of the data.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-build guest_images_fs</strong></span>
  Pool guest_images_fs built

# <span class="strong strong"><strong>ls -la /guest_images</strong></span>
  total 8
  drwx------.  2 root root 4096 May 31 19:38 .
  dr-xr-xr-x. 25 root root 4096 May 31 19:38 ..</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify that the pool was created</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-list</code> command to verify that the pool was created.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   no</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Start the storage pool</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-start</code> command to mount the storage pool.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-start guest_images_fs</strong></span>
  Pool guest_images_fs started</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The <code class="literal command">virsh pool-start</code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.
									</p></div></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>[Optional] Turn on autostart</strong></span>
								</p><p class="simpara">
									By default, a storage pool defined with the <code class="literal command">virsh</code> command is not set to automatically start each time libvirtd starts. Use the <code class="literal command">virsh pool-autostart</code> command to configure the storage pool to autostart.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-autostart guest_images_fs</strong></span>
  Pool guest_images_fs marked as autostarted</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-list</code> command to verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   yes</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify the storage pool</strong></span>
								</p><p class="simpara">
									Verify that the storage pool was created correctly, the sizes reported are as expected, and the state is reported as <code class="literal"><span class="emphasis"><em>running</em></span></code>. Verify there is a <code class="literal filename">lost+found</code> directory in the target path on the file system, indicating that the device is mounted.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-info guest_images_fs</strong></span>
  Name:           guest_images_fs
  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0
  State:          running
  Persistent:     yes
  Autostart:      yes
  Capacity:       458.39 GB
  Allocation:     197.91 MB
  Available:      458.20 GB

# <span class="strong strong"><strong>mount | grep /guest_images</strong></span>
  /dev/sdc1 on /guest_images type ext4 (rw)

# <span class="strong strong"><strong>ls -la /guest_images</strong></span>
  total 24
  drwxr-xr-x.  3 root root  4096 May 31 19:47 .
  dr-xr-xr-x. 25 root root  4096 May 31 19:38 ..
  drwx------.  2 root root 16384 May 31 14:18 lost+found</pre></li></ol></div></section><section class="section" id="filesystem-based-storage-pool-parameters_creating-and-assigning-partition-based-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.3.2. Filesystem-based storage pool parameters</h5></div></div></div><p>
							The following provides information about the required parameters for a directory-based storage pool and an example.
						</p><div class="formalpara"><p class="title"><strong>Parameters</strong></p><p>
								The following table provides a list of required parameters for the XML file for a filesystem-based storage pool.
							</p></div><div class="table" id="idm140329466883152"><p class="title"><strong>Table 9.3. Filesystem-based storage pool parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140329466878288" scope="col">Description</th><th align="left" valign="top" id="idm140329466877200" scope="col">XML</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140329466878288"> <p>
											The type of storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329466877200"> <p>
											<code class="literal">&lt;pool type='fs'&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329466878288"> <p>
											The name of the storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329466877200"> <p>
											<code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>name</em></span></code>&lt;/name&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329466878288"> <p>
											The path specifying the partition. For example, <code class="literal filename">/dev/sdc1</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140329466877200"> <p>
											<code class="literal">&lt;source&gt;<br/>    &lt;device path=<span class="emphasis"><em>device_path</em></span> /&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329466878288"> <p>
											The filesystem type, for example <span class="strong strong"><strong>ext4</strong></span>.
										</p>
										 </td><td align="left" valign="top" headers="idm140329466877200"> <p>
											    <code class="literal">&lt;format type=<span class="emphasis"><em>fs_type</em></span> /&gt;<br/> &lt;/source&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329466878288"> <p>
											The path specifying the target. This will be the path used for the storage pool.
										</p>
										 </td><td align="left" valign="top" headers="idm140329466877200"> <p>
											<code class="literal">&lt;target&gt;<br/>     &lt;path&gt;<code class="literal"><span class="emphasis"><em>path-to-pool</em></span></code>&lt;/path&gt; <br/> &lt;/target&gt;</code>
										</p>
										 </td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
								The following is an example of an XML file for a storage pool based on the <code class="literal filename">/dev/sdc1</code> partition:
							</p></div><pre class="programlisting language-xml">&lt;pool type='fs'&gt;
  &lt;name&gt;guest_images_fs&lt;/name&gt;
  &lt;source&gt;
    &lt;device path='/dev/sdc1'/&gt;
    &lt;format type='auto'/&gt;
  &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/guest_images&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre></section></section><section class="section" id="creating-and-assigning-glusterfs-storage-for-virtual-machines-using-the-cli_creating-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h4 class="title">9.2.2.4. Creating and assigning GlusterFS storage for virtual machines using the CLI</h4></div></div></div><p>
						The following provides information about creating directory-based storage pools and storage volumes, and assigning volumes to virtual machines.
					</p><section class="section" id="creating-glusterfs-based-storage-pools-using-the-cli_creating-and-assigning-glusterfs-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.4.1. Creating GlusterFS-based storage pools using the CLI</h5></div></div></div><p>
							GlusterFS is a user space file system that uses File System in Userspace (FUSE). The following provides instructions for creating GlusterFS-based storage pools.
						</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Before a GlusterFS-based storage pool can be created on a host, a Gluster server must be prepared.
								</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
											Obtain the IP address of the Gluster server by listing its status with the following command:
										</p><pre class="literallayout"># <span class="strong strong"><strong>gluster volume status</strong></span>
Status of volume: gluster-vol1
Gluster process                           Port	Online	Pid
------------------------------------------------------------
Brick 222.111.222.111:/gluster-vol1       49155	  Y    18634

Task Status of Volume gluster-vol1
------------------------------------------------------------
There are no active volume tasks</pre></li><li class="listitem">
											If not installed, install the <code class="literal package">glusterfs-fuse</code> package.
										</li><li class="listitem"><p class="simpara">
											If not enabled, enable the <code class="literal">virt_use_fusefs</code> boolean. Check that it is enabled.
										</p><pre class="literallayout"># <span class="strong strong"><strong>setsebool virt_use_fusefs on</strong></span>
# <span class="strong strong"><strong>getsebool virt_use_fusefs</strong></span>
virt_use_fusefs --&gt; on</pre></li></ol></div></li></ul></div><p>
							After ensuring that the required packages are installed and enabled, continue creating the storage pool.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Define the storage pool in an XML file</strong></span>
								</p><p class="simpara">
									Create a temporary XML file containing the storage pool parameters required for the new device.
								</p><p class="simpara">
									For information on the required parameters, refer to <a class="link" href="index.html#glusterfs-based-storage-pool-parameters_creating-and-assigning-glusterfs-storage-for-virtual-machines-using-the-cli" title="9.2.2.4.2. GlusterFS-based storage pool parameters">Parameters</a>.
								</p></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Create a storage pool</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-define</code> command to create a persistent storage pool based on the XML file created in the previous step.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-define ~/guest_images.xml</strong></span>
  Pool defined from guest_images_fs</pre></li></ol></div><div class="informalexample"><p>
							You can delete the XML file created in step 1 after running the <code class="literal command">virsh pool-define</code> command.
						</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Define the storage pool target path</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-build</code> command to create a storage pool target path for a pre-formatted file system storage pool, initialize the storage source device, and define the format of the data.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-build guest_images_fs</strong></span>
  Pool guest_images_fs built

# <span class="strong strong"><strong>ls -la /guest_images</strong></span>
  total 8
  drwx------.  2 root root 4096 May 31 19:38 .
  dr-xr-xr-x. 25 root root 4096 May 31 19:38 ..</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										Building the target path is only necessary for disk-based, file system-based, and logical storage pools. If <code class="literal">libvirt</code> detects that the source storage device’s data format differs from the selected storage pool type, the build fails, unless the <code class="literal"><span class="emphasis"><em>overwrite</em></span></code> option is specified.
									</p></div></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify that the pool was created</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-list</code> command to verify that the pool was created.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   no</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Start the storage pool</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-start</code> command to mount the storage pool.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-start guest_images_fs</strong></span>
  Pool guest_images_fs started</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The <code class="literal command">virsh pool-start</code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.
									</p></div></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>[Optional] Turn on autostart</strong></span>
								</p><p class="simpara">
									By default, a storage pool defined with the <code class="literal command">virsh</code> command is not set to automatically start each time libvirtd starts. Use the <code class="literal command">virsh pool-autostart</code> command to configure the storage pool to autostart.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-autostart guest_images_fs</strong></span>
  Pool guest_images_fs marked as autostarted</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-list</code> command to verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   yes</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify the storage pool</strong></span>
								</p><p class="simpara">
									Verify that the storage pool was created correctly, the sizes reported are as expected, and the state is reported as <code class="literal"><span class="emphasis"><em>running</em></span></code>. Verify there is a <code class="literal filename">lost+found</code> directory in the target path on the file system, indicating that the device is mounted.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-info guest_images_fs</strong></span>
  Name:           guest_images_fs
  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0
  State:          running
  Persistent:     yes
  Autostart:      yes
  Capacity:       458.39 GB
  Allocation:     197.91 MB
  Available:      458.20 GB

# <span class="strong strong"><strong>mount | grep /guest_images</strong></span>
  /dev/sdc1 on /guest_images type ext4 (rw)

# <span class="strong strong"><strong>ls -la /guest_images</strong></span>
  total 24
  drwxr-xr-x.  3 root root  4096 May 31 19:47 .
  dr-xr-xr-x. 25 root root  4096 May 31 19:38 ..
  drwx------.  2 root root 16384 May 31 14:18 lost+found</pre></li></ol></div></section><section class="section" id="glusterfs-based-storage-pool-parameters_creating-and-assigning-glusterfs-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.4.2. GlusterFS-based storage pool parameters</h5></div></div></div><p>
							The following provides information about the required parameters for a GlusterFS-based storage pool and an example.
						</p><div class="formalpara"><p class="title"><strong>Parameters</strong></p><p>
								The following table provides a list of required parameters for the XML file for a GlusterFS-based storage pool.
							</p></div><div class="table" id="idm140329465372496"><p class="title"><strong>Table 9.4. GlusterFS-based storage pool parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140329465367648" scope="col">Description</th><th align="left" valign="top" id="idm140329465366560" scope="col">XML</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140329465367648"> <p>
											The type of storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329465366560"> <p>
											<code class="literal">&lt;pool type='gluster'&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329465367648"> <p>
											The name of the storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329465366560"> <p>
											<code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>name</em></span></code>&lt;/name&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329465367648"> <p>
											The hostname or IP address of the Gluster server
										</p>
										 </td><td align="left" valign="top" headers="idm140329465366560"> <p>
											<code class="literal">&lt;source&gt;<br/>    &lt;name=<span class="emphasis"><em>gluster-name</em></span> /&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329465367648"> <p>
											The name of the Gluster server
										</p>
										 </td><td align="left" valign="top" headers="idm140329465366560"> <p>
											    <code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>name</em></span></code>&lt;/name&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329465367648"> <p>
											The path on the Gluster server used for the storage pool.
										</p>
										 </td><td align="left" valign="top" headers="idm140329465366560"> <p>
											    <code class="literal">&lt;dir path=<span class="emphasis"><em>gluster-path</em></span> /&gt;<br/> &lt;/source&gt;</code>
										</p>
										 </td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
								The following is an example of an XML file for a storage pool based on the Gluster file system at 111.222.111.222:
							</p></div><pre class="programlisting language-xml">&lt;pool type='gluster'&gt;
  &lt;name&gt;Gluster_pool&lt;/name&gt;
  &lt;source&gt;
    &lt;host name='111.222.111.222'/&gt;
    &lt;dir path='/'/&gt;
    &lt;name&gt;gluster-vol1&lt;/name&gt;
  &lt;/source&gt;
&lt;/pool&gt;</pre></section></section><section class="section" id="creating-and-assigning-iscsi-based-storage-for-virtual-machines-using-the-cli_creating-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h4 class="title">9.2.2.5. Creating and assigning iSCSI-based storage for virtual machines using the CLI</h4></div></div></div><p>
						The following provides information about creating iSCSI-based storage pools and storage volumes, securing iSCSI-based storage pools with <code class="literal package">libvirt</code> secrets, and assigning volumes to virtual machines.
					</p><h6 id="recommendations">Recommendations</h6><p>
						Internet Small Computer System Interface (iSCSI) is a network protocol for sharing storage devices. iSCSI connects initiators (storage clients) to targets (storage servers) using SCSI instructions over the IP layer.
					</p><p>
						Using iSCSI-based devices to store virtual machines allows for more flexible storage options, such as using iSCSI as a block storage device. The iSCSI devices use a Linux-IO (LIO) target. This is a multi-protocol SCSI target for Linux. In addition to iSCSI, LIO also supports Fibre Channel and Fibre Channel over Ethernet (FCoE).
					</p><p>
						If you need to prevent access to an iSCSI storage pool, you can secure it using a <a class="link" href="index.html#securing-iscsi-storage-pools-with-libvirt-secrets_creating-and-assigning-iscsi-based-storage-for-virtual-machines-using-the-cli" title="9.2.2.5.3. Securing iSCSI storage pools with libvirt secrets">libvirt secret</a>.
					</p><h6 id="prerequisites-creating-and-assigning-iscsi-based-storage-for-virtual-machines-using-the-cli">Prerequisites</h6><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Before you can create an iSCSI-based storage pool, you must create iSCSI targets. You can create iSCSI targets are created using the <code class="literal package">targetcli</code> package, which provides a command set for creating software-backed iSCSI targets.
							</p><p class="simpara">
								For more information and instructions on creating iSCSI targets, see the <span class="emphasis"><em>Red Hat Enterprise Linux Storage Administration Guide</em></span>.
							</p></li></ul></div><section class="section" id="creating-iscsi-based-storage-pools-using-the-cli_creating-and-assigning-iscsi-based-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.5.1. Creating iSCSI-based storage pools using the CLI</h5></div></div></div><p>
							The following provides instructions for creating iSCSI-based storage pools.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Define the storage pool in an XML file</strong></span>
								</p><p class="simpara">
									Create a temporary XML file containing the storage pool parameters required for the new device.
								</p><p class="simpara">
									For information on the required parameters, refer to <a class="link" href="index.html#iscsi-based-storage-pool-parameters_creating-and-assigning-iscsi-based-storage-for-virtual-machines-using-the-cli" title="9.2.2.5.2. iSCSI-based storage pool parameters">Parameters</a>.
								</p></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Create a storage pool</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-define</code> command to create a persistent storage pool based on the XML file created in the previous step.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-define ~/guest_images.xml</strong></span>
  Pool defined from guest_images_fs</pre></li></ol></div><div class="informalexample"><p>
							You can delete the XML file created in step 1 after running the <code class="literal command">virsh pool-define</code> command.
						</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify that the pool was created</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-list</code> command to verify that the pool was created.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   no</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Start the storage pool</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-start</code> command to mount the storage pool.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-start guest_images_fs</strong></span>
  Pool guest_images_fs started</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The <code class="literal command">virsh pool-start</code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.
									</p></div></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>[Optional] Turn on autostart</strong></span>
								</p><p class="simpara">
									By default, a storage pool defined with the <code class="literal command">virsh</code> command is not set to automatically start each time libvirtd starts. Use the <code class="literal command">virsh pool-autostart</code> command to configure the storage pool to autostart.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-autostart guest_images_fs</strong></span>
  Pool guest_images_fs marked as autostarted</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-list</code> command to verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   yes</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify the storage pool</strong></span>
								</p><p class="simpara">
									Verify that the storage pool was created correctly, the sizes reported are as expected, and the state is reported as <code class="literal"><span class="emphasis"><em>running</em></span></code>. Verify there is a <code class="literal filename">lost+found</code> directory in the target path on the file system, indicating that the device is mounted.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-info guest_images_fs</strong></span>
  Name:           guest_images_fs
  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0
  State:          running
  Persistent:     yes
  Autostart:      yes
  Capacity:       458.39 GB
  Allocation:     197.91 MB
  Available:      458.20 GB

# <span class="strong strong"><strong>mount | grep /guest_images</strong></span>
  /dev/sdc1 on /guest_images type ext4 (rw)

# <span class="strong strong"><strong>ls -la /guest_images</strong></span>
  total 24
  drwxr-xr-x.  3 root root  4096 May 31 19:47 .
  dr-xr-xr-x. 25 root root  4096 May 31 19:38 ..
  drwx------.  2 root root 16384 May 31 14:18 lost+found</pre></li></ol></div></section><section class="section" id="iscsi-based-storage-pool-parameters_creating-and-assigning-iscsi-based-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.5.2. iSCSI-based storage pool parameters</h5></div></div></div><p>
							The following provides information about the required parameters for an iSCSI-based storage pool and an example.
						</p><div class="formalpara"><p class="title"><strong>Parameters</strong></p><p>
								The following table provides a list of required parameters for the XML file for an iSCSI-based storage pool.
							</p></div><div class="table" id="idm140329468921504"><p class="title"><strong>Table 9.5. iSCSI-based storage pool parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140329468916656" scope="col">Description</th><th align="left" valign="top" id="idm140329468915568" scope="col">XML</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140329468916656"> <p>
											The type of storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329468915568"> <p>
											<code class="literal">&lt;pool type='iscsi'&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329468916656"> <p>
											The name of the storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329468915568"> <p>
											<code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>name</em></span></code>&lt;/name&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329468916656"> <p>
											The name of the host
										</p>
										 </td><td align="left" valign="top" headers="idm140329468915568"> <p>
											<code class="literal">&lt;source&gt;<br/>   &lt;host name=<span class="emphasis"><em>hostname</em></span> /&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329468916656"> <p>
											The iSCSI IQN
										</p>
										 </td><td align="left" valign="top" headers="idm140329468915568"> <p>
											    <code class="literal">&lt;device path= <span class="emphasis"><em>iSCSI_IQN</em></span> /&gt; <br/> &lt;/source&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329468916656"> <p>
											The path specifying the target. This will be the path used for the storage pool.
										</p>
										 </td><td align="left" valign="top" headers="idm140329468915568"> <p>
											<code class="literal">&lt;target&gt; <br/>    &lt;path&gt;<code class="literal"><span class="emphasis"><em>/dev/disk/by-path</em></span></code>&lt;/path&gt; <br/> &lt;/target&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329468916656"> <p>
											[Optional] The IQN of the iSCSI initiator. This is only needed when the ACL restricts the LUN to a particular initiator.
										</p>
										 </td><td align="left" valign="top" headers="idm140329468915568"> <p>
											<code class="literal">&lt;initiator&gt; <br/>    &lt;iqn name='<span class="emphasis"><em>initiator0</em></span>' /&gt; <br/> &lt;/initiator&gt;</code>
										</p>
										 </td></tr></tbody></table></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The IQN of the iSCSI initiator can be determined using the <code class="literal command">virsh find-storage-pool-sources-as</code> iscsi command.
							</p></div></div><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
								The following is an example of an XML file for a storage pool based on the specified iSCSI device:
							</p></div><pre class="programlisting language-xml">&lt;pool type='iscsi'&gt;
  &lt;name&gt;iSCSI_pool&lt;/name&gt;
  &lt;source&gt;
    &lt;host name='server1.example.com'/&gt;
    &lt;device path='iqn.2010-05.com.example.server1:iscsirhel7guest'/&gt;
  &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/dev/disk/by-path&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre></section><section class="section" id="securing-iscsi-storage-pools-with-libvirt-secrets_creating-and-assigning-iscsi-based-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.5.3. Securing iSCSI storage pools with libvirt secrets</h5></div></div></div><p>
							User name and password parameters can be configured with <code class="literal">virsh</code> to secure an iSCSI storage pool. This can be configured before or after the pool is defined, but the pool must be started for the authentication settings to take effect.
						</p><p>
							The following provides instructions for securing iSCSI-based storage pools with <code class="literal command">libvirt</code> secrets.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								This procedure is required if a <code class="literal"><span class="emphasis"><em>user_ID</em></span></code> and <code class="literal"><span class="emphasis"><em>password</em></span></code> were defined when creating the iSCSI target.
							</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Create a libvirt secret file with a challenge-handshake authentication protocol (CHAP) user name. For example:
								</p><pre class="programlisting language-xml">&lt;secret ephemeral='no' private='yes'&gt;
    &lt;description&gt;Passphrase for the iSCSI example.com server&lt;/description&gt;
    &lt;usage type='iscsi'&gt;
        &lt;target&gt;iscsirhel7secret&lt;/target&gt;
    &lt;/usage&gt;
&lt;/secret&gt;</pre></li><li class="listitem"><p class="simpara">
									Define the libvirt secret with the <code class="literal command">virsh secret-define</code> command.
								</p><p class="simpara">
									<code class="literal"># <span class="strong strong"><strong>virsh secret-define</strong></span> <span class="emphasis"><em>secret.xml</em></span></code>
								</p></li><li class="listitem"><p class="simpara">
									Verify the UUID with the <code class="literal command">virsh secret-list</code> command.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh secret-list</strong></span>
UUID                                  Usage
-------------------------------------------------------------------
2d7891af-20be-4e5e-af83-190e8a922360  iscsi iscsirhel7secret</pre></li><li class="listitem"><p class="simpara">
									Assign a secret to the UUID in the output of the previous step using the <code class="literal command">virsh secret-set-value</code> command. This ensures that the CHAP username and password are in a libvirt-controlled secret list. For example:
								</p><pre class="literallayout"># <span class="strong strong"><strong>MYSECRET=`printf *%s "<span class="emphasis"><em>password123</em></span>" | base64`</strong></span>
# <span class="strong strong"><strong>virsh secret-set-value 2d7891af-20be-4e5e-af83-190e8a922360 $MYSECRET</strong></span></pre></li><li class="listitem"><p class="simpara">
									Add an authentication entry in the storage pool’s XML file using the <code class="literal command">virsh edit</code> command, and add an <code class="literal"><span class="strong strong"><strong>&lt;auth&gt;</strong></span></code> element, specifying <code class="literal"><span class="strong strong"><strong>authentication type</strong></span></code>, <code class="literal"><span class="strong strong"><strong>username</strong></span></code>, and <code class="literal"><span class="strong strong"><strong>secret usage</strong></span></code>.
								</p><p class="simpara">
									For example:
								</p><pre class="programlisting language-xml">&lt;pool type='iscsi'&gt;
  &lt;name&gt;iscsirhel7pool&lt;/name&gt;
    &lt;source&gt;
       &lt;host name='192.168.122.1'/&gt;
       &lt;device path='iqn.2010-05.com.example.server1:iscsirhel7guest'/&gt;
       &lt;auth type='chap' username='redhat'&gt;
          &lt;secret usage='iscsirhel7secret'/&gt;
       &lt;/auth&gt;
    &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/dev/disk/by-path&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The <code class="literal"><span class="strong strong"><strong>&lt;auth&gt;</strong></span></code> sub-element exists in different locations within the virtual machine’s <code class="literal"><span class="strong strong"><strong>&lt;pool&gt;</strong></span></code> and <code class="literal"><span class="strong strong"><strong>&lt;disk&gt;</strong></span></code> XML elements. For a <code class="literal"><span class="strong strong"><strong>&lt;pool&gt;</strong></span></code>, <code class="literal"><span class="strong strong"><strong>&lt;auth&gt;</strong></span></code> is specified within the <code class="literal"><span class="strong strong"><strong>&lt;source&gt;</strong></span></code> element, as this describes where to find the pool sources, since authentication is a property of some pool sources (iSCSI and RBD). For a <code class="literal"><span class="strong strong"><strong>&lt;disk&gt;</strong></span></code>, which is a sub-element of a domain, the authentication to the iSCSI or RBD disk is a property of the disk. In addition, the <code class="literal"><span class="strong strong"><strong>&lt;auth&gt;</strong></span></code> sub-element for a disk differs from that of a storage pool.
									</p><pre class="programlisting language-xml">&lt;auth username='redhat'&gt;
  &lt;secret type='iscsi' usage='iscsirhel7secret'/&gt;
&lt;/auth&gt;</pre></div></div></li><li class="listitem"><p class="simpara">
									To activate the changes, the storage pool must be activated. If the pool has already been started, stop and restart the storage pool:
								</p><p class="simpara">
									<code class="literal"># <span class="strong strong"><strong>virsh pool-destroy</strong></span> <span class="emphasis"><em>iscsirhel7pool</em></span></code>
								</p><p class="simpara">
									<code class="literal"># <span class="strong strong"><strong>virsh pool-start</strong></span> <span class="emphasis"><em>iscsirhel7pool</em></span></code>
								</p></li></ol></div></section></section><section class="section" id="creating-and-assigning-lvm-based-storage-for-virtual-machines-using-the-cli_creating-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h4 class="title">9.2.2.6. Creating and assigning LVM-based storage for virtual machines using the CLI</h4></div></div></div><p>
						The following provides information about creating LVM-based storage pools and storage volumes and assigning volumes to virtual machines.
					</p><section class="section" id="creating-lvm-based-storage-pools-using-the-cli_creating-and-assigning-lvm-based-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.6.1. Creating LVM-based storage pools using the CLI</h5></div></div></div><p>
							The following provides instructions for creating LVM-based storage pools.
						</p><div class="formalpara"><p class="title"><strong>Recommendations</strong></p><p>
								Be aware of the following before creating an LVM-based storage pool:
							</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									LVM-based storage pools do not provide the full flexibility of LVM.
								</li><li class="listitem">
									<code class="literal">libvirt</code> supports thin logical volumes, but does not provide the features of thin storage pools.
								</li><li class="listitem"><p class="simpara">
									LVM-based storage pools are volume groups. You can create volume groups using Logical Volume Manager commands or <code class="literal">virsh</code> commands. To manage volume groups using the <code class="literal">virsh</code> interface, use the <code class="literal">virsh</code> commands to create volume groups.
								</p><p class="simpara">
									For more information about volume groups, refer to the <span class="emphasis"><em>Red Hat Enterprise Linux Logical Volume Manager Administration Guide</em></span>.
								</p></li><li class="listitem">
									LVM-based storage pools require a full disk partition. If activating a new partition or device with these procedures, the partition will be formatted and all data will be erased. If using the host’s existing Volume Group (VG) nothing will be erased. It is recommended to back up the storage device before starting.
								</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Define the storage pool in an XML file</strong></span>
								</p><p class="simpara">
									Create a temporary XML file containing the storage pool parameters required for the new device.
								</p><p class="simpara">
									For information on the required parameters, refer to <a class="link" href="index.html#lvm-based-storage-pool-parameters_creating-and-assigning-lvm-based-storage-for-virtual-machines-using-the-cli" title="9.2.2.6.2. LVM-based storage pool parameters">Parameters</a>.
								</p></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Create a storage pool</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-define</code> command to create a persistent storage pool based on the XML file created in the previous step.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-define ~/guest_images.xml</strong></span>
  Pool defined from guest_images_fs</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You can delete the XML file created in step 1 after running the <code class="literal command">virsh pool-define</code> command.
							</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify that the pool was created</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-list</code> command to verify that the pool was created.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   no</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Start the storage pool</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-start</code> command to mount the storage pool.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-start guest_images_fs</strong></span>
  Pool guest_images_fs started</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The <code class="literal command">virsh pool-start</code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.
									</p></div></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>[Optional] Turn on autostart</strong></span>
								</p><p class="simpara">
									By default, a storage pool defined with the <code class="literal command">virsh</code> command is not set to automatically start each time libvirtd starts. Use the <code class="literal command">virsh pool-autostart</code> command to configure the storage pool to autostart.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-autostart guest_images_fs</strong></span>
  Pool guest_images_fs marked as autostarted</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-list</code> command to verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   yes</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify the storage pool</strong></span>
								</p><p class="simpara">
									Verify that the storage pool was created correctly, the sizes reported are as expected, and the state is reported as <code class="literal"><span class="emphasis"><em>running</em></span></code>. Verify there is a <code class="literal filename">lost+found</code> directory in the target path on the file system, indicating that the device is mounted.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-info guest_images_fs</strong></span>
  Name:           guest_images_fs
  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0
  State:          running
  Persistent:     yes
  Autostart:      yes
  Capacity:       458.39 GB
  Allocation:     197.91 MB
  Available:      458.20 GB

# <span class="strong strong"><strong>mount | grep /guest_images</strong></span>
  /dev/sdc1 on /guest_images type ext4 (rw)

# <span class="strong strong"><strong>ls -la /guest_images</strong></span>
  total 24
  drwxr-xr-x.  3 root root  4096 May 31 19:47 .
  dr-xr-xr-x. 25 root root  4096 May 31 19:38 ..
  drwx------.  2 root root 16384 May 31 14:18 lost+found</pre></li></ol></div></section><section class="section" id="lvm-based-storage-pool-parameters_creating-and-assigning-lvm-based-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.6.2. LVM-based storage pool parameters</h5></div></div></div><p>
							The following provides information about the required parameters for an LVM-based storage pool and an example.
						</p><div class="formalpara"><p class="title"><strong>Parameters</strong></p><p>
								The following table provides a list of required parameters for the XML file for a LVM-based storage pool.
							</p></div><div class="table" id="idm140329469286560"><p class="title"><strong>Table 9.6. LVM-based storage pool parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140329469281712" scope="col">Description</th><th align="left" valign="top" id="idm140329469280624" scope="col">XML</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140329469281712"> <p>
											The type of storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329469280624"> <p>
											<code class="literal">&lt;pool type='logical'&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329469281712"> <p>
											The name of the storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329469280624"> <p>
											<code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>name</em></span></code>&lt;/name&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329469281712"> <p>
											The path to the device for the storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329469280624"> <p>
											<code class="literal">&lt;source&gt; <br/>    &lt;device path='<span class="emphasis"><em>device_path</em></span>' /&gt;`</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329469281712"> <p>
											The name of the volume group
										</p>
										 </td><td align="left" valign="top" headers="idm140329469280624"> <p>
											    <code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>VG-name</em></span></code>&lt;/name&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329469281712"> <p>
											The virtual group format
										</p>
										 </td><td align="left" valign="top" headers="idm140329469280624"> <p>
											    <code class="literal">&lt;format type='lvm2' /&gt; <br/> &lt;/source&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329469281712"> <p>
											The target path
										</p>
										 </td><td align="left" valign="top" headers="idm140329469280624"> <p>
											<code class="literal">&lt;target&gt; <br/>    &lt;path=<span class="emphasis"><em>target_path</em></span> /&gt;<br/> &lt;/target&gt;</code>
										</p>
										 </td></tr></tbody></table></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If the logical volume group is made of multiple disk partitions, there may be multiple source devices listed. For example:
							</p><pre class="screen">&lt;source&gt;
  &lt;device path='/dev/sda1'/&gt;
  &lt;device path='/dev/sdb3'/&gt;
  &lt;device path='/dev/sdc2'/&gt;
  ...
&lt;/source&gt;</pre></div></div><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
								The following is an example of an XML file for a storage pool based on the specified LVM:
							</p></div><pre class="programlisting language-xml">&lt;pool type='logical'&gt;
  &lt;name&gt;guest_images_lvm&lt;/name&gt;
  &lt;source&gt;
    &lt;device path='/dev/sdc'/&gt;
    &lt;name&gt;libvirt_lvm&lt;/name&gt;
    &lt;format type='lvm2'/&gt;
  &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/dev/libvirt_lvm&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre></section></section><section class="section" id="creating-and-assigning-nfs-storage-for-virtual-machines-using-the-cli_creating-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h4 class="title">9.2.2.7. Creating and assigning network-based storage for virtual machines using the CLI</h4></div></div></div><p>
						The following provides information about creating network-based storage pools and storage volumes and assigning volumes to virtual machines.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								To create a Network File System (NFS)-based storage pool, an NFS Server should already be configured to be used by the host machine. For more information about NFS, refer to the <span class="emphasis"><em>Red Hat Enterprise Linux Storage Administration Guide</em></span>.
							</li><li class="listitem">
								Ensure that the required utilities for the file system being used are installed on the host. For example, <code class="literal command">cifs-utils</code> for Common Internet File Systems (CIFS) or <code class="literal command">glusterfs.fuse</code> for GlusterFS.
							</li></ul></div><section class="section" id="creating-nfs-based-storage-pools-using-the-cli_creating-and-assigning-nfs-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.7.1. Creating network-based storage pools using the CLI</h5></div></div></div><p>
							The following provides instructions for creating network-based storage pools.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Define the storage pool in an XML file</strong></span>
								</p><p class="simpara">
									Create a temporary XML file containing the storage pool parameters required for the new device.
								</p><p class="simpara">
									For information on the required parameters, refer to <a class="link" href="index.html#nfs-based-storage-pool-parameters_creating-and-assigning-nfs-storage-for-virtual-machines-using-the-cli" title="9.2.2.7.2. NFS-based storage pool parameters">Parameters</a>.
								</p></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Create a storage pool</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-define</code> command to create a persistent storage pool based on the XML file created in the previous step.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-define ~/guest_images.xml</strong></span>
  Pool defined from guest_images_fs</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You can delete the XML file created in step 1 after running the <code class="literal command">virsh pool-define</code> command.
							</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Define the storage pool target path</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-build</code> command to create a storage pool target path for a pre-formatted file system storage pool, initialize the storage source device, and define the format of the data.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-build guest_images_fs</strong></span>
  Pool guest_images_fs built

# <span class="strong strong"><strong>ls -la /guest_images</strong></span>
  total 8
  drwx------.  2 root root 4096 May 31 19:38 .
  dr-xr-xr-x. 25 root root 4096 May 31 19:38 ..</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify that the pool was created</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-list</code> command to verify that the pool was created.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   no</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Start the storage pool</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-start</code> command to mount the storage pool.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-start guest_images_fs</strong></span>
  Pool guest_images_fs started</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The <code class="literal command">virsh pool-start</code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.
									</p></div></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>[Optional] Turn on autostart</strong></span>
								</p><p class="simpara">
									By default, a storage pool defined with the <code class="literal command">virsh</code> command is not set to automatically start each time libvirtd starts. Use the <code class="literal command">virsh pool-autostart</code> command to configure the storage pool to autostart.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-autostart guest_images_fs</strong></span>
  Pool guest_images_fs marked as autostarted</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-list</code> command to verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   yes</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify the storage pool</strong></span>
								</p><p class="simpara">
									Verify that the storage pool was created correctly, the sizes reported are as expected, and the state is reported as <code class="literal"><span class="emphasis"><em>running</em></span></code>. Verify there is a <code class="literal filename">lost+found</code> directory in the target path on the file system, indicating that the device is mounted.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-info guest_images_fs</strong></span>
  Name:           guest_images_fs
  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0
  State:          running
  Persistent:     yes
  Autostart:      yes
  Capacity:       458.39 GB
  Allocation:     197.91 MB
  Available:      458.20 GB

# <span class="strong strong"><strong>mount | grep /guest_images</strong></span>
  /dev/sdc1 on /guest_images type ext4 (rw)

# <span class="strong strong"><strong>ls -la /guest_images</strong></span>
  total 24
  drwxr-xr-x.  3 root root  4096 May 31 19:47 .
  dr-xr-xr-x. 25 root root  4096 May 31 19:38 ..
  drwx------.  2 root root 16384 May 31 14:18 lost+found</pre></li></ol></div></section><section class="section" id="nfs-based-storage-pool-parameters_creating-and-assigning-nfs-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.7.2. NFS-based storage pool parameters</h5></div></div></div><p>
							The following provides information about the required parameters for an NFS-based storage pool and an example.
						</p><div class="formalpara"><p class="title"><strong>Parameters</strong></p><p>
								The following table provides a list of required parameters for the XML file for an NFS-based storage pool.
							</p></div><div class="table" id="idm140329468114288"><p class="title"><strong>Table 9.7. NFS-based storage pool parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140329468109552" scope="col">Description</th><th align="left" valign="top" id="idm140329468108464" scope="col">XML</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140329468109552"> <p>
											The type of storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329468108464"> <p>
											<code class="literal">&lt;pool type='netfs'&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329468109552"> <p>
											The name of the storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329468108464"> <p>
											<code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>name</em></span></code>&lt;/name&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329468109552"> <p>
											The hostname of the network server where the mount point is located. This can be a hostname or an IP address.
										</p>
										 </td><td align="left" valign="top" headers="idm140329468108464"> <p>
											<code class="literal">&lt;source&gt; <br/>    &lt;host name=<span class="emphasis"><em>hostname</em></span></code> <code class="literal">/&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329468109552"> <p>
											The format of the storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329468108464"> <p>
											One of the following:
										</p>
										 <p>
											    <code class="literal">&lt;format type='nfs' /&gt;</code>
										</p>
										 <p>
											    <code class="literal">&lt;format type='glusterfs' /&gt;</code>
										</p>
										 <p>
											    <code class="literal">&lt;format type='cifs' /&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329468109552"> <p>
											The directory used on the network server
										</p>
										 </td><td align="left" valign="top" headers="idm140329468108464"> <p>
											    <code class="literal">&lt;dir path=<span class="emphasis"><em>source_path</em></span></code> <code class="literal">/&gt; <br/> &lt;/source&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329468109552"> <p>
											The path specifying the target. This will be the path used for the storage pool.
										</p>
										 </td><td align="left" valign="top" headers="idm140329468108464"> <p>
											<code class="literal">&lt;target&gt; <br/>    &lt;path&gt;<code class="literal"><span class="emphasis"><em>target_path</em></span></code>&lt;/path&gt; <br/> &lt;/target&gt;</code>
										</p>
										 </td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
								The following is an example of an XML file for a storage pool based on the <code class="literal filename">/home/net_mount</code> directory of the <code class="literal">file_server</code> NFS server:
							</p></div><pre class="programlisting language-xml">&lt;pool type='netfs'&gt;
  &lt;name&gt;nfspool&lt;/name&gt;
  &lt;source&gt;
    &lt;host name='file_server'/&gt;
    &lt;format type='nfs'/&gt;
    &lt;dir path='/home/net_mount'/&gt;
  &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/var/lib/libvirt/images/nfspool&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre></section></section><section class="section" id="creating-and-assigning-vhba-based-storage-for-virtual-machines-using-the-cli_creating-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h4 class="title">9.2.2.8. Creating and assigning vHBA-based storage for virtual machines using the CLI</h4></div></div></div><p>
						The following provides information about creating vHBA-based storage pools and storage volumes and assigning volumes to virtual machines (VMs).
					</p><section class="section" id="recommendations-creating-and-assigning-vhba-based-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.8.1. Recommendations</h5></div></div></div><p>
							<span class="emphasis"><em>N_Port ID Virtualization</em></span> (NPIV) is a software technology that allows sharing of a single physical Fibre Channel host bus adapter (HBA). This allows multiple VMs to see the same storage from multiple physical hosts, and thus allows for easier migration paths for the storage. As a result, there is no need for the migration to create or copy storage, as long as the correct storage path is specified.
						</p><p>
							In virtualization, the <span class="emphasis"><em>virtual host bus adapter</em></span>, or <span class="emphasis"><em>vHBA</em></span>, controls the Logical Unit Numbers (LUNs) for VMs. For a host to share one Fibre Channel device path between multiple VMs, you must create a vHBA for each VM. A single vHBA cannot be used by multiple VMs.
						</p><p>
							Each vHBA for NPIV is identified by its parent HBA and its own World Wide Node Name (WWNN) and World Wide Port Name (WWPN). The path to the storage is determined by the WWNN and WWPN values. The parent HBA can be defined as <code class="literal"><span class="emphasis"><em>scsi_host#</em></span></code> or as a WWNN/WWPN pair.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If a parent HBA is defined as <code class="literal"><span class="emphasis"><em>scsi_host#</em></span></code> and hardware is added to the host machine, the <code class="literal"><span class="emphasis"><em>scsi_host#</em></span></code> assignment may change. Therefore, it is recommended that you define a parent HBA using a WWNN/WWPN pair.
							</p></div></div><p>
							It is recommended that you define a <code class="literal package">libvirt</code> storage pool based on the vHBA, because this preserves the vHBA configuration.
						</p><p>
							Using a libvirt storage pool has two primary advantages:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The libvirt code can easily find the LUN’s path via virsh command output.
								</li><li class="listitem">
									You can migrate a VM requires only defining and starting a storage pool with the same vHBA name on the target machine. To do this, the vHBA LUN, libvirt storage pool and volume name must be specified in the VM’s XML configuration.
								</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Before creating a vHBA, it is recommended that you configure storage array (SAN)-side zoning in the host LUN to provide isolation between VMs and prevent the possibility of data corruption.
							</p></div></div><p>
							To create a persistent vHBA configuration, first create a libvirt <span class="strong strong"><strong>'scsi'</strong></span> storage pool XML file. For information on the XML file, see <a class="link" href="index.html#creating-vhbas_creating-and-assigning-vhba-based-storage-for-virtual-machines-using-the-cli" title="9.2.2.8.2. Creating vHBAs">Creating vHBAs</a>. When creating a single vHBA that uses a storage pool on the same physical HBA, it is recommended to use a stable location for the <code class="literal">&lt;path&gt;</code> value, such as one of the <code class="literal">/dev/disk/by-{<span class="emphasis"><em>path|id|uuid|label</em></span>}</code> locations on your system.
						</p><p>
							When creating multiple vHBAs that use storage pools on the same physical HBA, the value of the <code class="literal">&lt;path&gt;</code> field must be only <code class="literal">/dev/</code>, otherwise storage pool volumes are visible only to one of the vHBAs, and devices from the host cannot be exposed to multiple VMs with the NPIV configuration.
						</p><p>
							For more information on <code class="literal">&lt;path&gt;</code> and the elements in <code class="literal">&lt;target&gt;</code>, see <a class="link" href="https://libvirt.org/formatstorage.html#StoragePoolTarget">upstream libvirt documentation</a>.
						</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
								Before creating a vHBA-based storage pools with SCSI devices, create a vHBA.
							</p></div></section><section class="section" id="creating-vhbas_creating-and-assigning-vhba-based-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.8.2. Creating vHBAs</h5></div></div></div><p>
							The following provides instructions on creating a virtual host bus adapter (vHBA).
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Locate the HBAs on your host system, using the <code class="literal command">virsh nodedev-list --cap vports</code> command.
								</p><p class="simpara">
									The following example shows a host that has two HBAs that support vHBA:
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh nodedev-list --cap vports</strong></span>
scsi_host3
scsi_host4</pre></li><li class="listitem"><p class="simpara">
									View the HBA’s details, using the <code class="literal command">virsh nodedev-dumpxml <span class="emphasis"><em>HBA_device</em></span></code> command.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh nodedev-dumpxml scsi_host3</strong></span></pre><p class="simpara">
									The output from the command lists the <code class="literal">&lt;name&gt;</code>, <code class="literal">&lt;wwnn&gt;</code>, and <code class="literal">&lt;wwpn&gt;</code> fields, which are used to create a vHBA. <code class="literal">&lt;max_vports&gt;</code> shows the maximum number of supported vHBAs. For example:
								</p><pre class="programlisting language-xml">&lt;device&gt;
  &lt;name&gt;scsi_host3&lt;/name&gt;
  &lt;path&gt;/sys/devices/pci0000:00/0000:00:04.0/0000:10:00.0/host3&lt;/path&gt;
  &lt;parent&gt;pci_0000_10_00_0&lt;/parent&gt;
  &lt;capability type='scsi_host'&gt;
    &lt;host&gt;3&lt;/host&gt;
    &lt;unique_id&gt;0&lt;/unique_id&gt;
    &lt;capability type='fc_host'&gt;
      &lt;wwnn&gt;20000000c9848140&lt;/wwnn&gt;
      &lt;wwpn&gt;10000000c9848140&lt;/wwpn&gt;
      &lt;fabric_wwn&gt;2002000573de9a81&lt;/fabric_wwn&gt;
    &lt;/capability&gt;
    &lt;capability type='vport_ops'&gt;
      &lt;max_vports&gt;127&lt;/max_vports&gt;
      &lt;vports&gt;0&lt;/vports&gt;
    &lt;/capability&gt;
  &lt;/capability&gt;
&lt;/device&gt;</pre><p class="simpara">
									In this example, the <code class="literal">&lt;max_vports&gt;</code> value shows there are a total 127 virtual ports available for use in the HBA configuration. The <code class="literal">&lt;vports&gt;</code> value shows the number of virtual ports currently being used. These values update after creating a vHBA.
								</p></li><li class="listitem"><p class="simpara">
									Create an XML file similar to one of the following for the vHBA host. In these examples, the file is named <code class="literal filename">vhba_host3.xml</code>.
								</p><p class="simpara">
									This example uses <code class="literal"><span class="strong strong"><strong>scsi_host3</strong></span></code> to describe the parent vHBA.
								</p><pre class="programlisting language-xml">&lt;device&gt;
  &lt;parent&gt;scsi_host3&lt;/parent&gt;
  &lt;capability type='scsi_host'&gt;
    &lt;capability type='fc_host'&gt;
    &lt;/capability&gt;
  &lt;/capability&gt;
&lt;/device&gt;</pre><p class="simpara">
									This example uses a WWNN/WWPN pair to describe the parent vHBA.
								</p><pre class="programlisting language-xml">&lt;device&gt;
  &lt;name&gt;vhba&lt;/name&gt;
  &lt;parent wwnn='20000000c9848140' wwpn='10000000c9848140'/&gt;
  &lt;capability type='scsi_host'&gt;
    &lt;capability type='fc_host'&gt;
    &lt;/capability&gt;
  &lt;/capability&gt;
&lt;/device&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The WWNN and WWPN values must match those in the HBA details seen in the previous step.
									</p></div></div><p class="simpara">
									The <code class="literal">&lt;parent&gt;</code> field specifies the HBA device to associate with this vHBA device. The details in the <code class="literal">&lt;device&gt;</code> tag are used in the next step to create a new vHBA device for the host. For more information on the <code class="literal">nodedev</code> XML format, see <a class="link" href="https://libvirt.org/formatnode.html">the libvirt upstream pages</a>.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The <code class="literal command">virsh</code> command does not provide a way to define the <code class="literal">parent_wwnn</code>, <code class="literal">parent_wwpn</code>, or <code class="literal">parent_fabric_wwn</code> attributes.
									</p></div></div></li><li class="listitem"><p class="simpara">
									Create a VHBA based on the XML file created in the previous step using the <code class="literal command">virsh nodev-create</code> command.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh nodedev-create vhba_host3</strong></span>
Node device scsi_host5 created from vhba_host3.xml</pre></li><li class="listitem"><p class="simpara">
									Verify the new vHBA’s details (scsi_host5) using the <code class="literal command">virsh nodedev-dumpxml</code> command:
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh nodedev-dumpxml scsi_host5</strong></span>
&lt;device&gt;
  &lt;name&gt;scsi_host5&lt;/name&gt;
  &lt;path&gt;/sys/devices/pci0000:00/0000:00:04.0/0000:10:00.0/host3/vport-3:0-0/host5&lt;/path&gt;
  &lt;parent&gt;scsi_host3&lt;/parent&gt;
  &lt;capability type='scsi_host'&gt;
    &lt;host&gt;5&lt;/host&gt;
    &lt;unique_id&gt;2&lt;/unique_id&gt;
    &lt;capability type='fc_host'&gt;
      &lt;wwnn&gt;5001a4a93526d0a1&lt;/wwnn&gt;
      &lt;wwpn&gt;5001a4ace3ee047d&lt;/wwpn&gt;
      &lt;fabric_wwn&gt;2002000573de9a81&lt;/fabric_wwn&gt;
    &lt;/capability&gt;
  &lt;/capability&gt;
&lt;/device&gt;</pre></li></ol></div></section><section class="section" id="creating-vhba-based-storage-pools-using-the-cli_creating-and-assigning-vhba-based-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.8.3. Creating vHBA-based storage pools using the CLI</h5></div></div></div><p>
							The following provides instructions for creating vHBA-based storage pools.
						</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									Ensure that there are vHBAs. For more information, see <a class="link" href="index.html#creating-vhbas_creating-and-assigning-vhba-based-storage-for-virtual-machines-using-the-cli" title="9.2.2.8.2. Creating vHBAs">Creating vHBAs</a>.
								</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Define the storage pool in an XML file</strong></span>
								</p><p class="simpara">
									Create a temporary XML file containing the storage pool parameters required for the new device.
								</p><p class="simpara">
									For information on the required parameters, refer to <a class="link" href="index.html#vhba-based-storage-pool-parameters_creating-and-assigning-vhba-based-storage-for-virtual-machines-using-the-cli" title="9.2.2.8.4. vHBA-based storage pool parameters">Parameters</a>.
								</p></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Create a storage pool</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-define</code> command to create a persistent storage pool based on the XML file created in the previous step.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-define ~/guest_images.xml</strong></span>
  Pool defined from guest_images_fs</pre></li></ol></div><div class="informalexample"><p>
							You can delete the XML file created in step 1 after running the <code class="literal command">virsh pool-define</code> command.
						</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify that the pool was created</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-list</code> command to verify that the pool was created.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   no</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Start the storage pool</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-start</code> command to mount the storage pool.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-start guest_images_fs</strong></span>
  Pool guest_images_fs started</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The <code class="literal command">virsh pool-start</code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.
									</p></div></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>[Optional] Turn on autostart</strong></span>
								</p><p class="simpara">
									By default, a storage pool defined with the <code class="literal command">virsh</code> command is not set to automatically start each time libvirtd starts. Use the <code class="literal command">virsh pool-autostart</code> command to configure the storage pool to autostart.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-autostart guest_images_fs</strong></span>
  Pool guest_images_fs marked as autostarted</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state</strong></span>
								</p><p class="simpara">
									Use the <code class="literal command">virsh pool-list</code> command to verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   yes</pre></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Verify the storage pool</strong></span>
								</p><p class="simpara">
									Verify that the storage pool was created correctly, the sizes reported are as expected, and the state is reported as <code class="literal"><span class="emphasis"><em>running</em></span></code>. Verify there is a <code class="literal filename">lost+found</code> directory in the target path on the file system, indicating that the device is mounted.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-info guest_images_fs</strong></span>
  Name:           guest_images_fs
  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0
  State:          running
  Persistent:     yes
  Autostart:      yes
  Capacity:       458.39 GB
  Allocation:     197.91 MB
  Available:      458.20 GB

# <span class="strong strong"><strong>mount | grep /guest_images</strong></span>
  /dev/sdc1 on /guest_images type ext4 (rw)

# <span class="strong strong"><strong>ls -la /guest_images</strong></span>
  total 24
  drwxr-xr-x.  3 root root  4096 May 31 19:47 .
  dr-xr-xr-x. 25 root root  4096 May 31 19:38 ..
  drwx------.  2 root root 16384 May 31 14:18 lost+found</pre></li></ol></div></section><section class="section" id="vhba-based-storage-pool-parameters_creating-and-assigning-vhba-based-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.8.4. vHBA-based storage pool parameters</h5></div></div></div><p>
							The following provides information about the required parameters for a vHBA-based storage pool and an example.
						</p><div class="formalpara"><p class="title"><strong>Parameters</strong></p><p>
								The following table provides a list of required parameters for the XML file for a vHBA-based storage pool.
							</p></div><div class="table" id="idm140329475528160"><p class="title"><strong>Table 9.8. vHBA-based storage pool parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140329475523312" scope="col">Description</th><th align="left" valign="top" id="idm140329466710880" scope="col">XML</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140329475523312"> <p>
											The type of storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329466710880"> <p>
											<code class="literal">&lt;pool type='scsi'&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329475523312"> <p>
											The name of the storage pool
										</p>
										 </td><td align="left" valign="top" headers="idm140329466710880"> <p>
											<code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>name</em></span></code>&lt;/name&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329475523312"> <p>
											The identifier of the vHBA. The <code class="literal">parent</code> attribute is optional.
										</p>
										 </td><td align="left" valign="top" headers="idm140329466710880"> <p>
											<code class="literal">&lt;source&gt; <br/>    &lt;adapter type='fc_host'<br/>    [parent=<span class="emphasis"><em>parent_scsi_device</em></span>]<br/>    wwnn='<span class="emphasis"><em>WWNN</em></span>'<br/>    wwpn='<span class="emphasis"><em>WWPN</em></span>' /&gt;<br/> &lt;/source&gt;</code>
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140329475523312"> <p>
											The target path. This will be the path used for the storage pool.
										</p>
										 </td><td align="left" valign="top" headers="idm140329466710880"> <p>
											<code class="literal">&lt;target&gt; <br/>    &lt;path=<span class="emphasis"><em>target_path</em></span> /&gt;<br/> &lt;/target&gt;</code>
										</p>
										 </td></tr></tbody></table></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								When the <code class="literal">&lt;path&gt;</code> field is <code class="literal filename"><span class="strong strong"><strong>/dev/</strong></span></code>, <code class="literal package">libvirt</code> generates a unique short device path for the volume device path. For example, <code class="literal filename"><span class="strong strong"><strong>/dev/sdc</strong></span></code>. Otherwise, the physical host path is used. For example, <code class="literal filename"><span class="strong strong"><strong>/dev/disk/by-path/pci-0000:10:00.0-fc-0x5006016044602198-lun-0</strong></span></code>. The unique short device path allows the same volume to be listed in multiple virtual machines (VMs) by multiple storage pools. If the physical host path is used by multiple VMs, duplicate device type warnings may occur.
							</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The <code class="literal">parent</code> attribute can be used in the <code class="literal">&lt;adapter&gt;</code> field to identify the physical HBA parent from which the NPIV LUNs by varying paths can be used. This field, <code class="literal">scsi_hostN</code>, is combined with the <code class="literal">vports</code> and <code class="literal">max_vports</code> attributes to complete the parent identification. The <code class="literal">parent</code>, <code class="literal">parent_wwnn</code>, <code class="literal">parent_wwpn</code>, or <code class="literal">parent_fabric_wwn</code> attributes provide varying degrees of assurance that after the host reboots the same HBA is used.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										If no <code class="literal">parent</code> is specified, <code class="literal package">libvirt</code> uses the first <code class="literal">scsi_hostN</code> adapter that supports NPIV.
									</li><li class="listitem">
										If only the <code class="literal">parent</code> is specified, problems can arise if additional SCSI host adapters are added to the configuration.
									</li><li class="listitem">
										If <code class="literal">parent_wwnn</code> or <code class="literal">parent_wwpn</code> is specified, after the host reboots the same HBA is used.
									</li><li class="listitem">
										If <code class="literal">parent_fabric_wwn</code> is used, after the host reboots an HBA on the same fabric is selected, regardless of the <code class="literal">scsi_hostN</code> used.
									</li></ul></div></div></div><div class="formalpara"><p class="title"><strong>Examples</strong></p><p>
								The following are examples of XML files for vHBA-based storage pools.
							</p></div><p>
							The following is an example of a storage pool that is the only storage pool on the HBA:
						</p><pre class="programlisting language-xml">&lt;pool type='scsi'&gt;
  &lt;name&gt;vhbapool_host3&lt;/name&gt;
  &lt;source&gt;
    &lt;adapter type='fc_host' wwnn='5001a4a93526d0a1' wwpn='5001a4ace3ee047d'/&gt;
  &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/dev/disk/by-path&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre><p>
							The following is an example of a storage pool that is one of several storage pools that use a single vHBA and uses the <code class="literal">parent</code> attribute to identify the SCSI host device:
						</p><pre class="programlisting language-xml">&lt;pool type='scsi'&gt;
  &lt;name&gt;vhbapool_host3&lt;/name&gt;
  &lt;source&gt;
    &lt;adapter type='fc_host' parent='scsi_host3' wwnn='5001a4a93526d0a1' wwpn='5001a4ace3ee047d'/&gt;
  &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/dev/disk/by-path&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre></section><section class="section" id="assigning-scsi-lun-based-storage-volumes-to-virtual-machines-using-the-cli_creating-and-assigning-vhba-based-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.8.5. Assigning and connecting SCSI LUN-based storage volumes to virtual machines using the CLI</h5></div></div></div><p>
							The following provides information on how to configure a virtual machine to use a vHBA LUN and how to reconnect to an exposed LUN after a hardware failure. .Prerequisites
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Ensure that there are one or more vHBA storage pools.
								</li></ul></div><section class="section" id="creating-vhba-based-storage-pools-using-the-cli_assigning-scsi-lun-based-storage-volumes-to-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h6 class="title">9.2.2.8.5.1. Creating vHBA-based storage pools using the CLI</h6></div></div></div><p>
								The following provides instructions for creating vHBA-based storage pools.
							</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
										Ensure that there are vHBAs. For more information, see <a class="link" href="index.html#creating-vhbas_creating-and-assigning-vhba-based-storage-for-virtual-machines-using-the-cli" title="9.2.2.8.2. Creating vHBAs">Creating vHBAs</a>.
									</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Define the storage pool in an XML file</strong></span>
									</p><p class="simpara">
										Create a temporary XML file containing the storage pool parameters required for the new device.
									</p><p class="simpara">
										For information on the required parameters, refer to <a class="link" href="index.html#vhba-based-storage-pool-parameters_creating-and-assigning-vhba-based-storage-for-virtual-machines-using-the-cli" title="9.2.2.8.4. vHBA-based storage pool parameters">Parameters</a>.
									</p></li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Create a storage pool</strong></span>
									</p><p class="simpara">
										Use the <code class="literal command">virsh pool-define</code> command to create a persistent storage pool based on the XML file created in the previous step.
									</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-define ~/guest_images.xml</strong></span>
  Pool defined from guest_images_fs</pre></li></ol></div><div class="informalexample"><p>
								You can delete the XML file created in step 1 after running the <code class="literal command">virsh pool-define</code> command.
							</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Verify that the pool was created</strong></span>
									</p><p class="simpara">
										Use the <code class="literal command">virsh pool-list</code> command to verify that the pool was created.
									</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   no</pre></li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Start the storage pool</strong></span>
									</p><p class="simpara">
										Use the <code class="literal command">virsh pool-start</code> command to mount the storage pool.
									</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-start guest_images_fs</strong></span>
  Pool guest_images_fs started</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											The <code class="literal command">virsh pool-start</code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.
										</p></div></div></li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>[Optional] Turn on autostart</strong></span>
									</p><p class="simpara">
										By default, a storage pool defined with the <code class="literal command">virsh</code> command is not set to automatically start each time libvirtd starts. Use the <code class="literal command">virsh pool-autostart</code> command to configure the storage pool to autostart.
									</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-autostart guest_images_fs</strong></span>
  Pool guest_images_fs marked as autostarted</pre></li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state</strong></span>
									</p><p class="simpara">
										Use the <code class="literal command">virsh pool-list</code> command to verify the <code class="literal"><span class="emphasis"><em>Autostart</em></span></code> state.
									</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   yes</pre></li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Verify the storage pool</strong></span>
									</p><p class="simpara">
										Verify that the storage pool was created correctly, the sizes reported are as expected, and the state is reported as <code class="literal"><span class="emphasis"><em>running</em></span></code>. Verify there is a <code class="literal filename">lost+found</code> directory in the target path on the file system, indicating that the device is mounted.
									</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-info guest_images_fs</strong></span>
  Name:           guest_images_fs
  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0
  State:          running
  Persistent:     yes
  Autostart:      yes
  Capacity:       458.39 GB
  Allocation:     197.91 MB
  Available:      458.20 GB

# <span class="strong strong"><strong>mount | grep /guest_images</strong></span>
  /dev/sdc1 on /guest_images type ext4 (rw)

# <span class="strong strong"><strong>ls -la /guest_images</strong></span>
  total 24
  drwxr-xr-x.  3 root root  4096 May 31 19:47 .
  dr-xr-xr-x. 25 root root  4096 May 31 19:38 ..
  drwx------.  2 root root 16384 May 31 14:18 lost+found</pre></li></ol></div></section></section></section><section class="section" id="creating-and-assigning-storage-volumes-using-the-cli_creating-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h4 class="title">9.2.2.9. Creating and assigning storage volumes using the CLI</h4></div></div></div><p>
						The following provides information on creating storage volumes from storage pools and assigning the storage volumes to virtual machines using the CLI. The procedure is the same for all types of storage pools.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Storage pools on the host with unallocated space
							</li></ul></div><section class="section" id="procedure-creating-and-assigning-storage-volumes-using-the-cli"><div class="titlepage"><div><div><h5 class="title">9.2.2.9.1. Procedure</h5></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Define a storage volume in an XML file</strong></span>
								</p><p class="simpara">
									Create a temporary XML file containing the storage volume’s parameters.
								</p><p class="simpara">
									The following is a list of required storage volume parameters:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>name</strong></span> - The name of the storage volume.
										</li><li class="listitem">
											<span class="strong strong"><strong>allocation</strong></span> - The total storage allocation for the storage volume.
										</li><li class="listitem">
											<span class="strong strong"><strong>capacity</strong></span> - The logical capacity of the storage volume. If the volume is sparse, this value can differ from the <code class="literal"><span class="emphasis"><em>allocation</em></span></code> value.
										</li><li class="listitem"><p class="simpara">
											<span class="strong strong"><strong>target</strong></span> - The path to the storage volume on the host system, and optionally its permissions and label.
										</p><p class="simpara">
											The following shows an example of a storage volume definition XML file. In this example, the file is saved to <code class="literal filename">~/guest_volume.xml</code>.
										</p><pre class="screen">  &lt;volume&gt;
    &lt;name&gt;volume1&lt;/name&gt;
    &lt;allocation&gt;0&lt;/allocation&gt;
    &lt;capacity&gt;20&lt;/capacity&gt;
    &lt;target&gt;
      &lt;path&gt;/var/lib/virt/images/sparse.img&lt;/path&gt;
    &lt;/target&gt;
  &lt;/volume&gt;</pre></li></ul></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Create and assign the storage volume</strong></span>
								</p><p class="simpara">
									The <code class="literal command">virsh vol-create</code> and <code class="literal command">virsh vol-create-as</code> commands are used to create storage volumes from most storage pools types.
								</p><p class="simpara">
									The following is a list of the storage pool types that do not support the <code class="literal command">virsh vol-create</code> and <code class="literal command">virsh vol-create-as</code> commands and the methods to use with each of them to create storage volumes:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>GlusterFS-based</strong></span> - Use the <code class="literal command">qemu-img</code> command to create storage volumes.
										</li><li class="listitem">
											<span class="strong strong"><strong>iSCSI-based</strong></span> - Prepare the iSCSI LUNs in advance on the iSCSI server.
										</li><li class="listitem">
											<span class="strong strong"><strong>Multipath-based</strong></span> - Use the <code class="literal command">multipathd</code> command to prepare or manage the multipath.
										</li><li class="listitem">
											<span class="strong strong"><strong>vHBA-based</strong></span> - Prepare the fibre channel card in advance.
										</li></ul></div><p class="simpara">
									Use the <code class="literal command">virsh vol-create</code> command to create and assign the storage volume based on the XML file. Specify the virtual machine to which the storage volume will be assigned in the <code class="literal command">virsh vol-create</code> command.
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh vol-create guest_images_dir ~/guest_volume.xml</strong></span>
  Vol volume1 created</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										You can delete the XML file created in step 1 after running the <code class="literal command">virsh vol-create</code> command.
									</p></div></div><p class="simpara">
									For GlusterFS-based, multipath-based, and RBD-based storage pools, describe the storage volume using the following XML format and add it to the domain XML:
								</p><pre class="screen">  &lt;disk type='network' device='disk'&gt;
    &lt;driver name='qemu' type='raw'/&gt;
    &lt;source protocol='gluster' name='Volume1/Image'&gt;
      &lt;host name='example.org' port='6000'/&gt;
    &lt;/source&gt;
    &lt;target dev='vda' bus='virtio'/&gt;
    &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/&gt;
  &lt;/disk&gt;</pre><p class="simpara">
									For multipath-based storage pools, describe the storage volume using the following XML format and add it to the domain XML:
								</p><pre class="screen">&lt;disk type='block' device='disk'&gt;
&lt;driver name='qemu' type='raw'/&gt;
&lt;source dev='/dev/mapper/mpatha' /&gt;
&lt;target dev='sdc' bus='scsi'/&gt;
&lt;/disk&gt;</pre><p class="simpara">
									For RBD-based storage pools, describe the storage volume using the following XML format and add it to the domain XML:
								</p><pre class="screen">  &lt;disk type='network' device='disk'&gt;
    &lt;driver name='qemu' type='raw'/&gt;
    &lt;source protocol='rbd' name='pool/image'&gt;
      &lt;host name='mon1.example.org' port='6321'/&gt;
    &lt;/source&gt;
    &lt;target dev='vdc' bus='virtio'/&gt;
  &lt;/disk&gt;</pre></li></ol></div></section></section></section><section class="section" id="deleting-storage-for-virtual-machines-using-the-cli_managing-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h3 class="title">9.2.3. Deleting storage for virtual machines using the CLI</h3></div></div></div><p>
					The following provides information about deleting storage pools and storage volumes using the CLI.
				</p><section class="section" id="deleting-storage-pools-using-the-cli_deleting-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h4 class="title">9.2.3.1. Deleting storage pools using the CLI</h4></div></div></div><p>
						The following provides information on deleting storage pools.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								To avoid negatively affecting other virtual machines that use the storage pool you want to delete, it is recommended that you stop the storage pool and release any resources being used by it.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								List the defined storage pools using the <code class="literal command">virsh pool-list</code> command.
							</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>
Name                 State      Autostart
-------------------------------------------
default              active     yes
Downloads            active     yes
RHEL8-Storage-Pool   active     yes</pre></li><li class="listitem"><p class="simpara">
								Stop the storage pool you want to delete using the <code class="literal command">virsh pool-destroy</code> command.
							</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-destroy Downloads</strong></span>
Pool Downloads destroyed</pre></li><li class="listitem"><p class="simpara">
								(<span class="emphasis"><em>Optional</em></span>) For some types of storage pools, you can optionally remove the directory where the storage pool resides using the <code class="literal command">virsh pool-delete</code> command. Note that to remove the directory where the storage pool resides, it must be empty.
							</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-delete Downloads</strong></span>
Pool Downloads deleted</pre></li><li class="listitem"><p class="simpara">
								Delete the definition of the storage pool using the <code class="literal command">virsh pool-undefine</code> command.
							</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-undefine Downloads</strong></span>
Pool Downloads has been undefined</pre></li><li class="listitem"><p class="simpara">
								Confirm that the storage pool was deleted.
							</p><pre class="literallayout"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>
Name                 State      Autostart
-------------------------------------------
default              active     yes
RHEL8-Storage-Pool   active     yes</pre></li></ol></div></section><section class="section" id="deleting-storage-volumes-using-the-cli_deleting-storage-for-virtual-machines-using-the-cli"><div class="titlepage"><div><div><h4 class="title">9.2.3.2. Deleting storage volumes using the CLI</h4></div></div></div><p>
						The following provides information on deleting storage volumes using the CLI.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								To avoid negatively affecting virtual machines that use the storage volume you want to delete, it is recommended that you release any resources using it.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								List the defined storage volumes in a storage pool using the <code class="literal command">virsh vol-list</code> command. The command must specify the name or path of a storage volume.
							</p><pre class="literallayout"># <span class="strong strong"><strong>virsh vol-list --pool RHEL8-Storage-Pool</strong></span>
 Name                 Path
---------------------------------------------------------------
 .bash_history        /home/VirtualMachines/.bash_history
 .bash_logout         /home/VirtualMachines/.bash_logout
 .bash_profile        /home/VirtualMachines/.bash_profile
 .bashrc              /home/VirtualMachines/.bashrc
 .git-prompt.sh       /home/VirtualMachines/.git-prompt.sh
 .gitconfig           /home/VirtualMachines/.gitconfig
 RHEL8_Volume.qcow2   /home/VirtualMachines/RHEL8_Volume.qcow2</pre></li><li class="listitem"><p class="simpara">
								Delete storage volumes using the <code class="literal command">virsh vol-delete</code> command. The command must specify the name or path of the storage volume and the storage pool from which the storage volume is abstracted.
							</p><pre class="literallayout"># <span class="strong strong"><strong>virsh vol-delete --pool RHEL-Storage-Pool RHEL8_Volume.qcow2</strong></span>
Pool RHEL8_Volume.qcow2 deleted</pre></li></ol></div></section></section></section></section><section class="chapter" id="assembly_managing-nvidia-vgpu-devices_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Chapter 10. Managing NVIDIA vGPU devices</h1></div></div></div><p>
			The vGPU feature makes it possible to divide a physical NVIDIA GPU device into multiple virtual devices referred to as <code class="literal">mediated devices</code>. These mediated devices can then be assigned to multiple virtual machines (VMs) as virtual GPUs. As a result, these VMs share the performance of a single physical GPU.
		</p><p>
			Note, however, that assigning a physical GPU to VMs, with or without using mediated devices, makes it impossible for the host to use the GPU.
		</p><section class="section" id="proc_setting-up-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices"><div class="titlepage"><div><div><h2 class="title">10.1. Setting up NVIDIA vGPU devices</h2></div></div></div><p>
				To set up the NVIDIA vGPU feature, you need to obtain NVIDIA vGPU drivers for your GPU device, create mediated devices, and assign them to the intended virtual machines. For detailed instructions, see below.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Creating mediated vGPU devices is only possible on a limited set of NVIDIA GPUs. For an up-to-date list of these devices, see <a class="link" href="https://docs.nvidia.com/grid/latest/grid-vgpu-release-notes-red-hat-el-kvm/index.html#validated-platforms">the NVIDIA GPU Software Documentation</a>.
					</p><p class="simpara">
						If you do not know which GPU your host is using, install the <span class="emphasis"><em>lshw</em></span> package and use the <code class="literal">lshw -C display</code> command. The following example shows the system is using an NVIDIA Tesla P4 GPU, compatible with vGPU.
					</p><pre class="literallayout"># <span class="strong strong"><strong>lshw -C display</strong></span>

*-display
       description: 3D controller
       product: GP104GL [Tesla P4]
       vendor: NVIDIA Corporation
       physical id: 0
       bus info: pci@0000:01:00.0
       version: a1
       width: 64 bits
       clock: 33MHz
       capabilities: pm msi pciexpress cap_list
       configuration: driver=vfio-pci latency=0
       resources: irq:16 memory:f6000000-f6ffffff memory:e0000000-efffffff memory:f0000000-f1ffffff</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Obtain the NVIDIA vGPU drivers and install them on your system. For instructions, see <a class="link" href="https://docs.nvidia.com/grid/latest/grid-software-quick-start-guide/index.html#getting-your-nvidia-grid-software">the NVIDIA documentation</a>.
					</li><li class="listitem"><p class="simpara">
						If the NVIDIA software installer did not create the <span class="strong strong"><strong>/etc/modprobe.d/nvidia-installer-disable-nouveau.conf</strong></span> file, create a <code class="literal">conf</code> file of any name in the <span class="strong strong"><strong>/etc/modprobe.d/</strong></span>. Then, add the following lines in the file:
					</p><pre class="literallayout">blacklist nouveau
options nouveau modeset=0</pre></li><li class="listitem"><p class="simpara">
						Regenerate the initial ramdisk for the current kernel, then reboot.
					</p><pre class="literallayout"># <span class="strong strong"><strong>dracut --force</strong></span>
# <span class="strong strong"><strong>reboot</strong></span></pre><p class="simpara">
						If you need to use a prior supported kernel version with mediated devices, regenerate the initial ramdisk for all installed kernel versions.
					</p><pre class="literallayout"># <span class="strong strong"><strong>dracut --regenerate-all --force</strong></span>
# <span class="strong strong"><strong>reboot</strong></span></pre></li><li class="listitem"><p class="simpara">
						Check that the <code class="literal">nvidia_vgpu_vfio</code> module has been loaded by the kernel and that the <code class="literal">nvidia-vgpu-mgr.service</code> service is running.
					</p><pre class="literallayout"># <span class="strong strong"><strong>lsmod | grep nvidia_vgpu_vfio</strong></span>
nvidia_vgpu_vfio 45011 0
nvidia 14333621 10 nvidia_vgpu_vfio
mdev 20414 2 vfio_mdev,nvidia_vgpu_vfio
vfio 32695 3 vfio_mdev,nvidia_vgpu_vfio,vfio_iommu_type1
# <span class="strong strong"><strong>systemctl status nvidia-vgpu-mgr.service</strong></span>
nvidia-vgpu-mgr.service - NVIDIA vGPU Manager Daemon
   Loaded: loaded (/usr/lib/systemd/system/nvidia-vgpu-mgr.service; enabled; vendor preset: disabled)
   Active: active (running) since Fri 2018-03-16 10:17:36 CET; 5h 8min ago
 Main PID: 1553 (nvidia-vgpu-mgr)
 [...]</pre></li><li class="listitem"><p class="simpara">
						Write a device UUID to the <span class="strong strong"><strong>/sys/class/mdev_bus/<code class="literal">pci_dev</code>/mdev_supported_types/<code class="literal">type-id</code>/create</strong></span> file, where <code class="literal">pci_dev</code> is the PCI address of the host GPU, and <code class="literal">type-id</code> is an ID of the host GPU type.
					</p><p class="simpara">
						The following example shows how to create a mediated device of the <code class="literal">nvidia-63</code> vGPU type on an NVIDIA Tesla P4 card:
					</p><pre class="literallayout"># <span class="strong strong"><strong>uuidgen</strong></span>
30820a6f-b1a5-4503-91ca-0c10ba58692a
# <span class="strong strong"><strong>echo "30820a6f-b1a5-4503-91ca-0c10ba58692a" &gt; /sys/class/mdev_bus/0000:01:00.0/mdev_supported_types/nvidia-63/create</strong></span></pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							For <code class="literal">type-id</code> values for specific GPU devices, see the <a class="link" href="https://docs.nvidia.com/grid/latest/grid-vgpu-user-guide/index.html#virtual-gpu-types-grid">Virtual GPU software documentation</a>. Note that only Q-series NVIDIA vGPUs, such as GRID P4-2Q, are supported as mediated device GPU types on Linux VMs.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Add the following lines to the <span class="strong strong"><strong>&lt;devices/&gt;</strong></span> sections in the XML configurations of guests that you want to share the vGPU resources. Use the UUID value generated by the <span class="strong strong"><strong>uuidgen</strong></span> command in the previous step. Each UUID can only be assigned to one guest at a time.
					</p><pre class="programlisting language-xml">&lt;hostdev mode='subsystem' type='mdev' managed='no' model='vfio-pci'&gt;
  &lt;source&gt;
    &lt;address uuid='30820a6f-b1a5-4503-91ca-0c10ba58692a'/&gt;
  &lt;/source&gt;
&lt;/hostdev&gt;</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For the vGPU mediated devices to work properly on the assigned VMs, NVIDIA vGPU guest software licensing needs to be set up for the VMs. For further information and instructions, see <a class="link" href="https://docs.nvidia.com/grid/latest/index.html#virtual-gpu-licensing">the NVIDIA virtual GPU software documentation</a>.
					</li></ul></div></section><section class="section" id="proc_removing-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices"><div class="titlepage"><div><div><h2 class="title">10.2. Removing NVIDIA vGPU devices</h2></div></div></div><p>
				To change the configuration of <a class="link" href="index.html#proc_setting-up-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices" title="10.1. Setting up NVIDIA vGPU devices">assigned vGPU mediated devices</a>, the existing devices have to be removed from the assigned VMs. For instructions, see below:
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To remove a mediated vGPU device, use the following command when the device is inactive, and replace <code class="literal">uuid</code> with the UUID of the device, for example <code class="literal">30820a6f-b1a5-4503-91ca-0c10ba58692a</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo 1 &gt; /sys/bus/mdev/devices/<code class="literal">uuid</code>/remove</strong></span></pre><p class="simpara">
						Note that attempting to remove a vGPU device that is currently in use by a VM triggers the following error:
					</p><pre class="literallayout">echo: write error: Device or resource busy</pre></li></ul></div></section><section class="section" id="proc_obtaining-nvidia-vgpu-information-about-your-system_assembly_managing-nvidia-vgpu-devices"><div class="titlepage"><div><div><h2 class="title">10.3. Obtaining NVIDIA vGPU information about your system</h2></div></div></div><p>
				To evaluate the capabilities of the vGPU features available to you, you can obtain additional information about mediated devices on your system, such as how many mediated devices of a given type can be created.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the <span class="strong strong"><strong>virsh nodedev-list --cap mdev_types</strong></span> and <span class="strong strong"><strong>virsh nodedev-dumpxml</strong></span> commands.
					</p><p class="simpara">
						For example, the following output shows available vGPU types if you are using a physical Tesla P4 card:
					</p><pre class="literallayout"><span class="strong strong"><strong>$ virsh nodedev-list --cap mdev_types</strong></span>
pci_0000_01_00_0
<span class="strong strong"><strong>$ virsh nodedev-dumpxml pci_0000_01_00_0</strong></span>
&lt;...&gt;
  &lt;capability type='mdev_types'&gt;
    &lt;type id='nvidia-70'&gt;
      &lt;name&gt;GRID P4-8A&lt;/name&gt;
      &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;
      &lt;availableInstances&gt;1&lt;/availableInstances&gt;
    &lt;/type&gt;
    &lt;type id='nvidia-69'&gt;
      &lt;name&gt;GRID P4-4A&lt;/name&gt;
      &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;
      &lt;availableInstances&gt;2&lt;/availableInstances&gt;
    &lt;/type&gt;
    &lt;type id='nvidia-67'&gt;
      &lt;name&gt;GRID P4-1A&lt;/name&gt;
      &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;
      &lt;availableInstances&gt;8&lt;/availableInstances&gt;
    &lt;/type&gt;
    &lt;type id='nvidia-65'&gt;
      &lt;name&gt;GRID P4-4Q&lt;/name&gt;
      &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;
      &lt;availableInstances&gt;2&lt;/availableInstances&gt;
    &lt;/type&gt;
    &lt;type id='nvidia-63'&gt;
      &lt;name&gt;GRID P4-1Q&lt;/name&gt;
      &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;
      &lt;availableInstances&gt;8&lt;/availableInstances&gt;
    &lt;/type&gt;
    &lt;type id='nvidia-71'&gt;
      &lt;name&gt;GRID P4-1B&lt;/name&gt;
      &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;
      &lt;availableInstances&gt;8&lt;/availableInstances&gt;
    &lt;/type&gt;
    &lt;type id='nvidia-68'&gt;
      &lt;name&gt;GRID P4-2A&lt;/name&gt;
      &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;
      &lt;availableInstances&gt;4&lt;/availableInstances&gt;
    &lt;/type&gt;
    &lt;type id='nvidia-66'&gt;
      &lt;name&gt;GRID P4-8Q&lt;/name&gt;
      &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;
      &lt;availableInstances&gt;1&lt;/availableInstances&gt;
    &lt;/type&gt;
    &lt;type id='nvidia-64'&gt;
      &lt;name&gt;GRID P4-2Q&lt;/name&gt;
      &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;
      &lt;availableInstances&gt;4&lt;/availableInstances&gt;
    &lt;/type&gt;
  &lt;/capability&gt;
&lt;/...&gt;</pre></li></ul></div></section><section class="section" id="ref_remote-desktop-streaming-services-for-nvidia-vgpu_assembly_managing-nvidia-vgpu-devices"><div class="titlepage"><div><div><h2 class="title">10.4. Remote desktop streaming services for NVIDIA vGPU</h2></div></div></div><p>
				The following remote desktop streaming services have been successfully tested for use with the NVIDIA vGPU feature in RHEL 8 hosts:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>HP-RGS</strong></span> - Note that it is currently not possible to use HP-RGS with RHEL 8 VMs.
					</li><li class="listitem">
						<span class="strong strong"><strong>Mechdyne TGX</strong></span> - Note that it is currently not possible to use Mechdyne TGX with Windows Server 2016 VMs.
					</li><li class="listitem">
						<span class="strong strong"><strong>NICE DCV</strong></span> - When using this streaming service, Red Hat recommends using fixed resolution settings, as using dynamic resolution in some cases results in a black screen. In addition, it is currently not possible to use NICE DCV with RHEL 8 VMs.
					</li></ul></div></section><section class="section" id="related-information-assembly_managing-nvidia-vgpu-devices"><div class="titlepage"><div><div><h2 class="title">10.5. Related information</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						For further information on using NVIDA vGPU on RHEL with KVM, see <a class="link" href="https://docs.nvidia.com/grid/latest/grid-vgpu-release-notes-red-hat-el-kvm/index.html#validated-platforms">the NVIDIA GPU Software Documentation</a>.
					</li></ul></div></section></section><section class="chapter" id="migrating-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Chapter 11. Migrating virtual machines</h1></div></div></div><p>
			If the current host of a virtual machine (VM) becomes unsuitable or cannot be used anymore, you can migrate the VM to another KVM host. The sections below provide information and instructions for such a migration.
		</p><section class="section" id="how-migrating-virtual-machines-works_migrating-virtual-machines"><div class="titlepage"><div><div><h2 class="title">11.1. How migrating virtual machines works</h2></div></div></div><p>
				The essential part of virtual machine (VM) migration is copying the XML configuration of a VM to a different host machine. If the migrated VM is not shut down, the migration also transfers the state of the VM’s memory and any virtualized devices to a destination host machine. For the VM to remain functional on the destination host, the VM’s disk images must remain available to it.
			</p><p>
				You can migrate a running VM using <span class="emphasis"><em>live</em></span> or <span class="emphasis"><em>non-live</em></span> migrations. To migrate a shut-off VM, an <span class="emphasis"><em>offline</em></span> migration must be used.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						In a <span class="strong strong"><strong>live migration</strong></span>, the VM continues to run on the source host machine while KVM is transferring the VM’s memory pages to the destination host. When the migration is nearly complete, KVM very briefly suspends the VM, and resumes it on the destination host.
					</p><p class="simpara">
						This is useful for VMs that require constant uptime. However, VMs that modify memory pages faster than KVM can transfer them, such as VMs under heavy I/O load, cannot be live-migrated, and non-live migration must be used instead.
					</p></li><li class="listitem"><p class="simpara">
						A <span class="strong strong"><strong>non-live migration</strong></span> suspends the VM, copies its configuration and its memory to the destination host, and resumes the VM. This creates downtime for the VM, but is generally more reliable than live migration.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							For the migration of a running VM (both live and non-live) to work properly, the VM’s disk images must be located on a shared network, accessible both to the source host and the destination host. For instructions on setting up such shared storage, see <a class="xref" href="index.html#sharing-virtual-machine-images-with-other-hosts_migrating-virtual-machines" title="11.3. Sharing virtual machine images with other hosts">Section 11.3, “Sharing virtual machine images with other hosts”</a>.
						</p></div></div></li><li class="listitem">
						An <span class="strong strong"><strong>offline migration</strong></span> moves the VM’s configuration to the destination host. When an offline migration is used, the VM’s disk images do not have to be available on a shared network, and can be copied or moved manually to the destination host instead.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Migration benefits</strong></p><p>
					Migrating VMs can be useful for:
				</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Load balancing</span></dt><dd>
							VMs can be moved to host machines with lower usage if their host becomes overloaded, or if another host is under-utilized.
						</dd><dt><span class="term">Hardware independence</span></dt><dd>
							When you need to upgrade, add, or remove hardware devices on the host machine, you can safely relocate VMs to other hosts. This means that VMs do not experience any downtime for hardware improvements.
						</dd><dt><span class="term">Energy saving</span></dt><dd>
							VMs can be redistributed to other hosts, and the unloaded host systems can thus be powered off to save energy and cut costs during low usage periods.
						</dd><dt><span class="term">Geographic migration</span></dt><dd>
							VMs can be moved to another physical location for lower latency or when required for other reasons.
						</dd></dl></div></section><section class="section" id="requirements-and-limitations-for-migrating-virtual-machines_migrating-virtual-machines"><div class="titlepage"><div><div><h2 class="title">11.2. Requirements and limitations for migrating virtual machines</h2></div></div></div><p>
				Before using virtual machine (VM) migration in RHEL 8, make sure that your system fulfills the migration’s requirements, and that you are aware of its limitations.
			</p><p>
				<span class="strong strong"><strong>Migration requirements</strong></span>
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The source host and the destination host must both be using the KVM hypervisor.
					</li><li class="listitem">
						The source host and the destination host must be able to reach each other over the network. Use the <code class="literal">ping</code> utility to verify this.
					</li><li class="listitem">
						For the migration to be supportable by Red Hat, the source host and destination host must be using specific operating systems and machine types. To ensure this is the case, see the <a class="link" href="index.html#supported-hosts-for-virtual-machine-migration_migrating-virtual-machines" title="11.5. Supported hosts for virtual machine migration">VM migration compatibility table</a>.
					</li><li class="listitem"><p class="simpara">
						Red Hat recommends for the disk images of VMs that will be migrated to be located on a separate networked location accessible to both the source host and the destination host. This is optional for offline migration, but required for migrating a running VM.
					</p><p class="simpara">
						For instructions to set up such shared VM storage, see <a class="xref" href="index.html#sharing-virtual-machine-images-with-other-hosts_migrating-virtual-machines" title="11.3. Sharing virtual machine images with other hosts">Section 11.3, “Sharing virtual machine images with other hosts”</a>.
					</p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Make sure that the <code class="literal">libvirtd</code> service is enabled and running.
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl enable libvirtd.service</strong></span>
# <span class="strong strong"><strong>systemctl restart libvirtd.service</strong></span></pre></li><li class="listitem">
						When migrating an existing VM in a public bridge tap network, the source and destination hosts must be located on the same network. Otherwise, the VM network will not operate after migration.
					</li></ul></div><p>
				<span class="strong strong"><strong>Migration limitations</strong></span>
			</p><p>
				VM migration has the following limitations when used on RHEL 8:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Live storage migration cannot be performed on RHEL 8, but you can migrate storage while the VM is powered down. Note that live storage migration is available on <a class="link" href="https://www.redhat.com/en/technologies/virtualization/enterprise-virtualization">Red Hat Virtualization</a>.
					</li><li class="listitem">
						Migrating VMs from or to a <a class="link" href="index.html#system-and-user-sessions_securing-virtual-machines-in-rhel-8">user session of <code class="literal">libvirt</code></a> is unreliable and therefore not recommended.
					</li><li class="listitem"><p class="simpara">
						VMs that use certain features and configurations will not work correctly if migrated, or the migration will fail. Such features include:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Device passthrough
							</li><li class="listitem">
								SR-IOV device assignment
							</li><li class="listitem">
								Mediated devices, such as vGPUs
							</li><li class="listitem">
								Non-Uniform Memory Access (NUMA) pinning
							</li></ul></div></li></ul></div></section><section class="section" id="sharing-virtual-machine-images-with-other-hosts_migrating-virtual-machines"><div class="titlepage"><div><div><h2 class="title">11.3. Sharing virtual machine images with other hosts</h2></div></div></div><p>
				To perform a live migration of a virtual machine (VM) between <a class="link" href="index.html#supported-hosts-for-virtual-machine-migration_migrating-virtual-machines" title="11.5. Supported hosts for virtual machine migration">supported KVM hosts</a>, shared VM storage is required. This section provides instructions for sharing a locally stored VM image with the source host and the destination host using the NFS protocol.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The VM intended for migration is shut down.
					</li><li class="listitem">
						<span class="strong strong"><strong>Optional:</strong></span> A host system is available for hosting the storage that is not the source or destination host, but both the source and the destination host can reach it through the network. This is the optimal solution for shared storage and is recommended by Red Hat.
					</li><li class="listitem">
						Make sure that NFS file locking is not used as it is not supported in KVM.
					</li><li class="listitem"><p class="simpara">
						The NFS is installed and enabled on the source and destination hosts. If they do not:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Install the NFS packages:
							</p><pre class="literallayout"># <span class="strong strong"><strong>yum install nfs-utils</strong></span></pre></li><li class="listitem"><p class="simpara">
								Make sure that the ports for NFS in <code class="literal">iptables</code> (such as 2049) are open in the firewall.
							</p><pre class="literallayout"># <span class="strong strong"><strong>firewall-cmd --permanent --add-service=nfs</strong></span>
# <span class="strong strong"><strong>firewall-cmd --permanent --add-service=mountd</strong></span>
# <span class="strong strong"><strong>firewall-cmd --permanent --add-service=rpc-bind</strong></span>
# <span class="strong strong"><strong>firewall-cmd --permanent --add-port=2049/tcp</strong></span>
# <span class="strong strong"><strong>firewall-cmd --permanent --add-port=2049/udp</strong></span>
# <span class="strong strong"><strong>firewall-cmd --reload</strong></span></pre></li><li class="listitem"><p class="simpara">
								Start the NFS service.
							</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl start nfs-server</strong></span></pre></li></ol></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Optional:</strong></span> Use SSH to connect to the host that will provide shared storage. In this example, it is the <code class="literal">phantom-zone</code> host:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ssh root@phantom-zone</strong></span>
root@phantom-zone's password:
Last login: Mon Sep 24 12:05:36 2019
root~#</pre></li><li class="listitem"><p class="simpara">
						Create a directory that will hold the disk image and will be shared with the migration hosts.
					</p><pre class="literallayout"># <span class="strong strong"><strong>mkdir /var/lib/libvirt/shared-images</strong></span></pre></li><li class="listitem"><p class="simpara">
						Copy the disk image of the VM from the source host to the newly created directory. For example, the following copies the disk image of the <code class="literal">kal-el</code> VM to the <code class="literal">/var/lib/libvirt/shared-images/</code> directory on the`phantom-zone` host:
					</p><pre class="literallayout"># <span class="strong strong"><strong>scp /var/lib/libvirt/images/kal-el.qcow2 root@phantom-zone:/var/lib/libvirt/shared-images/kal-el.qcow2</strong></span></pre></li><li class="listitem"><p class="simpara">
						On the host that you want to use for sharing the storage, add the sharing directory to the <code class="literal">/etc/exports</code> file. The following example shares the <code class="literal">/var/lib/libvirt/shared-images</code> directory with the <code class="literal">krypt.on</code> and <code class="literal">ter.ra</code> hosts:
					</p><pre class="literallayout">/var/lib/libvirt/shared-images krypt.on(rw,no_root_squash) ter.ra(rw,no_root_squash)</pre></li><li class="listitem"><p class="simpara">
						On both the source and destination host, mount the shared directory in the <code class="literal">/var/lib/libvirt/images</code> directory:
					</p><pre class="literallayout"># <span class="strong strong"><strong>mount phantom-zone:/var/lib/libvirt/shared-images /var/lib/libvirt/images</strong></span></pre></li><li class="listitem">
						To verify the process was successful, start the VM on the source host and observe if it boots correctly.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional sources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For detailed information on configuring NFS, opening IP tables, and configuring the firewall, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/deploying_different_types_of_servers/exporting-nfs-shares_deploying-different-types-of-servers">Exporting NFS shares</a>.
					</li></ul></div></section><section class="section" id="migrating-a-virtual-machine-using-the-cli_migrating-virtual-machines"><div class="titlepage"><div><div><h2 class="title">11.4. Migrating a virtual machine using the command-line interface</h2></div></div></div><p>
				This section provides instructions for migrating a virtual machine (VM) from one KVM host to another, as well as examples for various scenarios of such migrations.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					See <a class="xref" href="index.html#requirements-and-limitations-for-migrating-virtual-machines_migrating-virtual-machines" title="11.2. Requirements and limitations for migrating virtual machines">Section 11.2, “Requirements and limitations for migrating virtual machines”</a>.
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the <code class="literal">virsh migrate</code> command with options appropriate for your migration requirements.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								The following migrates the <code class="literal">kal-el</code> VM from your local host to the system session of the <code class="literal">ter.ra</code> host. The VM will remain running during the migration.
							</p><pre class="literallayout"># <span class="strong strong"><strong>virsh migrate --persistent --live kal-el qemu+ssh://ter.ra/system</strong></span></pre></li><li class="listitem"><p class="simpara">
								The following enables you to make manual adjustments to the configuration of the <code class="literal">jor-el</code> VM running on your local host, and then migrates the VM to the <code class="literal">ter.ra</code> host. The migrated VM will automatically use the updated configuration.
							</p><pre class="literallayout"># <span class="strong strong"><strong>virsh dumpxml --migratable jor-el &gt;jor-el.xml</strong></span>
# <span class="strong strong"><strong>vi jor-el.xml</strong></span>
# <span class="strong strong"><strong>virsh migrate --live --persistent --xml jor-el.xml jor-el qemu+ssh://ter.ra/system</strong></span></pre><p class="simpara">
								This procedure can be useful for example when the destination host needs to use a different path to access the shared VM storage or when configuring a feature specific to the destination host.
							</p></li><li class="listitem"><p class="simpara">
								The following suspends the <code class="literal">zod</code> VM from the <code class="literal">krypt.on</code> host, migrates it to the <code class="literal">ter.ra</code> host, and instructs it to use the adjusted XML configuration, provided by the <code class="literal">zod-alt.xml</code> file. When the migration is completed, <code class="literal">libvirt</code> resumes the VM on the destination host.
							</p><pre class="literallayout"># <span class="strong strong"><strong>virsh migrate --persistent zod qemu+ssh://krypt.on/system qemu+ssh://ter.ra/system --xml zod-alt.xml</strong></span></pre></li><li class="listitem"><p class="simpara">
								The following deletes the shut-down <code class="literal">faora</code> VM from the <code class="literal">krypt.on</code> host, and moves its configuration to the <code class="literal">ter.ra</code> host.
							</p><pre class="literallayout"># <span class="strong strong"><strong>virsh migrate --offline --persistent --undefinesource faora qemu+ssh://krypt.on/system qemu+ssh://ter.ra/system</strong></span></pre><p class="simpara">
								Note that this type of migration does not require moving the VM’s disk image to shared storage. However, for the VM to be usable on the destination host, you need to migrate the VM’s disk image. For example:
							</p><pre class="literallayout"># <span class="strong strong"><strong>scp root@krypt.on/var/lib/libvirt/images/faora.qcow2:root@ter.ra/var/lib/libvirt/images/faora.qcow2</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Wait for the migration to complete. The process may take some time depending on network bandwidth, system load, and the size of the VM. If the <code class="literal">--verbose</code> option is not used for <code class="literal">virsh migrate</code>, the CLI does not display any progress indicators except errors.
					</p><p class="simpara">
						In addition, you can use the <code class="literal">virsh domjobinfo</code> utility to display the migration statistics.
					</p></li><li class="listitem"><p class="simpara">
						On the destination host, list the available VMs to verify if the VM has been migrated:
					</p><pre class="literallayout"># <span class="strong strong"><strong>virsh list</strong></span>
Id Name                 State
----------------------------------
10 kal-el              running</pre><p class="simpara">
						Note that if the migration is still running, this command will list the VM state as <code class="literal">paused</code>.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						If a live migration is taking a long time to complete, this may be because the VM is under heavy load and too many memory pages are changing for live migration to be possible. To fix this problem, change the migration to a non-live one by suspending the VM.
					</p><pre class="literallayout"># <span class="strong strong"><strong>virsh suspend <span class="emphasis"><em>kal-el</em></span></strong></span></pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional sources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For further options and examples for virtual machine migration, see the <code class="literal">virsh</code> man page.
					</li></ul></div></section><section class="section" id="supported-hosts-for-virtual-machine-migration_migrating-virtual-machines"><div class="titlepage"><div><div><h2 class="title">11.5. Supported hosts for virtual machine migration</h2></div></div></div><p>
				For the virtual machine (VM) migration to work properly and be supported by Red Hat, the source and destination hosts must be specific RHEL versions and machine types. The following table shows supported VM migration paths.
			</p><div class="table" id="idm140329469251120"><p class="title"><strong>Table 11.1. Live migration compatibility</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 25%; " class="col_2"><!--Empty--></col><col style="width: 25%; " class="col_3"><!--Empty--></col><col style="width: 25%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140329469244416" scope="col">Migration method</th><th align="left" valign="top" id="idm140329469243328" scope="col">Release type</th><th align="left" valign="top" id="idm140329469242240" scope="col">Example</th><th align="left" valign="top" id="idm140329469241152" scope="col">Support status</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140329469244416"> <p>
								Forward
							</p>
							 </td><td align="left" valign="top" headers="idm140329469243328"> <p>
								Major release
							</p>
							 </td><td align="left" valign="top" headers="idm140329469242240"> <p>
								7.6+ → 8.1
							</p>
							 </td><td align="left" valign="top" headers="idm140329469241152"> <p>
								On supported RHEL 7 systems: machine types <span class="strong strong"><strong>i440fx</strong></span> and <span class="strong strong"><strong>q35</strong></span>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140329469244416"> <p>
								Backward
							</p>
							 </td><td align="left" valign="top" headers="idm140329469243328"> <p>
								Major release
							</p>
							 </td><td align="left" valign="top" headers="idm140329469242240"> <p>
								8.1 → 7.6+
							</p>
							 </td><td align="left" valign="top" headers="idm140329469241152"> <p>
								On supported RHEL 8 systems: machine types <span class="strong strong"><strong>i440fx</strong></span> and <span class="strong strong"><strong>q35</strong></span>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140329469244416"> <p>
								Forward
							</p>
							 </td><td align="left" valign="top" headers="idm140329469243328"> <p>
								Minor release
							</p>
							 </td><td align="left" valign="top" headers="idm140329469242240"> <p>
								8.0.1+ → 8.1+
							</p>
							 </td><td align="left" valign="top" headers="idm140329469241152"> <p>
								On supported RHEL 7 systems: machine types <span class="strong strong"><strong>i440fx</strong></span> and <span class="strong strong"><strong>q35</strong></span> on RHEL 7.6.0 and later.
							</p>
							 <p>
								On supported RHEL 8 systems: machine type <span class="strong strong"><strong>q35</strong></span>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140329469244416"> <p>
								Backward
							</p>
							 </td><td align="left" valign="top" headers="idm140329469243328"> <p>
								Minor release
							</p>
							 </td><td align="left" valign="top" headers="idm140329469242240"> <p>
								8.1 → 8.0.1
							</p>
							 </td><td align="left" valign="top" headers="idm140329469241152"> <p>
								On supported RHEL 7 systems. Fully supported for machine types <span class="strong strong"><strong>i440fx</strong></span> and <span class="strong strong"><strong>q35</strong></span>.
							</p>
							 <p>
								On supported RHEL 8 systems: machine type <span class="strong strong"><strong>q35</strong></span>.
							</p>
							 </td></tr></tbody></table></div></div><div class="itemizedlist"><p class="title"><strong>Additional sources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For information on the currently supported versions of RHEL 7 and RHEL 8, see <a class="link" href="https://access.redhat.com/support/policy/updates/errata/#RHEL8_Life_Cycle">Red Hat Knowledge Base</a>.
					</li></ul></div></section><section class="section" id="additional_resources"><div class="titlepage"><div><div><h2 class="title">11.6. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You can also migrate VMs from a non-KVM hypervisor to a RHEL 7 or RHEL 8 host. This is also referred to as a <code class="literal">V2V conversion</code>, and you can find additional information and instructions in the <a class="link" href="https://access.redhat.com/articles/1351473">Red Hat Knowledgebase</a>.
					</li></ul></div></section></section><section class="chapter" id="optimizing-virtual-machine-performance-in-rhel-8_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Chapter 12. Optimizing virtual machine performance</h1></div></div></div><p>
			Virtual machines (VMs) always experience some degree of performance deterioration in comparison to the host. The following sections explain the reasons for this deterioration and provide instructions on how to minimize the performance impact of virtualization in RHEL 8, so that your hardware infrastructure resources can be used as efficiently as possible.
		</p><section class="section" id="what-influences-virtual-machine-performance_optimizing-virtual-machine-performance-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">12.1. What influences virtual machine performance</h2></div></div></div><p>
				VMs are run as user-space processes on the host. The hypervisor therefore needs to convert the host’s system resources so that the VMs can use them. As a consequence, a portion of the resources is consumed by the conversion, and the VM therefore cannot achieve the same performance efficiency as the host.
			</p><h4 id="the_impact_of_virtualization_on_system_performance">The impact of virtualization on system performance</h4><p>
				More specific reasons for VM performance loss include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Virtual CPUs (vCPUs) are implemented as threads on the host, handled by the Linux scheduler.
					</li><li class="listitem">
						VMs do not automatically inherit optimization features, such as NUMA or huge pages, from the host kernel.
					</li><li class="listitem">
						Disk and network I/O settings of the host might have a significant performance impact on the VM.
					</li><li class="listitem">
						Network traffic typically travels to a VM through a software-based bridge.
					</li><li class="listitem">
						Depending on the host devices and their models, there might be significant overhead due to emulation of particular hardware.
					</li></ul></div><p>
				The severity of the virtualization impact on the VM performance is influenced by a variety factors, which include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The number of concurrently running VMs.
					</li><li class="listitem">
						The amount of virtual devices used by each VM.
					</li><li class="listitem">
						The device types used by the VMs.
					</li></ul></div><h4 id="reducing_vm_performance_loss">Reducing VM performance loss</h4><p>
				RHEL 8 provides a number of features you can use to reduce the negative performance effects of virtualization. Notably:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="index.html#optimizing-virtual-machine-performance-using-tuned_optimizing-virtual-machine-performance-in-rhel-8" title="12.2. Optimizing virtual machine performance using tuned">The <code class="literal">tuned</code> service</a> can automatically optimize the resource distribution and performance of your VMs.
					</li><li class="listitem">
						<a class="link" href="index.html#optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel-8" title="12.3. Optimizing virtual machine I/O performance">Block I/O tuning</a> can improve the performances of the VM’s block devices, such as disks.
					</li><li class="listitem">
						<a class="link" href="index.html#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel-8" title="12.4. Optimizing virtual machine CPU performance">NUMA tuning</a> can increase vCPU performance.
					</li><li class="listitem">
						<a class="link" href="index.html#optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel-8" title="12.5. Optimizing virtual machine network performance">Virtual networking</a> can be optimized in various ways.
					</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Tuning VM performance can have adverse effects on other virtualization functions. For example, it can make migrating the modified VM more difficult.
				</p></div></div></section><section class="section" id="optimizing-virtual-machine-performance-using-tuned_optimizing-virtual-machine-performance-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">12.2. Optimizing virtual machine performance using tuned</h2></div></div></div><p>
				The <code class="literal">tuned</code> utility is a tuning profile delivery mechanism that adapts RHEL for certain workload characteristics, such as requirements for CPU-intensive tasks or storage-network throughput responsiveness. It provides a number of tuning profiles that are pre-configured to enhance performance and reduce power consumption in a number of specific use cases. You can edit these profiles or create new profiles to create performance solutions tailored to your environment, including virtualized environments.
			</p><p>
				Red Hat recommends using the following profiles when using virtualization in RHEL 8:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						For RHEL 8 virtual machines, use the <span class="strong strong"><strong>virtual-guest</strong></span> profile. It is based on the generally applicable <code class="literal"><span class="emphasis"><em>throughput-performance</em></span></code> profile, but also decreases the swappiness of virtual memory.
					</li><li class="listitem">
						For RHEL 8 virtualization hosts, use the <span class="strong strong"><strong>virtual-host</strong></span> profile. This enables more aggressive writeback of dirty memory pages, which benefits the host performance.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tuned</code> service must be <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/getting-started-with-tuned_monitoring-and-managing-system-status-and-performance#installing-and-enabling-tuned_getting-started-with-tuned">installed and enabled</a>.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					To enable a specific <code class="literal">tuned</code> profile:
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						List the available <code class="literal">tuned</code> profiles.
					</p><pre class="literallayout"># <span class="strong strong"><strong>tuned-adm list</strong></span>

Available profiles:
- balanced             - General non-specialized tuned profile
- desktop              - Optimize for the desktop use-case
[...]
- virtual-guest        - Optimize for running inside a virtual guest
- virtual-host         - Optimize for running KVM guests
Current active profile: <span class="emphasis"><em>balanced</em></span></pre></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Optional:</strong></span> Create a new <code class="literal">tuned</code> profile or edit an existing <code class="literal">tuned</code> profile.
					</p><p class="simpara">
						For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/customizing-tuned-profiles_monitoring-and-managing-system-status-and-performance">Customizing tuned profiles</a>.
					</p></li><li class="listitem"><p class="simpara">
						Activate a <code class="literal">tuned</code> profile.
					</p><pre class="literallayout"># <span class="strong strong"><strong>tuned-adm profile <span class="emphasis"><em>selected-profile</em></span></strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To optimize a virtualization host, use the <span class="emphasis"><em>virtual-host</em></span> profile.
							</p><pre class="literallayout"># <span class="strong strong"><strong>tuned-adm profile virtual-host</strong></span></pre></li><li class="listitem"><p class="simpara">
								On a RHEL guest operating system, use the <span class="emphasis"><em>virtual-guest</em></span> profile.
							</p><pre class="literallayout"># <span class="strong strong"><strong>tuned-adm profile virtual-guest</strong></span></pre></li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about <code class="literal">tuned</code> and <code class="literal">tuned</code> profiles, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/">Monitoring and managing system status and performance</a>.
					</li></ul></div></section><section class="section" id="optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">12.3. Optimizing virtual machine I/O performance</h2></div></div></div><p>
				The input and output (I/O) capabilities of a virtual machine (VM) can significantly limit the VM’s overall efficiency. To address this, you can optimize a VM’s I/O by configuring block I/O parameters.
			</p><section class="section" id="tuning-block-i-o-in-virtual-machines_optimizing-virtual-machine-i-o-performance"><div class="titlepage"><div><div><h3 class="title">12.3.1. Tuning block I/O in virtual machines</h3></div></div></div><p>
					When multiple block devices are being used by one or more VMs, it might be important to adjust the I/O priority of specific virtual devices by modifying their <span class="emphasis"><em>I/O weights</em></span>.
				</p><p>
					Increasing the I/O weight of a device increases its priority for I/O bandwidth, and therefore provides it with more host resources. Similarly, reducing a device’s weight makes it consume less host resources.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Each device’s <code class="literal">weight</code> value must be within the <code class="literal">100</code> to <code class="literal">1000 range. Alternatively, the value can be `0</code>, which removes that device from per-device listings.
					</p></div></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						To display and set a VM’s block I/O parameters:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Display the current <code class="literal">&lt;blkio&gt;</code> parameters for a VM:
						</p><p class="simpara">
							<code class="literal"># <span class="strong strong"><strong>virsh blkiotune <span class="emphasis"><em>virtual_machine</em></span></strong></span></code>
						</p><pre class="programlisting language-xml">&lt;domain&gt;
  ...
  &lt;blkiotune&gt;
    &lt;weight&gt;800&lt;/weight&gt;
    &lt;device&gt;
      &lt;path&gt;/dev/sda&lt;/path&gt;
      &lt;weight&gt;1000&lt;/weight&gt;
    &lt;/device&gt;
    &lt;device&gt;
      &lt;path&gt;/dev/sdb&lt;/path&gt;
      &lt;weight&gt;500&lt;/weight&gt;
    &lt;/device&gt;
  &lt;/blkiotune&gt;
  ...
&lt;/domain&gt;</pre></li><li class="listitem"><p class="simpara">
							Edit the I/O weight of a specified device:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh blkiotune <span class="emphasis"><em>VM-name</em></span> --device-weights <span class="emphasis"><em>device</em></span>, <span class="emphasis"><em>I/O-weight</em></span></strong></span></pre><p class="simpara">
							For example, the following changes the weight of the <span class="emphasis"><em>/dev/sda</em></span> device in the <span class="emphasis"><em>liftrul</em></span> VM to 500.
						</p><pre class="literallayout"># *virsh blkiotune liftbrul --device-weights /dev/sda, 500</pre></li></ol></div></section><section class="section" id="disk-i-o-throttling-in-virtual-machines_optimizing-virtual-machine-i-o-performance"><div class="titlepage"><div><div><h3 class="title">12.3.2. Disk I/O throttling in virtual machines</h3></div></div></div><p>
					When several VMs are running simultaneously, they can interfere with system performance by using excessive disk I/O. Disk I/O throttling in KVM virtualization provides the ability to set a limit on disk I/O requests sent from the VMs to the host machine. This can prevent a VM from over-utilizing shared resources and impacting the performance of other VMs.
				</p><p>
					To enable disk I/O throttling, set a limit on disk I/O requests sent from each block device attached to VMs to the host machine.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use the <code class="literal">virsh domblklist</code> command to list the names of all the disk devices on a specified VM.
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh domblklist rollin-coal</strong></span>
Target     Source
------------------------------------------------
vda        /var/lib/libvirt/images/rollin-coal.qcow2
sda        -
sdb        /home/horridly-demanding-processes.iso</pre></li><li class="listitem"><p class="simpara">
							Set I/O limits for a block device attached to a VM using the <code class="literal">virsh blkdeviotune</code> command:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh blkdeviotune <span class="emphasis"><em>VM-name</em></span> <span class="emphasis"><em>device</em></span> --parameter <span class="emphasis"><em>limit</em></span></strong></span></pre><p class="simpara">
							For example, to throttle the <code class="literal">sdb</code> device on the <code class="literal">rollin-coal</code> VM to 1000 I/O operations per second and 50 MB per second throughput:
						</p><pre class="literallayout"><code class="literal"># <span class="strong strong"><strong>virsh blkdeviotune rollin-coal sdb --total-iops-sec 1000 --total-bytes-sec 52428800</strong></span></code></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional information</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Disk I/O throttling can be useful in various situations, for example when VMs belonging to different customers are running on the same host, or when quality of service guarantees are given for different VMs. Disk I/O throttling can also be used to simulate slower disks.
						</li><li class="listitem">
							I/O throttling can be applied independently to each block device attached to a VM and supports limits on throughput and I/O operations.
						</li></ul></div></section><section class="section" id="configuring-multi-queue-virtio-scsi_optimizing-virtual-machine-i-o-performance"><div class="titlepage"><div><div><h3 class="title">12.3.3. Enabling multi-queue virtio-scsi</h3></div></div></div><p>
					When using <code class="literal">virtio-scsi</code> storage devices in your virtual machines (VMs), the <span class="emphasis"><em>multi-queue virtio-scsi</em></span> feature provides improved storage performance and scalability. It enables each virtual CPU (vCPU) to have a separate queue and interrupt to use without affecting other vCPUs.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To enable multi-queue virtio-scsi support for a specific VM, add the following to the VM’s XML configuration, where <span class="emphasis"><em>N</em></span> is the total number of vCPU queues:
						</p><pre class="programlisting language-xml">&lt;controller type='scsi' index='0' model='virtio-scsi'&gt;
   &lt;driver queues='N' /&gt;
&lt;/controller&gt;</pre></li></ul></div></section></section><section class="section" id="optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">12.4. Optimizing virtual machine CPU performance</h2></div></div></div><p>
				Much like physical CPUs in host machines, vCPUs are critical to virtual machine (VM) performance. As a result, optimizing vCPUs can have a significant impact on the resource efficiency of your VMs. To optimize your vCPU:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Ensure that the vCPU model is aligned with the CPU model of the host. For example, to set the <span class="emphasis"><em>testguest1</em></span> VM to use the CPU model of the host:
					</p><pre class="literallayout"># <span class="strong strong"><strong>virt-xml testguest1 --edit --cpu host-model</strong></span></pre></li><li class="listitem"><p class="simpara">
						If your host machine uses Non-Uniform Memory Access (NUMA), you can also <span class="strong strong"><strong>configure NUMA</strong></span> for its VMs. This maps the host’s CPU and memory processes onto the CPU and memory processes of the VM as closely as possible. In effect, NUMA tuning provides the vCPU with a more streamlined access to the system memory allocated to the VM, which can improve the vCPU processing effectiveness.
					</p><p class="simpara">
						For details, see <a class="xref" href="index.html#configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance" title="12.4.1. Configuring NUMA in a virtual machine">Section 12.4.1, “Configuring NUMA in a virtual machine”</a> and <a class="xref" href="index.html#sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance" title="12.4.2. Sample vCPU performance tuning scenario">Section 12.4.2, “Sample vCPU performance tuning scenario”</a>.
					</p></li></ol></div><section class="section" id="configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance"><div class="titlepage"><div><div><h3 class="title">12.4.1. Configuring NUMA in a virtual machine</h3></div></div></div><p>
					The following methods can be used to configure Non-Uniform Memory Access (NUMA) settings of a virtual machine (VM) on a RHEL 8 host.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The host must be a NUMA-compatible machine. To detect whether this is the case, use the <code class="literal">virsh nodeinfo</code> command and see the <code class="literal">NUMA cell(s)</code> line:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh nodeinfo</strong></span>
CPU model:           x86_64
CPU(s):              48
CPU frequency:       1200 MHz
CPU socket(s):       1
Core(s) per socket:  12
Thread(s) per core:  2
NUMA cell(s):        <span class="strong strong"><strong>2</strong></span>
Memory size:         67012964 KiB</pre><p class="simpara">
							If the value of the line is 2 or greater, the host is NUMA-compatible.
						</p></li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						For ease of use, you can set up a VM’s NUMA configuration using automated utilities and services. However, manual NUMA setup is more likely to yield a significant performance improvement.
					</p></div><h6 id="automatic_methods">Automatic methods</h6><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Set the VM’s NUMA policy to <code class="literal">Preferred</code>. For example, to do so for the <span class="emphasis"><em>testguest5</em></span> VM:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virt-xml testguest5 --edit --vcpus placement=auto</strong></span>
# <span class="strong strong"><strong>virt-xml testguest5 --edit --numatune mode=preferred</strong></span></pre></li><li class="listitem"><p class="simpara">
							Enable automatic NUMA balancing on the host:
						</p><pre class="literallayout"># <span class="strong strong"><strong>echo 1 &gt; /proc/sys/kernel/numa_balancing</strong></span></pre></li><li class="listitem"><p class="simpara">
							Use the <code class="literal">numad</code> command to automatically align the VM CPU with memory resources.
						</p><pre class="literallayout"># <span class="strong strong"><strong>numad</strong></span></pre></li></ul></div><h6 id="manual_methods">Manual methods</h6><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Pin specific vCPU threads to a specific host CPU or range of CPUs. This is also possible on non-NUMA hosts and VMs, and is recommended as a safe method of vCPU performance improvement.
						</p><p class="simpara">
							For example, the following commands pin vCPU threads 0 to 5 of the <span class="emphasis"><em>testguest6</em></span> VM to host CPUs 1, 3, 5, 7, 9, and 11, respectively:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh vcpupin testguest6 0 1</strong></span>
# <span class="strong strong"><strong>virsh vcpupin testguest6 1 3</strong></span>
# <span class="strong strong"><strong>virsh vcpupin testguest6 2 5</strong></span>
# <span class="strong strong"><strong>virsh vcpupin testguest6 3 7</strong></span>
# <span class="strong strong"><strong>virsh vcpupin testguest6 4 9</strong></span>
# <span class="strong strong"><strong>virsh vcpupin testguest6 5 11</strong></span></pre><p class="simpara">
							Afterwards, you can verify whether this was successful:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh vcpupin testguest6</strong></span>
VCPU   CPU Affinity
----------------------
0      1
1      3
2      5
3      7
4      9
5      11</pre></li><li class="listitem"><p class="simpara">
							After pinning vCPU threads, you can also pin QEMU process threads associated with a specified VM to a specific host CPU or range of CPUs. For example, the following commands pin the QEMU process thread of <span class="emphasis"><em>testguest6</em></span> to CPUs 13 and 15, and verify this was successful:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh emulatorpin testguest6 13,15</strong></span>
# <span class="strong strong"><strong>virsh emulatorpin testguest6</strong></span>
emulator: CPU Affinity
----------------------------------
       *: 13,15</pre></li><li class="listitem"><p class="simpara">
							Finally, you can also specify which host NUMA nodes will be assigned specifically to a certain VM. This can improve the host memory usage by the VM’s vCPU. For example, the following commands set <span class="emphasis"><em>testguest6</em></span> to use host NUMA nodes 3 to 5, and verify this was successful:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh numatune testguest6 --nodeset 3-5</strong></span>
# <span class="strong strong"><strong>virsh numatune testguest6</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Note that for best performance results, it is recommended to use all of the manual tuning methods listed above. For an example of such a configuration, see <a class="xref" href="index.html#sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance" title="12.4.2. Sample vCPU performance tuning scenario">Section 12.4.2, “Sample vCPU performance tuning scenario”</a>.
						</li><li class="listitem">
							To see the current NUMA configuration of your system, you can use the <code class="literal">numastat</code> utility. For details on using <code class="literal">numastat</code>, see <a class="xref" href="index.html#virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel-8" title="12.6. Virtual machine performance monitoring tools">Section 12.6, “Virtual machine performance monitoring tools”</a>.
						</li><li class="listitem">
							NUMA tuning is currently not possible to perform on IBM Z hosts. For further information, see <a class="xref" href="index.html#how-virtualization-on-ibm-z-differs-from-amd64-and-intel64_getting-started-with-virtualization-in-rhel-8-on-ibm-z" title="4.2. How virtualization on IBM Z differs from AMD64 and Intel 64">Section 4.2, “How virtualization on IBM Z differs from AMD64 and Intel 64”</a>.
						</li></ul></div></section><section class="section" id="sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance"><div class="titlepage"><div><div><h3 class="title">12.4.2. Sample vCPU performance tuning scenario</h3></div></div></div><p>
					To obtain the best vCPU performance possible, Red Hat recommends using manual <code class="literal">vcpupin</code>, <code class="literal">emulatorpin</code>, and <code class="literal">numatune</code> settings together, for example like in the following scenario.
				</p><div class="itemizedlist"><p class="title"><strong>Starting scenario</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Your host has the following hardware specifics:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									2 NUMA nodes
								</li><li class="listitem">
									3 CPU cores on each node
								</li><li class="listitem">
									2 threads on each core
								</li></ul></div><p class="simpara">
							The output of <code class="literal">virsh nodeinfo</code> of such a machine would look similar to:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh nodeinfo</strong></span>
CPU model:           x86_64
CPU(s):              12
CPU frequency:       3661 MHz
CPU socket(s):       2
Core(s) per socket:  3
Thread(s) per core:  2
NUMA cell(s):        2
Memory size:         31248692 KiB</pre></li><li class="listitem"><p class="simpara">
							You intend to modify an existing VM to have 8 vCPUs, which means that it will not fit in a single NUMA node.
						</p><p class="simpara">
							Therefore, you should distribute 4 vCPUs on each NUMA node and make the vCPU topology resemble the host topology as closely as possible. This means that vCPUs that run as sibling threads of a given physical CPU should be pinned to host threads on the same core. For details, see the <span class="emphasis"><em>Solution</em></span> below:
						</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Solution</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Obtain the information on the host topology:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh capabilities</strong></span></pre><p class="simpara">
							The output should include a section that looks similar to the following:
						</p><pre class="programlisting language-xml">&lt;topology&gt;
  &lt;cells num="2"&gt;
    &lt;cell id="0"&gt;
      &lt;memory unit="KiB"&gt;15624346&lt;/memory&gt;
      &lt;pages unit="KiB" size="4"&gt;3906086&lt;/pages&gt;
      &lt;pages unit="KiB" size="2048"&gt;0&lt;/pages&gt;
      &lt;pages unit="KiB" size="1048576"&gt;0&lt;/pages&gt;
      &lt;distances&gt;
        &lt;sibling id="0" value="10" /&gt;
        &lt;sibling id="1" value="21" /&gt;
      &lt;/distances&gt;
      &lt;cpus num="6"&gt;
        &lt;cpu id="0" socket_id="0" core_id="0" siblings="0,3" /&gt;
        &lt;cpu id="1" socket_id="0" core_id="1" siblings="1,4" /&gt;
        &lt;cpu id="2" socket_id="0" core_id="2" siblings="2,5" /&gt;
        &lt;cpu id="3" socket_id="0" core_id="0" siblings="0,3" /&gt;
        &lt;cpu id="4" socket_id="0" core_id="1" siblings="1,4" /&gt;
        &lt;cpu id="5" socket_id="0" core_id="2" siblings="2,5" /&gt;
      &lt;/cpus&gt;
    &lt;/cell&gt;
    &lt;cell id="1"&gt;
      &lt;memory unit="KiB"&gt;15624346&lt;/memory&gt;
      &lt;pages unit="KiB" size="4"&gt;3906086&lt;/pages&gt;
      &lt;pages unit="KiB" size="2048"&gt;0&lt;/pages&gt;
      &lt;pages unit="KiB" size="1048576"&gt;0&lt;/pages&gt;
      &lt;distances&gt;
        &lt;sibling id="0" value="21" /&gt;
        &lt;sibling id="1" value="10" /&gt;
      &lt;/distances&gt;
      &lt;cpus num="6"&gt;
        &lt;cpu id="6" socket_id="1" core_id="3" siblings="6,9" /&gt;
        &lt;cpu id="7" socket_id="1" core_id="4" siblings="7,10" /&gt;
        &lt;cpu id="8" socket_id="1" core_id="5" siblings="8,11" /&gt;
        &lt;cpu id="9" socket_id="1" core_id="3" siblings="6,9" /&gt;
        &lt;cpu id="10" socket_id="1" core_id="4" siblings="7,10" /&gt;
        &lt;cpu id="11" socket_id="1" core_id="5" siblings="8,11" /&gt;
      &lt;/cpus&gt;
    &lt;/cell&gt;
  &lt;/cells&gt;
&lt;/topology&gt;</pre></li><li class="listitem">
							<span class="strong strong"><strong>Optional:</strong></span> Test the performance of the VM using <a class="link" href="index.html#virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel-8" title="12.6. Virtual machine performance monitoring tools">the applicable tools and utilities</a>.
						</li><li class="listitem"><p class="simpara">
							Set up and mount 1 GiB huge pages on the host:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Add the following line to the host’s kernel command line:
								</p><pre class="literallayout">default_hugepagesz=1G hugepagesz=1G</pre></li><li class="listitem"><p class="simpara">
									Create the <code class="literal">/etc/systemd/system/hugetlb-gigantic-pages.service</code> file with the following content:
								</p><pre class="literallayout">[Unit]
Description=HugeTLB Gigantic Pages Reservation
DefaultDependencies=no
Before=dev-hugepages.mount
ConditionPathExists=/sys/devices/system/node
ConditionKernelCommandLine=hugepagesz=1G

[Service]
Type=oneshot
RemainAfterExit=yes
ExecStart=/etc/systemd/hugetlb-reserve-pages.sh

[Install]
WantedBy=sysinit.target</pre></li><li class="listitem"><p class="simpara">
									Create the <code class="literal">/etc/systemd/hugetlb-reserve-pages.sh</code> file with the following content:
								</p><pre class="literallayout">#!/bin/sh

nodes_path=/sys/devices/system/node/
if [ ! -d $nodes_path ]; then
	echo "ERROR: $nodes_path does not exist"
	exit 1
fi

reserve_pages()
{
	echo $1 &gt; $nodes_path/$2/hugepages/hugepages-1048576kB/nr_hugepages
}

reserve_pages 4 node1
reserve_pages 4 node2</pre><p class="simpara">
									This reserves four 1GiB huge pages from <span class="emphasis"><em>node1</em></span> and four 1GiB huge pages from <span class="emphasis"><em>node2</em></span>.
								</p></li><li class="listitem"><p class="simpara">
									Make the script created in the previous step executable:
								</p><pre class="literallayout"># <span class="strong strong"><strong>chmod +x /etc/systemd/hugetlb-reserve-pages.sh</strong></span></pre></li><li class="listitem"><p class="simpara">
									Enable huge page reservation on boot:
								</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl enable hugetlb-gigantic-pages</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
							Use the <code class="literal">virsh edit</code> command to edit the XML configuration of the VM you wish to optimize, in this example <span class="emphasis"><em>super-VM</em></span>:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh edit super-vm</strong></span></pre></li><li class="listitem"><p class="simpara">
							Adjust the XML configuration of the VM in the following way:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Set the VM to use 8 static vCPUs. Use the <code class="literal">&lt;vcpu/&gt;</code> element to do this.
								</li><li class="listitem"><p class="simpara">
									Pin each of the vCPU threads to the corresponding host CPU threads that it mirrors in the topology. To do so, use the <code class="literal">&lt;vcpupin/&gt;</code> elements in the <code class="literal">&lt;cputune&gt;</code> section.
								</p><p class="simpara">
									Note that, as shown by the <code class="literal">virsh capabilities</code> utility above, host CPU threads are not ordered sequentially in their respective cores. In addition, the vCPU threads should be pinned to the highest available set of host cores on the same NUMA node. For a table illustration, see the <span class="strong strong"><strong>Additional Resources</strong></span> section below.
								</p><p class="simpara">
									The XML configuration for steps a. and b. can look similar to:
								</p><pre class="programlisting language-xml">&lt;cputune&gt;
  &lt;vcpupin vcpu='0' cpuset='1'/&gt;
  &lt;vcpupin vcpu='1' cpuset='4'/&gt;
  &lt;vcpupin vcpu='2' cpuset='2'/&gt;
  &lt;vcpupin vcpu='3' cpuset='5'/&gt;
  &lt;vcpupin vcpu='4' cpuset='7'/&gt;
  &lt;vcpupin vcpu='5' cpuset='10'/&gt;
  &lt;vcpupin vcpu='6' cpuset='8'/&gt;
  &lt;vcpupin vcpu='7' cpuset='11'/&gt;
  &lt;emulatorpin cpuset='6,9'/&gt;
&lt;/cputune&gt;</pre></li><li class="listitem"><p class="simpara">
									Set the VM to use 1 GiB huge pages:
								</p><pre class="programlisting language-xml">&lt;memoryBacking&gt;
  &lt;hugepages&gt;
    &lt;page size='1' unit='GiB'/&gt;
  &lt;/hugepages&gt;
&lt;/memoryBacking&gt;</pre></li><li class="listitem"><p class="simpara">
									Configure the VM’s NUMA nodes to use memory from the corresponding NUMA nodes on the host. To do so, use the <code class="literal">&lt;memnode/&gt;</code> elements in the <code class="literal">&lt;numatune/&gt;</code> section:
								</p><pre class="programlisting language-xml">&lt;numatune&gt;
  &lt;memory mode="preferred" nodeset="1"/&gt;
  &lt;memnode cellid="0" mode="strict" nodeset="0"/&gt;
  &lt;memnode cellid="1" mode="strict" nodeset="1"/&gt;
&lt;/numatune&gt;</pre></li><li class="listitem"><p class="simpara">
									Ensure the CPU mode is set to <code class="literal">host-passthrough</code>, and that the CPU uses cache in <code class="literal">passthrough</code> mode:
								</p><pre class="programlisting language-xml">&lt;cpu mode="host-passthrough"&gt;
  &lt;topology sockets="2" cores="2" threads="2"/&gt;
  &lt;cache mode="passthrough"/&gt;</pre></li></ol></div></li><li class="listitem"><p class="simpara">
							The resulting XML configuration of the VM should include a section similar to the following:
						</p><pre class="programlisting language-xml">[...]
  &lt;memoryBacking&gt;
    &lt;hugepages&gt;
      &lt;page size='1' unit='GiB'/&gt;
    &lt;/hugepages&gt;
  &lt;/memoryBacking&gt;
  &lt;vcpu placement='static'&gt;8&lt;/vcpu&gt;
  &lt;cputune&gt;
    &lt;vcpupin vcpu='0' cpuset='1'/&gt;
    &lt;vcpupin vcpu='1' cpuset='4'/&gt;
    &lt;vcpupin vcpu='2' cpuset='2'/&gt;
    &lt;vcpupin vcpu='3' cpuset='5'/&gt;
    &lt;vcpupin vcpu='4' cpuset='7'/&gt;
    &lt;vcpupin vcpu='5' cpuset='10'/&gt;
    &lt;vcpupin vcpu='6' cpuset='8'/&gt;
    &lt;vcpupin vcpu='7' cpuset='11'/&gt;
    &lt;emulatorpin cpuset='6,9'/&gt;
  &lt;/cputune&gt;
  &lt;numatune&gt;
    &lt;memory mode="preferred" nodeset="1"/&gt;
    &lt;memnode cellid="0" mode="strict" nodeset="0"/&gt;
    &lt;memnode cellid="1" mode="strict" nodeset="1"/&gt;
  &lt;/numatune&gt;
  &lt;cpu mode="host-passthrough"&gt;
    &lt;topology sockets="2" cores="2" threads="2"/&gt;
    &lt;cache mode="passthrough"/&gt;
    &lt;numa&gt;
      &lt;cell id="0" cpus="0-3" memory="2" unit="GiB"&gt;
        &lt;distances&gt;
          &lt;sibling id="0" value="10"/&gt;
          &lt;sibling id="1" value="21"/&gt;
        &lt;/distances&gt;
      &lt;/cell&gt;
      &lt;cell id="1" cpus="4-7" memory="2" unit="GiB"&gt;
        &lt;distances&gt;
          &lt;sibling id="0" value="21"/&gt;
          &lt;sibling id="1" value="10"/&gt;
        &lt;/distances&gt;
      &lt;/cell&gt;
    &lt;/numa&gt;
  &lt;/cpu&gt;
&lt;/domain&gt;</pre></li><li class="listitem">
							<span class="strong strong"><strong>Optional:</strong></span> Test the performance of the VM using <a class="link" href="index.html#virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel-8" title="12.6. Virtual machine performance monitoring tools">the applicable tools and utilities</a> to evaluate the impact of the VM’s optimization.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The following tables illustrate the connections between the vCPUs and the host CPUs they should be pinned to:
						</p><div class="table" id="idm140329467752752"><p class="title"><strong>Table 12.1. Host topology</strong></p><div class="table-contents"><table class="gt-8-cols lt-7-rows"><colgroup><col style="width: 7%; " class="col_1"><!--Empty--></col><col style="width: 7%; " class="col_2"><!--Empty--></col><col style="width: 7%; " class="col_3"><!--Empty--></col><col style="width: 7%; " class="col_4"><!--Empty--></col><col style="width: 7%; " class="col_5"><!--Empty--></col><col style="width: 7%; " class="col_6"><!--Empty--></col><col style="width: 7%; " class="col_7"><!--Empty--></col><col style="width: 7%; " class="col_8"><!--Empty--></col><col style="width: 7%; " class="col_9"><!--Empty--></col><col style="width: 7%; " class="col_10"><!--Empty--></col><col style="width: 7%; " class="col_11"><!--Empty--></col><col style="width: 7%; " class="col_12"><!--Empty--></col><col style="width: 7%; " class="col_13"><!--Empty--></col><col style="width: 7%; " class="col_14"><!--Empty--></col><col style="width: 7%; " class="col_15"><!--Empty--></col></colgroup><tbody><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>CPU threads</strong></span>
										</p>
										 </td><td align="left" valign="top"> <p>
											0
										</p>
										 </td><td align="left" valign="top"> <p>
											3
										</p>
										 </td><td align="left" valign="top"> <p>
											1
										</p>
										 </td><td align="left" valign="top"> <p>
											4
										</p>
										 </td><td align="left" valign="top"> <p>
											2
										</p>
										 </td><td align="left" valign="top"> <p>
											5
										</p>
										 </td><td align="left" valign="top"> <p>
											6
										</p>
										 </td><td align="left" valign="top"> <p>
											9
										</p>
										 </td><td align="left" valign="top"> <p>
											7
										</p>
										 </td><td align="left" valign="top"> <p>
											10
										</p>
										 </td><td align="left" valign="top"> <p>
											8
										</p>
										 </td><td align="left" valign="top"> <p>
											11
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Cores</strong></span>
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											1
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											2
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											3
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											4
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											5
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Sockets</strong></span>
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>NUMA nodes</strong></span>
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr></tbody></table></div></div><div class="table" id="idm140329467081280"><p class="title"><strong>Table 12.2. VM topology</strong></p><div class="table-contents"><table class="gt-8-cols lt-7-rows"><colgroup><col style="width: 9%; " class="col_1"><!--Empty--></col><col style="width: 9%; " class="col_2"><!--Empty--></col><col style="width: 9%; " class="col_3"><!--Empty--></col><col style="width: 9%; " class="col_4"><!--Empty--></col><col style="width: 9%; " class="col_5"><!--Empty--></col><col style="width: 9%; " class="col_6"><!--Empty--></col><col style="width: 9%; " class="col_7"><!--Empty--></col><col style="width: 9%; " class="col_8"><!--Empty--></col><col style="width: 9%; " class="col_9"><!--Empty--></col><col style="width: 9%; " class="col_10"><!--Empty--></col><col style="width: 9%; " class="col_11"><!--Empty--></col></colgroup><tbody><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>vCPU threads</strong></span>
										</p>
										 </td><td align="left" valign="top"> <p>
											0
										</p>
										 </td><td align="left" valign="top"> <p>
											1
										</p>
										 </td><td align="left" valign="top"> <p>
											2
										</p>
										 </td><td align="left" valign="top"> <p>
											3
										</p>
										 </td><td align="left" valign="top"> <p>
											4
										</p>
										 </td><td align="left" valign="top"> <p>
											5
										</p>
										 </td><td align="left" valign="top"> <p>
											6
										</p>
										 </td><td align="left" valign="top"> <p>
											7
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Cores</strong></span>
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											1
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											2
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											3
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Sockets</strong></span>
										</p>
										 </td><td colspan="4" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="4" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>NUMA nodes</strong></span>
										</p>
										 </td><td colspan="4" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="4" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr></tbody></table></div></div><div class="table" id="idm140329465980304"><p class="title"><strong>Table 12.3. Combined host and VM topology</strong></p><div class="table-contents"><table class="gt-8-cols lt-7-rows"><colgroup><col style="width: 7%; " class="col_1"><!--Empty--></col><col style="width: 7%; " class="col_2"><!--Empty--></col><col style="width: 7%; " class="col_3"><!--Empty--></col><col style="width: 7%; " class="col_4"><!--Empty--></col><col style="width: 7%; " class="col_5"><!--Empty--></col><col style="width: 7%; " class="col_6"><!--Empty--></col><col style="width: 7%; " class="col_7"><!--Empty--></col><col style="width: 7%; " class="col_8"><!--Empty--></col><col style="width: 7%; " class="col_9"><!--Empty--></col><col style="width: 7%; " class="col_10"><!--Empty--></col><col style="width: 7%; " class="col_11"><!--Empty--></col><col style="width: 7%; " class="col_12"><!--Empty--></col><col style="width: 7%; " class="col_13"><!--Empty--></col><col style="width: 7%; " class="col_14"><!--Empty--></col><col style="width: 7%; " class="col_15"><!--Empty--></col></colgroup><tbody><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>vCPU threads</strong></span>
										</p>
										 </td><td colspan="2" align="center" valign="top"> </td><td align="left" valign="top"> <p>
											0
										</p>
										 </td><td align="left" valign="top"> <p>
											1
										</p>
										 </td><td align="left" valign="top"> <p>
											2
										</p>
										 </td><td align="left" valign="top"> <p>
											3
										</p>
										 </td><td colspan="2" align="center" valign="top"> </td><td align="left" valign="top"> <p>
											4
										</p>
										 </td><td align="left" valign="top"> <p>
											5
										</p>
										 </td><td align="left" valign="top"> <p>
											6
										</p>
										 </td><td align="left" valign="top"> <p>
											7
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Host CPU threads</strong></span>
										</p>
										 </td><td align="left" valign="top"> <p>
											0
										</p>
										 </td><td align="left" valign="top"> <p>
											3
										</p>
										 </td><td align="left" valign="top"> <p>
											1
										</p>
										 </td><td align="left" valign="top"> <p>
											4
										</p>
										 </td><td align="left" valign="top"> <p>
											2
										</p>
										 </td><td align="left" valign="top"> <p>
											5
										</p>
										 </td><td align="left" valign="top"> <p>
											6
										</p>
										 </td><td align="left" valign="top"> <p>
											9
										</p>
										 </td><td align="left" valign="top"> <p>
											7
										</p>
										 </td><td align="left" valign="top"> <p>
											10
										</p>
										 </td><td align="left" valign="top"> <p>
											8
										</p>
										 </td><td align="left" valign="top"> <p>
											11
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Cores</strong></span>
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											1
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											2
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											3
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											4
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											5
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Sockets</strong></span>
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>NUMA nodes</strong></span>
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr></tbody></table></div></div><p class="simpara">
							In this scenario, there are 2 NUMA nodes and 8 vCPUs. Therefore, 4 vCPU threads should be pinned to each node.
						</p><p class="simpara">
							In addition, Red Hat recommends leaving at least a single CPU thread available on each node for host system operations.
						</p><p class="simpara">
							Because in this example, each NUMA node houses 3 cores, each with 2 host CPU threads, the set for node 0 translates as follows:
						</p><pre class="programlisting language-xml">&lt;vcpupin vcpu='0' cpuset='1'/&gt;
&lt;vcpupin vcpu='1' cpuset='4'/&gt;
&lt;vcpupin vcpu='2' cpuset='2'/&gt;
&lt;vcpupin vcpu='3' cpuset='5'/&gt;</pre></li></ul></div></section></section><section class="section" id="optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">12.5. Optimizing virtual machine network performance</h2></div></div></div><p>
				Due to the virtual nature of a VM’s network interface card (NIC), the VM loses a portion of its allocated host network bandwidth, which can reduce the overall workload efficiency of the VM. The following tips can minimize the negative impact of virtualization on the virtual NIC (vNIC) throughput.
			</p><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					Use any of the following methods and observe if it has a beneficial effect on your VM network performance:
				</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Enable the vhost_net module</span></dt><dd><p class="simpara">
							On the host, ensure the <code class="literal">vhost_net</code> kernel feature is enabled:
						</p><pre class="literallayout"># <span class="strong strong"><strong>lsmod | grep vhost</strong></span>
vhost_net              32768  1
vhost                  53248  1 vhost_net
tap                    24576  1 vhost_net
tun                    57344  6 vhost_net</pre><p class="simpara">
							If the output of this command is blank, enable the <code class="literal">vhost_net</code> kernel module:
						</p><pre class="literallayout"># <span class="strong strong"><strong>modprobe vhost_net</strong></span></pre></dd><dt><span class="term">Set up multi-queue virtio-net</span></dt><dd><p class="simpara">
							To set up the <span class="emphasis"><em>multi-queue virtio-net</em></span> feature for a VM, use the <code class="literal">virsh edit</code> command to edit to the XML configuration of the VM. In the XML, add the following to the <code class="literal">&lt;devices&gt;</code> section, and replace <code class="literal">N</code> with the number of vCPUs in the VM, up to 16:
						</p><pre class="literallayout">&lt;interface type='network'&gt;
      &lt;source network='default'/&gt;
      &lt;model type='virtio'/&gt;
      &lt;driver name='vhost' queues='N'/&gt;
&lt;/interface&gt;</pre><p class="simpara">
							If the VM is running, restart it for the changes to take effect.
						</p></dd><dt><span class="term">Set up vhost zero-copy transmit</span></dt><dd><p class="simpara">
							If using a network with large packet size, enable the <span class="emphasis"><em>vhost zero-copy transmit</em></span> feature.
						</p><p class="simpara">
							Note that this feature only improves the performance when transmitting large packets between a guest network and an external network. It does not affect performance for guest-to-guest and guest-to-host workloads. In addition, it is likely to have a negative impact on the performance of small packet workloads.
						</p><p class="simpara">
							Also, enabling zero-copy transmit can cause head-of-line blocking of packets, which may create a potential security risk.
						</p><p class="simpara">
							To enable vhost zero-copy transmit:
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									On the host, disable the vhost-net kernel module:
								</p><pre class="literallayout"># <span class="strong strong"><strong>modprobe -r vhost_net</strong></span></pre></li><li class="listitem"><p class="simpara">
									Re-enable the vhost-net module with the zero-copy parameter turned on:
								</p><pre class="literallayout"># <span class="strong strong"><strong>modprobe vhost-net experimental_zcopytx=1</strong></span></pre></li><li class="listitem"><p class="simpara">
									Check whether zero-copy transmit was enabled successfully:
								</p><pre class="literallayout"># <span class="strong strong"><strong>cat /sys/module/vhost_net/parameters/experimental_zcopytx</strong></span>
1</pre></li></ol></div></dd><dt><span class="term">Batching network packets</span></dt><dd><p class="simpara">
							In Linux VM configurations with a long transmission path, batching packets before submitting them to the kernel may improve cache utilization. To set up packet batching, use the following command on the host, and replace <span class="emphasis"><em>tap0</em></span> with the name of the network interface that the VMs use:
						</p><pre class="literallayout"># <span class="strong strong"><strong>ethtool -C <span class="emphasis"><em>tap0</em></span> rx-frames 128</strong></span></pre></dd></dl></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For additional information on virtual network connection types and tips for usage, see <a class="xref" href="index.html#understanding-virtual-networking-overview_configuring-and-managing-virtualization" title="Chapter 14. Understanding virtual networking">Chapter 14, <em>Understanding virtual networking</em></a>.
					</li></ul></div></section><section class="section" id="virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">12.6. Virtual machine performance monitoring tools</h2></div></div></div><p>
				To identify what consumes the most VM resources and which aspect of VM performance needs optimization, performance diagnostic tools, both general and VM-specific, can be used.
			</p><div class="formalpara"><p class="title"><strong>Default OS performance monitoring tools</strong></p><p>
					For standard performance evaluation, you can use the utilities provided by default by your host and guest operating systems:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						On your RHEL 8 host, as root, use the <code class="literal">top</code> utility or the <span class="strong strong"><strong>system monitor</strong></span> application, and look for <code class="literal">qemu</code> and <code class="literal">virt</code> in the output. This shows how much host system resources your VMs are consuming.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								If the monitoring tool displays that any of the <code class="literal">qemu</code> or <code class="literal">virt</code> processes consume a large portion of the host CPU or memory capacity, use the <code class="literal">perf</code> utility to investigate. For details, see below.
							</li><li class="listitem">
								In addition, if a <code class="literal">vhost_net</code> thread process, named for example <span class="emphasis"><em>vhost_net-1234</em></span>, is displayed as consuming an excessive amount of host CPU capacity, consider using <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_and_managing_virtualization/optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel-8">virtual network optimization features</a>, such as <code class="literal">multi-queue virtio-net</code>.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						On the guest operating system, use performance utilities and applications available on the system to evaluate which processes consume the most system resources.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								On Linux systems, you can use the <code class="literal">top</code> utility.
							</li><li class="listitem">
								On Windows systems, you can use the <span class="strong strong"><strong>Task Manager</strong></span> application.
							</li></ul></div></li></ul></div><div class="formalpara"><p class="title"><strong>perf kvm</strong></p><p>
					You can use the <code class="literal">perf</code> utility to collect and analyze virtualization-specific statistics about the performance of your RHEL 8 host. To do so:
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the host, install the <span class="emphasis"><em>perf</em></span> package:
					</p><pre class="literallayout"># <span class="strong strong"><strong>yum install perf</strong></span></pre></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">perf kvm stat</code> command to display perf statistics for your virtualization host:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								For real-time monitoring of your hypervisor, use the <code class="literal">perf kvm stat live</code> command.
							</li><li class="listitem">
								To log the perf data of your hypervisor over a period of time, activate the logging using the <code class="literal">perf kvm stat record</code> command. After the command is canceled or interrupted, the data is saved in the <code class="literal">perf.data.guest</code> file, which can be analyzed using the <code class="literal">perf kvm stat report</code> command.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Analyze the <code class="literal">perf</code> output for types of <code class="literal">VM-EXIT</code> events and their distribution. For example, the <code class="literal">PAUSE_INSTRUCTION</code> events should be infrequent, but in the following output, the high occurrence of this event suggests that the host CPUs are not handling the running vCPUs well. In such a scenario, consider powering down some of your active VMs, removing vCPUs from these VMs, or <a class="link" href="index.html#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel-8" title="12.4. Optimizing virtual machine CPU performance">tuning the performance of the vCPUs</a>.
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>perf kvm stat report</strong></span>

Analyze events for all VMs, all VCPUs:


             VM-EXIT    Samples  Samples%     Time%    Min Time    Max Time         Avg time

  EXTERNAL_INTERRUPT     365634    31.59%    18.04%      0.42us  58780.59us    204.08us ( +-   0.99% )
           MSR_WRITE     293428    25.35%     0.13%      0.59us  17873.02us      1.80us ( +-   4.63% )
    PREEMPTION_TIMER     276162    23.86%     0.23%      0.51us  21396.03us      3.38us ( +-   5.19% )
   PAUSE_INSTRUCTION     189375    16.36%    11.75%      0.72us  29655.25us    256.77us ( +-   0.70% )
                 HLT      20440     1.77%    69.83%      0.62us  79319.41us  14134.56us ( +-   0.79% )
              VMCALL      12426     1.07%     0.03%      1.02us   5416.25us      8.77us ( +-   7.36% )
       EXCEPTION_NMI         27     0.00%     0.00%      0.69us      1.34us      0.98us ( +-   3.50% )
       EPT_MISCONFIG          5     0.00%     0.00%      5.15us     10.85us      7.88us ( +-  11.67% )

Total Samples:1157497, Total events handled time:413728274.66us.</pre><p class="simpara">
						Other event types that can signal problems in the output of <code class="literal">perf kvm stat</code> include:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">INSN_EMULATION</code> - suggests suboptimal <a class="link" href="index.html#optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel-8" title="12.3. Optimizing virtual machine I/O performance">VM I/O configuration</a>.
							</li></ul></div></li></ol></div><p>
				For more information on using <code class="literal">perf</code> to monitor virtualization performance, see the <code class="literal">perf-kvm</code> man page.
			</p><div class="formalpara"><p class="title"><strong>numastat</strong></p><p>
					To see the current NUMA configuration of your system, you can use the <code class="literal">numastat</code> utility, which is provided by installing the <span class="strong strong"><strong>numactl</strong></span> package.
				</p></div><p>
				The following shows a host with 4 running VMs, each obtaining memory from multiple NUMA nodes. This is not optimal for vCPU performance, and <a class="link" href="index.html#configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance" title="12.4.1. Configuring NUMA in a virtual machine">warrants adjusting</a>:
			</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>numastat -c qemu-kvm</strong></span>

Per-node process memory usage (in MBs)
PID              Node 0 Node 1 Node 2 Node 3 Node 4 Node 5 Node 6 Node 7 Total
---------------  ------ ------ ------ ------ ------ ------ ------ ------ -----
51722 (qemu-kvm)     68     16    357   6936      2      3    147    598  8128
51747 (qemu-kvm)    245     11      5     18   5172   2532      1     92  8076
53736 (qemu-kvm)     62    432   1661    506   4851    136     22    445  8116
53773 (qemu-kvm)   1393      3      1      2     12      0      0   6702  8114
---------------  ------ ------ ------ ------ ------ ------ ------ ------ -----
Total              1769    463   2024   7462  10037   2672    169   7837 32434</pre><p>
				In contrast, the following shows memory being provided to each VM by a single node, which is significantly more efficient.
			</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>numastat -c qemu-kvm</strong></span>

Per-node process memory usage (in MBs)
PID              Node 0 Node 1 Node 2 Node 3 Node 4 Node 5 Node 6 Node 7 Total
---------------  ------ ------ ------ ------ ------ ------ ------ ------ -----
51747 (qemu-kvm)      0      0      7      0   8072      0      1      0  8080
53736 (qemu-kvm)      0      0      7      0      0      0   8113      0  8120
53773 (qemu-kvm)      0      0      7      0      0      0      1   8110  8118
59065 (qemu-kvm)      0      0   8050      0      0      0      0      0  8051
---------------  ------ ------ ------ ------ ------ ------ ------ ------ -----
Total                 0      0   8072      0   8072      0   8114   8110 32368</pre></section><section class="section" id="related-information-optimizing-virtual-machine-performance-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">12.7. Related information</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						When using Windows as the guest operating system of your VM, Red Hat recommends applying additional optimization measures. For details, see <a class="xref" href="index.html#optimizing-windows-virtual-machines-on-rhel-8_installing-and-managing-windows-virtual-machines-on-rhel8" title="16.2. Optimizing Windows virtual machines">Section 16.2, “Optimizing Windows virtual machines”</a>.
					</li></ul></div></section></section><section class="chapter" id="sharing-files-between-the-host-and-its-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Chapter 13. Sharing files between the host and its virtual machines</h1></div></div></div><p>
			You may frequently require to share data between your host system and the virtual machines (VMs) it runs. To do so quickly and efficiently, you can set up NFS or Samba file shares on your system.
		</p><section class="section" id="sharing-files-between-the-host-and-linux-virtual-machines_sharing-files-between-the-host-and-its-virtual-machines"><div class="titlepage"><div><div><h2 class="title">13.1. Sharing files between the host and Linux virtual machines</h2></div></div></div><p>
				For efficient file sharing between your host system and the Linux VMs it is connected to, you can export an NFS share that your VMs can mount and access.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">nfs-utils</code> package is installed on the host.
					</li><li class="listitem"><p class="simpara">
						A directory that you want to share with your VMs. If you do not want to share any of your existing directories, create a new one, for example named <span class="emphasis"><em>shared-files</em></span>.
					</p><pre class="literallayout"># <span class="strong strong"><strong>mkdir shared-files</strong></span></pre></li><li class="listitem"><p class="simpara">
						The host is visible and reachable over a network for the VM. This is generally the case if the VM is connected using the <span class="emphasis"><em>NAT</em></span> and <span class="emphasis"><em>bridge</em></span> type of virtual networks. However, for the <span class="emphasis"><em>macvtap</em></span> connection, you must first set up the <span class="emphasis"><em>macvlan</em></span> feature on the host. To do so:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a network device file, for example called <code class="literal">vm-macvlan.netdev</code> in the host’s <code class="literal">/etc/systemd/network/</code> directory.
							</p><pre class="literallayout"># <span class="strong strong"><strong>touch /etc/systemd/network/<span class="emphasis"><em>vm-macvlan.netdev</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								Edit the network device file to have the following content. You can replace <code class="literal">vm-macvlan</code> with the name you chose for your network device.
							</p><pre class="literallayout">[NetDev]
Name=<span class="emphasis"><em>vm-macvlan</em></span>
Kind=macvlan

[MACVLAN]
Mode=bridge</pre></li><li class="listitem"><p class="simpara">
								Create a network configuration file for your macvlan network device, for example <code class="literal">vm-macvlan.network</code>.
							</p><pre class="literallayout"># <span class="strong strong"><strong>touch /etc/systemd/network/<span class="emphasis"><em>vm-macvlan.network</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								Edit the network configuration file to have the following content. You can replace <code class="literal">vm-macvlan</code> with the name you chose for your network device.
							</p><pre class="literallayout">[Match]
Name=_vm-macvlan_

[Network]
IPForward=yes
Address=192.168.250.33/24
Gateway=192.168.250.1
DNS=192.168.250.1</pre></li><li class="listitem"><p class="simpara">
								Create a network configuration file for your physical network interface. For example, if your interface is <code class="literal">enp4s0</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>touch /etc/systemd/network/enp4s0.network</strong></span></pre><p class="simpara">
								If you are unsure what interface name to use, you can use the <code class="literal">ifconfig</code> command on your host to obtain the list of active network interfaces.
							</p></li><li class="listitem"><p class="simpara">
								Edit the physical network configuration file to make the physical network a part of the macvlan interface, in this case <span class="emphasis"><em>vm-macvlan</em></span>:
							</p><pre class="literallayout">[Match]
Name=enp4s0

[Network]
MACVLAN=vm-macvlan</pre></li><li class="listitem">
								Reboot your host.
							</li></ol></div></li><li class="listitem">
						<span class="strong strong"><strong>Optional:</strong></span> For improved security, ensure your VMs are compatible with NFS version 4 or later.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the host, export a directory with the files you want to share as a network file system (NFS).
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Obtain the IP address of each virtual machine you want to share files with. The following example obtains the IPs of <span class="emphasis"><em>testguest1</em></span> and <span class="emphasis"><em>testguest2</em></span>.
							</p><pre class="literallayout"># <span class="strong strong"><strong>virsh domifaddr testguest1</strong></span>
Name       MAC address          Protocol     Address
----------------------------------------------------------------
vnet0      52:53:00:84:57:90    ipv4         <span class="strong strong"><strong>192.168.124.220</strong></span>/24

# <span class="strong strong"><strong>virsh domifaddr testguest2</strong></span>
Name       MAC address          Protocol     Address
----------------------------------------------------------------
vnet1      52:53:00:65:29:21    ipv4         <span class="strong strong"><strong>192.168.124.17</strong></span>/24</pre></li><li class="listitem"><p class="simpara">
								Edit the <code class="literal">/etc/exports</code> file on the host and add a line that includes the directory you want to share, IPs of VMs you want to share with, and sharing options.
							</p><pre class="literallayout"><span class="emphasis"><em>Shared directory</em></span> <span class="emphasis"><em>VM1-IP(options)</em></span> <span class="emphasis"><em>VM2-IP(options)</em></span> [...]</pre><p class="simpara">
								For example, the following shares the <code class="literal">/usr/local/shared-files</code> directory on the host with <span class="emphasis"><em>testguest1</em></span> and <span class="emphasis"><em>testguest2</em></span>, and enables the VMs to edit the content of the directory:
							</p><pre class="literallayout">/usr/local/shared-files/ 192.168.124.220(rw,sync) 192.168.124.17(rw,sync)</pre></li><li class="listitem"><p class="simpara">
								Export the updated file system.
							</p><pre class="literallayout"># <span class="strong strong"><strong>exportfs -a</strong></span></pre></li><li class="listitem"><p class="simpara">
								Ensure the NFS process is started:
							</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl start nfs</strong></span></pre></li><li class="listitem"><p class="simpara">
								Obtain the IP address of the host system. This will be used for mounting the shared directory on the VMs later.
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip addr</strong></span>
[...]
5: virbr0: [BROADCAST,MULTICAST,UP,LOWER_UP] mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 52:54:00:32:ff:a5 brd ff:ff:ff:ff:ff:ff
    inet <span class="strong strong"><strong>192.168.124.1/24</strong></span> brd 192.168.124.255 scope global virbr0
       valid_lft forever preferred_lft forever
[...]</pre><p class="simpara">
								Note that the relevant network is the one being used use for connection to the host by the VMs you want to share files with. Usually, this is <code class="literal">virbr0</code>.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						On the guest OS of a VM specified in the <code class="literal">/etc/exports</code> file, mount the exported file system.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create a directory you want to use as a mount point for the shared file system, for example <code class="literal">/mnt/host-share</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>mkdir /mnt/host-share</strong></span></pre></li><li class="listitem"><p class="simpara">
								Mount the directory exported by the host on the mount point. This example mounts the <code class="literal">/usr/local/shared-files</code> directory exported by the <code class="literal">192.168.124.1</code> host on <code class="literal">/mnt/host-share</code> in the guest:
							</p><pre class="literallayout"># <span class="strong strong"><strong>mount 192.168.124.1:/usr/local/shared-files /mnt/host-share</strong></span></pre></li><li class="listitem"><p class="simpara">
								To verify the mount has succeeded, access and explore the shared directory on the mount point:
							</p><pre class="literallayout"># <span class="strong strong"><strong>cd /mnt/host-share</strong></span>
# <span class="strong strong"><strong>ls</strong></span>
shared-file1  shared-file2  shared-file3</pre></li></ol></div></li></ol></div></section><section class="section" id="sharing-files-between-the-host-and-windows-virtual-machines_sharing-files-between-the-host-and-its-virtual-machines"><div class="titlepage"><div><div><h2 class="title">13.2. Sharing files between the host and Windows virtual machines</h2></div></div></div><p>
				For efficient file sharing between your host system and the Windows VMs it is connected to, you can prepare a Samba server that your VMs can access.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The <code class="literal">samba</code> packages are installed on your host. If they are not:
					</p><pre class="literallayout"># <span class="strong strong"><strong>yum install samba</strong></span></pre></li><li class="listitem"><p class="simpara">
						The host is visible and reachable over a network for the VM. This is generally the case if the VM is connected using the <span class="emphasis"><em>NAT</em></span> and <span class="emphasis"><em>bridge</em></span> type of virtual networks. However, for the <span class="emphasis"><em>macvtap</em></span> connection, you must first set up the <span class="emphasis"><em>macvlan</em></span> feature on the host. To do so:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a network device file, for example called <code class="literal">vm-macvlan.netdev</code> in the host’s <code class="literal">/etc/systemd/network/</code> directory.
							</p><pre class="literallayout"># <span class="strong strong"><strong>touch /etc/systemd/network/<span class="emphasis"><em>vm-macvlan.netdev</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								Edit the network device file to have the following content. You can replace <code class="literal">vm-macvlan</code> with the name you chose for your network device.
							</p><pre class="literallayout">[NetDev]
Name=<span class="emphasis"><em>vm-macvlan</em></span>
Kind=macvlan

[MACVLAN]
Mode=bridge</pre></li><li class="listitem"><p class="simpara">
								Create a network configuration file for your macvlan network device, for example <code class="literal">vm-macvlan.network</code>.
							</p><pre class="literallayout"># <span class="strong strong"><strong>touch /etc/systemd/network/<span class="emphasis"><em>vm-macvlan.network</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								Edit the network configuration file to have the following content. You can replace <code class="literal">vm-macvlan</code> with the name you chose for your network device.
							</p><pre class="literallayout">[Match]
Name=_vm-macvlan_

[Network]
IPForward=yes
Address=192.168.250.33/24
Gateway=192.168.250.1
DNS=192.168.250.1</pre></li><li class="listitem"><p class="simpara">
								Create a network configuration file for your physical network interface. For example, if your interface is <code class="literal">enp4s0</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>touch /etc/systemd/network/enp4s0.network</strong></span></pre><p class="simpara">
								If you are unsure what interface to use, you can use the <code class="literal">ifconfig</code> command on your host to obtain the list of active network interfaces.
							</p></li><li class="listitem"><p class="simpara">
								Edit the physical network configuration file to make the physical network a part of the macvlan interface, in this case <span class="emphasis"><em>vm-macvlan</em></span>:
							</p><pre class="literallayout">[Match]
Name=enp4s0

[Network]
MACVLAN=vm-macvlan</pre></li><li class="listitem">
								Reboot your host.
							</li></ol></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the host, create a Samba share and make it accessible for external systems.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Add firewall permissions for Samba.
							</p><pre class="literallayout"># <span class="strong strong"><strong>firewall-cmd --permanent --zone=public --add-service=samba</strong></span>
success
# <span class="strong strong"><strong>firewall-cmd --reload</strong></span>
success</pre></li><li class="listitem"><p class="simpara">
								Edit the <code class="literal">/etc/samba/smb.conf</code> file:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										Add the following to the <code class="literal">[global]</code> section:
									</p><pre class="literallayout">map to guest = Bad User</pre></li><li class="listitem"><p class="simpara">
										Add the following at the end of the file:
									</p><pre class="literallayout">#=== Share Definitions ===
[VM-share]
path = /samba/VM-share
browsable = yes
guest ok = yes
read only = no
hosts allow = 192.168.122.0/24</pre><p class="simpara">
										Note that the <code class="literal">hosts allow</code> line restricts the accessibility of the share only to hosts on the VM network. If you want the share to be accessible by anyone, remove the line.
									</p></li></ol></div></li><li class="listitem"><p class="simpara">
								Create the <code class="literal">/samba/VM-share</code> directory.
							</p><pre class="literallayout"># <span class="strong strong"><strong>mkdir -p /samba/VM-share</strong></span></pre></li><li class="listitem"><p class="simpara">
								Enable the Samba service.
							</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl enable smb.service</strong></span>
Created symlink /etc/systemd/system/multi-user.target.wants/smb.service → /usr/lib/systemd/system/smb.service.</pre></li><li class="listitem"><p class="simpara">
								Restart the Samba service.
							</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl restart smb.service</strong></span></pre></li><li class="listitem"><p class="simpara">
								Allow the <code class="literal">VM-share</code> directory to be accessible and modifiable for the VMs.
							</p><pre class="literallayout"># <span class="strong strong"><strong>chmod -R 0755 /samba/VM-share/</strong></span>
# <span class="strong strong"><strong>chown -R nobody:nobody /samba/VM-share/</strong></span></pre></li><li class="listitem"><p class="simpara">
								Add the SELinux Samba sharing label to <code class="literal">/etc/samba/VM-share/</code>
							</p><pre class="literallayout"># <span class="strong strong"><strong>chcon -t samba_share_t /samba/VM-share/</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
						On the Windows guest operating system, attach the Samba share as a network location.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Open the File Explorer and right-click "This PC".
							</li><li class="listitem"><p class="simpara">
								In the context menu, click <code class="literal">Add a network location</code>.
							</p><div class="informalfigure"><div class="mediaobject"><img src="virt-Win10_network_loc1.png" alt="virt Win10 network loc1"/></div></div></li><li class="listitem">
								In the <span class="emphasis"><em>Add Network Location</em></span> wizard that opens, select "Choose a custom network location" and click <code class="literal btn">Next</code>.
							</li><li class="listitem"><p class="simpara">
								In the "Internet or network address" field, type <span class="emphasis"><em>host-IP</em></span>/VM-share, where <span class="emphasis"><em>host-IP</em></span> is the IP address of the host. Usually, the host IP is the default gateway of the VM. Afterwards, click <code class="literal btn">Next</code>.
							</p><div class="informalfigure"><div class="mediaobject"><img src="virt-Win10_network_loc2.png" alt="virt Win10 network loc2"/></div></div></li><li class="listitem">
								When the wizard asks if you want to rename the shared directory, keep the default name. This ensures the consistency of file sharing configuration across the VM and the guest. Click <code class="literal btn">Next</code>.
							</li><li class="listitem">
								If accessing the network location was successful, you can now click <code class="literal btn">Finish</code> and open the shared directory.
							</li></ol></div></li></ol></div></section></section><section class="chapter" id="understanding-virtual-networking-overview_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Chapter 14. Understanding virtual networking</h1></div></div></div><p>
			The connection of virtual machines to other devices and locations on a network has to be facilitated by the host hardware.
		</p><p>
			Virtual networking uses the concept of a virtual network switch. A virtual network switch is a software construct that operates on a host machine. Virtual machines (VMs) connect to the network through the virtual network switch.
		</p><p>
			The following figure shows a virtual network switch connecting two virtual machines to the network:
		</p><div class="informalfigure"><div class="mediaobject"><img src="vn-02-switchandtwoguests.png" alt="vn 02 switchandtwoguests"/></div></div><p>
			From the perspective of a guest operating system, a virtual network connection is the same as a physical network connection. Host machine servers view virtual network switches as network interfaces. When the libvirtd daemon (<span class="strong strong"><strong>libvirtd</strong></span>) is first installed and started, the default network interface that represents the virtual network switch is <span class="strong strong"><strong>virbr0</strong></span>.
		</p><p>
			This interface can be viewed with the <code class="literal">ip</code> command like any other network interface.
		</p><pre class="literallayout">$ <span class="strong strong"><strong>ip addr show virbr0</strong></span>
3: virbr0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state
 UNKNOWN link/ether 1b:c4:94:cf:fd:17 brd ff:ff:ff:ff:ff:ff
 inet 192.168.122.1/24 brd 192.168.122.255 scope global virbr0</pre><p>
			By default, all VMs on a single host are connected to the same <code class="literal">libvirt</code> virtual network, named <span class="strong strong"><strong>default</strong></span>. VMs on this network can make the following connections:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>With each other and with the virtualization host</strong></span>
				</p><p class="simpara">
					Both inbound and outbound traffic is possible, but is affected by the firewalls in the guest operating system’s network stack and by the <code class="literal">libvirt</code> network filtering rules attached to the guest interface.
				</p></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>With other hosts on the network beyond the virtualization host</strong></span>
				</p><p class="simpara">
					Only outbound traffic is possible and is affected by the Network Address Translation (NAT) rules, as well as the host system’s firewall.
				</p></li></ul></div><p>
			For basic outbound-only network access from virtual machines, no additional network setup is usually needed, because the default network is installed along with the <code class="literal package">libvirt</code> package, and is automatically started when the <code class="literal">libvirtd</code> service is started.
		</p><p>
			If more advanced functionality is needed, additional networks can be created and configured using <code class="literal">virsh</code>, and the VM’s XML configuration file can be edited to use one of these new networks.
		</p><p>
			For more information on the default configuration, see <a class="xref" href="index.html#virtual-networking-default-configuration_understanding-virtual-networking-overview" title="14.7. Virtual networking default configuration">Section 14.7, “Virtual networking default configuration”</a>.
		</p><p>
			If needed, guest interfaces can instead be set to one of the following modes:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="link" href="index.html#virtual-networking-routed-mode_understanding-virtual-networking-overview" title="14.1. Virtual networking in routed mode">Routed mode</a>
				</li><li class="listitem">
					<a class="link" href="index.html#virtual-networking-bridged-mode_understanding-virtual-networking-overview" title="14.2. Virtual networking in bridged mode">Bridged mode</a>
				</li><li class="listitem">
					<a class="link" href="index.html#virtual-networking-isolated-mode_understanding-virtual-networking-overview" title="14.3. Virtual networking in isolated mode">Isolated mode</a>
				</li><li class="listitem">
					<a class="link" href="index.html#virtual-networking-open-mode_understanding-virtual-networking-overview" title="14.5. Virtual networking in open mode">Open mode</a>
				</li></ul></div><p>
			The virtual network uses network address translation (NAT) to assign IP address ranges to virtual networks and <code class="literal">dnsmasq</code> to automatically assign IP addresses to virtual machine network interface cards (NICs) and to connect to a domain name service (DNS).
		</p><p>
			The following features are available for virtual networking:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="link" href="index.html#virtual-networking-network-address-translation_understanding-virtual-networking-overview" title="14.4. Virtual networking Network Address Translation">Network address translation (NAT)</a>
				</li><li class="listitem">
					<a class="link" href="index.html#virtual-networking-dns-and-dhcp_understanding-virtual-networking-overview" title="14.6. Virtual networking DNS and DHCP">DNS and DHCP</a>
				</li></ul></div><section class="section" id="virtual-networking-routed-mode_understanding-virtual-networking-overview"><div class="titlepage"><div><div><h2 class="title">14.1. Virtual networking in routed mode</h2></div></div></div><p>
				When using <span class="emphasis"><em>Routed</em></span> mode, the virtual switch connects to the physical LAN connected to the host machine, passing traffic back and forth without the use of NAT. The virtual switch can examine all traffic and use the information contained within the network packets to make routing decisions. When using this mode, all of the virtual machines (VMs) are in their own subnet, routed through a virtual switch. This enables incoming connections, but requires extra routing-table entries for systems on the external network. Routed mode operates at Layer 3 of the OSI networking model.
			</p><div class="informalfigure"><div class="mediaobject"><img src="vn-06-routed-switch.png" alt="vn 06 routed switch"/></div></div><div class="formalpara"><p class="title"><strong>Common topologies</strong></p><p>
					The common topologies in which routed mode is used include DMZ and virtual server hosting.
				</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">DMZ</span></dt><dd><p class="simpara">
							You can create a network where one or more nodes are placed in a controlled sub-network for security reasons. Such a sub-network is known as a demilitarized zone (DMZ).
						</p><div class="informalfigure"><div class="mediaobject"><img src="vn-09-routed-mode-DMZ.png" alt="vn 09 routed mode DMZ"/></div></div><p class="simpara">
							Host machines in a DMZ typically provide services to WAN (external) host machines as well as LAN (internal) host machines. Since this requires them to be accessible from multiple locations, and considering that these locations are controlled and operated in different ways based on their security and trust level, routed mode is the best configuration for this environment.
						</p></dd><dt><span class="term">Virtual server hosting</span></dt><dd><p class="simpara">
							A virtual server hosting provider may have several host machines, each with two physical network connections. One interface is used for management and accounting, the other for the VMs to connect through. Each VM has its own public IP address, but the host machines use private IP addresses so that only internal administrators can manage the VMs.
						</p><div class="informalfigure"><div class="mediaobject"><img src="vn-10-routed-mode-datacenter.png" alt="vn 10 routed mode datacenter"/></div></div></dd></dl></div></section><section class="section" id="virtual-networking-bridged-mode_understanding-virtual-networking-overview"><div class="titlepage"><div><div><h2 class="title">14.2. Virtual networking in bridged mode</h2></div></div></div><p>
				When using <span class="emphasis"><em>Bridged</em></span> mode, virtual machines (VMs) are connected to a bridge device that is also connected directly to a physical ethernet device connected to the local ethernet. As a result, the VM is directly visible on the physical network. This enables incoming connections, but does not require any extra routing-table entries.
			</p><div class="informalfigure"><div class="mediaobject"><img src="vn-Bridged-Mode-Diagram.png" alt="vn Bridged Mode Diagram"/></div></div><p>
				A VM in bridged mode has to connect to an existing Linux bridge on the host, and therefore requires a network bridge to be created on the host interface. In contrast, other VM networking modes automatically create and connect to the <code class="literal">virbr0</code> virtual bridge.
			</p><p>
				All of the VMs appear within the same subnet as the host machine. All other physical machines on the same physical network are aware of the VMs, and can access them. Bridging operates on Layer 2 of the OSI networking model.
			</p><p>
				It is possible to use multiple physical interfaces on the hypervisor by joining them together with a bond. The bond is then added to a bridge and then VMs are added onto the bridge as well. However, the bonding driver has several modes of operation, and only a few of these modes work with a bridge where VMs are in use.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					When using bridged mode, the only <a class="link" href="https://access.redhat.com/solutions/67546">bonding modes</a> that should be used with a VM are Mode 1, Mode 2, and Mode 4. Using modes 0, 3, 5, or 6 is likely to cause the connection to fail. Also note that Media-Independent Interface (MII) monitoring should be used to monitor bonding modes, as Address Resolution Protocol (ARP) monitoring does not work.
				</p></div></div><div class="formalpara"><p class="title"><strong>Common scenarios</strong></p><p>
					The most common use cases for bridged mode include:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Deploying VMs in an existing network alongside host machines, making the difference between virtual and physical machines transparent to the end user.
					</li><li class="listitem">
						Deploying VMs without making any changes to existing physical network configuration settings.
					</li><li class="listitem">
						Deploying VMs that must be easily accessible to an existing physical network. Placing VMs on a physical network where they must access services within an existing broadcast domain, such as DHCP.
					</li><li class="listitem">
						Connecting VMs to an existing network where VLANs are used.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For a detailed explanation of bridge_opts parameters, used to configure bridged networking mode, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.1/html/administration_guide/appe-custom_network_properties#Explanation_of_bridge_opts_Parameters">Red Hat Virtualization Administration Guide</a>.
					</li></ul></div></section><section class="section" id="virtual-networking-isolated-mode_understanding-virtual-networking-overview"><div class="titlepage"><div><div><h2 class="title">14.3. Virtual networking in isolated mode</h2></div></div></div><p>
				When using <span class="emphasis"><em>Isolated</em></span> mode, virtual machines connected to the virtual switch can communicate with each other and with the host machine, but their traffic will not pass outside of the host machine, and they cannot receive traffic from outside the host machine. Using dnsmasq in this mode is required for basic functionality such as DHCP.
			</p><div class="informalfigure"><div class="mediaobject"><img src="vn-07-isolated-switch.png" alt="vn 07 isolated switch"/></div></div></section><section class="section" id="virtual-networking-network-address-translation_understanding-virtual-networking-overview"><div class="titlepage"><div><div><h2 class="title">14.4. Virtual networking Network Address Translation</h2></div></div></div><p>
				By default, virtual network switches operate in NAT mode. They use IP masquerading rather than Source-NAT (SNAT) or Destination-NAT (DNAT). IP masquerading enables connected VMs to use the host machine’s IP address for communication with any external network. When the virtual network switch is operating in NAT mode, computers external to the host cannot communicate with the VMs inside the host.
			</p><div class="informalfigure"><div class="mediaobject"><img src="vn-04-hostwithnatswitch.png" alt="vn 04 hostwithnatswitch"/></div></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Virtual network switches use NAT configured by iptables rules. Editing these rules while the switch is running is not recommended, because incorrect rules may result in the switch being unable to communicate.
				</p></div></div><p>
				If the switch is not running, you can set the public IP range for forward mode NAT in order to create a port masquerading range by running:
			</p><pre class="literallayout"># <span class="strong strong"><strong>iptables -j SNAT --to-source [start]-[end]</strong></span></pre></section><section class="section" id="virtual-networking-open-mode_understanding-virtual-networking-overview"><div class="titlepage"><div><div><h2 class="title">14.5. Virtual networking in open mode</h2></div></div></div><p>
				When using <span class="emphasis"><em>Open</em></span> mode for networking, <code class="literal">libvirt</code> does not generate any <code class="literal">iptables</code> rules for the network. As a result, <code class="literal">iptables</code> rules added outside the scope of libvirt are not overwritten, and the user can therefore manually manage <code class="literal">iptables</code> rules.
			</p></section><section class="section" id="virtual-networking-dns-and-dhcp_understanding-virtual-networking-overview"><div class="titlepage"><div><div><h2 class="title">14.6. Virtual networking DNS and DHCP</h2></div></div></div><p>
				The <code class="literal">libvirt</code> package includes <code class="literal application">dnsmasq</code> to provide a Dynamic Host Configuration Protocol (DHCP) server and a Domain Name System (DNS) forwarder for virtual networks.
			</p><p>
				The <code class="literal">dnsmasq</code> DHCP service can assign a pool of addresses to a virtual network switch. IP information can be assigned to virtual machines via DHCP.
			</p><p>
				<code class="literal">dnsmasq</code> accepts DNS queries from virtual machines on the virtual network and forwards them to a real DNS server.
			</p><p>
				An instance of <code class="literal">dnsmasq</code> is automatically configured and started by <code class="literal">libvirt</code> for each virtual network switch that needs it.
			</p></section><section class="section" id="virtual-networking-default-configuration_understanding-virtual-networking-overview"><div class="titlepage"><div><div><h2 class="title">14.7. Virtual networking default configuration</h2></div></div></div><p>
				When the libvirtd daemon (<code class="literal">libvirtd</code>) is first installed, it contains an initial virtual network switch configuration in NAT mode. This configuration is used so that installed VMs can communicate to the external network through the host machine. The following figure shows the default configuration for <code class="literal">libvirtd</code>:
			</p><div class="informalfigure"><div class="mediaobject"><img src="vn-08-network-overview.png" alt="vn 08 network overview"/></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					A virtual network can be restricted to a specific physical interface. This may be useful on a physical system that has several interfaces (for example, <span class="strong strong"><strong>eth0</strong></span>, <span class="strong strong"><strong>eth1</strong></span>, and <span class="strong strong"><strong>eth2</strong></span>). This is only useful in routed and NAT modes, and can be defined in the <code class="literal">dev=&lt;interface&gt;</code> option, or in the RHEL 8 web console when creating a new virtual network.
				</p></div></div></section></section><section class="chapter" id="securing-virtual-machines-in-rhel-8_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Chapter 15. Securing virtual machines</h1></div></div></div><p>
			As an administrator of a RHEL 8 system with virtual machines (VMs), ensuring that your VMs are as secure as possible significantly lowers the risk of your guest and host OSs being infected by malicious software.
		</p><p>
			This document outlines the <a class="link" href="index.html#how-security-works-in-virtual-machines_securing-virtual-machines-in-rhel-8" title="15.1. How security works in virtual machines">mechanics of securing VMs</a> on a RHEL 8 host and provides <a class="link" href="index.html#best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel-8" title="15.2. Best practices for securing virtual machines">a list of methods</a> to increase the security of your VMs.
		</p><section class="section" id="how-security-works-in-virtual-machines_securing-virtual-machines-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">15.1. How security works in virtual machines</h2></div></div></div><p>
				When using virtual machines (VMs), multiple operating systems can be housed within a single host machine. These systems are connected with the host through the hypervisor, and usually also through a virtual network. As a consequence, each VM can be used as a vector for attacking the host with malicious software, and the host can be used as a vector for attacking any of the VMs.
			</p><div class="figure" id="idm140329469159856"><p class="title"><strong>Figure 15.1. A potential malware attack vector on a virtualization host</strong></p><div class="figure-contents"><div class="mediaobject"><img src="virt-sec_successful-attack.png" alt="virt sec successful attack"/></div></div></div><p>
				Because the hypervisor uses the host kernel to manage VMs, services running on the VM’s operating system are frequently used for injecting malicious code into the host system. However, you can protect your system against such security threats by using <a class="link" href="index.html#best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel-8" title="15.2. Best practices for securing virtual machines">a number of security features</a> on your host and your guest systems.
			</p><p>
				These features, such as SELinux or QEMU sandboxing, provide various measures that make it more difficult for malicious code to attack the hypervisor and transfer between your host and your VMs.
			</p><div class="figure" id="idm140329469153600"><p class="title"><strong>Figure 15.2. Prevented malware attacks on a virtualization host</strong></p><div class="figure-contents"><div class="mediaobject"><img src="virt-sec_prevented-attack.png" alt="virt sec prevented attack"/></div></div></div><p>
				Many of the features that RHEL 8 provides for VM security are always active and do not have to be enabled or configured. For details, see <a class="xref" href="index.html#automatic-features-for-virtual-machine-security_securing-virtual-machines-in-rhel-8" title="15.4. Automatic features for virtual machine security">Section 15.4, “Automatic features for virtual machine security”</a>.
			</p><p>
				In addition, you can adhere to a variety of best practices to minimize the vulnerability of your VMs and your hypervisor. For more information, see <a class="xref" href="index.html#best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel-8" title="15.2. Best practices for securing virtual machines">Section 15.2, “Best practices for securing virtual machines”</a>.
			</p></section><section class="section" id="best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">15.2. Best practices for securing virtual machines</h2></div></div></div><p>
				Following the instructions below significantly decreases the risk of your virtual machines being infected with malicious code and used as attack vectors to infect your host system.
			</p><p>
				<span class="strong strong"><strong>On the guest side:</strong></span>
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Secure the virtual machine as if it was a physical machine. The specific methods available to enhance security depend on the guest OS.
					</p><p class="simpara">
						If your VM is running RHEL 8, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_security/">Configuring and managing security in RHEL 8</a> for detailed instructions on improving the security of your guest system.
					</p></li></ul></div><p>
				<span class="strong strong"><strong>On the host side:</strong></span>
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						When managing VMs remotely, use cryptographic utilities such as <span class="strong strong"><strong>SSH</strong></span> and network protocols such as <span class="strong strong"><strong>SSL</strong></span> for connecting to the VMs.
					</li><li class="listitem"><p class="simpara">
						Ensure SELinux is in Enforcing mode:
					</p><pre class="literallayout"><span class="strong strong"><strong># getenforce</strong></span>
Enforcing</pre><p class="simpara">
						If SELinux is disabled or in <span class="emphasis"><em>Permissive</em></span> mode, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_security/assembly_changing-selinux-states-and-modes-configuring-and-managing-security#configuring-and-managing-security-enabling-selinux">Configuring and managing security</a> guide for instructions on activating Enforcing mode.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							SELinux Enforcing mode also enables the sVirt RHEL 8 feature. This is a set of specialized SELinux booleans for virtualization, which can be <a class="link" href="index.html#virtualization-booleans-in-rhel-8_securing-virtual-machines-in-rhel-8" title="15.5. Virtualization booleans">manually adjusted</a> for fine-grained VM security management.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Use VMs with <span class="emphasis"><em>SecureBoot</em></span>:
					</p><p class="simpara">
						SecureBoot is a feature that ensures that your VM is running a cryptographically signed OS. This prevents VMs whose OS has been altered by a malware attack from booting.
					</p><p class="simpara">
						SecureBoot can only be applied when installing a Linux VM that uses OVMF firmware. For instructions, see <a class="xref" href="index.html#creating-a-secureboot-virtual-machine_securing-virtual-machines-in-rhel-8" title="15.3. Creating a SecureBoot virtual machine">Section 15.3, “Creating a SecureBoot virtual machine”</a>.
					</p></li><li class="listitem"><p class="simpara">
						Do not use <code class="literal">qemu-*</code> commands, such as <code class="literal">qemu-img</code>.
					</p><p class="simpara">
						QEMU is an essential component of the virtualization architecture in RHEL 8, but it is difficult to manage manually, and improper QEMU configurations may cause security vulnerabilities. Therefore, using <code class="literal">qemu-*</code> commands is not supported by Red Hat. Instead, it is highly recommended to interact with QEMU using <span class="emphasis"><em>libvirt</em></span> utilities, such as <code class="literal">virsh</code>, <code class="literal">virt-install</code>, and <code class="literal">virt-xml</code>, as these orchestrate QEMU according to the best practices.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For detailed information on modifying your virtualization booleans, see <a class="xref" href="index.html#virtualization-booleans-in-rhel-8_securing-virtual-machines-in-rhel-8" title="15.5. Virtualization booleans">Section 15.5, “Virtualization booleans”</a>.
					</li></ul></div></section><section class="section" id="creating-a-secureboot-virtual-machine_securing-virtual-machines-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">15.3. Creating a SecureBoot virtual machine</h2></div></div></div><p>
				The following provides instructions on creating a Linux virtual machine (VM) that uses the <span class="emphasis"><em>SecureBoot</em></span> feature, which ensures that your VM is running a cryptographically signed OS. If the guest OS of a VM has been altered by malware, SecureBoot prevents the VM from booting, which stops the potential spread of the malware to your host machine.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The VM is using the Q35 machine type.
					</li><li class="listitem"><p class="simpara">
						The <code class="literal">edk2-OVMF</code> packages installed:
					</p><pre class="literallayout"># <span class="strong strong"><strong>yum install edk2-ovmf</strong></span></pre></li><li class="listitem"><p class="simpara">
						An operating system (OS) installation source, which can be one of the following, and be available locally or on a network:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								A physical installation medium, such as a DVD
							</li><li class="listitem">
								An ISO image of an installation medium
							</li><li class="listitem">
								A disk image of an existing VM installation
							</li></ul></div></li><li class="listitem">
						Optionally, a Kickstart file can also be provided for faster and easier configuration of the installation.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the <code class="literal">virt-install</code> command to create a VM as detailed in <a class="xref" href="index.html#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines" title="2.2.1. Creating virtual machines using the command-line interface">Section 2.2.1, “Creating virtual machines using the command-line interface”</a>. For the <code class="literal">--boot</code> option, use the <code class="literal">uefi,nvram_template=/usr/share/OVMF/OVMF_VARS.secboot.fd</code> value. This uses the <code class="literal">OVMF_VARS.secboot.fd</code> and <code class="literal">OVMF_CODE.secboot.fd</code> files as templates for the VM’s non-volatile RAM (NVRAM) settings, which enables the SecureBoot feature.
					</p><p class="simpara">
						For example:
					</p><pre class="literallayout"># <span class="strong strong"><strong>virt-install --name rhel8sb --memory 4096 --vcpus 4 --os-variant rhel8.0 --boot uefi,nvram_template=/usr/share/OVMF/OVMF_VARS.secboot.fd --disk boot_order=2,size=10 --disk boot_order=1,device=cdrom,bus=scsi,path=/images/RHEL-8.0-installation.iso</strong></span></pre></li><li class="listitem">
						Follow the OS installation procedure according to the instructions on the screen.
					</li><li class="listitem">
						After the guest OS is installed, access the VM’s command line by opening the terminal in <a class="link" href="index.html#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines" title="2.4.2. Opening a virtual machine graphical console using Virt Viewer">the graphical guest console</a> or connecting to the guest OS <a class="link" href="index.html#proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines" title="2.4.3. Connecting to a virtual machine using SSH">using SSH</a>.
					</li><li class="listitem"><p class="simpara">
						Verify that SecureBoot is enabled by using the <code class="literal">mokutil --sb-state</code> command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>mokutil --sb-state</strong></span>
SecureBoot enabled</pre></li></ol></div></section><section class="section" id="automatic-features-for-virtual-machine-security_securing-virtual-machines-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">15.4. Automatic features for virtual machine security</h2></div></div></div><p>
				In addition to manual means of improving the security of your virtual machines listed in <a class="xref" href="index.html#best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel-8" title="15.2. Best practices for securing virtual machines">Section 15.2, “Best practices for securing virtual machines”</a>, a number of security features are provided by the <span class="strong strong"><strong>libvirt</strong></span> software suite and are automatically enabled when using virtualization in RHEL 8. These include:
			</p><div class="variablelist" id="system-and-user-sessions_securing-virtual-machines-in-rhel-8"><dl class="variablelist"><dt><span class="term">System and user sessions</span></dt><dd><p class="simpara">
							To access all the available utilities for virtual machine management in RHEL 8, you need to use the <span class="emphasis"><em>system session</em></span> of libvirt. To do so, you must have root privileges on the system or be a part of the <span class="emphasis"><em>libvirt</em></span> user group.
						</p><p class="simpara">
							Non-root users that are not in the libvirt group can only access a <span class="emphasis"><em>user session</em></span> of libvirt, which has to respect the access rights of the local user when accessing resources. For example, in the user session, you cannot detect or access VMs created in the system session or by other users. Also, available VM networking configuration options are significantly limited.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The RHEL 8 documentation assumes you have libvirt system session privileges.
							</p></div></div></dd><dt><span class="term">Virtual machine separation</span></dt><dd>
							Individual VMs run as isolated processes on the host, and rely on security enforced by the host kernel. Therefore, a VM cannot read or access the memory or storage of other VMs on the same host.
						</dd><dt><span class="term">QEMU sandboxing</span></dt><dd>
							A feature that prevents QEMU code from executing system calls that can compromise the security of the host.
						</dd><dt><span class="term">Kernel Address Space Randomization (KASLR)</span></dt><dd>
							Enables randomizing the physical and virtual addresses at which the kernel image is decompressed. Thus, KASLR prevents guest security exploits based on the location of kernel objects.
						</dd></dl></div></section><section class="section" id="virtualization-booleans-in-rhel-8_securing-virtual-machines-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">15.5. Virtualization booleans</h2></div></div></div><p>
				For fine-grained configuration of virtual machines security on a RHEL 8 system, you can configure SELinux booleans on the host to ensure the hypervisor acts in a specific way.
			</p><p>
				To list all virtualization-related booleans and their statuses, use the <code class="literal">getsebool -a | grep virt</code> command:
			</p><pre class="literallayout">$ <span class="strong strong"><strong>getsebool -a | grep virt</strong></span>
[...]
virt_sandbox_use_netlink --&gt; off
virt_sandbox_use_sys_admin --&gt; off
virt_transition_userdomain --&gt; off
virt_use_comm --&gt; off
virt_use_execmem --&gt; off
virt_use_fusefs --&gt; off
[...]</pre><p>
				To enable a specific boolean, use the <code class="literal">setsebool -P <span class="emphasis"><em>boolean_name</em></span> on</code> command as root. To disable a boolean, use <code class="literal">setsebool -P <span class="emphasis"><em>boolean_name</em></span> off</code>.
			</p><p>
				The following table lists virtualization-related booleans available in RHEL 8 and what they do when enabled:
			</p><div class="table" id="idm140329467583856"><p class="title"><strong>Table 15.1. SELinux virtualization booleans</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140329467579008" scope="col">SELinux Boolean</th><th align="left" valign="top" id="idm140329467577920" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140329467579008"> <p>
								staff_use_svirt
							</p>
							 </td><td align="left" valign="top" headers="idm140329467577920"> <p>
								Enables non-root users to create and transition VMs to sVirt.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140329467579008"> <p>
								unprivuser_use_svirt
							</p>
							 </td><td align="left" valign="top" headers="idm140329467577920"> <p>
								Enables unprivileged users to create and transition VMs to sVirt.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140329467579008"> <p>
								virt_sandbox_use_audit
							</p>
							 </td><td align="left" valign="top" headers="idm140329467577920"> <p>
								Enables sandbox containers to send audit messages.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140329467579008"> <p>
								virt_sandbox_use_netlink
							</p>
							 </td><td align="left" valign="top" headers="idm140329467577920"> <p>
								Enables sandbox containers to use netlink system calls.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140329467579008"> <p>
								virt_sandbox_use_sys_admin
							</p>
							 </td><td align="left" valign="top" headers="idm140329467577920"> <p>
								Enables sandbox containers to use sys_admin system calls, such as mount.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140329467579008"> <p>
								virt_transition_userdomain
							</p>
							 </td><td align="left" valign="top" headers="idm140329467577920"> <p>
								Enables virtual processes to run as user domains.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140329467579008"> <p>
								virt_use_comm
							</p>
							 </td><td align="left" valign="top" headers="idm140329467577920"> <p>
								Enables virt to use serial/parallel communication ports.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140329467579008"> <p>
								virt_use_execmem
							</p>
							 </td><td align="left" valign="top" headers="idm140329467577920"> <p>
								Enables confined virtual guests to use executable memory and executable stack.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140329467579008"> <p>
								virt_use_fusefs
							</p>
							 </td><td align="left" valign="top" headers="idm140329467577920"> <p>
								Enables virt to read FUSE mounted files.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140329467579008"> <p>
								virt_use_nfs
							</p>
							 </td><td align="left" valign="top" headers="idm140329467577920"> <p>
								Enables virt to manage NFS mounted files.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140329467579008"> <p>
								virt_use_rawip
							</p>
							 </td><td align="left" valign="top" headers="idm140329467577920"> <p>
								Enables virt to interact with rawip sockets.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140329467579008"> <p>
								virt_use_samba
							</p>
							 </td><td align="left" valign="top" headers="idm140329467577920"> <p>
								Enables virt to manage CIFS mounted files.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140329467579008"> <p>
								virt_use_sanlock
							</p>
							 </td><td align="left" valign="top" headers="idm140329467577920"> <p>
								Enables confined virtual guests to interact with the sanlock.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140329467579008"> <p>
								virt_use_usb
							</p>
							 </td><td align="left" valign="top" headers="idm140329467577920"> <p>
								Enables virt to use USB devices.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140329467579008"> <p>
								virt_use_xserver
							</p>
							 </td><td align="left" valign="top" headers="idm140329467577920"> <p>
								Enables virtual machine to interact with the X Window System.
							</p>
							 </td></tr></tbody></table></div></div></section></section><section class="chapter" id="installing-and-managing-windows-virtual-machines-on-rhel8_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Chapter 16. Installing and managing Windows virtual machines</h1></div></div></div><p>
			To use Microsoft Windows as the guest operating system in your virtual machines (VMs) on a RHEL 8 host, Red Hat recommends taking extra steps to ensure these VMs run correctly.
		</p><p>
			For this purpose, the following sections provide information on installing and optimizing Windows VMs on the host, as well as installing and configuring drivers in these VMs.
		</p><section class="section" id="installing-windows-virtual-machines-on-rhel-8_installing-and-managing-windows-virtual-machines-on-rhel8"><div class="titlepage"><div><div><h2 class="title">16.1. Installing Windows virtual machines</h2></div></div></div><p>
				The following provides information on how to create a fully-virtualized Windows machine on a RHEL 8 host, launch the graphical Windows installer inside the virtual machine (VM), and optimize the installed Windows guest operating system (OS).
			</p><p>
				You can create a VM and install it using the <code class="literal command">virt-install</code> command or the RHEL 8 web console.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						A Windows OS installation source, which can be one of the following, and be available locally or on a network:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								An ISO image of an installation medium
							</li><li class="listitem">
								A disk image of an existing VM installation
							</li></ul></div></li><li class="listitem"><p class="simpara">
						A storage medium with the KVM <code class="literal">virtio</code> drivers.
					</p><p class="simpara">
						To create this medium, see <a class="xref" href="index.html#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-8-virtual-machines" title="16.2.1.1. Preparing KVM driver installation media on a host machine">Section 16.2.1.1, “Preparing KVM driver installation media on a host machine”</a>.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the VM. For instructions, see <a class="xref" href="index.html#assembly_creating-virtual-machines_virt-getting-started" title="2.2. Creating virtual machines">Section 2.2, “Creating virtual machines”</a>.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If using the <code class="literal">virt-install</code> utility to create the VM, add the following options to the command:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										The storage medium with the KVM <code class="literal">virtio</code> drivers. For example:
									</p><pre class="literallayout">--disk path=/usr/share/virtio-win/virtio-win.iso,device=disk,bus=virtio</pre></li><li class="listitem"><p class="simpara">
										The Windows version you will install. For example, for Windows 10:
									</p><pre class="literallayout">--os-variant win10</pre><p class="simpara">
										For a list of available Windows versions and the appropriate option, use the following command:
									</p><pre class="literallayout"># <span class="strong strong"><strong>osinfo-query os</strong></span></pre></li></ul></div></li><li class="listitem">
								If using the web console to create the VM, specify your version of Windows in the <code class="literal">Operating System</code> field of the <code class="literal">Create New Virtual Machine</code> window. After the VM is created and the guest OS is installed, attach the storage medium with virtio drivers to the VM using the <code class="literal">Disks</code> interface. For instructions, see <a class="xref" href="index.html#attaching-existing-disks-to-virtual-machines-using-the-rhel-8-web-console_managing-virtual-machine-disks-using-the-rhel-8-web-console" title="5.8.3. Attaching existing disks to virtual machines using the web console">Section 5.8.3, “Attaching existing disks to virtual machines using the web console”</a>.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Install the Windows OS in the VM.
					</p><p class="simpara">
						For information on how to install a Windows operating system, refer to the relevant Microsoft installation documentation.
					</p></li><li class="listitem">
						Configure KVM <code class="literal">virtio</code> drivers in the Windows guest OS. For details, see <a class="xref" href="index.html#installing-kvm-paravirtualized-drivers-for-rhel-8-virtual-machines_optimizing-windows-virtual-machines-on-rhel-8" title="16.2.1. Installing KVM paravirtualized drivers for Windows virtual machines">Section 16.2.1, “Installing KVM paravirtualized drivers for Windows virtual machines”</a>.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For information on further optimizing Windows VMs, see <a class="xref" href="index.html#optimizing-windows-virtual-machines-on-rhel-8_installing-and-managing-windows-virtual-machines-on-rhel8" title="16.2. Optimizing Windows virtual machines">Section 16.2, “Optimizing Windows virtual machines”</a>.
					</li></ul></div></section><section class="section" id="optimizing-windows-virtual-machines-on-rhel-8_installing-and-managing-windows-virtual-machines-on-rhel8"><div class="titlepage"><div><div><h2 class="title">16.2. Optimizing Windows virtual machines</h2></div></div></div><p>
				When using Microsoft Windows as a guest operating system in a virtual machine (VM) hosted in RHEL 8, the performance of the guest may be negatively impacted.
			</p><p>
				Therefore, Red Hat recommends optimizing your Windows VMs by doing the following:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Using paravirtualized drivers. For more information, see <a class="xref" href="index.html#installing-kvm-paravirtualized-drivers-for-rhel-8-virtual-machines_optimizing-windows-virtual-machines-on-rhel-8" title="16.2.1. Installing KVM paravirtualized drivers for Windows virtual machines">Section 16.2.1, “Installing KVM paravirtualized drivers for Windows virtual machines”</a>.
					</li><li class="listitem">
						Enabling Hyper-V enlightenments. For more information, see <a class="xref" href="index.html#enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel-8" title="16.2.2. Enabling Hyper-V enlightenments">Section 16.2.2, “Enabling Hyper-V enlightenments”</a>.
					</li><li class="listitem">
						Configuring NetKVM driver parameters. For more information, see <a class="xref" href="index.html#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-8-virtual-machines" title="16.2.1.1. Preparing KVM driver installation media on a host machine">Section 16.2.1.1, “Preparing KVM driver installation media on a host machine”</a>.
					</li></ul></div><section class="section" id="installing-kvm-paravirtualized-drivers-for-rhel-8-virtual-machines_optimizing-windows-virtual-machines-on-rhel-8"><div class="titlepage"><div><div><h3 class="title">16.2.1. Installing KVM paravirtualized drivers for Windows virtual machines</h3></div></div></div><p>
					Paravirtualized drivers enhance the performance of virtual machines (VMs), decreasing I/O latency and increasing throughput to near bare-metal levels. It is recommended that you use paravirtualized drivers for fully virtualized VMs running I/O heavy tasks and applications.
				</p><p>
					<code class="literal package">virtio</code> drivers are KVM’s paravirtualized device drivers, available for Windows VMs running on KVM hosts. These drivers are included in the <code class="literal package">virtio-win</code> package. The <code class="literal package">virtio-win</code> package supports block (storage) devices, network interface controllers, video controllers, memory ballooning device, paravirtual serial port device, entropy source device, paravirtual panic device, and a small set of emulated devices.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						For additional information about emulated, <code class="literal">virtio</code>, and assigned devices, refer to <a class="xref" href="index.html#managing-virtual-devices_configuring-and-managing-virtualization" title="Chapter 8. Managing virtual devices">Chapter 8, <em>Managing virtual devices</em></a>.
					</p></div></div><p>
					Using KVM virtio drivers, the following Microsoft Windows versions are expected to run similarly to physical systems:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Windows Server versions: See <a class="link" href="https://access.redhat.com/articles/973133">Certified guest operating systems for Red Hat Enterprise Linux with KVM</a> in the Red Hat Knowledgebase
						</li><li class="listitem"><p class="simpara">
							Windows Desktop (non-server) versions:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Windows 7 (32-bit and 64-bit versions)
								</li><li class="listitem">
									Windows 8 (32-bit and 64-bit versions)
								</li><li class="listitem">
									Windows 8.1 (32-bit and 64-bit versions)
								</li><li class="listitem">
									Windows 10 (32-bit and 64-bit versions)
								</li></ul></div></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Network connectivity issues sometimes occur when attempting to use older virtio drivers with more recent versions of QEMU. Therefore, it is recommended to keep the drivers up-to-date.
					</p></div></div><p>
					To install <code class="literal">virtio</code> drivers:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Prepare the install media on the host machine. For more information, see <a class="xref" href="index.html#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-8-virtual-machines" title="16.2.1.1. Preparing KVM driver installation media on a host machine">Section 16.2.1.1, “Preparing KVM driver installation media on a host machine”</a>.
						</li><li class="listitem">
							Attach the install media to an existing Windows VM, or attach it when <a class="link" href="index.html#installing-windows-virtual-machines-on-rhel-8_installing-and-managing-windows-virtual-machines-on-rhel8" title="16.1. Installing Windows virtual machines">creating a new Windows VM</a>.
						</li><li class="listitem">
							Install the <code class="literal">virtio</code> drivers in the Windows guest OS. For more information, see <a class="xref" href="index.html#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-8-virtual-machines" title="16.2.1.2. Installing KVM drivers on a Windows guest">Section 16.2.1.2, “Installing KVM drivers on a Windows guest”</a>.
						</li></ol></div><section class="section" id="installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-8-virtual-machines"><div class="titlepage"><div><div><h4 class="title">16.2.1.1. Preparing KVM driver installation media on a host machine</h4></div></div></div><p>
						The installation media for KVM drivers on a Windows virtual machine must be prepared on the host machine. This is done by installing the <code class="literal package">virtio-win</code> package on the host machine. The installation creates the following types of media that can be used for installing the <code class="literal">virtio</code> drivers on a Windows virtual machine:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								An <code class="literal filename">ISO</code> file that can be accessed using a virtualized CD-ROM device or a USB drive.
							</li><li class="listitem">
								A directory with the driver installation files that can be accessed from the Windows virtual machine using a local or shared network drive.
							</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Ensure that virtualization is <a class="link" href="index.html#enabling-virtualization-in-rhel8_virt-getting-started" title="2.1. Enabling virtualization">enabled</a> in your RHEL 8 host system.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Download the drivers
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Browse to <a class="link" href="https://access.redhat.com/downloads/content/479/ver=/rhel---8/8.1/x86_64/packages">Download Red Hat Enterprise Linux</a>.
									</li><li class="listitem">
										Select the <code class="literal">Product Variant</code> relevant for your system architecture. For example, for Intel 64 and AMD64, select <span class="strong strong"><strong>Red Hat Enterprise Linux for x86_64</strong></span>.
									</li><li class="listitem">
										Ensure the <code class="literal">Version</code> is <span class="strong strong"><strong>8</strong></span>.
									</li><li class="listitem">
										In the <code class="literal">Packages</code>, search for <span class="strong strong"><strong>virtio-win</strong></span>.
									</li><li class="listitem"><p class="simpara">
										Click <code class="literal">Download Latest</code>.
									</p><p class="simpara">
										The <code class="literal">RPM</code> file downloads.
									</p></li></ol></div></li><li class="listitem"><p class="simpara">
								Install the <code class="literal package">virtio-win</code> package from the download directory. For example:
							</p><pre class="literallayout"># <span class="strong strong"><strong>yum install ~/Downloads/virtio-win-1.9.9-3.el8.noarch.rpm</strong></span>
[...]
Installed:
  virtio-win-1.9.9-3.el8.noarch</pre><p class="simpara">
								If the installation succeeds,the <code class="literal">virtio-win</code> driver files are prepared in the <code class="literal">/usr/share/virtio-win/</code> directory. These include <code class="literal">ISO</code> files and a <code class="literal filename">drivers</code> directory with the driver files in directories, one for each architecture and supported Windows version.
							</p><pre class="literallayout"># <span class="strong strong"><strong>ls /usr/share/virtio-win/</strong></span>
drivers/  guest-agent/  virtio-win-1.9.9.iso  virtio-win.iso</pre></li><li class="listitem">
								Use the <code class="literal">virtio-win.iso</code> file as a disk when <a class="link" href="index.html#installing-windows-virtual-machines-on-rhel-8_installing-and-managing-windows-virtual-machines-on-rhel8" title="16.1. Installing Windows virtual machines">creating a new Windows VM</a> or add it as a disk to an existing Windows VM.
							</li></ol></div></section><section class="section" id="installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-8-virtual-machines"><div class="titlepage"><div><div><h4 class="title">16.2.1.2. Installing KVM drivers on a Windows guest</h4></div></div></div><p>
						To install KVM <code class="literal">virtio</code> drivers on a Windows guest operating system (OS), you must add a storage device that contains the drivers - either when creating the virtual machine (VM) or afterwards - and install the drivers in the Windows guest OS.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The installation media for KVM drivers on a Windows virtual machine is prepared on the host machine. For more information, see <a class="xref" href="index.html#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-8-virtual-machines" title="16.2.1.1. Preparing KVM driver installation media on a host machine">Section 16.2.1.1, “Preparing KVM driver installation media on a host machine”</a>.
							</li><li class="listitem"><p class="simpara">
								A storage medium with the KVM <code class="literal">virtio</code> drivers must be attached to the Windows VM.
							</p><p class="simpara">
								If you have not attached this medium when <a class="link" href="index.html#installing-windows-virtual-machines-on-rhel-8_installing-and-managing-windows-virtual-machines-on-rhel8" title="16.1. Installing Windows virtual machines">creating the VM</a> , see <a class="xref" href="index.html#managing-storage-for-virtual-machines_configuring-and-managing-virtualization" title="Chapter 9. Managing storage for virtual machines">Chapter 9, <em>Managing storage for virtual machines</em></a>.
							</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Reboot the Windows VM.
							</li><li class="listitem"><p class="simpara">
								Open the Windows device manager.
							</p><p class="simpara">
								For information on opening Windows Device Manager, refer to the Windows documentation.
							</p></li><li class="listitem"><p class="simpara">
								View the available devices by clicking the arrow to the left of <code class="literal">Other devices</code>.
							</p><div class="informalfigure"><div class="mediaobject"><img src="device_manager_other_devices.png" alt="device manager other devices"/></div></div></li><li class="listitem"><p class="simpara">
								Locate the appropriate device
							</p><p class="simpara">
								There are up to eight devices available: the memory ballooning device, the paravirtual serial port device, the network device, the block device, the SCSI block device, the entropy source device, the emulated PCI serial port device, and the paravirtual panic device. Additionally, the video device is available in the Display adapters group.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">Balloon</code>, the balloon driver, applies to PCI Device in the Other devices group.
									</li><li class="listitem">
										<code class="literal">vioserial</code>, the paravirtual serial driver, applies to PCI Simple Communications Controller in the Other devices group.
									</li><li class="listitem">
										<code class="literal">NetKVM</code>, the network driver, applies to Ethernet Controller in the Other devices group. This driver is only available if a virtio NIC is configured. Configurable parameters for this driver are documented in <a class="xref" href="index.html#netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel-8" title="16.2.4. NetKVM driver parameters">Section 16.2.4, “NetKVM driver parameters”</a>.
									</li><li class="listitem">
										<code class="literal">viostor</code>, the block driver, applies to SCSI Controller in the Other devices group.
									</li><li class="listitem">
										<code class="literal">viocsci</code>, the SCSI block driver, applies to SCSI Controller in the Other devices group.
									</li><li class="listitem">
										<code class="literal">viorng</code>, the entropy source driver, applies to PCI Device in the Other devices group.
									</li><li class="listitem">
										<code class="literal">qemupciserial</code>, the emulated PCI serial driver, applies to PCI Serial Port in the Other devices group.
									</li><li class="listitem">
										<code class="literal">qxl</code>, the paravirtual video driver, applied to Microsoft Basic Display Adapter in the Display adapters group.
									</li><li class="listitem">
										<code class="literal">pvpanic</code>, the paravirtual panic driver, applies to Unknown devices in the Other devices group.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								Right-click the device whose driver you want to update, and select <code class="literal menu">Update Driver Software</code> from the pop-up menu.
							</p><div class="informalfigure"><div class="mediaobject"><img src="device_manager_update_device_menu.png" alt="device manager update device menu"/></div></div><p class="simpara">
								The Update Driver Software wizard starts.
							</p><div class="informalfigure"><div class="mediaobject"><img src="device_manager_sw_update_wizard_page_1.png" alt="device manager sw update wizard page 1"/></div></div><p class="simpara">
								The first page of the driver update wizard asks how you want to search for driver software.
							</p></li><li class="listitem">
								Click <code class="literal btn">Browse my computer for driver software</code>.
							</li><li class="listitem"><p class="simpara">
								Click <code class="literal btn">Browse</code>.
							</p><p class="simpara">
								A file browser opens.
							</p></li><li class="listitem"><p class="simpara">
								Browse to the location of the driver.
							</p><p class="simpara">
								A separate driver is provided for each combination of operating systems and architectures. The drivers are arranged hierarchically according to their driver type, the operating system, and the architecture on which they will be installed: <code class="literal filename">driver_type/os/arch/</code>.
							</p><p class="simpara">
								For example, the Balloon driver for a Windows 10 operating system with an x86 (32-bit) architecture, resides in the <code class="literal filename">Balloon/w10/x86</code> directory.
							</p><p class="simpara">
								Once you have navigated to the correct location, click <code class="literal btn">OK</code>.
							</p></li><li class="listitem"><p class="simpara">
								Click <code class="literal btn">Next</code>.
							</p><p class="simpara">
								The following screen is displayed while the driver installs:
							</p><div class="informalfigure"><div class="mediaobject"><img src="device_manager_sw_update_wizard_page_2.png" alt="device manager sw update wizard page 2"/></div></div><p class="simpara">
								When the installation is complete, the following screen is displayed:
							</p><div class="informalfigure"><div class="mediaobject"><img src="device_manager_sw_update_wizard_page_3.png" alt="device manager sw update wizard page 3"/></div></div></li><li class="listitem">
								Click <code class="literal btn">Close</code>.
							</li><li class="listitem">
								Reboot the VM to complete the driver installation.
							</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							After the driver for a device is successfully installed, the device no longer appears in the <code class="literal">Other devices</code> group. Find the device in one of the following groups:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Multifunction adapters group - 1x QEMU PCI Serial Card
								</li><li class="listitem">
									Network adapters group - Red Hat VirtIO Ethernet Adapter
								</li><li class="listitem">
									Storage controllers group - Red Hat VirtIO SCSI controller and Red Hat VirtIO SCSI pass-through controller
								</li><li class="listitem">
									System devices group - QEMU PVPanic Device, VirtIO Balloon Driver, VirtIO RNG Device, and VirtIO Serial Driver
								</li></ul></div></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								If you install the NetKVM driver, additional configuration of the Windows guest’s networking parameters may be needed. For instructions, see <a class="xref" href="index.html#configuring-netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel-8" title="16.2.3. Configuring NetKVM driver parameters">Section 16.2.3, “Configuring NetKVM driver parameters”</a>.
							</li></ul></div></section></section><section class="section" id="enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel-8"><div class="titlepage"><div><div><h3 class="title">16.2.2. Enabling Hyper-V enlightenments</h3></div></div></div><p>
					Hyper-V enlightenments provide a method for KVM to emulate the Microsoft Hyper-V hypervisor. This improves the performance of Windows virtual machines.
				</p><p>
					The following sections provide information about the supported Hyper-V enlightenments and how to enable them.
				</p><section class="section" id="enabling-hyper-v-enlightenments-on-a-windows-virtual-machine-in-rhel-8_enabling-hyper-v-enlightenments"><div class="titlepage"><div><div><h4 class="title">16.2.2.1. Enabling Hyper-V enlightenments on a Windows virtual machine</h4></div></div></div><p>
						Hyper-V enlightenments provide better performance in a Windows virtual machine (VM) running in a RHEL 8 host. For instructions on how to enable them, see the following.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Edit the XML configuration of the VM, adding the Hyper-V enlightenments. In the following commands, replace <span class="emphasis"><em>$VMNAME</em></span> with the name of the Windows VM.
							</p><pre class="literallayout"># <span class="strong strong"><strong>virt-xml <span class="emphasis"><em>$VMNAME</em></span> --edit --features hyperv_relaxed=on,hyperv_vapic=on,hyperv_spinlocks=on,hyperv_spinlocks_retries=8191,hyperv_vpindex=on,hyperv_runtime=on,hyperv_synic=on,hyperv_stimer=on,hyperv_frequencies=on</strong></span>

# <span class="strong strong"><strong>virt-xml <span class="emphasis"><em>$VMNAME</em></span> --edit --clock hypervclock_present=yes</strong></span></pre></li><li class="listitem">
								Restart the VM
							</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Use the <code class="literal">virsh dumpxml</code> command to display the XML configuration of the modified VM. If it includes the following segments, the Hyper-V enlightenments are enabled on the VM.
							</p><pre class="programlisting language-xml">&lt;hyperv&gt;
  &lt;relaxed state='on'/&gt;
  &lt;vapic state='on'/&gt;
  &lt;spinlocks state='on' retries='8191'/&gt;
  &lt;vpindex state='on'/&gt;
  &lt;runtime state='on' /&gt;
  &lt;synic state='on'/&gt;
  &lt;stimer state='on'/&gt;
  &lt;frequencies state='on'/&gt;
&lt;/hyperv&gt;

&lt;clock offset='localtime'&gt;
  &lt;timer name='hypervclock' present='yes'/&gt;
&lt;/clock&gt;</pre></li></ul></div></section><section class="section" id="supported-hyper-v-enlightenments_enabling-hyper-v-enlightenments"><div class="titlepage"><div><div><h4 class="title">16.2.2.2. Supported Hyper-V enlightenments</h4></div></div></div><p>
						The following is a list of Hyper-V enlightenments with a description of the functionality of each enlightenment:
					</p><div class="variablelist"><p class="title"><strong>Hyper-V enlightenments</strong></p><dl class="variablelist"><dt><span class="term">clock</span></dt><dd>
									Defines the virtual time source and offset to use with the Windows virtual machine.
								</dd><dt><span class="term">frequencies</span></dt><dd>
									Enables Hyper-V frequency Machine Specific Registers (MSRs).
								</dd><dt><span class="term">relaxed</span></dt><dd>
									Disables a Windows sanity check that commonly results in a BSOD when the VM is running on a heavily loaded host. This is similar to the Linux kernel option <code class="literal"><span class="emphasis"><em>no_timer_check</em></span></code>, which is automatically enabled when Linux is running on KVM.
								</dd><dt><span class="term">runtime</span></dt><dd>
									Specifies the virtual processor’s run time.
								</dd><dt><span class="term">spinlock</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											Used by a virtual machine’s operating system to notify the hypervisor that the calling virtual processor is attempting to acquire a resource that is potentially held by another virtual processor within the same partition.
										</li><li class="listitem">
											Used by the hypervisor to indicate to the virtual machine’s operating system the number of times a spinlock acquisition should be attempted before indicating an excessive spin situation to the hypervisor.
										</li></ul></div></dd><dt><span class="term">synic</span></dt><dd>
									Together with <code class="literal">stimer</code>, activates the synthetic timer. Windows 8 uses this feature in periodic mode.
								</dd><dt><span class="term">vapic</span></dt><dd>
									Provides accelerated MSR access to the high-usage, memory-mapped Advanced Programmable Interrupt Controller (APIC) registers.
								</dd><dt><span class="term">vpindex</span></dt><dd>
									Specifies the virtual processor’s index.
								</dd></dl></div></section></section><section class="section" id="configuring-netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel-8"><div class="titlepage"><div><div><h3 class="title">16.2.3. Configuring NetKVM driver parameters</h3></div></div></div><p>
					After the NetKVM driver is installed, you can configure it to better suit your environment. The parameters listed in this section can be configured using the Windows Device Manager (devmgmt.msc).
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Modifying the driver’s parameters causes Windows to reload that driver. This interrupts existing network activity.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The NetKVM driver is installed on the virtual machine.
						</p><p class="simpara">
							For more information, see <a class="xref" href="index.html#installing-kvm-paravirtualized-drivers-for-rhel-8-virtual-machines_optimizing-windows-virtual-machines-on-rhel-8" title="16.2.1. Installing KVM paravirtualized drivers for Windows virtual machines">Section 16.2.1, “Installing KVM paravirtualized drivers for Windows virtual machines”</a>.
						</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Open Windows Device Manager.
						</p><p class="simpara">
							For information on opening Device Manager, refer to the Windows documentation.
						</p></li><li class="listitem"><p class="simpara">
							Locate the Red Hat VirtIO Ethernet Adapter.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									In the Device Manager window, click <span class="strong strong"><strong>+</strong></span> next to Network adapters.
								</li><li class="listitem">
									Under the list of network adapters, double-click <span class="strong strong"><strong>Red Hat VirtIO Ethernet Adapter</strong></span>. The Properties window for the device opens.
								</li></ol></div></li><li class="listitem"><p class="simpara">
							View the device parameters.
						</p><p class="simpara">
							In the Properties window, click the <span class="strong strong"><strong>Advanced</strong></span> tab.
						</p></li><li class="listitem"><p class="simpara">
							Modify the device parameters.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Click the parameter you want to modify. Options for that parameter are displayed.
								</li><li class="listitem"><p class="simpara">
									Modify the options as needed.
								</p><p class="simpara">
									For information on the NetKVM parameter options, refer to <a class="xref" href="index.html#netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel-8" title="16.2.4. NetKVM driver parameters">Section 16.2.4, “NetKVM driver parameters”</a>.
								</p></li><li class="listitem">
									Click <span class="strong strong"><strong>OK</strong></span> to save the changes.
								</li></ol></div></li></ol></div></section><section class="section" id="netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel-8"><div class="titlepage"><div><div><h3 class="title">16.2.4. NetKVM driver parameters</h3></div></div></div><p>
					The following table provides information on the configurable NetKVM driver logging parameters.
				</p><div class="table" id="idm140329468497984"><p class="title"><strong>Table 16.1. Logging parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140329468493152" scope="col">Parameter</th><th align="left" valign="top" id="idm140329468492064" scope="col">Description 2</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140329468493152"> <p>
									Logging.Enable
								</p>
								 </td><td align="left" valign="top" headers="idm140329468492064"> <p>
									A Boolean value that determines whether logging is enabled. The default value is Enabled.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140329468493152"> <p>
									Logging.Level
								</p>
								 </td><td align="left" valign="top" headers="idm140329468492064"> <p>
									An integer that defines the logging level. As the integer increases, so does the verbosity of the log.
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											The default value is 0 (errors only).
										</li><li class="listitem">
											1-2 adds configuration messages.
										</li><li class="listitem">
											3-4 adds packet flow information.
										</li><li class="listitem">
											5-6 adds interrupt and DPC level trace information.
										</li></ul></div>
								 <div class="admonition note"><div class="admonition_header">Note</div><div><p>
										High logging levels will slow down your virtual machine.
									</p></div></div>
								 </td></tr></tbody></table></div></div><p>
					The following table provides information on the configurable NetKVM driver initial parameters.
				</p><div class="table" id="idm140329465845712"><p class="title"><strong>Table 16.2. Initial parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140329465840880" scope="col">Parameter</th><th align="left" valign="top" id="idm140329465839792" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140329465840880"> <p>
									Assign MAC
								</p>
								 </td><td align="left" valign="top" headers="idm140329465839792"> <p>
									A string that defines the locally-administered MAC address for the paravirtualized NIC. This is not set by default.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140329465840880"> <p>
									Init.ConnectionRate(Mb)
								</p>
								 </td><td align="left" valign="top" headers="idm140329465839792"> <p>
									An integer that represents the connection rate in megabits per second. The default value for Windows 2008 and later is 10G (10,000 megabits per second).
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140329465840880"> <p>
									Init.Do802.1PQ
								</p>
								 </td><td align="left" valign="top" headers="idm140329465839792"> <p>
									A Boolean value that enables Priority/VLAN tag population and removal support. The default value is Enabled.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140329465840880"> <p>
									Init.MTUSize
								</p>
								 </td><td align="left" valign="top" headers="idm140329465839792"> <p>
									An integer that defines the maximum transmission unit (MTU). The default value is 1500. Any value from 500 to 65500 is acceptable.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140329465840880"> <p>
									Init.MaxTxBuffers
								</p>
								 </td><td align="left" valign="top" headers="idm140329465839792"> <p>
									An integer that represents the number of TX ring descriptors that will be allocated.
								</p>
								 <p>
									The default value is 1024.
								</p>
								 <p>
									Valid values are: 16, 32, 64, 128, 256, 512, and 1024.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140329465840880"> <p>
									Init.MaxRxBuffers
								</p>
								 </td><td align="left" valign="top" headers="idm140329465839792"> <p>
									An integer that represents the number of RX ring descriptors that will be allocated.
								</p>
								 <p>
									The default value is 256.
								</p>
								 <p>
									Valid values are: 16, 32, 64, 128, 256, 512, and 1024.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140329465840880"> <p>
									Offload.Tx.Checksum
								</p>
								 </td><td align="left" valign="top" headers="idm140329465839792"> <p>
									Specifies the TX checksum offloading mode.
								</p>
								 <p>
									In Red Hat Enterprise Linux 8, the valid values for this parameter are:
								</p>
								 <p>
									* All (the default) which enables IP, TCP, and UDP checksum offloading for both IPv4 and IPv6
								</p>
								 <p>
									* TCP/UDP(v4,v6) which enables TCP and UDP checksum offloading for both IPv4 and IPv6
								</p>
								 <p>
									* TCP/UDP(v4) which enables TCP and UDP checksum offloading for IPv4 only
								</p>
								 <p>
									* TCP(v4) which enables only TCP checksum offloading for IPv4 only
								</p>
								 </td></tr></tbody></table></div></div></section></section><section class="section" id="related-information-installing-and-managing-windows-virtual-machines-on-rhel8"><div class="titlepage"><div><div><h2 class="title">16.3. Related information</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To use utilities for accessing, editing, and creating virtual machine disks or other disk images for a Windows VM, you must install the <code class="literal package">libguestfs-tools</code> and <code class="literal package">libguestfs-winsupport</code> packages on the host machine.
					</p><pre class="literallayout">$ <span class="strong strong"><strong>sudo yum install libguestfs-tools libguestfs-winsupport</strong></span></pre></li></ul></div></section></section><section class="chapter" id="feature-support-and-limitations-in-rhel8-virtualization_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h1 class="title">Chapter 17. Feature support and limitations in RHEL 8 virtualization</h1></div></div></div><p>
			This document provides information on feature support and restrictions in Red Hat Enterprise Linux 8 (RHEL 8) virtualization.
		</p><section class="section" id="how-rhel8-virtualization-support-works_feature-support-and-limitations-in-rhel8-virtualization"><div class="titlepage"><div><div><h2 class="title">17.1. How RHEL 8 virtualization support works</h2></div></div></div><p>
				A set of support limitations applies to virtualization in Red Hat Enterprise Linux 8 (RHEL 8). This means that when you use certain features or exceed a certain amount of allocated resources when using virtual machines in RHEL 8, Red Hat will not support these guests unless you have a specific subscription plan.
			</p><p>
				Features listed in <a class="xref" href="index.html#recommended-features-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization" title="17.2. Recommended features in RHEL 8 virtualization">Section 17.2, “Recommended features in RHEL 8 virtualization”</a> have been tested and certified by Red Hat to work with the KVM hypervisor on a RHEL 8 system. Therefore, they are fully supported and recommended for use in virtualization in RHEL 8.
			</p><p>
				Features listed in <a class="xref" href="index.html#unsupported-features-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization" title="17.3. Unsupported features in RHEL 8 virtualization">Section 17.3, “Unsupported features in RHEL 8 virtualization”</a> may work, but are not supported and not intended for use in RHEL 8. Therefore, Red Hat strongly recommends not using these features in RHEL 8 with KVM.
			</p><p>
				<a class="xref" href="index.html#resource-allocation-limits-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization" title="17.4. Resource allocation limits in RHEL 8 virtualization">Section 17.4, “Resource allocation limits in RHEL 8 virtualization”</a> lists the maximum amount of specific resources supported on a KVM guest in RHEL 8. Guests that exceed these limits are not supported by Red Hat.
			</p><p>
				In addition, unless stated otherwise, all features and solutions used by the documentation for RHEL 8 virtualization are supported. However, some of these have not been completely tested and therefore may not be fully optimized.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Many of these limitations do not apply to other virtualization solutions provided by Red Hat, such as Red Hat Virtualization (RHV) or Red Hat OpenStack Platform (RHOSP).
				</p></div></div></section><section class="section" id="recommended-features-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization"><div class="titlepage"><div><div><h2 class="title">17.2. Recommended features in RHEL 8 virtualization</h2></div></div></div><p>
				The following features are recommended for use with the KVM hypervisor included with Red Hat Enterprise Linux 8 (RHEL 8):
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Host system architectures</strong></span>
					</p><p class="simpara">
						Red Hat Enterprise Linux with KVM is supported only on the following host architectures:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								AMD64 and Intel 64
							</li><li class="listitem">
								IBM Z - IBM z13 systems and later
							</li><li class="listitem">
								IBM POWER8
							</li><li class="listitem"><p class="simpara">
								IBM POWER9
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									RHEL 8 documentation primarily describes AMD64 and Intel 64 features and usage. For information about the specific of using RHEL 8 virtualization on different architectures, see:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
											<a class="xref" href="index.html#getting-started-with-virtualization-in-rhel-8-on-ibm-power_configuring-and-managing-virtualization" title="Chapter 3. Getting started with virtualization on IBM POWER">Chapter 3, <em>Getting started with virtualization on IBM POWER</em></a>
										</li><li class="listitem">
											<a class="xref" href="index.html#getting-started-with-virtualization-in-rhel-8-on-ibm-z_configuring-and-managing-virtualization" title="Chapter 4. Getting started with virtualization on IBM Z">Chapter 4, <em>Getting started with virtualization on IBM Z</em></a>.
										</li></ul></div></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Guest operating systems</strong></span>
					</p><p class="simpara">
						Red Hat supports KVM virtual machines that use the following operating systems:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Red Hat Enterprise Linux 6 and later
							</li><li class="listitem">
								Microsoft Windows 10 and later
							</li><li class="listitem">
								Microsoft Windows Server 2016 and later
							</li></ul></div></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Q35 guests</strong></span>
					</p><p class="simpara">
						The recommended machine type for KVM virtual machines is QEMU Q35, which emulates the ICH9 chipset.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For information about unsupported guest OS types and features in RHEL 8 virtualization, see <a class="xref" href="index.html#unsupported-features-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization" title="17.3. Unsupported features in RHEL 8 virtualization">Section 17.3, “Unsupported features in RHEL 8 virtualization”</a>.
					</li><li class="listitem">
						For information about the maximum supported amounts of resources that can be allocated to a virtual machine, see <a class="xref" href="index.html#resource-allocation-limits-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization" title="17.4. Resource allocation limits in RHEL 8 virtualization">Section 17.4, “Resource allocation limits in RHEL 8 virtualization”</a>.
					</li></ul></div></section><section class="section" id="unsupported-features-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization"><div class="titlepage"><div><div><h2 class="title">17.3. Unsupported features in RHEL 8 virtualization</h2></div></div></div><p>
				The following features are not supported by the KVM hypervisor included with Red Hat Enterprise Linux 8 (RHEL 8):
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Many of these limitations do not apply to other virtualization solutions provided by Red Hat, such as Red Hat Virtualization (RHV) or Red Hat OpenStack Platform (RHOSP).
				</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Guest operating systems</strong></span>
					</p><p class="simpara">
						KVM virtual machines (VMs) using the following guest operating systems on a RHEL 8 host are not supported:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Microsoft Windows 8.1 and earlier
							</li><li class="listitem">
								Microsoft Windows Server 2012 and earlier
							</li><li class="listitem">
								macOS
							</li><li class="listitem">
								Solaris for x86 systems
							</li><li class="listitem">
								Any OS released prior to 2009
							</li></ul></div></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>vCPU hot unplug</strong></span>
					</p><p class="simpara">
						Removing a virtual CPU (vCPU) from a running VM, also referred to as a vCPU hot unplug, is not supported in RHEL 8.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Memory hot unplug</strong></span>
					</p><p class="simpara">
						Decreasing the memory limit allocated to a running VM, also referred to as a memory hot unplug, is unsupported in RHEL 8.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>I/O throttling</strong></span>
					</p><p class="simpara">
						Configuring maximum input and output levels for operations on virtual disk, also known as I/O throttling, is not supported in RHEL 8.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Storage live migration</strong></span>
					</p><p class="simpara">
						Migrating a disk image of a running VM between hosts is not supported in RHEL 8.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Live snapshots</strong></span>
					</p><p class="simpara">
						Creating or loading a snapshot of a running VM, also referred to as a live snapshot, is not supported in RHEL 8.
					</p><p class="simpara">
						In addition, note that non-live VM snapshots are deprecated in RHEL 8. Therefore, creating or loading a snapshot of a shut-down VM is supported, but Red Hat recommends not using it.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Vhost-user</strong></span>
					</p><p class="simpara">
						RHEL 8 does not support the implementation of a user-space vHost interface.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>S3 and S4 system power states</strong></span>
					</p><p class="simpara">
						Suspending a VM to the <span class="strong strong"><strong>Suspend to RAM</strong></span> (S3) or <span class="strong strong"><strong>Suspend to disk</strong></span> (S4) system power states is not supported. Note that these features are disabled by default, and enabling them will make your VM not supportable by Red Hat.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>S3-PR on a multipathed vDisk</strong></span>
					</p><p class="simpara">
						SCSI3 persistent reservation (S3-PR) on a multipathed vDisk is not supported in RHEL 8. As a consequence, Windows Cluster is not supported in RHEL 8. In case you need Windows Cluster support, use Red Hat Virtualization (RHV) instead.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>virtio-crypto</strong></span>
					</p><p class="simpara">
						The drivers for the <span class="emphasis"><em>virtio-crypto</em></span> device are available in the RHEL 8 kernel, and the device can thus be enabled on a KVM hypervisor under certain circumstances. However, using the <span class="emphasis"><em>virtio-crypto</em></span> device in RHEL 8 is not supported and its use is therefore highly discouraged.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For information about supported guest OS types and recommended features in RHEL 8 virtualization, see <a class="xref" href="index.html#recommended-features-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization" title="17.2. Recommended features in RHEL 8 virtualization">Section 17.2, “Recommended features in RHEL 8 virtualization”</a>.
					</li><li class="listitem">
						For information about the maximum supported amounts of resources that can be allocated to a VM, see <a class="xref" href="index.html#resource-allocation-limits-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization" title="17.4. Resource allocation limits in RHEL 8 virtualization">Section 17.4, “Resource allocation limits in RHEL 8 virtualization”</a>.
					</li></ul></div></section><section class="section" id="resource-allocation-limits-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization"><div class="titlepage"><div><div><h2 class="title">17.4. Resource allocation limits in RHEL 8 virtualization</h2></div></div></div><p>
				The following limits apply to virtualized resources that can be allocated to a single KVM virtual machine (VM) on a Red Hat Enterprise Linux 8 (RHEL 8) host.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Many of these limitations do not apply to other virtualization solutions provided by Red Hat, such as Red Hat Virtualization (RHV) or Red Hat OpenStack Platform (RHOSP).
				</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Maximum VMs per host</strong></span>
					</p><p class="simpara">
						A single RHEL 8 host supports up to <span class="strong strong"><strong>4</strong></span> VMs running at the same time.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Maximum vCPUs per VM</strong></span>
					</p><p class="simpara">
						RHEL 8 supports up to <span class="strong strong"><strong>384</strong></span> vCPUs allocated to a single VM.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>PCI devices per VM</strong></span>
					</p><p class="simpara">
						RHEL 8 supports <span class="strong strong"><strong>32</strong></span> PCI device slots per VM bus, and <span class="strong strong"><strong>8</strong></span> PCI functions per device slot. This gives a theoretical maximum of 256 PCI functions per bus when multi-function capabilities are enabled in the VM, and no PCI bridges are used.
					</p><p class="simpara">
						Each PCI bridge adds a new bus, potentially enabling another 256 device addresses. However, some buses do not make all 256 device addresses available for the user; for example, the root bus has several built-in devices occupying slots.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Virtualized IDE devices</strong></span>
					</p><p class="simpara">
						KVM is limited to a maximum of <span class="strong strong"><strong>4</strong></span> virtualized IDE devices per VM.
					</p></li></ul></div></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140329484785824"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2020 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div>
  
  </div>
  </div>
</div>
<div id="comments-footer" class="book-comments">
  </div>
<meta itemscope="" itemref="md1">

    <!-- Display: Next/Previous Nav -->
          
      </div>
</article>


  

            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto" href="index.html#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path
                      class="rh-logo-hat"
                      d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                      <path class="rh-logo-band"
                      d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                      <path
                      class="rh-logo-type"
                      d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                  </svg>
                </a>
              </div>

            <div role="navigation">
                <h3>Quick Links</h3>
                <ul>
                    <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li><a class="manage-subscriptions" href="https://access.redhat.com/management/subscriptions/#active">Subscriptions</a></li>
                    <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                    <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                    <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Help</h3>
                <ul>
                    <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                    <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                    <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Site Info</h3>
                <ul>
                  <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                  <li><a class="browser-support-policy" href="https://access.redhat.com/help/browsers/">Browser Support Policy</a></li>
                  <li><a class="accessibility" href="https://access.redhat.com/help/accessibility/">Accessibility</a></li>
                  <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                  <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Related Sites</h3>
                <ul>
                    <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                    <li><a href="https://www.openshift.com" class="openshift-com">openshift.com</a></li>
                    <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                    <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>About</h3>
                <ul>
                    <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                    <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                    <li><a href="http://jobs.redhat.com" class="about-jobs">Red Hat Jobs</a></li>
                </ul>
            </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a hidden href="https://status.redhat.com" class="status-page-widget">
                          <span class="status-description"></span>
                          <span class="status-dot shape-circle"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2020 Red Hat, Inc.</div>

                        <div role="navigation" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://access.redhat.com/help/terms/" class="terms-of-use">Customer Portal Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                      <img src="l_summit.png" alt="Red Hat Summit" />
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHatSupport" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>
                        <a href="https://www.facebook.com/RedHatSupport" class="sm-icon facebook"><span class="nicon-facebook"></span><span class="offscreen">Facebook</span></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--googleon: all-->
</div>
  
  <div id="formatHelp" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="formatTitle" aria-hidden="true"><div class="modal-dialog"><div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="formatTitle">Formatting Tips</h3>
    </div>
    <div class="modal-body">
      <p>Here are the common uses of Markdown.</p><dl class="formatting-help">
        <dt class="codeblock">Code blocks</dt><dd class="codeblock"><pre><code>~~~
Code surrounded in tildes is easier to read
~~~</code></pre></dd>
        <dt class="urls">Links/URLs</dt><dd class="urls"><code>[Red Hat Customer Portal](https://access.redhat.com)</code></dd>
       </dl>
    </div>
    <div class="modal-footer">
      <a target="_blank" href="https://access.redhat.com/help/markdown" class="btn btn-primary">Learn more</a>
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
  </div></div></div></body>
</html>
