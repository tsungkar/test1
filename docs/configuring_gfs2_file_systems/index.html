<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/ dc: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/ og: http://ogp.me/ns# rdfs: http://www.w3.org/2000/01/rdf-schema# sioc: http://rdfs.org/sioc/ns# sioct: http://rdfs.org/sioc/types# skos: http://www.w3.org/2004/02/skos/core# xsd: http://www.w3.org/2001/XMLSchema# article: http://ogp.me/ns/article# book: http://ogp.me/ns/book# profile: http://ogp.me/ns/profile# video: http://ogp.me/ns/video#" >

<head profile="http://www.w3.org/1999/xhtml/vocab">
	  <!--[if IE]><![endif]-->
<meta charset="utf-8" />
<meta name="revision" title="e7219af3-daeb-4bae-a04a-a95f7a7f1a61" product="f321f43a-4a79-48fe-8aae-117b9d973ec0" revision="5799eb11dbd4a5aa14514db33ab5d75830f0e5c9:en-us" page="a4f6cf99-72be-4300-9ec8-aedde63bb7ba" />
<meta name="generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_gfs2_file_systems/index" />
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_gfs2_file_systems/index" />
<meta property="og:site_name" content="Red Hat Customer Portal" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_gfs2_file_systems/index" />
<meta property="og:title" content="Configuring GFS2 file systems Red Hat Enterprise Linux 8 | Red Hat Customer Portal" />
<meta property="og:description" content="This guide provides information about configuring and managing GFS2 file systems for Red Hat Enterprise Linux 8." />
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_gfs2_file_systems/index" />
<meta name="twitter:title" content="Configuring GFS2 file systems Red Hat Enterprise Linux 8 | Red Hat Customer Portal" />
<meta name="twitter:description" content="This guide provides information about configuring and managing GFS2 file systems for Red Hat Enterprise Linux 8." />
<meta name="twitter:image:src" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
  <title>Configuring GFS2 file systems Red Hat Enterprise Linux 8 | Red Hat Customer Portal</title>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="kcs06.web.prod.ext.phx2.redhat.com" />
<meta name="avalon-version" content="2070d6b" />
<meta name="cp-chrome-build-date" content="2020-03-09T20:28:54.189Z" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml" />

 

<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en",  
        version   : "2070d6b",
        builddate : "2020-03-09T20:28:54.189Z",
        fetchdate : "2020-03-11T07:53:05-0400",
        nrid      : "14615289",
        nrlk      : "2a497fa56f"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="favicon.ico" />

<link media="all" rel="stylesheet" type="text/css" href="bootstrap.css%3Fv=2070d6b.css" />
<link media="all" rel="stylesheet" type="text/css" href="main.css%3Fv=2070d6b.css" />
<link media="all" rel="stylesheet" type="text/css" href="components.css%3Fv=2070d6b.css" />
<link media="all" rel="stylesheet" type="text/css" href="pages.css%3Fv=2070d6b.css" />

<link href="chosen.css%3Fv=2070d6b.css" rel="stylesheet" type="text/css" />

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]-->

<noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>

<!-- /cssInclude -->
<script type="text/javascript" src="require.js%3Fv=2070d6b" data-main="/webassets/avalon/j/"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->
  <link type="text/css" rel="stylesheet" href="css__c2Nkkx_5vYh8rvZbfBAGB4EMzMtH5ouFJDBlDsnhSR8__-ax0_8bam15ZDJT9j7LilCfJrDyEhGGAgc0KC8HYvJg__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__Jy3BSr8TrxptaufAzQDT1skBUlX2CnL_wm6BizzYuGw__-YZvqB8yuA4kK_iKklbk5HdZCoG2qAgz1l-8Qi2NFH4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="messages.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__m76iIFREtc70Nmw5xe1ZwHbNBlwOP2Zjc3DcacNWnFQ__STEh8aY3w8E_bKzhB4Xke2WOQ9XMDQquHIP5B8SeDIY__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__4sM4s6XOQ2Nm0pdkrWRLvrgtwpTmHAFzR_LcdesKYj8__vJ0jjVEhoPh3KBeLZfkqg51T3AFxhQCuXg1reipa__k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="print" />
  <link rel="stylesheet" type="text/css" media="all" href="list.css" />
  <script src="js__1YIht1y1Jlm9D0PyxEuhS3DlWdYAlEsNpsFDOaUsfRw__ZnC7278ZsqBG-1FOUqflDl8B3Y1kLiAWXAIkoLrHbYg__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__5ysXPc5KIyMmizxqRY68ILfrEGrj0P29WBIifnPTJvQ__Cap0DACEVMsefumg1gS1APLLd8stDkdGfp6c1uswMo4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>chrometwo_require(["analytics/attributes"], function(attributes) {
attributes.set('ResourceID',       'e7219af3-daeb-4bae-a04a-a95f7a7f1a61');
attributes.set('ResourceTitle',    'Configuring GFS2 file systems');
attributes.set('Language',         'en-us');
attributes.set('RevisionId',       '5799eb11dbd4a5aa14514db33ab5d75830f0e5c9:en-us');
attributes.set('PublicationState', ['active','published']);
attributes.set('Product',          'Red Hat Enterprise Linux');
attributes.set('ProductVersion',   '8');
attributes.set('ProductId',        'Red Hat Enterprise Linux 8');
});</script>
<script>breadcrumbs = [ ["Products &amp; Services", "/products/"], ["Product Documentation", "/documentation/"], ["Red Hat Enterprise Linux", "/documentation/en-us/red_hat_enterprise_linux/"], ["8", "/documentation/en-us/red_hat_enterprise_linux/8/"], ["Configuring GFS2 file systems", "/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_gfs2_file_systems/"] ];</script>
<script>window.siteMapState = "products";</script>
<script src="js__i6ieGBO-OPmIKm_f0srsb6gM7QELIWrBpKh6ub_yj8A__wjRg_duSK4rEZCRV2uwrCIPMl80Z_LJ9ew61H5hE-ZI__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__vGeEtorfXGI3aPAp71YA74N5p8wfpYVhnoIqwaJrOiQ__veGxEiPQW6fkzAPZnAFA23SFz1CyJy2dlu6x8XuHM4s__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"kcs","theme_token":"N18_VjuqSX5OdnvZ1d4uv0XTsQtq_9-wUyXQTx48ND0","js":{"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.jquery.min.js":1,"modules\/chosen\/chosen.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/prism.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/underscore.js":1,"sites\/all\/themes\/kcs\/js\/kcs_base.js":1,"sites\/all\/themes\/kcs\/js\/showdown.js":1,"sites\/all\/themes\/kcs\/js\/case_links.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"modules\/date\/date_api\/date.css":1,"modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/contrib\/user_prune\/css\/user_prune.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/contrib\/panels\/css\/panels.css":1,"sites\/all\/modules\/custom\/rate\/rate.css":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/plugins\/layouts\/docs_page\/docs_page.css":1,"https:\/\/access.redhat.com\/webassets\/avalon\/s\/messages.css":1,"sites\/all\/themes\/zen\/system.base.css":1,"sites\/all\/themes\/zen\/system.menus.css":1,"sites\/all\/themes\/zen\/system.messages.css":1,"sites\/all\/themes\/zen\/system.theme.css":1,"sites\/all\/themes\/zen\/comment.css":1,"sites\/all\/themes\/zen\/node.css":1,"sites\/all\/themes\/kcs\/css\/html-reset.css":1,"sites\/all\/themes\/kcs\/css\/wireframes.css":1,"sites\/all\/themes\/kcs\/css\/layout-fixed.css":1,"sites\/all\/themes\/kcs\/css\/page-backgrounds.css":1,"sites\/all\/themes\/kcs\/css\/tabs.css":1,"sites\/all\/themes\/kcs\/css\/pages.css":1,"sites\/all\/themes\/kcs\/css\/blocks.css":1,"sites\/all\/themes\/kcs\/css\/navigation.css":1,"sites\/all\/themes\/kcs\/css\/views-styles.css":1,"sites\/all\/themes\/kcs\/css\/nodes.css":1,"sites\/all\/themes\/kcs\/css\/comments.css":1,"sites\/all\/themes\/kcs\/css\/forms.css":1,"sites\/all\/themes\/kcs\/css\/fields.css":1,"sites\/all\/themes\/kcs\/css\/kcs.css":1,"sites\/all\/themes\/kcs\/css\/print.css":1}},"chosen":{"selector":"#edit-field-kcs-component-select-und, #edit-field-kcs-sbr-select-und, #edit-field-kcs-product-select-und, #edit-field-kcs-type-select-und, #edit-language, #edit-field-kcs-a-category-select-und, #edit-field-kcs-state-select-und, #edit-field-kcs-tags-select-und, #edit-field-kcs-state-select-value, #edit-field-vid-reference-product-und, #edit-state, #edit-product, #edit-category, #edit-field-kcs-product-select-tid, #edit-field-kcs-type-select-tid, #edit-field-kcs-a-category-select-tid, #edit-sort-bef-combine, #edit-kcs-state, #edit-field-category-tid, #edit-field-product-tid, #edit-field-tags-tid, #edit-field-category-und, #edit-field-product-und, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-category, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-product, #views-exposed-form-questions-list-questions-filter-block #edit-field-tags, #edit-field-mega-menu-tab-und, #edit-field-internal-tags-tid, #edit-tags, #edit-field-kcs-tags-select-tid, #edit-subscriptions-and-choose-field-select, #edit-subscriptions-and-type, #edit-vid-13, #edit-vid-4, #edit-vid-5, #edit-vid-53, #edit-vid-1, #edit-vid-3, #edit-group-blog, #edit-group-group, #edit-subscriptions-and-choose-field-select-two, #edit-subscriptions-and-type-two, #edit-vid-13-two, #edit-vid-4-two, #edit-vid-5-two, #edit-vid-53-two, #edit-vid-1-two, #edit-vid-3-two, #edit-group-blog-two, #edit-group-group-two, #edit-subscriptions-and-edit-choose-field-select, #edit-subscriptions-and-type-edit, #edit-subscriptions-and-edit-type-two, #edit-vid-13-edit-two, #edit-vid-4-edit-two, #edit-vid-5-edit-two, #edit-vid-53-edit-two, #edit-vid-1-edit-two, #edit-vid-3-edit-two, #edit-group-group-edit-two, #edit-subscriptions-and-edit-choose-field-select-two, #edit-vid-13-edit, #edit-vid-4-edit, #edit-vid-5-edit, #edit-vid-53-edit, #edit-vid-1-edit, #edit-vid-3-edit, #edit-group-group-edit, #edit-group-blog-edit, #edit-field-supported-languages-tid, #edit-field-geography-und, #edit-field-supported-products-und, #edit-field-supported-languages-und, #edit-field-vendor-und, #edit-field-errata-type-text-und, #edit-field-errata-severity-text-und, #edit-field-software-partner-level-und, #edit-field-scert-product-category-und, #edit-field-certifications-und-0-field-product-und, #edit-kcs-article-type, #edit-field-eco-industry-tag-select-tid, #edit-field-eco-software-catego-select-tid, #edit-field-ecosystem-tag-select-und, #edit-field-eco-industry-tag-select-und, #edit-field-eco-software-catego-select-und, #edit-field-vendor-tsanet-member-ref-und, #edit-field-og-vendor-ref-und-0-default, #edit-field-eco-products-enabled-col-und-0-field-eco-subscription-model-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-support-level-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-archite-select-und, #edit-field-eco-certifications-select-und-0-field-eco-certificati-lvl-select-und, #edit-field-eco-certifications-select-und-0-field-eco-hypervisor-str-und, #edit-field-eco-supported-language-ref-und, #edit-field-eco-region-ref-und, #edit-field-cs-product-category-str-und, #edit-field-eco-certifications-select-und-0-field-eco-format-ref-und, #edit-field-eco-group-access-ref-und, #edit-field-hw-category-tag-ref-und, #edit-field-profile-industry-und, #edit-field-profile-tech-interests-und, #edit-field-product-page-features-ref-und, #edit-field-eco-product-select-und, #edit-field-base-product-ref-und, #edit-field-eco-product-archite-select-und, #edit-field-eco-format-ref-und, #edit-field-certification-status-ref-und, #edit-field-certification-result-ref-und, #edit-field-og-certified-product-ref-und-0-default, #edit-field-eco-subscription-model-ref-und, #edit-field-eco-support-level-ref-und, #edit-field-eco-certificati-lvl-select-und, #edit-field-eco-hypervisor-str-und, #edit-field-ccp-thirdparty-cert-select-und, .use_, #edit-field-eco-cert-product-tag-und, #edit-field-documentation-location-ref-und, #edit-field-documentation-title-und, #edit-field-accelerator-products-und","minimum":"0"},"rh_doc_fetcher":{"page_type":"single"},"section":"","kcs":{"nodeType":null,"nodeId":null}});</script>
    <!--[if lt IE 9]>
  <script src="https://access.redhat.com/sites/all/themes/kcs/js/html5shiv.js"></script>
  <![endif]-->
  
      


    <!--kcs06-->
<script type="text/javascript">
  Drupal.portal = {"version":{"redhat_portal":"package drupal7-redhat_portal is not installed"}};
  Drupal.portal.currentUser = {};
  </script>

</head>

<body class="portal-page admin-bar  kcs_external" >

  
  <div id="page-wrap" class="page-wrap">
    <div class="top-page-wrap">

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <!-- Accessibility Nav & Header -->
<div class="accessibility-nav sr-only">
    <a href="https://access.redhat.com/">
        <h1>Red Hat <span>Customer </span><span>Portal</span></h1>
    </a>
    <p><a href="index.html#cp-main">Skip to main content</a></p>
    <nav aria-labelledby="accessibility-nav-heading">
        <h2 id="accessibility-nav-heading">Main Navigation</h2>
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/support/policy/update_policies/">Product Life Cycle &amp; Update Policies</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/ecosystem/">Ecosystem</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="accessibility-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="accessibility-accountUser">
                    <div class="account-name"><strong id="accessibility-userFullName"></strong></div>
                    <div class="account-org"><span id="accessibility-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="accessibility-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="accessibility-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="accessibility-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="accessibility-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="accessibility-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="accessibility-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- Mobile Header -->
<nav class="mobile-nav-bar hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <button id="menu-btn" class="menu menu-white" type="button" aria-label="Toggle Navigation">
        <span class="lines"></span>
    </button>
    <a class="logo" href="https://access.redhat.com/">
        <span class="logo-crop">
          <!-- logo -->
          <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
            <defs>
              <style>
                .rh-logo-hat {
                  fill: #e00;
                }
                .rh-logo-type {
                  fill: #fff;
                }
              </style>
            </defs>
            <title>Red Hat</title>
            <path
              class="rh-logo-hat"
              d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
              <path class="rh-logo-band"
              d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
              <path
              class="rh-logo-type"
              d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
          </svg>
        </span>
        <span class="site-title"><span>Customer </span><span>Portal</span></span>
    </a>
    <button class="btn btn-search btn-utility" data-target="#site-search">
        <span class="web-icon-search"></span>
        <span class="link-text">Search</span>
    </button>
</nav>

<!-- Mobile Menu Drawer -->
<div class="nav-drawer mobile-nav-drawer hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <nav class="nav-container">
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/support/policy/update_policies/">Product Life Cycle &amp; Update Policies</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/ecosystem/">Ecosystem</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="mobile-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="mobile-accountUser">
                    <div class="account-name"><strong id="mobile-userFullName"></strong></div>
                    <div class="account-org"><span id="mobile-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="mobile-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="mobile-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="mobile-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="mobile-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="mobile-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="mobile-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- White Utility Menu for large screens -->
<div class="utility-wrap" aria-hidden="true">
    <div class="utility-container">
        <div class="utility-bar hidden-xs">
            <div role="navigation" class="top-nav">
                <ul>
                    <li id="nav-subscription" data-portal-tour-1="1"><a class="top-nav-subscriptions" href="https://access.redhat.com/management/">Subscriptions</a></li>
                    <li id="nav-downloads" data-portal-tour-1="2"><a class="top-nav-downloads" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li id="nav-containers"><a class="top-nav-containers" href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
                    <li id="nav-support" data-portal-tour-1="3"><a class="top-nav-support-cases" href="https://access.redhat.com/support/cases/">Support Cases</a></li>
                </ul>
            </div>

            <div role="navigation" class="utility-nav">
                <ul>
                    <li id="searchABTestHide">
                        <a class="btn-search" data-target="#site-search" title="Search" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-search" aria-label="search"></span>
                            <span class="link-text">Search</span>
                        </a>
                    </li>
                    <!-- AB Test -->
                    <li id="searchABTestShow">
                        <form id="topSearchFormABTest" name="topSearchFormABTest">
                            <label for="topSearchInputABTest" class="sr-only">Search</label>
                            <input id="topSearchInputABTest" name="keyword" placeholder="Search" value="" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="form-control">
                            <button type="submit" class="btn btn-app btn-sm btn-link"><span class="web-icon-search" aria-label="search"></span></button>
                        </form>
                    </li>
                    <!-- End of AB Test -->
                    <li>
                        <a class="btn-profile" data-target="#account-info" data-portal-tour-1="4a" title="Account" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-user" aria-label="log in"></span>
                            <span class="link-text">Log In</span>
                            <span class="account-user" id="accountUserName"></span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-language" data-target="#language" data-portal-tour-1="6" title="Language" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-globe" aria-label="language"></span>
                            <span class="link-text">Language</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Utility Tray -->
        <div class="utility-tray-container">
            <div class="utility-tray">
                <div id="site-search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="https://access.redhat.com/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <div class="input-group push-bottom">

                                <input class="form-control searchField" id="topSearchInput" name="keyword" value="" placeholder="Enter your search term" type="text">
                                <span class="input-group-btn">
                                    <button type="submit" class="btn btn-primary">Search</button>
                                </span>
                            </div>
                            <div>Troubleshooting an issue? Try <a href="https://access.redhat.com/solution-engine">Solution Engine</a>&mdash;our new support tool.</div>
                        </form>
                    </div>
                </div>
                <div id="account-info" class="utility-link account-info">
                    <div class="content">

                        <!-- Account Unauthenticated -->
                        <div id="accountLinksLoggedOut" class="unauthenticated">
                            <h2 class="utility-header">Log in to Your Red Hat Account</h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border">
                                    <p><a href="https://access.redhat.com/login" id="accountLogin" class="btn btn-primary">Log In</a></p>
                                    <p>Your Red Hat account gives you access to your profile, preferences, and services, depending on your status.</p>
                                </div>
                                <div class="col-sm-6 col-border col-border-left">
                                    <p><a href="https://www.redhat.com/wapps/ugc/register.html" class="btn btn-primary">Register</a></p>
                                    <p>If you are a new customer, register now for access to product evaluations and purchasing capabilities. </p>

                                    <strong>Need access to an account?</strong><p>If your company has an existing Red Hat account, your organization administrator can grant you access.</p>

                                    <p><a href="https://access.redhat.com/support/contact/customerService/">If you have any questions, please contact customer service.</a></p>
                                </div>
                            </div>
                        </div>

                        <!-- Account Authenticated -->
                        <div id="accountLinksLoggedIn" class="authenticated">
                            <h2 class="utility-header"><span id="userFirstName"></span></h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border col-border-right">
                                    <div class="account-info" id="accountUser">
                                        <div class="avatar"><!-- placeholder--></div>
                                        <div class="account-name"><strong id="userFullName"></strong></div>
                                        <div class="account-org"><span id="userOrg"></span></div>
                                        <div class="account-number accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                                    </div>

                                    <div class="row account-settings">
                                        <div class="col-md-6" data-portal-tour-1="4">
                                            <h3>Red Hat Account</h3>
                                            <ul class="reset">
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
                                                <!-- <li><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
                                                <li><a href="https://access.redhat.com/account-team">Account Team</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6" data-portal-tour-1="5">
                                            <h3>Customer Portal</h3>
                                            <ul class="reset">
                                                <li><a href="https://access.redhat.com/user">My Profile</a></li>
                                                <li><a href="https://access.redhat.com/user" id="userNotificationsLink">Notifications</a></li>
                                                <li><a href="https://access.redhat.com/help/">Help</a></li>
                                            </ul>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-sm-6 col-border">
                                    <p>For your security, if you’re on a public computer and have finished using your Red Hat services, please be sure to log out.</p>
                                    <p><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout" id="accountLogout" class="btn btn-primary">Log Out</a></p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div id="language" class="utility-link language">
                    <div class="content">
                        <h2 class="utility-header">Select Your Language</h2>
                        <div class="row" id="localesMenu">
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=en" data-lang="en" id="en">English</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ko" data-lang="ko" id="ko">한국어</a></li>
                                </ul>
                            </div>
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ja"    data-lang="ja"    id="ja">日本語</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" data-lang="zh_CN" id="zh_CN">中文 (中国)</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="scroll-anchor"></div>

<!-- Main Menu for large screens -->
<div class="header-nav visible-sm visible-md visible-lg" aria-hidden="true">
    <div id="header-nav">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">

                    <a href="https://access.redhat.com/" class="logo">
                        <span class="logo-crop">
                          <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                            <defs>
                              <style>
                                .rh-logo-hat {
                                  fill: #e00;
                                }
                                .rh-logo-type {
                                  fill: #fff;
                                }
                              </style>
                            </defs>
                            <title>Red Hat</title>
                            <path
                              class="rh-logo-hat"
                              d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                              <path class="rh-logo-band"
                              d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                              <path
                              class="rh-logo-type"
                              d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                          </svg>
                        </span>
                        <span class="site-title"><span>Customer </span><span>Portal</span></span>
                    </a>

                    <nav class="primary-nav hidden-sm">
                        <ul>
                            <li id="nav-products"><a class="products" data-link="mega" data-target="products-menu" href="https://access.redhat.com/products/" id="products-menu">Products &amp; Services</a></li>
                            <li id="nav-tools"><a class="tools" data-link="mega" data-target="tools-menu" href="https://access.redhat.com/labs/" id="tools-menu">Tools</a></li>
                            <li id="nav-security"><a class="security" data-link="mega" data-target="security-menu" href="https://access.redhat.com/security/" id="security-menu">Security</a></li>
                            <li id="nav-community"><a class="community" data-link="mega" data-target="community-menu" href="https://access.redhat.com/community/" id="community-menu">Community</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Mega Menu for large screens -->
<div class="mega-wrap visible-sm visible-md visible-lg" aria-hidden="true">
    <nav class="mega">
        <div class="container">
            <div class="mega-menu-wrap">

                <!-- Products Menu -->
                <div aria-labelledby="products-menu" class="products-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-md-6 col-sm-8">
                            <div class="root clearfix" data-portal-tour-1="7">
                                <ul class="subnav subnav-root">
                                    <li data-target="infrastructure-menu" class="active">
                                        <h3>Infrastructure and Management</h3>
                                    </li>
                                    <li data-target="cloud-menu">
                                        <h3>Cloud Computing</h3>
                                    </li>
                                    <li data-target="storage-menu">
                                        <h3>Storage</h3>
                                    </li>
                                    <li data-target="jboss-dev-menu">
                                        <h3>Runtimes</h3>
                                    </li>
                                    <li data-target="jboss-int-menu">
                                        <h3>Integration and Automation</h3>
                                    </li>
                                </ul>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="infrastructure-menu" style="display: block;">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="cloud-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="storage-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a>
                                        </li>
                                        <li>
                                          <a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-dev-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                        </li>
                                    </ul>
                                </div> -->
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul class="border-bottom" id="portal-menu-border-bottom">
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                      </li>
                                    </ul>
                                    <ul>
                                      <li>
                                        <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Automation</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                      </li>
                                    </ul>
                                </div>
                            </div>
                            <a href="https://access.redhat.com/products" class="btn btn-primary">View All Products</a>
                        </div>

                        <div class="col-md-6 col-sm-4 pull-right" data-portal-tour-1="8">
                            <div class="row">
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/support" class="cta-link cta-link-darkbg">Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
                                        <li><a href="https://access.redhat.com/support/policy/update_policies/">Product Life Cycle &amp; Update Policies</a></li>
                                    </ul>
                                    <h4 class="nav-title">Services</h4>
                                    <ul>
                                        <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
                                        <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/documentation" class="cta-link cta-link-darkbg">Documentation</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>
                                    </ul>
                                    <ul>
                                        <li><a href="https://access.redhat.com/ecosystem/" class="cta-link cta-link-darkbg">Ecosystem</a></li>
                                        <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
                                        <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tools Menu -->
                <div aria-labelledby="tools-menu" class="tools-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row" data-portal-tour-1="9">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h3 class="nav-title">Tools</h3>
                                    <ul>
                                        <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
                                        <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
                                        <li><a href="https://access.redhat.com/errata/">Errata</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <ul class="list-flat">
                                        <li><a href="https://access.redhat.com/labs/" class="cta-link cta-link-darkbg">Customer Portal Labs</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <div class="card card-dark-grey">
                                        <h4 class="card-heading">Red Hat Insights</h4>
                                        <p class="text-white">Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                        <ul class="list-flat rh-l-grid rh-m-gutters rh-m-all-6-col-on-md">
                                          <li><a href="https://www.redhat.com/en/technologies/management/insights" class="cta-link cta-link-md cta-link-darkbg">Learn more</a></li>
                                          <li><a href="https://cloud.redhat.com/insights" class="cta-link cta-link-md cta-link-darkbg">Go to Insights</a></li>
                                        </ul>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>

                <!-- Security Menu -->
                <div aria-labelledby="security-menu" class="security-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="10">

                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Red Hat Product Security Center</h2>
                                    <p class="text-white">Engage with our Red Hat Product Security team, access security updates, and ensure your environments are not exposed to any known security vulnerabilities.</p>
                                    <p><a href="https://access.redhat.com/security/" class="btn btn-primary">Product Security Center</a></p>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Security Updates</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
                                    </ul>
                                    <p class="text-white">Keep your systems secure with Red Hat&#039;s specialized responses for high-priority security vulnerabilities.</p>
                                    <ul>
                                        <li class="more-link"><a href="https://access.redhat.com/security/vulnerability">View Responses</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Resources</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
                                        <li><a href="https://www.redhat.com/en/blog/channel/security">Security Blog</a></li>
                                        <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
                                        <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community Menu -->
                <div aria-labelledby="community-menu" class="community-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="11">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Portal Community</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
                                        <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
                                        <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
                                        <p class="push-top"><a href="https://access.redhat.com/community/" class="btn btn-primary">Community Activity</a></p>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Events</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
                                        <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Stories</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
                                        <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
                                        <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!--<a href="https://access.redhat.com/community/" class="btn btn-primary">Explore Community</a>-->
                    </div>
                </div>
            </div>
        </div>
    </nav>
</div>

            <!--[if IE 8]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
            </div>
            <![endif]-->
            <!--[if IE 9]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
            </div>
            <![endif]-->
            <div id="site-section"></div>
        </header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">
  <script type="text/javascript">
    chrometwo_require(['jquery-ui']);
  </script>


      <article class="rh_docs">
  <div class="container">
        <!-- Display: Book Page Content -->
    
  

<div class="row">
  <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
  <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
  


<a class="toc-toggle toc-show" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
  <span class="sr-only">Show Table of Contents</span>
  <span class="web-icon-mobile-menu" aria-hidden="true"></span>
</a>
<nav id="toc-main" class="toc-main collapse in">
  <div class="toc-menu affix-top">
    <a class="toc-toggle toc-hide" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
      <span class="sr-only">Hide Table of Contents</span>
      <span class="icon-remove" aria-hidden="true"></span>
    </a>
    <div class="doc-options">
      <div class="doc-language btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          English <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="index.html">English</a></li>
                      <li><a href="https://access.redhat.com/documentation/ja-jp/red_hat_enterprise_linux/8/html/configuring_gfs2_file_systems/">日本語</a></li>
                  </ul>
      </div>
      <div class="doc-format btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          Single-page HTML <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_gfs2_file_systems/">Multi-page HTML</a></li>
                                <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/pdf/configuring_gfs2_file_systems/Red_Hat_Enterprise_Linux-8-Configuring_GFS2_file_systems-en-US.pdf">PDF</a></li>
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/epub/configuring_gfs2_file_systems/Red_Hat_Enterprise_Linux-8-Configuring_GFS2_file_systems-en-US.epub">ePub</a></li>
                  </ul>
      </div>
    </div>
    <ol class="menu"><li class=" leaf"><a href="index.html">Configuring GFS2 file systems</a></li><li class=" leaf"><a href="index.html#proc_providing-feedback-on-red-hat-documentation_configuring-gfs2-file-systems">Providing feedback on Red Hat documentation</a></li><li class=" leaf"><a href="index.html#assembly_planning-gfs2-deployment-configuring-gfs2-file-systems">1. Planning a GFS2 file system deployment</a><ol class="menu"><li class=" leaf"><a href="index.html#con_basic-gfs2-parameters-planning-gfs2-deployment">1.1. Key GFS2 parameters to determine</a></li><li class=" leaf"><a href="index.html#con_gfs2-support-limits-planning-gfs2-deployment">1.2. GFS2 support considerations</a></li><li class=" leaf"><a href="index.html#con_gfs2-formattiing-considerations-planning-gfs2-deployment">1.3. GFS2 formatting considerations</a></li><li class=" leaf"><a href="index.html#con_gfs2-cluster-considerations-planning-gfs2-deployment">1.4. Cluster considerations</a></li><li class=" leaf"><a href="index.html#con_basic-gfs2-hardware-considerations-planning-gfs2-deployment">1.5. Hardware considerations</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_gfs2-usage-considerations-configuring-gfs2-file-systems">2. Recommendations for GFS2 usage</a><ol class="menu"><li class=" leaf"><a href="index.html#proc_configuring-atime-gfs2-usage-considerations">2.1. Configuring atime updates</a></li><li class=" leaf"><a href="index.html#con_vfs-tuning-options-gfs2-usage-considerations">2.2. VFS tuning options: research and experiment</a></li><li class=" leaf"><a href="index.html#con_selinux-on-gfs2-gfs2-usage-considerations">2.3. SELinux on GFS2</a></li><li class=" leaf"><a href="index.html#con_nfs-over-gfs2-gfs2-usage-considerations">2.4. Setting up NFS over GFS2</a></li><li class=" leaf"><a href="index.html#con_samba-over-gfs2-gfs2-usage-considerations">2.5. Samba (SMB or Windows) file serving over GFS2</a></li><li class=" leaf"><a href="index.html#con_vms-for-gfs2-gfs2-usage-considerations">2.6. Configuring virtual machines for GFS2</a></li><li class=" leaf"><a href="index.html#con_gfs2-block-allocation-issues-gfs2-usage-considerations">2.7. Block allocation</a><ol class="menu"><li class=" leaf"><a href="index.html#leave_free_space_in_the_file_system">2.7.1. Leave free space in the file system</a></li><li class=" leaf"><a href="index.html#have_each_node_allocate_its_own_files_if_possible">2.7.2. Have each node allocate its own files, if possible</a></li><li class=" leaf"><a href="index.html#preallocate_if_possible">2.7.3. Preallocate, if possible</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#assembly_creating-mounting-gfs2-configuring-gfs2-file-systems">3. GFS2 file systems</a><ol class="menu"><li class=" leaf"><a href="index.html#assembly_creating-gfs2-creating-mounting-gfs2">3.1. GFS2 file system creation</a><ol class="menu"><li class=" leaf"><a href="index.html#ref_gfs2-create-command-creating-gfs2">3.1.1. The GFS2 mkfs command</a></li><li class=" leaf"><a href="index.html#proc_create-gfs2-filesystem-creating-gfs2">3.1.2. Creating a GFS2 file system</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_mounting-gfs2-filesystem_creating-mounting-gfs2">3.2. Mounting a GFS2 file system</a><ol class="menu"><li class=" leaf"><a href="index.html#proc_mounting-gfs2-filesystem-noptions-mounting-gfs2-filesystem">3.2.1. Mounting a GFS2 file system with no options specified</a></li><li class=" leaf"><a href="index.html#proc_mounting-gfs2-filesystem-withoptions-mounting-gfs2-filesystem">3.2.2. Mounting a GFS2 file system that specifies mount options</a></li><li class=" leaf"><a href="index.html#proc_unmounting-gfs2-filesystem-mounting-gfs2-filesystem">3.2.3. Unmounting a GFS2 file system</a></li></ol></li><li class=" leaf"><a href="index.html#proc_backing-up-a-gfs2-filesystem-creating-mounting-gfs2">3.3. Backing up a GFS2 file system</a></li><li class=" leaf"><a href="index.html#proc_suspending-activity-on-a-gfs2-filesystem-creating-mounting-gfs2">3.4. Suspending activity on a GFS2 file system</a></li><li class=" leaf"><a href="index.html#proc_growing-gfs2-filesystem-creating-mounting-gfs2">3.5. Growing a GFS2 file system</a></li><li class=" leaf"><a href="index.html#proc_adding-gfs2-journal-creating-mounting-gfs2">3.6. Adding journals to a GFS2 file system</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_gfs2-disk-quota-administration-creating-mounting-gfs2">4. GFS2 quota management</a><ol class="menu"><li class=" leaf"><a href="index.html#proc_configuring-gfs2-disk-quotas-gfs2-disk-quota-administration">4.1. Configuring GFS2 disk quotas</a><ol class="menu"><li class=" leaf"><a href="index.html#setting_up_quotas_in_enforcement_or_accounting_mode">4.1.1. Setting up quotas in enforcement or accounting mode</a></li><li class=" leaf"><a href="index.html#creating_the_quota_database_files">4.1.2. Creating the quota database files</a></li><li class=" leaf"><a href="index.html#assigning_quotas_per_user">4.1.3. Assigning quotas per user</a></li><li class=" leaf"><a href="index.html#assigning_quotas_per_group">4.1.4. Assigning quotas per group</a></li></ol></li><li class=" leaf"><a href="index.html#proc_managing-gfs2-disk-quotas-gfs2-disk-quota-administration">4.2. Managing GFS2 disk Quotas</a></li><li class=" leaf"><a href="index.html#proc_keeping-gfs2-quotas-accurate-with-quotacheck-gfs2-disk-quota-administration">4.3. Keeping GFS2 disk quotas accurate with the quotacheck command</a></li><li class=" leaf"><a href="index.html#proc_synchronizing-gfs2-quotas-gfs2-disk-quota-administration">4.4. Synchronizing quotas with the quotasync Command</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_gfs2-filesystem-repair-creating-mounting-gfs2">5. GFS2 file system repair</a><ol class="menu"><li class=" leaf"><a href="index.html#proc_determining-needed-memory-for-fsckgfs2-gfs2-filesystem-repair">5.1. Determing required memory for running fsck.gfs2</a></li><li class=" leaf"><a href="index.html#proc_repairing-a-gfs2-filesystem-gfs2-filesystem-repair">5.2. Repairing a gfs2 filesystem</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_gfs2-performance-creating-mounting-gfs2">6. Improving GFS2 performance</a><ol class="menu"><li class=" leaf"><a href="index.html#proc_gfs2-defragment-gfs2-performance">6.1. GFS2 file system defragmentation</a></li><li class=" leaf"><a href="index.html#proc_gfs2-node-locking-gfs2-performance">6.2. GFS2 Node Locking</a></li><li class=" leaf"><a href="index.html#con_posix-locking-issues-gfs2-performance">6.3. Issues with Posix locking</a></li><li class=" leaf"><a href="index.html#con_troubleshooting-gfs2-performance-gfs2-performance">6.4. Performance tuning with GFS2</a></li><li class=" leaf"><a href="index.html#con_gfs2-lockdump-gfs2-performance">6.5. Troubleshooting GFS2 performance with the GFS2 lock dump</a></li><li class=" leaf"><a href="index.html#enabling-data-journaling-gfs2-performance">6.6. Enabling data journaling</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_troubleshooting-gfs2-creating-mounting-gfs2">7. Diagnosing and correcting problems with GFS2 file systems</a><ol class="menu"><li class=" leaf"><a href="index.html#ref_gfs2-filesystem-unavailable-troubleshooting-gfs2">7.1. GFS2 filesystem unavailable to a node (the GFS2 withdraw function)</a></li><li class=" leaf"><a href="index.html#ref_gfs2-filesystem-hangs-one-node-troubleshooting-gfs2">7.2. GFS2 file system hangs and requires reboot of one node</a></li><li class=" leaf"><a href="index.html#ref_gfs2-filesystem-hangs-all-nodes-troubleshooting-gfs2">7.3. GFS2 file system hangs and requires reboot of all nodes</a></li><li class=" leaf"><a href="index.html#ref_gfs2-nomount-new-cluster-node-troubleshooting-gfs2">7.4. GFS2 file system does not mount on newly added cluster node</a></li><li class=" leaf"><a href="index.html#ref_gfs2-used-space-empty-filesystem-troubleshooting-gfs2">7.5. Space indicated as used in empty file system</a></li><li class=" leaf"><a href="index.html#proc_gathering-gfs2-data-troubleshooting-gfs2">7.6. Gathering GFS2 data for troubleshooting</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_debugging-gfs2-with-tracepoints-creating-mounting-gfs2">8. Debugging GFS2 file systems with GFS2 tracepoints and the debugfs glocks file</a><ol class="menu"><li class=" leaf"><a href="index.html#gfs2_tracepoint_types">8.1. GFS2 tracepoint types</a></li><li class=" leaf"><a href="index.html#ap-tracepoints-gfs2">8.2. Tracepoints</a></li><li class=" leaf"><a href="index.html#ap-glocks-gfs2">8.3. Glocks</a></li><li class=" leaf"><a href="index.html#ap-glock-debugfs-gfs2">8.4. The glock debugfs interface</a></li><li class=" leaf"><a href="index.html#ap-glock-holders-gfs2">8.5. Glock holders</a></li><li class=" leaf"><a href="index.html#ap-glock-tracepoints-gfs2">8.6. Glock tracepoints</a></li><li class=" leaf"><a href="index.html#ap-bmap-tracepoints-gfs2">8.7. Bmap tracepoints</a></li><li class=" leaf"><a href="index.html#ap-log-gracepoints-gfs2">8.8. Log tracepoints</a></li><li class=" leaf"><a href="index.html#ap-glockstats-gfs2">8.9. Glock statistics</a></li><li class=" leaf"><a href="index.html#ap-references-gfs2">8.10. References</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_analyzing-gfs2-with-pcp-creating-mounting-gfs2">9. Monitoring and analyzing GFS2 file systems using Performance Co-Pilot (PCP)</a><ol class="menu"><li class=" leaf"><a href="index.html#proc_examining-number-of-glocks-analyzing-gfs2-with-pcp">9.1. Displaying information about the available performance metrics with the pminfo tool</a><ol class="menu"><li class=" leaf"><a href="index.html#examining_the_number_of_glock_structures_that_currently_exist_per_file_system">9.1.1. Examining the number of glock structures that currently exist per file system</a></li><li class=" leaf"><a href="index.html#examining_the_number_of_glock_structures_that_exist_per_file_system_by_type">9.1.2. Examining the number of glock structures that exist per file system by type</a></li><li class=" leaf"><a href="index.html#checking_the_number_of_glock_structures_that_are_in_a_wait_state">9.1.3. Checking the number of glock structures that are in a wait state</a></li><li class=" leaf"><a href="index.html#checking_file_system_operation_latency_using_the_kernel_tracepoint_based_metrics">9.1.4. Checking file system operation latency using the kernel tracepoint based metrics</a></li></ol></li><li class=" leaf"><a href="index.html#ref_available-gfs2-PCP-metrics-analyzing-gfs2-with-pcp">9.2. Complete listing of available metrics for GFS2 in PCP</a></li><li class=" leaf"><a href="index.html#proc_installing-minimal-PCP-setup-analyzing-gfs2-with-pcp">9.3. Performing minimal PCP setup to gather file system data</a></li><li class=" leaf"><a href="index.html#references">9.4. References</a></li></ol></li><li class=" leaf"><a href="index.html#idm140464449621024">Legal Notice</a></li></ol>  </div>
</nav>


  <div class="doc-wrapper">
    <div class="panel-pane pane-training-banner"  >
  
      
  
  <div class="card card-light card-md push-bottom">
  <h2 class="card-heading card-heading-red card-heading-sm card-heading-flush">Red Hat Training</h2>
  <p>A Red Hat training course is available for <a href="https://www.redhat.com/en/services/training/courses-by-curriculum?intcmp=701f2000001D4OtAAK&amp;#Red-Hat-Enterprise-Linux" class="cta-link">RHEL 8</a></p>
</div>

  
  </div>
<div class="panel-pane pane-page-title"  >
  
      
  
  <h1 class="title" itemprop="name">Configuring GFS2 file systems</h1>
  
  </div>
<div class="panel-pane pane-page-body"  >
  
      
  
  <div class="body"><div xml:lang="en-US" class="book" id="idm140464446123488"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Enterprise Linux</span> <span class="productnumber">8</span></div><div><h2 class="subtitle">A guide to the configuration and management of GFS2 file systems</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat</span> <span class="orgdiv">Customer Content Services</span></div></div><div><a href="index.html#idm140464449621024">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				This guide provides information about configuring and managing GFS2 file systems for Red Hat Enterprise Linux 8.
			</div></div></div></div><hr/></div><section class="preface" id="proc_providing-feedback-on-red-hat-documentation_configuring-gfs2-file-systems"><div class="titlepage"><div><div><h1 class="title">Providing feedback on Red Hat documentation</h1></div></div></div><p>
			We appreciate your input on our documentation. Please let us know how we could make it better. To do so:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					For simple comments on specific passages:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Make sure you are viewing the documentation in the <span class="emphasis"><em>Multi-page HTML</em></span> format. In addition, ensure you see the <span class="strong strong"><strong>Feedback</strong></span> button in the upper right corner of the document.
						</li><li class="listitem">
							Use your mouse cursor to highlight the part of text that you want to comment on.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Add Feedback</strong></span> pop-up that appears below the highlighted text.
						</li><li class="listitem">
							Follow the displayed instructions.
						</li></ol></div></li><li class="listitem"><p class="simpara">
					For submitting more complex feedback, create a Bugzilla ticket:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Go to the <a class="link" href="https://bugzilla.redhat.com/enter_bug.cgi?product=Red%20Hat%20Enterprise%20Linux%208">Bugzilla</a> website.
						</li><li class="listitem">
							As the Component, use <span class="strong strong"><strong>Documentation</strong></span>.
						</li><li class="listitem">
							Fill in the <span class="strong strong"><strong>Description</strong></span> field with your suggestion for improvement. Include a link to the relevant part(s) of documentation.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Submit Bug</strong></span>.
						</li></ol></div></li></ul></div></section><section class="chapter" id="assembly_planning-gfs2-deployment-configuring-gfs2-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Planning a GFS2 file system deployment</h1></div></div></div><p>
			The Red Hat Global File System 2 (GFS2) file system is a 64-bit symmetric cluster file system which provides a shared name space and manages coherency between multiple nodes sharing a common block device. A GFS2 file system is intended to provide a feature set which is as close as possible to a local file system, while at the same time enforcing full cluster coherency between nodes. To achieve this, the nodes employ a cluster-wide locking scheme for file system resources. This locking scheme uses communication protocols such as TCP/IP to exchange locking information.
		</p><p>
			In a few cases, the Linux file system API does not allow the clustered nature of GFS2 to be totally transparent; for example, programs using POSIX locks in GFS2 should avoid using the <code class="literal">GETLK</code> function since, in a clustered environment, the process ID may be for a different node in the cluster. In most cases however, the functionality of a GFS2 file system is identical to that of a local file system.
		</p><p>
			The Red Hat Enterprise Linux (RHEL) Resilient Storage Add-On provides GFS2, and it depends on the RHEL High Availability Add-On to provide the cluster management required by GFS2.
		</p><p>
			The <code class="literal">gfs2.ko</code> kernel module implements the GFS2 file system and is loaded on GFS2 cluster nodes.
		</p><p>
			To get the best performance from GFS2, it is important to take into account the performance considerations which stem from the underlying design. Just like a local file system, GFS2 relies on the page cache in order to improve performance by local caching of frequently used data. In order to maintain coherency across the nodes in the cluster, cache control is provided by the <span class="emphasis"><em>glock</em></span> state machine.
		</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
				Make sure that your deployment of the Red Hat High Availability Add-On meets your needs and can be supported. Consult with an authorized Red Hat representative to verify your configuration prior to deployment.
			</p></div></div><section class="section" id="con_basic-gfs2-parameters-planning-gfs2-deployment"><div class="titlepage"><div><div><h2 class="title">1.1. Key GFS2 parameters to determine</h2></div></div></div><p>
				Before you install and set up GFS2, note the following key characteristics of your GFS2 file systems:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">GFS2 nodes</span></dt><dd>
							Determine which nodes in the cluster will mount the GFS2 file systems.
						</dd><dt><span class="term">Number of file systems</span></dt><dd>
							Determine how many GFS2 file systems to create initially. More file systems can be added later.
						</dd><dt><span class="term">File system name</span></dt><dd>
							Each GFS2 file system should have a unique name. This name is usually the same as the LVM logical volume name and is used as the DLM lock table name when a GFS2 file system is mounted. For example, this guide uses file system names <code class="literal">mydata1</code> and <code class="literal">mydata2</code> in some example procedures.
						</dd><dt><span class="term">Journals</span></dt><dd>
							Determine the number of journals for your GFS2 file systems. GFS2 requires one journal for each node in the cluster that needs to mount the file system. For example, if you have a 16-node cluster but need to mount only the file system from two nodes, you need only two journals. GFS2 allows you to add journals dynamically at a later point with the <code class="literal">gfs2_jadd</code> utility as additional servers mount a file system.
						</dd><dt><span class="term">Storage devices and partitions</span></dt><dd>
							Determine the storage devices and partitions to be used for creating logical volumes (using <code class="literal">lvmlockd</code>) in the file systems.
						</dd><dt><span class="term">Time protocol</span></dt><dd><p class="simpara">
							Make sure that the clocks on the GFS2 nodes are synchronized. It is recommended that you use the Precision Time Protocol (PTP) or, if necessary for your configuration, the Network Time Protocol (NTP) software provided with your Red Hat Enterprise Linux distribution.
						</p><p class="simpara">
							The system clocks in GFS2 nodes must be within a few minutes of each other to prevent unnecessary inode time stamp updating. Unnecessary inode time stamp updating severely impacts cluster performance.
						</p></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You may see performance problems with GFS2 when many create and delete operations are issued from more than one node in the same directory at the same time. If this causes performance problems in your system, you should localize file creation and deletions by a node to directories specific to that node as much as possible.
				</p></div></div></section><section class="section" id="con_gfs2-support-limits-planning-gfs2-deployment"><div class="titlepage"><div><div><h2 class="title">1.2. GFS2 support considerations</h2></div></div></div><p>
				<a class="xref" href="index.html#tb-table-gfs2-max" title="Table 1.1. GFS2 Support Limits">Table 1.1, “GFS2 Support Limits”</a> summarizes the current maximum file system size and number of nodes that GFS2 supports.
			</p><div class="table" id="tb-table-gfs2-max"><p class="title"><strong>Table 1.1. GFS2 Support Limits</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140464447371968" scope="col">Parameter</th><th align="left" valign="top" id="idm140464447370992" scope="col">Maximum</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140464447371968"> <p>
								Number of nodes
							</p>
							 </td><td align="left" valign="top" headers="idm140464447370992"> <p>
								16 (x86, Power8 on PowerVM)
							</p>
							 <p>
								4 (s390x under z/VM)
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447371968"> <p>
								File system size
							</p>
							 </td><td align="left" valign="top" headers="idm140464447370992"> <p>
								100TB on all supported architectures
							</p>
							 </td></tr></tbody></table></div></div><p>
				GFS2 is based on a 64-bit architecture, which can theoretically accommodate an 8 EB file system. If your system requires larger GFS2 file systems than are currently supported, contact your Red Hat service representative.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Although a GFS2 file system can be implemented in a standalone system or as part of a cluster configuration, Red Hat does not support the use of GFS2 as a single-node file system. Red Hat does support a number of high-performance single node file systems which are optimized for single node and thus have generally lower overhead than a cluster file system. Red Hat recommends using these file systems in preference to GFS2 in cases where only a single node needs to mount the file system. For information on the file systems that Red Hat Enterprise Linux 8 supports, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_file_systems/index">Managing file systems</a>.
				</p><p>
					Red Hat will continue to support single-node GFS2 file systems for mounting snapshots of cluster file systems as might be needed, for example, for backup purposes.
				</p></div></div><p>
				When determining the size of your file system, you should consider your recovery needs. Running the <code class="literal command">fsck.gfs2</code> command on a very large file system can take a long time and consume a large amount of memory. Additionally, in the event of a disk or disk subsystem failure, recovery time is limited by the speed of your backup media. For information on the amount of memory the <code class="literal command">fsck.gfs2</code> command requires, see <a class="link" href="index.html#proc_determining-needed-memory-for-fsckgfs2-gfs2-filesystem-repair" title="5.1. Determing required memory for running fsck.gfs2">Determing required memory for running fsck.gfs2</a>.
			</p><p>
				While a GFS2 file system may be used outside of LVM, Red Hat supports only GFS2 file systems that are created on a shared LVM logical volume.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					When you configure a GFS2 file system as a cluster file system, you must ensure that all nodes in the cluster have access to the shared storage. Asymmetric cluster configurations in which some nodes have access to the shared storage and others do not are not supported. This does not require that all nodes actually mount the GFS2 file system itself.
				</p></div></div></section><section class="section" id="con_gfs2-formattiing-considerations-planning-gfs2-deployment"><div class="titlepage"><div><div><h2 class="title">1.3. GFS2 formatting considerations</h2></div></div></div><p>
				This section provides recommendations for how to format your GFS2 file system to optimize performance.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Make sure that your deployment of the Red Hat High Availability Add-On meets your needs and can be supported. Consult with an authorized Red Hat representative to verify your configuration prior to deployment.
				</p></div></div><h4 id="file_system_size_smaller_is_better">File System Size: Smaller Is Better</h4><p>
				GFS2 is based on a 64-bit architecture, which can theoretically accommodate an 8 EB file system. However, the current supported maximum size of a GFS2 file system for 64-bit hardware is 100TB.
			</p><p>
				Note that even though GFS2 large file systems are possible, that does not mean they are recommended. The rule of thumb with GFS2 is that smaller is better: it is better to have 10 1TB file systems than one 10TB file system.
			</p><p>
				There are several reasons why you should keep your GFS2 file systems small:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Less time is required to back up each file system.
					</li><li class="listitem">
						Less time is required if you need to check the file system with the <code class="literal command">fsck.gfs2</code> command.
					</li><li class="listitem">
						Less memory is required if you need to check the file system with the <code class="literal command">fsck.gfs2</code> command.
					</li></ul></div><p>
				In addition, fewer resource groups to maintain mean better performance.
			</p><p>
				Of course, if you make your GFS2 file system too small, you might run out of space, and that has its own consequences. You should consider your own use cases before deciding on a size.
			</p><h4 id="block_size_default_4k_blocks_are_preferred">Block Size: Default (4K) Blocks Are Preferred</h4><p>
				The <code class="literal command">mkfs.gfs2</code> command attempts to estimate an optimal block size based on device topology. In general, 4K blocks are the preferred block size because 4K is the default page size (memory) for Red Hat Enterprise Linux. Unlike some other file systems, GFS2 does most of its operations using 4K kernel buffers. If your block size is 4K, the kernel has to do less work to manipulate the buffers.
			</p><p>
				It is recommended that you use the default block size, which should yield the highest performance. You may need to use a different block size only if you require efficient storage of many very small files.
			</p><h4 id="journal_size_default_128mb_is_usually_optimal">Journal Size: Default (128MB) Is Usually Optimal</h4><p>
				When you run the <code class="literal command">mkfs.gfs2</code> command to create a GFS2 file system, you may specify the size of the journals. If you do not specify a size, it will default to 128MB, which should be optimal for most applications.
			</p><p>
				Some system administrators might think that 128MB is excessive and be tempted to reduce the size of the journal to the minimum of 8MB or a more conservative 32MB. While that might work, it can severely impact performance. Like many journaling file systems, every time GFS2 writes metadata, the metadata is committed to the journal before it is put into place. This ensures that if the system crashes or loses power, you will recover all of the metadata when the journal is automatically replayed at mount time. However, it does not take much file system activity to fill an 8MB journal, and when the journal is full, performance slows because GFS2 has to wait for writes to the storage.
			</p><p>
				It is generally recommended to use the default journal size of 128MB. If your file system is very small (for example, 5GB), having a 128MB journal might be impractical. If you have a larger file system and can afford the space, using 256MB journals might improve performance.
			</p><h4 id="size_and_number_of_resource_groups">Size and Number of Resource Groups</h4><p>
				When a GFS2 file system is created with the <code class="literal command">mkfs.gfs2</code> command, it divides the storage into uniform slices known as resource groups. It attempts to estimate an optimal resource group size (ranging from 32MB to 2GB). You can override the default with the <code class="literal command">-r</code> option of the <code class="literal command">mkfs.gfs2</code> command.
			</p><p>
				Your optimal resource group size depends on how you will use the file system. Consider how full it will be and whether or not it will be severely fragmented.
			</p><p>
				You should experiment with different resource group sizes to see which results in optimal performance. It is a best practice to experiment with a test cluster before deploying GFS2 into full production.
			</p><p>
				If your file system has too many resource groups, each of which is too small, block allocations can waste too much time searching tens of thousands of resource groups for a free block. The more full your file system, the more resource groups that will be searched, and every one of them requires a cluster-wide lock. This leads to slow performance.
			</p><p>
				If, however, your file system has too few resource groups, each of which is too big, block allocations might contend more often for the same resource group lock, which also impacts performance. For example, if you have a 10GB file system that is carved up into five resource groups of 2GB, the nodes in your cluster will fight over those five resource groups more often than if the same file system were carved into 320 resource groups of 32MB. The problem is exacerbated if your file system is nearly full because every block allocation might have to look through several resource groups before it finds one with a free block. GFS2 tries to mitigate this problem in two ways:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						First, when a resource group is completely full, it remembers that and tries to avoid checking it for future allocations until a block is freed from it. If you never delete files, contention will be less severe. However, if your application is constantly deleting blocks and allocating new blocks on a file system that is mostly full, contention will be very high and this will severely impact performance.
					</li><li class="listitem">
						Second, when new blocks are added to an existing file (for example, by appending) GFS2 will attempt to group the new blocks together in the same resource group as the file. This is done to increase performance: on a spinning disk, seek operations take less time when they are physically close together.
					</li></ul></div><p>
				The worst case scenario is when there is a central directory in which all the nodes create files because all of the nodes will constantly fight to lock the same resource group.
			</p></section><section class="section" id="con_gfs2-cluster-considerations-planning-gfs2-deployment"><div class="titlepage"><div><div><h2 class="title">1.4. Cluster considerations</h2></div></div></div><p>
				When determining the number of nodes that your system will contain, note that there is a trade-off between high availability and performance. With a larger number of nodes, it becomes increasingly difficult to make workloads scale. For that reason, Red Hat does not support using GFS2 for cluster file system deployments greater than 16 nodes.
			</p><p>
				Deploying a cluster file system is not a "drop in" replacement for a single node deployment. Red Hat recommends that you allow a period of around 8-12 weeks of testing on new installations in order to test the system and ensure that it is working at the required performance level. During this period, any performance or functional issues can be worked out and any queries should be directed to the Red Hat support team.
			</p><p>
				Red Hat recommends that customers considering deploying clusters have their configurations reviewed by Red Hat support before deployment to avoid any possible support issues later on.
			</p></section><section class="section" id="con_basic-gfs2-hardware-considerations-planning-gfs2-deployment"><div class="titlepage"><div><div><h2 class="title">1.5. Hardware considerations</h2></div></div></div><p>
				You should take the following hardware considerations into account when deploying a GFS2 file system.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use higher quality storage options
					</p><p class="simpara">
						GFS2 can operate on cheaper shared storage options, such as iSCSI or Fibre Channel over Ethernet (FCoE), but you will get better performance if you buy higher quality storage with larger caching capacity. Red Hat performs most quality, sanity, and performance tests on SAN storage with Fibre Channel interconnect. As a general rule, it is always better to deploy something that has been tested first.
					</p></li><li class="listitem"><p class="simpara">
						Test network equipment before deploying
					</p><p class="simpara">
						Higher quality, faster network equipment makes cluster communications and GFS2 run faster with better reliability. However, you do not have to purchase the most expensive hardware. Some of the most expensive network switches have problems passing multicast packets, which are used for passing <code class="literal">fcntl</code> locks (flocks), whereas cheaper commodity network switches are sometimes faster and more reliable. Red Hat recommends trying equipment before deploying it into full production.
					</p></li></ul></div></section></section><section class="chapter" id="assembly_gfs2-usage-considerations-configuring-gfs2-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Recommendations for GFS2 usage</h1></div></div></div><p>
			This section provides general recommendations about GFS2 usage.
		</p><section class="section" id="proc_configuring-atime-gfs2-usage-considerations"><div class="titlepage"><div><div><h2 class="title">2.1. Configuring <code class="literal command">atime</code> updates</h2></div></div></div><p>
				Each file inode and directory inode has three time stamps associated with it:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal command">ctime</code> — The last time the inode status was changed
					</li><li class="listitem">
						<code class="literal command">mtime</code> — The last time the file (or directory) data was modified
					</li><li class="listitem">
						<code class="literal command">atime</code> — The last time the file (or directory) data was accessed
					</li></ul></div><p>
				If <code class="literal command">atime</code> updates are enabled as they are by default on GFS2 and other Linux file systems, then every time a file is read its inode needs to be updated.
			</p><p>
				Because few applications use the information provided by <code class="literal command">atime</code>, those updates can require a significant amount of unnecessary write traffic and file locking traffic. That traffic can degrade performance; therefore, it may be preferable to turn off or reduce the frequency of <code class="literal command">atime</code> updates.
			</p><p>
				The following methods of reducing the effects of <code class="literal command">atime</code> updating are available:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Mount with <code class="literal">relatime</code> (relative atime), which updates the <code class="literal command">atime</code> if the previous <code class="literal command">atime</code> update is older than the <code class="literal command">mtime</code> or <code class="literal command">ctime</code> update. This is the default mount option for GFS2 file systems.
					</li><li class="listitem">
						Mount with <code class="literal command">noatime</code> or <code class="literal command">nodiratime</code>. Mounting with <code class="literal command">noatime</code> disables <code class="literal command">atime</code> updates for both files and directories on that file system, while mounting with <code class="literal command">nodiratime</code> disables <code class="literal command">atime</code> updates only for directories on that file system, It is generally recommended that you mount GFS2 file systems with the <code class="literal">noatime</code> or <code class="literal">nodiratime</code> mount option whenever possible, with the preference for <code class="literal">noatime</code> where the application allows for this. For more information on the effect of these arguments on GFS2 file system performance, see <a class="link" href="index.html#proc_gfs2-node-locking-gfs2-performance" title="6.2. GFS2 Node Locking">GFS2 Node Locking</a>.
					</li></ul></div><p>
				Use the following command to mount a GFS2 file system with the <code class="literal option">noatime</code> Linux mount option.
			</p><pre class="literallayout">mount <span class="emphasis"><em>BlockDevice</em></span> <span class="emphasis"><em>MountPoint</em></span> -o noatime</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">BlockDevice</code></span></dt><dd>
							Specifies the block device where the GFS2 file system resides.
						</dd><dt><span class="term"><code class="literal">MountPoint</code></span></dt><dd>
							Specifies the directory where the GFS2 file system should be mounted.
						</dd></dl></div><p>
				In this example, the GFS2 file system resides on <code class="literal">/dev/vg01/lvol0</code> and is mounted on directory <code class="literal">/mygfs2</code> with <code class="literal command">atime</code> updates turned off.
			</p><pre class="literallayout"># <code class="literal">mount /dev/vg01/lvol0 /mygfs2 -o noatime</code></pre></section><section class="section" id="con_vfs-tuning-options-gfs2-usage-considerations"><div class="titlepage"><div><div><h2 class="title">2.2. VFS tuning options: research and experiment</h2></div></div></div><p>
				Like all Linux file systems, GFS2 sits on top of a layer called the virtual file system (VFS). The VFS provides good defaults for the cache settings for most workloads and should not need changing in most cases. If, however, you have a workload that is not running efficiently (for example, cache is too large or too small) then you may be able to improve the performance by using the <code class="literal command">sysctl</code>(8) command to adjust the values of the <code class="literal">sysctl</code> files in the <code class="literal">/proc/sys/vm</code> directory. Documentation for these files can be found in the kernel source tree <code class="literal">Documentation/sysctl/vm.txt</code>.
			</p><p>
				For example, the values for <code class="literal">dirty_background_ratio</code> and <code class="literal">vfs_cache_pressure</code> may be adjusted depending on your situation. To fetch the current values, use the following commands:
			</p><pre class="literallayout"># <code class="literal">sysctl -n vm.dirty_background_ratio</code>
# <code class="literal">sysctl -n vm.vfs_cache_pressure</code></pre><p>
				The following commands adjust the values:
			</p><pre class="literallayout"># <code class="literal">sysctl -w vm.dirty_background_ratio=20</code>
# <code class="literal">sysctl -w vm.vfs_cache_pressure=500</code></pre><p>
				You can permanently change the values of these parameters by editing the <code class="literal">/etc/sysctl.conf</code> file.
			</p><p>
				To find the optimal values for your use cases, research the various VFS options and experiment on a test cluster before deploying into full production.
			</p></section><section class="section" id="con_selinux-on-gfs2-gfs2-usage-considerations"><div class="titlepage"><div><div><h2 class="title">2.3. SELinux on GFS2</h2></div></div></div><p>
				Use of Security Enhanced Linux (SELinux) with GFS2 incurs a small performance penalty. To avoid this overhead, you may choose not to use SELinux with GFS2 even on a system with SELinux in enforcing mode. When mounting a GFS2 file system, you can ensure that SELinux will not attempt to read the <code class="literal">seclabel</code> element on each file system object by using one of the <code class="literal">context</code> options as described on the <code class="literal">mount</code>(8) man page; SELinux will assume that all content in the file system is labeled with the <code class="literal">seclabel</code> element provided in the <code class="literal">context</code> mount options. This will also speed up processing as it avoids another disk read of the extended attribute block that could contain <code class="literal">seclabel</code> elements.
			</p><p>
				For example, on a system with SELinux in enforcing mode, you can use the following <code class="literal command">mount</code> command to mount the GFS2 file system if the file system is going to contain Apache content. This label will apply to the entire file system; it remains in memory and is not written to disk.
			</p><pre class="literallayout"># <code class="literal">mount -t gfs2 -o context=system_u:object_r:httpd_sys_content_t:s0 /dev/mapper/xyz/mnt/gfs2</code></pre><p>
				If you are not sure whether the file system will contain Apache content, you can use the labels <code class="literal">public_content_rw_t</code> or <code class="literal">public_content_t</code>, or you could define a new label altogether and define a policy around it.
			</p><p>
				Note that in a Pacemaker cluster you should always use Pacemaker to manage a GFS2 file system. You can specify the mount options when you create a GFS2 file system resource.
			</p></section><section class="section" id="con_nfs-over-gfs2-gfs2-usage-considerations"><div class="titlepage"><div><div><h2 class="title">2.4. Setting up NFS over GFS2</h2></div></div></div><p>
				Due to the added complexity of the GFS2 locking subsystem and its clustered nature, setting up NFS over GFS2 requires taking many precautions and careful configuration. This section describes the caveats you should take into account when configuring an NFS service over a GFS2 file system.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					If the GFS2 file system is NFS exported, then you must mount the file system with the <code class="literal">localflocks</code> option. Because utilizing the <code class="literal">localflocks</code> option prevents you from safely accessing the GFS2 filesystem from multiple locations, and it is not viable to export GFS2 from multiple nodes simultaneously, it is a support requirement that the GFS2 file system be mounted on only one node at a time when using this configuration. The intended effect of this is to force POSIX locks from each server to be local: non-clustered, independent of each other. This is because a number of problems exist if GFS2 attempts to implement POSIX locks from NFS across the nodes of a cluster. For applications running on NFS clients, localized POSIX locks means that two clients can hold the same lock concurrently if the two clients are mounting from different servers, which could cause data corruption. If all clients mount NFS from one server, then the problem of separate servers granting the same locks independently goes away. If you are not sure whether to mount your file system with the <code class="literal">localflocks</code> option, you should not use the option. Contact Red Hat support immediately to discuss the appropriate configuration to avoid data loss. Exporting GFS2 via NFS, while technically supported in some circumstances, is not recommended.
				</p><p>
					For all other (non-NFS) GFS2 applications, do not mount your file system using <code class="literal">localflocks</code>, so that GFS2 will manage the POSIX locks and flocks between all the nodes in the cluster (on a cluster-wide basis). If you specify <code class="literal">localflocks</code> and do not use NFS, the other nodes in the cluster will not have knowledge of each other’s POSIX locks and flocks, thus making them unsafe in a clustered environment
				</p></div></div><p>
				In addition to the locking considerations, you should take the following into account when configuring an NFS service over a GFS2 file system.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Red Hat supports only Red Hat High Availability Add-On configurations using NFSv3 with locking in an active/passive configuration with the following characteristics. This configuration provides High Availability (HA) for the file system and reduces system downtime since a failed node does not result in the requirement to execute the <code class="literal command">fsck</code> command when failing the NFS server from one node to another.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The back-end file system is a GFS2 file system running on a 2 to 16 node cluster.
							</li><li class="listitem">
								An NFSv3 server is defined as a service exporting the entire GFS2 file system from a single cluster node at a time.
							</li><li class="listitem">
								The NFS server can fail over from one cluster node to another (active/passive configuration).
							</li><li class="listitem">
								No access to the GFS2 file system is allowed <span class="emphasis"><em>except</em></span> through the NFS server. This includes both local GFS2 file system access as well as access through Samba or Clustered Samba. Accessing the file system locally via the cluster node from which it is mounted may result in data corruption.
							</li><li class="listitem">
								There is no NFS quota support on the system.
							</li></ul></div></li><li class="listitem">
						The <code class="literal">fsid=</code> NFS option is mandatory for NFS exports of GFS2.
					</li><li class="listitem">
						If problems arise with your cluster (for example, the cluster becomes inquorate and fencing is not successful), the clustered logical volumes and the GFS2 file system will be frozen and no access is possible until the cluster is quorate. You should consider this possibility when determining whether a simple failover solution such as the one defined in this procedure is the most appropriate for your system.
					</li></ul></div></section><section class="section" id="con_samba-over-gfs2-gfs2-usage-considerations"><div class="titlepage"><div><div><h2 class="title">2.5. Samba (SMB or Windows) file serving over GFS2</h2></div></div></div><p>
				You can use Samba (SMB or Windows) file serving from a GFS2 file system with CTDB, which allows active/active configurations.
			</p><p>
				Simultaneous access to the data in the Samba share from outside of Samba is not supported. There is currently no support for GFS2 cluster leases, which slows Samba file serving.
			</p></section><section class="section" id="con_vms-for-gfs2-gfs2-usage-considerations"><div class="titlepage"><div><div><h2 class="title">2.6. Configuring virtual machines for GFS2</h2></div></div></div><p>
				When using a GFS2 file system with a virtual machine, it is important that your VM storage settings on each node be configured properly in order to force the cache off. For example, including these settings for <code class="literal">cache</code> and <code class="literal">io</code> in the <code class="literal">libvirt</code> domain should allow GFS2 to behave as expected.
			</p><pre class="literallayout">&lt;driver name='qemu' type='raw' cache='none' io='native'/&gt;</pre><p>
				Alternately, you can configure the <code class="literal">shareable</code> attribute within the device element. This indicates that the device is expected to be shared between domains (as long as hypervisor and OS support this). If <code class="literal">shareable</code> is used, <code class="literal">cache='no'</code> should be used for that device.
			</p></section><section class="section" id="con_gfs2-block-allocation-issues-gfs2-usage-considerations"><div class="titlepage"><div><div><h2 class="title">2.7. Block allocation</h2></div></div></div><p>
				This section provides a summary of issues related to block allocation in GFS2 file systems. Even though applications that only write data typically do not care how or where a block is allocated, some knowledge of how block allocation works can help you optimize performance.
			</p><section class="section" id="leave_free_space_in_the_file_system"><div class="titlepage"><div><div><h3 class="title">2.7.1. Leave free space in the file system</h3></div></div></div><p>
					When a GFS2 file system is nearly full, the block allocator starts to have a difficult time finding space for new blocks to be allocated. As a result, blocks given out by the allocator tend to be squeezed into the end of a resource group or in tiny slices where file fragmentation is much more likely. This file fragmentation can cause performance problems. In addition, when a GFS2 file system is nearly full, the GFS2 block allocator spends more time searching through multiple resource groups, and that adds lock contention that would not necessarily be there on a file system that has ample free space. This also can cause performance problems.
				</p><p>
					For these reasons, it is recommended that you not run a file system that is more than 85 percent full, although this figure may vary depending on workload.
				</p></section><section class="section" id="have_each_node_allocate_its_own_files_if_possible"><div class="titlepage"><div><div><h3 class="title">2.7.2. Have each node allocate its own files, if possible</h3></div></div></div><p>
					When developing applications for use with GFS2 file systems, it is recommended that you have each node allocate it own files, if possible. Due to the way the distributed lock manager (DLM) works, there will be more lock contention if all files are allocated by one node and other nodes need to add blocks to those files.
				</p><p>
					With DLM, the first node to lock a resource (like a file) becomes the “lock master” for that lock. Other nodes may lock that resource, but they have to ask permission from the lock master first. Each node knows which locks for which it is the lock master, and each node knows which node it has lent a lock to. Locking a lock on the master node is much faster than locking one on another node that has to stop and ask permission from the lock’s master.
				</p><p>
					As in many file systems, the GFS2 allocator tries to keep blocks in the same file close to one another to reduce the movement of disk heads and boost performance. A node that allocates blocks to a file will likely need to use and lock the same resource groups for the new blocks (unless all the blocks in that resource group are in use). The file system will run faster if the lock master for the resource group containing the file allocates its data blocks (it is faster to have the node that first opened the file do all the writing of new blocks).
				</p></section><section class="section" id="preallocate_if_possible"><div class="titlepage"><div><div><h3 class="title">2.7.3. Preallocate, if possible</h3></div></div></div><p>
					If files are preallocated, block allocations can be avoided altogether and the file system can run more efficiently. GFS2 includes the <code class="literal command">fallocate(1)</code> system call, which you can use to preallocate blocks of data.
				</p></section></section></section><section class="chapter" id="assembly_creating-mounting-gfs2-configuring-gfs2-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 3. GFS2 file systems</h1></div></div></div><p>
			This section provides information on the commands and options you use to create, mount, and grow GFS2 file systems.
		</p><section class="section" id="assembly_creating-gfs2-creating-mounting-gfs2"><div class="titlepage"><div><div><h2 class="title">3.1. GFS2 file system creation</h2></div></div></div><p>
				You create a GFS2 file system with the <code class="literal command">mkfs.gfs2</code> command. A file system is created on an activated LVM volume.
			</p><section class="section" id="ref_gfs2-create-command-creating-gfs2"><div class="titlepage"><div><div><h3 class="title">3.1.1. The GFS2 mkfs command</h3></div></div></div><p>
					The following information is required to run the <code class="literal command">mkfs.gfs2</code> command to create a clustered GFS2 file system:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Lock protocol/module name, which is <code class="literal">lock_dlm</code> for a cluster
						</li><li class="listitem">
							Cluster name
						</li><li class="listitem">
							Number of journals (one journal required for each node that may be mounting the file system)
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Once you have created a GFS2 file system with the <code class="literal command">mkfs.gfs2</code> command, you cannot decrease the size of the file system. You can, however, increase the size of an existing file system with the <code class="literal command">gfs2_grow</code> command.
					</p></div></div><p>
					The format for creating a clustered GFS2 file system is as follows. Note that Red Hat does not support the use of GFS2 as a single-node file system.
				</p><pre class="literallayout">mkfs.gfs2 -p lock_dlm -t <span class="emphasis"><em>ClusterName:FSName</em></span> -j <span class="emphasis"><em>NumberJournals</em></span> <span class="emphasis"><em>BlockDevice</em></span></pre><p>
					If you prefer, you can create a GFS2 file system by using the <code class="literal command">mkfs</code> command with the <code class="literal">-t</code> parameter specifying a file system of type <code class="literal">gfs2</code>, followed by the GFS2 file system options.
				</p><pre class="literallayout">mkfs -t gfs2 -p lock_dlm -t <span class="emphasis"><em>ClusterName:FSName</em></span> -j <span class="emphasis"><em>NumberJournals</em></span> <span class="emphasis"><em>BlockDevice</em></span></pre><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Improperly specifying the <span class="emphasis"><em>ClusterName:FSName</em></span> parameter may cause file system or lock space corruption.
					</p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">ClusterName</code></span></dt><dd>
								The name of the cluster for which the GFS2 file system is being created.
							</dd><dt><span class="term"><code class="literal">FSName</code></span></dt><dd>
								The file system name, which can be 1 to 16 characters long. The name must be unique for all <code class="literal">lock_dlm</code> file systems over the cluster.
							</dd><dt><span class="term"><code class="literal">NumberJournals</code></span></dt><dd>
								Specifies the number of journals to be created by the <code class="literal command">mkfs.gfs2</code> command. One journal is required for each node that mounts the file system. For GFS2 file systems, more journals can be added later without growing the file system.
							</dd><dt><span class="term"><code class="literal">BlockDevice</code></span></dt><dd>
								Specifies a logical or other block device
							</dd></dl></div><p>
					<a class="xref" href="index.html#tb-table-gfs2-mkfs" title="Table 3.1. Command Options: mkfs.gfs2">Table 3.1, “Command Options: <code class="literal command">mkfs.gfs2</code>”</a> describes the <code class="literal command">mkfs.gfs2</code> command options (flags and parameters).
				</p><div class="table" id="tb-table-gfs2-mkfs"><p class="title"><strong>Table 3.1. Command Options: <code class="literal command">mkfs.gfs2</code></strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140464456962496" scope="col">Flag</th><th align="left" valign="top" id="idm140464456961408" scope="col">Parameter</th><th align="left" valign="top" id="idm140464456960320" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140464456962496"> <p>
									<code class="literal option">-c</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464456961408"> <p>
									<code class="literal">Megabytes</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464456960320"> <p>
									Sets the initial size of each journal’s quota change file to <code class="literal">Megabytes</code>.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464456962496"> <p>
									<code class="literal option">-D</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464456961408"> </td><td align="left" valign="top" headers="idm140464456960320"> <p>
									Enables debugging output.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464456962496"> <p>
									<code class="literal option">-h</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464456961408"> </td><td align="left" valign="top" headers="idm140464456960320"> <p>
									Help. Displays available options.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464456962496"> <p>
									<code class="literal option">-J</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464456961408"> <p>
									<code class="literal">Megabytes</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464456960320"> <p>
									Specifies the size of the journal in megabytes. Default journal size is 128 megabytes. The minimum size is 8 megabytes. Larger journals improve performance, although they use more memory than smaller journals.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464456962496"> <p>
									<code class="literal option">-j</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464456961408"> <p>
									<code class="literal">Number</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464456960320"> <p>
									Specifies the number of journals to be created by the <code class="literal command">mkfs.gfs2</code> command. One journal is required for each node that mounts the file system. If this option is not specified, one journal will be created. For GFS2 file systems, you can add additional journals at a later time without growing the file system.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464456962496"> <p>
									<code class="literal option">-O</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464456961408"> </td><td align="left" valign="top" headers="idm140464456960320"> <p>
									Prevents the <code class="literal command">mkfs.gfs2</code> command from asking for confirmation before writing the file system.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464456962496"> <p>
									<code class="literal option">-p</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464456961408"> <p>
									<code class="literal">LockProtoName</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464456960320"> <p>
									* Specifies the name of the locking protocol to use. Recognized locking protocols include:
								</p>
								 <p>
									* <code class="literal">lock_dlm</code> — The standard locking module, required for a clustered file system.
								</p>
								 <p>
									* <code class="literal">lock_nolock</code> — Used when GFS2 is acting as a local file system (one node only).
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464456962496"> <p>
									<code class="literal option">-q</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464456961408"> </td><td align="left" valign="top" headers="idm140464456960320"> <p>
									Quiet. Do not display anything.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464456962496"> <p>
									<code class="literal option">-r</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464456961408"> <p>
									<code class="literal">Megabytes</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464456960320"> <p>
									Specifies the size of the resource groups in megabytes. The minimum resource group size is 32 megabytes. The maximum resource group size is 2048 megabytes. A large resource group size may increase performance on very large file systems. If this is not specified, <code class="literal command">mkfs.gfs2</code> chooses the resource group size based on the size of the file system: average size file systems will have 256 megabyte resource groups, and bigger file systems will have bigger RGs for better performance.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464456962496"> <p>
									<code class="literal option">-t</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464456961408"> <p>
									<code class="literal">LockTableName</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464456960320"> <p>
									* A unique identifier that specifies the lock table field when you use the <code class="literal">lock_dlm</code> protocol; the <code class="literal">lock_nolock</code> protocol does not use this parameter.
								</p>
								 <p>
									* This parameter has two parts separated by a colon (no spaces) as follows: <code class="literal">ClusterName:FSName</code>.
								</p>
								 <p>
									* <code class="literal">ClusterName</code> is the name of the cluster for which the GFS2 file system is being created; only members of this cluster are permitted to use this file system.
								</p>
								 <p>
									* <code class="literal">FSName</code>, the file system name, can be 1 to 16 characters in length, and the name must be unique among all file systems in the cluster.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464456962496"> <p>
									<code class="literal option">-V</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464456961408"> </td><td align="left" valign="top" headers="idm140464456960320"> <p>
									Displays command version information.
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="proc_create-gfs2-filesystem-creating-gfs2"><div class="titlepage"><div><div><h3 class="title">3.1.2. Creating a GFS2 file system</h3></div></div></div><p>
					The following example creates two GFS2 file systems. For both of these file systems, lock_dlm` is the locking protocol that the file system uses, since this is a clustered file system. Both file systems can be used in the cluster named <code class="literal">alpha</code>.
				</p><p>
					For the first file system, file system name is <code class="literal">mydata1</code>. it contains eight journals and is created on <code class="literal">/dev/vg01/lvol0</code>. For the second file system, the file system name is <code class="literal">mydata2</code>. It contains eight journals and is created on <code class="literal">/dev/vg01/lvol1</code>.
				</p><pre class="literallayout"># <code class="literal">mkfs.gfs2 -p lock_dlm -t alpha:mydata1 -j 8 /dev/vg01/lvol0</code>
# <code class="literal">mkfs.gfs2 -p lock_dlm -t alpha:mydata2 -j 8 /dev/vg01/lvol1</code></pre></section></section><section class="section" id="assembly_mounting-gfs2-filesystem_creating-mounting-gfs2"><div class="titlepage"><div><div><h2 class="title">3.2. Mounting a GFS2 file system</h2></div></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You should always use Pacemaker to manage the GFS2 file system in a production environment rather than manually mounting the file system with a <code class="literal command">mount</code> command, as this may cause issues at system shutdown as described in <a class="link" href="index.html#proc_unmounting-gfs2-filesystem-mounting-gfs2-filesystem" title="3.2.3. Unmounting a GFS2 file system">Unmounting a GFS2 file system</a>.
				</p></div></div><p>
				Before you can mount a GFS2 file system, the file system must exist, the volume where the file system exists must be activated, and the supporting clustering and locking systems must be started. After those requirements have been met, you can mount the GFS2 file system as you would any Linux file system.
			</p><p>
				To manipulate file ACLs, you must mount the file system with the <code class="literal command">-o acl</code> mount option. If a file system is mounted without the <code class="literal command">-o acl</code> mount option, users are allowed to view ACLs (with <code class="literal command">getfacl</code>), but are not allowed to set them (with <code class="literal command">setfacl</code>).
			</p><section class="section" id="proc_mounting-gfs2-filesystem-noptions-mounting-gfs2-filesystem"><div class="titlepage"><div><div><h3 class="title">3.2.1. Mounting a GFS2 file system with no options specified</h3></div></div></div><p>
					In this example, the GFS2 file system on <code class="literal">/dev/vg01/lvol0</code> is mounted on the <code class="literal">/mygfs2</code> directory.
				</p><pre class="literallayout"># <code class="literal">mount /dev/vg01/lvol0 /mygfs2</code></pre></section><section class="section" id="proc_mounting-gfs2-filesystem-withoptions-mounting-gfs2-filesystem"><div class="titlepage"><div><div><h3 class="title">3.2.2. Mounting a GFS2 file system that specifies mount options</h3></div></div></div><p>
					The following is the format for the command to mount a GFS2 file system that specifies mount options.
				</p><pre class="literallayout">mount <span class="emphasis"><em>BlockDevice</em></span> <span class="emphasis"><em>MountPoint</em></span> -o <span class="emphasis"><em>option</em></span></pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">BlockDevice</code></span></dt><dd>
								Specifies the block device where the GFS2 file system resides.
							</dd><dt><span class="term"><code class="literal">MountPoint</code></span></dt><dd>
								Specifies the directory where the GFS2 file system should be mounted.
							</dd></dl></div><p>
					The <code class="literal option">-o option</code> argument consists of GFS2-specific options (see <a class="xref" href="index.html#tb-table-gfs2-mount" title="Table 3.2. GFS2-Specific Mount Options">Table 3.2, “GFS2-Specific Mount Options”</a>) or acceptable standard Linux <code class="literal command">mount -o</code> options, or a combination of both. Multiple <code class="literal">option</code> parameters are separated by a comma and no spaces.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The <code class="literal command">mount</code> command is a Linux system command. In addition to using GFS2-specific options described in this section, you can use other, standard, <code class="literal command">mount</code> command options (for example, <code class="literal option">-r</code>). For information about other Linux <code class="literal command">mount</code> command options, see the Linux <code class="literal command">mount</code> man page.
					</p></div></div><p>
					<a class="xref" href="index.html#tb-table-gfs2-mount" title="Table 3.2. GFS2-Specific Mount Options">Table 3.2, “GFS2-Specific Mount Options”</a> describes the available GFS2-specific <code class="literal option">-o option</code> values that can be passed to GFS2 at mount time.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This table includes descriptions of options that are used with local file systems only. Note, however, that Red Hat does not support the use of GFS2 as a single-node file system. Red Hat will continue to support single-node GFS2 file systems for mounting snapshots of cluster file systems (for example, for backup purposes).
					</p></div></div><div class="table" id="tb-table-gfs2-mount"><p class="title"><strong>Table 3.2. GFS2-Specific Mount Options</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140464448427552" scope="col">Option</th><th align="left" valign="top" id="idm140464448426464" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140464448427552"> <p>
									<code class="literal">acl</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464448426464"> <p>
									Allows manipulating file ACLs. If a file system is mounted without the <code class="literal command">acl</code> mount option, users are allowed to view ACLs (with <code class="literal command">getfacl</code>), but are not allowed to set them (with <code class="literal command">setfacl</code>).
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464448427552"> <p>
									<code class="literal">data=[ordered|writeback]</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464448426464"> <p>
									When <code class="literal">data=ordered</code> is set, the user data modified by a transaction is flushed to the disk before the transaction is committed to disk. This should prevent the user from seeing uninitialized blocks in a file after a crash. When <code class="literal">data=writeback</code> mode is set, the user data is written to the disk at any time after it is dirtied; this does not provide the same consistency guarantee as <code class="literal">ordered</code> mode, but it should be slightly faster for some workloads. The default value is <code class="literal">ordered</code> mode.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464448427552"> <p>
									* <code class="literal">ignore_local_fs</code>
								</p>
								 <p>
									* <code class="literal">Caution:</code> This option should <span class="emphasis"><em>not</em></span> be used when GFS2 file systems are shared.
								</p>
								 </td><td align="left" valign="top" headers="idm140464448426464"> <p>
									Forces GFS2 to treat the file system as a multi-host file system. By default, using <code class="literal">lock_nolock</code> automatically turns on the <code class="literal">localflocks</code> flag.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464448427552"> <p>
									* <code class="literal">localflocks</code>
								</p>
								 <p>
									* <code class="literal">Caution:</code> This option should not be used when GFS2 file systems are shared.
								</p>
								 </td><td align="left" valign="top" headers="idm140464448426464"> <p>
									Tells GFS2 to let the VFS (virtual file system) layer do all flock and fcntl. The <code class="literal">localflocks</code> flag is automatically turned on by <code class="literal">lock_nolock</code>.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464448427552"> <p>
									<code class="literal">lockproto=</code><code class="literal">LockModuleName</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464448426464"> <p>
									Allows the user to specify which locking protocol to use with the file system. If <code class="literal">LockModuleName</code> is not specified, the locking protocol name is read from the file system superblock.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464448427552"> <p>
									<code class="literal">locktable=</code><code class="literal">LockTableName</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464448426464"> <p>
									Allows the user to specify which locking table to use with the file system.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464448427552"> <p>
									<code class="literal">quota=[off/account/on]</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464448426464"> <p>
									Turns quotas on or off for a file system. Setting the quotas to be in the <code class="literal">account</code> state causes the per UID/GID usage statistics to be correctly maintained by the file system; limit and warn values are ignored. The default value is <code class="literal">off</code>.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464448427552"> <p>
									<code class="literal command">errors=panic|withdraw</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464448426464"> <p>
									When <code class="literal">errors=panic</code> is specified, file system errors will cause a kernel panic. When <code class="literal">errors=withdraw</code> is specified, which is the default behavior, file system errors will cause the system to withdraw from the file system and make it inaccessible until the next reboot; in some cases the system may remain running.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464448427552"> <p>
									<code class="literal">discard/nodiscard</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464448426464"> <p>
									Causes GFS2 to generate "discard" I/O requests for blocks that have been freed. These can be used by suitable hardware to implement thin provisioning and similar schemes.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464448427552"> <p>
									<code class="literal">barrier/nobarrier</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464448426464"> <p>
									Causes GFS2 to send I/O barriers when flushing the journal. The default value is <code class="literal">on</code>. This option is automatically turned <code class="literal">off</code> if the underlying device does not support I/O barriers. Use of I/O barriers with GFS2 is highly recommended at all times unless the block device is designed so that it cannot lose its write cache content (for example, if it is on a UPS or it does not have a write cache).
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464448427552"> <p>
									<code class="literal">quota_quantum=<span class="emphasis"><em>secs</em></span></code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464448426464"> <p>
									Sets the number of seconds for which a change in the quota information may sit on one node before being written to the quota file. This is the preferred way to set this parameter. The value is an integer number of seconds greater than zero. The default is 60 seconds. Shorter settings result in faster updates of the lazy quota information and less likelihood of someone exceeding their quota. Longer settings make file system operations involving quotas faster and more efficient.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464448427552"> <p>
									<code class="literal">statfs_quantum=<span class="emphasis"><em>secs</em></span></code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464448426464"> <p>
									Setting <code class="literal">statfs_quantum</code> to 0 is the preferred way to set the slow version of <code class="literal command">statfs</code>. The default value is 30 secs which sets the maximum time period before <code class="literal">statfs</code> changes will be synced to the master <code class="literal">statfs</code> file. This can be adjusted to allow for faster, less accurate <code class="literal">statfs</code> values or slower more accurate values. When this option is set to 0, <code class="literal">statfs</code> will always report the true values.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140464448427552"> <p>
									<code class="literal">statfs_percent=<span class="emphasis"><em>value</em></span></code>
								</p>
								 </td><td align="left" valign="top" headers="idm140464448426464"> <p>
									Provides a bound on the maximum percentage change in the <code class="literal">statfs</code> information on a local basis before it is synced back to the master <code class="literal">statfs</code> file, even if the time period has not expired. If the setting of <code class="literal">statfs_quantum</code> is 0, then this setting is ignored.
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="proc_unmounting-gfs2-filesystem-mounting-gfs2-filesystem"><div class="titlepage"><div><div><h3 class="title">3.2.3. Unmounting a GFS2 file system</h3></div></div></div><p>
					GFS2 file systems that have been mounted manually rather than automatically through Pacemaker will not be known to the system when file systems are unmounted at system shutdown. As a result, the GFS2 resource agent will not unmount the GFS2 file system. After the GFS2 resource agent is shut down, the standard shutdown process kills off all remaining user processes, including the cluster infrastructure, and tries to unmount the file system. This unmount will fail without the cluster infrastructure and the system will hang.
				</p><p>
					To prevent the system from hanging when the GFS2 file systems are unmounted, you should do one of the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Always use Pacemaker to manage the GFS2 file system.
						</li><li class="listitem">
							If a GFS2 file system has been mounted manually with the <code class="literal command">mount</code> command, be sure to unmount the file system manually with the <code class="literal command">umount</code> command before rebooting or shutting down the system.
						</li></ul></div><p>
					If your file system hangs while it is being unmounted during system shutdown under these circumstances, perform a hardware reboot. It is unlikely that any data will be lost since the file system is synced earlier in the shutdown process.
				</p><p>
					The GFS2 file system can be unmounted the same way as any Linux file system, by using the <code class="literal command">umount</code> command.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The <code class="literal command">umount</code> command is a Linux system command. Information about this command can be found in the Linux <code class="literal command">umount</code> command man pages.
					</p></div></div><p>
					Usage
				</p><pre class="literallayout">umount <span class="emphasis"><em>MountPoint</em></span></pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">MountPoint</code></span></dt><dd>
								Specifies the directory where the GFS2 file system is currently mounted.
							</dd></dl></div></section></section><section class="section" id="proc_backing-up-a-gfs2-filesystem-creating-mounting-gfs2"><div class="titlepage"><div><div><h2 class="title">3.3. Backing up a GFS2 file system</h2></div></div></div><p>
				It is important to make regular backups of your GFS2 file system in case of emergency, regardless of the size of your file system. Many system administrators feel safe because they are protected by RAID, multipath, mirroring, snapshots, and other forms of redundancy, but there is no such thing as safe enough.
			</p><p>
				It can be a problem to create a backup since the process of backing up a node or set of nodes usually involves reading the entire file system in sequence. If this is done from a single node, that node will retain all the information in cache until other nodes in the cluster start requesting locks. Running this type of backup program while the cluster is in operation will negatively impact performance.
			</p><p>
				Dropping the caches once the backup is complete reduces the time required by other nodes to regain ownership of their cluster locks/caches. This is still not ideal, however, because the other nodes will have stopped caching the data that they were caching before the backup process began. You can drop caches using the following command after the backup is complete:
			</p><pre class="literallayout">echo -n 3 &gt; /proc/sys/vm/drop_caches</pre><p>
				It is faster if each node in the cluster backs up its own files so that the task is split between the nodes. You might be able to accomplish this with a script that uses the <code class="literal command">rsync</code> command on node-specific directories.
			</p><p>
				Red Hat recommends making a GFS2 backup by creating a hardware snapshot on the SAN, presenting the snapshot to another system, and backing it up there. The backup system should mount the snapshot with <code class="literal command">-o lockproto=lock_nolock</code> since it will not be in a cluster.
			</p></section><section class="section" id="proc_suspending-activity-on-a-gfs2-filesystem-creating-mounting-gfs2"><div class="titlepage"><div><div><h2 class="title">3.4. Suspending activity on a GFS2 file system</h2></div></div></div><p>
				You can suspend write activity to a file system by using the <code class="literal command">dmsetup suspend</code> command. Suspending write activity allows hardware-based device snapshots to be used to capture the file system in a consistent state. The <code class="literal command">dmsetup resume</code> command ends the suspension.
			</p><p>
				The format for the command to suspend activity on a GFS2 file system is as follows.
			</p><pre class="literallayout">dmsetup suspend <span class="emphasis"><em>MountPoint</em></span></pre><p>
				This example suspends writes to file system <code class="literal">/mygfs2</code>.
			</p><pre class="literallayout"># <code class="literal">dmsetup suspend /mygfs2</code></pre><p>
				The format for the command to end suspension of activity on a GFS2 file system is as follows.
			</p><pre class="literallayout">dmsetup resume <span class="emphasis"><em>MountPoint</em></span></pre><p>
				This example ends suspension of writes to file system <code class="literal">/mygfs2</code>.
			</p><pre class="literallayout"># <code class="literal">dmsetup resume /mygfs2</code></pre></section><section class="section" id="proc_growing-gfs2-filesystem-creating-mounting-gfs2"><div class="titlepage"><div><div><h2 class="title">3.5. Growing a GFS2 file system</h2></div></div></div><p>
				The <code class="literal command">gfs2_grow</code> command is used to expand a GFS2 file system after the device where the file system resides has been expanded. Running the <code class="literal command">gfs2_grow</code> command on an existing GFS2 file system fills all spare space between the current end of the file system and the end of the device with a newly initialized GFS2 file system extension. All nodes in the cluster can then use the extra storage space that has been added.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You cannot decrease the size of a GFS2 file system.
				</p></div></div><p>
				The <code class="literal command">gfs2_grow</code> command must be run on a mounted file system. The following procedure increases the size of the GFS2 file system in a cluster that is mounted on the logical volume <code class="literal">shared_vg/shared_lv1</code> with a mount point of <code class="literal">/mnt/gfs2</code>.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Perform a backup of the data on the file system.
					</li><li class="listitem"><p class="simpara">
						If you do not know the logical volume that is used by the file system to be expanded, you can determine this by running the <code class="literal command">df <span class="emphasis"><em>mountpoint</em></span></code> command. This will display the device name in the following format:
					</p><p class="simpara">
						<code class="literal">/dev/mapper/<span class="emphasis"><em>vg</em></span>-<span class="emphasis"><em>lv</em></span></code>
					</p><p class="simpara">
						For example, the device name <code class="literal">/dev/mapper/shared_vg-shared_lv1</code> indicates that the logical volume is <code class="literal">shared_vg/shared_lv1</code>.
					</p></li><li class="listitem"><p class="simpara">
						On one node of the cluster, expand the underlying cluster volume with the <code class="literal command">lvextend</code> command, using the <code class="literal">--lockopt skiplv</code> option to override normal logical volume locking.
					</p><pre class="literallayout"># <code class="literal">lvextend --lockopt skiplv -L+1G shared_vg/shared_lv1</code>
WARNING: skipping LV lock in lvmlockd.
Size of logical volume shared_vg/shared_lv1 changed from 5.00 GiB (1280 extents) to 6.00 GiB (1536 extents).
WARNING: extending LV with a shared lock, other hosts may require LV refresh.
Logical volume shared_vg/shared_lv1 successfully resized.</pre></li><li class="listitem"><p class="simpara">
						If you are running RHEL 8.0, on every additional node of the cluster refresh the logical volume to update the active logical volume on that node. This step is not necessary on systems running RHEL 8.1 and later as the step is automated when the logical volume is extended.
					</p><pre class="literallayout"># <code class="literal">lvchange --refresh shared_vg/shared_lv1</code></pre></li><li class="listitem"><p class="simpara">
						One one node of the cluster, increase the size of the GFS2 file system. Do not extend the file system if the logical volume was not refreshed on all of the nodes, otherwise the file system data may become unavailable throughout the cluster.
					</p><pre class="literallayout"># <code class="literal">gfs2_grow /mnt/gfs2</code>
FS: Mount point:             /mnt/gfs2
FS: Device:                  /dev/mapper/shared_vg-shared_lv1
FS: Size:                    1310719 (0x13ffff)
DEV: Length:                 1572864 (0x180000)
The file system will grow by 1024MB.
gfs2_grow complete.</pre></li><li class="listitem"><p class="simpara">
						Run the <code class="literal command">df</code> command on all nodes to check that the new space is now available in the file system. Note that it may take up to 30 seconds for the the <code class="literal command">df</code> command on all nodes to show the same file system size
					</p><pre class="literallayout"># <code class="literal">df -h /mnt/gfs2</code>
Filesystem                        Size  Used Avail Use% Mounted on
/dev/mapper/shared_vg-shared_lv1  6.0G  4.5G  1.6G  75% /mnt/gfs2</pre></li></ol></div></section><section class="section" id="proc_adding-gfs2-journal-creating-mounting-gfs2"><div class="titlepage"><div><div><h2 class="title">3.6. Adding journals to a GFS2 file system</h2></div></div></div><p>
				GFS2 requires one journal for each node in a cluster that needs to mount the file system. If you add additional nodes to the cluster, you can add journals to a GFS2 file system with the <code class="literal command">gfs2_jadd</code> command. You can add journals to a GFS2 file system dynamically at any point without expanding the underlying logical volume. The <code class="literal command">gfs2_jadd</code> command must be run on a mounted file system, but it needs to be run on only one node in the cluster. All the other nodes sense that the expansion has occurred.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					If a GFS2 file system is full, the <code class="literal command">gfs2_jadd</code> command will fail, even if the logical volume containing the file system has been extended and is larger than the file system. This is because in a GFS2 file system, journals are plain files rather than embedded metadata, so simply extending the underlying logical volume will not provide space for the journals.
				</p></div></div><p>
				Before adding journals to a GFS2 file system, you can find out how many journals the GFS2 file system currently contains with the <code class="literal command">gfs2_edit -p jindex</code> command, as in the following example:
			</p><pre class="literallayout"># <code class="literal">gfs2_edit -p jindex /dev/sasdrives/scratch|grep journal</code>
   3/3 [fc7745eb] 4/25 (0x4/0x19): File    journal0
   4/4 [8b70757d] 5/32859 (0x5/0x805b): File    journal1
   5/5 [127924c7] 6/65701 (0x6/0x100a5): File    journal2</pre><p>
				The format for the basic command to add journals to a GFS2 file system is as follows.
			</p><pre class="literallayout">gfs2_jadd -j <code class="literal">Number MountPoint</code></pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">Number</code></span></dt><dd>
							Specifies the number of new journals to be added.
						</dd><dt><span class="term"><code class="literal">MountPoint</code></span></dt><dd>
							Specifies the directory where the GFS2 file system is mounted.
						</dd></dl></div><p>
				In this example, one journal is added to the file system on the <code class="literal">/mygfs2</code> directory.
			</p><pre class="literallayout">gfs2_jadd -j 1 /mygfs2</pre></section></section><section class="chapter" id="assembly_gfs2-disk-quota-administration-creating-mounting-gfs2"><div class="titlepage"><div><div><h1 class="title">Chapter 4. GFS2 quota management</h1></div></div></div><p>
			File system quotas are used to limit the amount of file system space a user or group can use. A user or group does not have a quota limit until one is set. When a GFS2 file system is mounted with the <code class="literal">quota=on</code> or <code class="literal">quota=account</code> option, GFS2 keeps track of the space used by each user and group even when there are no limits in place. GFS2 updates quota information in a transactional way so system crashes do not require quota usages to be reconstructed.
		</p><p>
			To prevent a performance slowdown, a GFS2 node synchronizes updates to the quota file only periodically. The fuzzy quota accounting can allow users or groups to slightly exceed the set limit. To minimize this, GFS2 dynamically reduces the synchronization period as a hard quota limit is approached.
		</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				GFS2 supports the standard Linux quota facilities. In order to use this you will need to install the <span class="strong strong"><strong><span class="application application">quota</span></strong></span> RPM. This is the preferred way to administer quotas on GFS2 and should be used for all new deployments of GFS2 using quotas. This section documents GFS2 quota management using these facilities.
			</p></div></div><p>
			For more information on disk quotas, see the <code class="literal command">man</code> pages of the following commands:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<code class="literal command">quotacheck</code>
				</li><li class="listitem">
					<code class="literal command">edquota</code>
				</li><li class="listitem">
					<code class="literal command">repquota</code>
				</li><li class="listitem">
					<code class="literal command">quota</code>
				</li></ul></div><section class="section" id="proc_configuring-gfs2-disk-quotas-gfs2-disk-quota-administration"><div class="titlepage"><div><div><h2 class="title">4.1. Configuring GFS2 disk quotas</h2></div></div></div><p>
				To implement disk quotas, use the following steps:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Set up quotas in enforcement or accounting mode.
					</li><li class="listitem">
						Initialize the quota database file with current block usage information.
					</li><li class="listitem">
						Assign quota policies. (In accounting mode, these policies are not enforced.)
					</li></ol></div><p>
				Each of these steps is discussed in detail in the following sections.
			</p><section class="section" id="setting_up_quotas_in_enforcement_or_accounting_mode"><div class="titlepage"><div><div><h3 class="title">4.1.1. Setting up quotas in enforcement or accounting mode</h3></div></div></div><p>
					In GFS2 file systems, quotas are disabled by default. To enable quotas for a file system, mount the file system with the <code class="literal">quota=on</code> option specified.
				</p><p>
					To mount a file system with quotas enabled, specify <code class="literal">quota=on</code> for the <code class="literal">options</code> argument when creating the GFS2 file system resource in a cluster. For example, the following command specifies that the GFS2 <code class="literal">Filesystem</code> resource being created will be mounted with quotas enabled.
				</p><pre class="literallayout"># <code class="literal">pcs resource create gfs2mount Filesystem options="quota=on" device=BLOCKDEVICE directory=MOUNTPOINT fstype=gfs2 clone</code></pre><p>
					It is possible to keep track of disk usage and maintain quota accounting for every user and group without enforcing the limit and warn values. To do this, mount the file system with the <code class="literal">quota=account</code> option specified.
				</p><p>
					To mount a file system with quotas disabled, specify <code class="literal">quota=off</code> for the <code class="literal">options</code> argument when creating the GFS2 file system resource in a cluster.
				</p></section><section class="section" id="creating_the_quota_database_files"><div class="titlepage"><div><div><h3 class="title">4.1.2. Creating the quota database files</h3></div></div></div><p>
					After each quota-enabled file system is mounted, the system is capable of working with disk quotas. However, the file system itself is not yet ready to support quotas. The next step is to run the <code class="literal command">quotacheck</code> command.
				</p><p>
					The <code class="literal command">quotacheck</code> command examines quota-enabled file systems and builds a table of the current disk usage per file system. The table is then used to update the operating system’s copy of disk usage. In addition, the file system’s disk quota files are updated.
				</p><p>
					To create the quota files on the file system, use the <code class="literal option">-u</code> and the <code class="literal option">-g</code> options of the <code class="literal command">quotacheck</code> command; both of these options must be specified for user and group quotas to be initialized. For example, if quotas are enabled for the <code class="literal">/home</code> file system, create the files in the <code class="literal">/home</code> directory:
				</p><pre class="literallayout">quotacheck -ug /home</pre></section><section class="section" id="assigning_quotas_per_user"><div class="titlepage"><div><div><h3 class="title">4.1.3. Assigning quotas per user</h3></div></div></div><p>
					The last step is assigning the disk quotas with the <code class="literal command">edquota</code> command. Note that if you have mounted your file system in accounting mode (with the <code class="literal">quota=account</code> option specified), the quotas are not enforced.
				</p><p>
					To configure the quota for a user, as root in a shell prompt, execute the command:
				</p><pre class="literallayout"># <code class="literal">edquota username</code></pre><p>
					Perform this step for each user who needs a quota. For example, if a quota is enabled for the <code class="literal">/home</code> partition (<code class="literal">/dev/VolGroup00/LogVol02</code> in the example below) and the command <code class="literal command">edquota testuser</code> is executed, the following is shown in the editor configured as the default for the system:
				</p><pre class="literallayout">Disk quotas for user testuser (uid 501):
Filesystem                blocks     soft     hard    inodes   soft   hard
/dev/VolGroup00/LogVol02  440436        0        0</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The text editor defined by the <code class="literal">EDITOR</code> environment variable is used by <code class="literal command">edquota</code>. To change the editor, set the <code class="literal">EDITOR</code> environment variable in your <code class="literal">~/.bash_profile</code> file to the full path of the editor of your choice.
					</p></div></div><p>
					The first column is the name of the file system that has a quota enabled for it. The second column shows how many blocks the user is currently using. The next two columns are used to set soft and hard block limits for the user on the file system.
				</p><p>
					The soft block limit defines the maximum amount of disk space that can be used.
				</p><p>
					The hard block limit is the absolute maximum amount of disk space that a user or group can use. Once this limit is reached, no further disk space can be used.
				</p><p>
					The GFS2 file system does not maintain quotas for inodes, so these columns do not apply to GFS2 file systems and will be blank.
				</p><p>
					If any of the values are set to 0, that limit is not set. In the text editor, change the limits. For example:
				</p><pre class="literallayout">Disk quotas for user testuser (uid 501):
Filesystem                blocks     soft     hard    inodes   soft   hard
/dev/VolGroup00/LogVol02  440436   500000   550000</pre><p>
					To verify that the quota for the user has been set, use the following command:
				</p><pre class="literallayout"># <code class="literal">quota testuser</code></pre><p>
					You can also set quotas from the command line with the <code class="literal">setquota</code> command. For information on the <code class="literal">setquota</code> command, see the <code class="literal">setquota</code>(8) man page.
				</p></section><section class="section" id="assigning_quotas_per_group"><div class="titlepage"><div><div><h3 class="title">4.1.4. Assigning quotas per group</h3></div></div></div><p>
					Quotas can also be assigned on a per-group basis. Note that if you have mounted your file system in accounting mode (with the <code class="literal">account=on</code> option specified), the quotas are not enforced.
				</p><p>
					To set a group quota for the <code class="literal">devel</code> group (the group must exist prior to setting the group quota), use the following command:
				</p><pre class="literallayout"># <code class="literal">edquota -g devel</code></pre><p>
					This command displays the existing quota for the group in the text editor:
				</p><pre class="literallayout">Disk quotas for group devel (gid 505):
Filesystem                blocks    soft     hard    inodes   soft   hard
/dev/VolGroup00/LogVol02  440400       0        0</pre><p>
					The GFS2 file system does not maintain quotas for inodes, so these columns do not apply to GFS2 file systems and will be blank. Modify the limits, then save the file.
				</p><p>
					To verify that the group quota has been set, use the following command:
				</p><pre class="literallayout">$ <code class="literal">quota -g devel</code></pre></section></section><section class="section" id="proc_managing-gfs2-disk-quotas-gfs2-disk-quota-administration"><div class="titlepage"><div><div><h2 class="title">4.2. Managing GFS2 disk Quotas</h2></div></div></div><p>
				If quotas are implemented, they need some maintenance, mostly in the form of watching to see if the quotas are exceeded and making sure the quotas are accurate.
			</p><p>
				If users repeatedly exceed their quotas or consistently reach their soft limits, a system administrator has a few choices to make depending on what type of users they are and how much disk space impacts their work. The administrator can either help the user determine how to use less disk space or increase the user’s disk quota.
			</p><p>
				You can create a disk usage report by running the <code class="literal command">repquota</code> utility. For example, the command <code class="literal command">repquota /home</code> produces this output:
			</p><pre class="literallayout"><span class="strong strong"><strong>*</strong></span> Report for user quotas on device /dev/mapper/VolGroup00-LogVol02
Block grace time: 7days; Inode grace time: 7days
			Block limits			File limits
User		used	soft	hard	grace	used	soft	hard	grace
----------------------------------------------------------------------
root      --      36       0       0              4     0     0
kristin   --     540       0       0            125     0     0
testuser  --  440400  500000  550000          37418     0     0</pre><p>
				To view the disk usage report for all (option <code class="literal option">-a</code>) quota-enabled file systems, use the command:
			</p><pre class="literallayout"># <code class="literal">repquota -a</code></pre><p>
				The <code class="literal">--</code> displayed after each user is a quick way to determine whether the block limits have been exceeded. If the block soft limit is exceeded, a <code class="literal">+</code> appears in place of the first <code class="literal">-</code> in the output. The second <code class="literal">-</code> indicates the inode limit, but GFS2 file systems do not support inode limits so that character will remain as <code class="literal">-</code>. GFS2 file systems do not support a grace period, so the <code class="literal">grace</code> column will remain blank.
			</p><p>
				Note that the <code class="literal command">repquota</code> command is not supported over NFS, irrespective of the underlying file system.
			</p></section><section class="section" id="proc_keeping-gfs2-quotas-accurate-with-quotacheck-gfs2-disk-quota-administration"><div class="titlepage"><div><div><h2 class="title">4.3. Keeping GFS2 disk quotas accurate with the quotacheck command</h2></div></div></div><p>
				If you enable quotas on your file system after a period of time when you have been running with quotas disabled, you should run the <code class="literal command">quotacheck</code> command to create, check, and repair quota files. Additionally, you may want to run the <code class="literal command">quotacheck</code> command if you think your quota files may not be accurate, as may occur when a file system is not unmounted cleanly after a system crash.
			</p><p>
				For more information about the <code class="literal command">quotacheck</code> command, see the <code class="literal command">quotacheck</code> man page.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Run <code class="literal command">quotacheck</code> when the file system is relatively idle on all nodes because disk activity may affect the computed quota values.
				</p></div></div></section><section class="section" id="proc_synchronizing-gfs2-quotas-gfs2-disk-quota-administration"><div class="titlepage"><div><div><h2 class="title">4.4. Synchronizing quotas with the quotasync Command</h2></div></div></div><p>
				GFS2 stores all quota information in its own internal file on disk. A GFS2 node does not update this quota file for every file system write; rather, by default it updates the quota file once every 60 seconds. This is necessary to avoid contention among nodes writing to the quota file, which would cause a slowdown in performance.
			</p><p>
				As a user or group approaches their quota limit, GFS2 dynamically reduces the time between its quota-file updates to prevent the limit from being exceeded. The normal time period between quota synchronizations is a tunable parameter, <code class="literal">quota_quantum</code>. You can change this from its default value of 60 seconds using the <code class="literal">quota_quantum=</code> mount option. <a class="link" href="index.html#tb-table-gfs2-mount" title="Table 3.2. GFS2-Specific Mount Options">Table 25.2. GFS2-Specific Mount Options</a>. The <code class="literal">quota_quantum</code> parameter must be set on each node and each time the file system is mounted. Changes to the <code class="literal command">quota_quantum</code> parameter are not persistent across unmounts. You can update the <code class="literal">quota_quantum</code> value with the <code class="literal command">mount -o remount</code>.
			</p><p>
				You can use the <code class="literal command">quotasync</code> command to synchronize the quota information from a node to the on-disk quota file between the automatic updates performed by GFS2. Usage <span class="strong strong"><strong><span class="application application">Synchronizing Quota Information</span></strong></span>
			</p><pre class="literallayout"># `quotasync [-ug -a|<span class="emphasis"><em>mountpoint</em></span>..a`].</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">u</code></span></dt><dd>
							Sync the user quota files.
						</dd><dt><span class="term"><code class="literal">g</code></span></dt><dd>
							Sync the group quota files
						</dd><dt><span class="term"><code class="literal">a</code></span></dt><dd>
							Sync all file systems that are currently quota-enabled and support sync. When -a is absent, a file system mountpoint should be specified.
						</dd><dt><span class="term"><code class="literal">mountpoint</code></span></dt><dd>
							Specifies the GFS2 file system to which the actions apply.
						</dd></dl></div><p>
				You can tune the time between synchronizations by specifying a <code class="literal">quota-quantum</code> mount option.
			</p><pre class="literallayout"># <code class="literal">mount -o quota_quantum=<span class="emphasis"><em>secs</em></span>,remount <span class="emphasis"><em>BlockDevice</em></span> <span class="emphasis"><em>MountPoint</em></span></code></pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">MountPoint</code></span></dt><dd>
							Specifies the GFS2 file system to which the actions apply.
						</dd><dt><span class="term"><code class="literal">secs</code></span></dt><dd>
							Specifies the new time period between regular quota-file synchronizations by GFS2. Smaller values may increase contention and slow down performance.
						</dd></dl></div><p>
				The following example synchronizes all the cached dirty quotas from the node it is run on to the on-disk quota file for the file system <code class="literal">/mnt/mygfs2</code>.
			</p><pre class="literallayout"># <code class="literal">quotasync -ug /mnt/mygfs2</code></pre><p>
				This following example changes the default time period between regular quota-file updates to one hour (3600 seconds) for file system <code class="literal">/mnt/mygfs2</code> when remounting that file system on logical volume <code class="literal">/dev/volgroup/logical_volume</code>.
			</p><pre class="literallayout"># <code class="literal">mount -o quota_quantum=3600,remount /dev/volgroup/logical_volume /mnt/mygfs2</code></pre></section></section><section class="chapter" id="assembly_gfs2-filesystem-repair-creating-mounting-gfs2"><div class="titlepage"><div><div><h1 class="title">Chapter 5. GFS2 file system repair</h1></div></div></div><p>
			When nodes fail with the file system mounted, file system journaling allows fast recovery. However, if a storage device loses power or is physically disconnected, file system corruption may occur. (Journaling cannot be used to recover from storage subsystem failures.) When that type of corruption occurs, you can recover the GFS2 file system by using the <code class="literal command">fsck.gfs2</code> command.
		</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
				The <code class="literal command">fsck.gfs2</code> command must be run only on a file system that is unmounted from all nodes. When the file system is being managed as a Pacemaker cluster resource, you can disable the file system resource, which unmounts the file system. After running the <code class="literal command">fsck.gfs2</code> command, you enable the file system resource again. The <span class="emphasis"><em>timeout</em></span> value specified with the <code class="literal">--wait</code> option of the <code class="literal command">pcs resource disable</code> indicates a value in seconds.
			</p><pre class="literallayout"># pcs resource disable --wait=<span class="emphasis"><em>timeoutvalue</em></span> <span class="emphasis"><em>resource_id</em></span>
[fsck.gfs2]
# pcs resource enable <span class="emphasis"><em>resource_id</em></span></pre></div></div><p>
			To ensure that <code class="literal command">fsck.gfs2</code> command does not run on a GFS2 file system at boot time, you can set the <code class="literal">run_fsck</code> parameter of the <code class="literal">options</code> argument when creating the GFS2 file system resource in a cluster. Specifying <code class="literal">"run_fsck=no"</code> will indicate that you should not run the <code class="literal command">fsck</code> command.
		</p><section class="section" id="proc_determining-needed-memory-for-fsckgfs2-gfs2-filesystem-repair"><div class="titlepage"><div><div><h2 class="title">5.1. Determing required memory for running fsck.gfs2</h2></div></div></div><p>
				Running the <code class="literal command">fsck.gfs2</code> command may require system memory above and beyond the memory used for the operating system and kernel. Larger file systems in particular may require additional memory to run this command.
			</p><p>
				The following table shows approximate values of memory that may be required to run <code class="literal">fsck.gfs2</code> file systems on GFS2 file systems that are 1TB, 10TB, and 100TB in size with a block size of 4K.
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 67%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140464450339184" scope="col">GFS2 file system size</th><th align="left" valign="top" id="idm140464450338096" scope="col">Approximate memory required to run <code class="literal">fsck.gfs2</code></th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140464450339184"> <p>
								1 TB
							</p>
							 </td><td align="left" valign="top" headers="idm140464450338096"> <p>
								0.16 GB
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464450339184"> <p>
								10 TB
							</p>
							 </td><td align="left" valign="top" headers="idm140464450338096"> <p>
								1.6 GB
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464450339184"> <p>
								100 TB
							</p>
							 </td><td align="left" valign="top" headers="idm140464450338096"> <p>
								16 GB
							</p>
							 </td></tr></tbody></table></div><p>
				Note that a smaller block size for the file system would require a larger amount of memory. For example, GFS2 file systems with a block size of 1K would require four times the amount of memory indicated in this table.
			</p></section><section class="section" id="proc_repairing-a-gfs2-filesystem-gfs2-filesystem-repair"><div class="titlepage"><div><div><h2 class="title">5.2. Repairing a gfs2 filesystem</h2></div></div></div><p>
				The following shows the format of the <code class="literal command">fsck.gfs2</code> command to repair a GFS2 filesystem.
			</p><pre class="literallayout">fsck.gfs2 -y <code class="literal">BlockDevice</code></pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal option">-y</code></span></dt><dd>
							The <code class="literal option">-y</code> flag causes all questions to be answered with <code class="literal">yes</code>. With the <code class="literal option">-y</code> flag specified, the <code class="literal command">fsck.gfs2</code> command does not prompt you for an answer before making changes.
						</dd><dt><span class="term"><code class="literal">BlockDevice</code></span></dt><dd>
							Specifies the block device where the GFS2 file system resides.
						</dd></dl></div><p>
				In this example, the GFS2 file system residing on block device <code class="literal">/dev/testvg/testlv</code> is repaired. All queries to repair are automatically answered with <code class="literal">yes</code>.
			</p><pre class="literallayout"># <code class="literal">fsck.gfs2 -y /dev/testvg/testlv</code>
Initializing fsck
Validating Resource Group index.
Level 1 RG check.
(level 1 passed)
Clearing journals (this may take a while)...
Journals cleared.
Starting pass1
Pass1 complete
Starting pass1b
Pass1b complete
Starting pass1c
Pass1c complete
Starting pass2
Pass2 complete
Starting pass3
Pass3 complete
Starting pass4
Pass4 complete
Starting pass5
Pass5 complete
Writing changes to disk
fsck.gfs2 complete</pre></section></section><section class="chapter" id="assembly_gfs2-performance-creating-mounting-gfs2"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Improving GFS2 performance</h1></div></div></div><p>
			This section provides advice for improving GFS2 peformance.
		</p><p>
			For general recommendations for deploying and upgrading Red Hat Enterprise Linux clusters using the High Availability Add-On and Red Hat Global File System 2 (GFS2) see the article "Red Hat Enterprise Linux Cluster, High Availability, and GFS Deployment Best Practices" on the Red Hat Customer Portal at <a class="link" href="https://access.redhat.com/kb/docs/DOC-40821">https://access.redhat.com/kb/docs/DOC-40821</a>.
		</p><section class="section" id="proc_gfs2-defragment-gfs2-performance"><div class="titlepage"><div><div><h2 class="title">6.1. GFS2 file system defragmentation</h2></div></div></div><p>
				While there is no defragmentation tool for GFS2 on Red Hat Enterprise Linux, you can defragment individual files by identifying them with the <code class="literal">filefrag</code> tool, copying them to temporary files, and renaming the temporary files to replace the originals.
			</p></section><section class="section" id="proc_gfs2-node-locking-gfs2-performance"><div class="titlepage"><div><div><h2 class="title">6.2. GFS2 Node Locking</h2></div></div></div><p>
				In order to get the best performance from a GFS2 file system, it is important to understand some of the basic theory of its operation. A single node file system is implemented alongside a cache, the purpose of which is to eliminate latency of disk accesses when using frequently requested data. In Linux the page cache (and historically the buffer cache) provide this caching function.
			</p><p>
				With GFS2, each node has its own page cache which may contain some portion of the on-disk data. GFS2 uses a locking mechanism called <span class="emphasis"><em>glocks</em></span> (pronounced gee-locks) to maintain the integrity of the cache between nodes. The glock subsystem provides a cache management function which is implemented using the <span class="emphasis"><em>distributed lock manager</em></span> (DLM) as the underlying communication layer.
			</p><p>
				The glocks provide protection for the cache on a per-inode basis, so there is one lock per inode which is used for controlling the caching layer. If that glock is granted in shared mode (DLM lock mode: PR) then the data under that glock may be cached upon one or more nodes at the same time, so that all the nodes may have local access to the data.
			</p><p>
				If the glock is granted in exclusive mode (DLM lock mode: EX) then only a single node may cache the data under that glock. This mode is used by all operations which modify the data (such as the <code class="literal command">write</code> system call).
			</p><p>
				If another node requests a glock which cannot be granted immediately, then the DLM sends a message to the node or nodes which currently hold the glocks blocking the new request to ask them to drop their locks. Dropping glocks can be (by the standards of most file system operations) a long process. Dropping a shared glock requires only that the cache be invalidated, which is relatively quick and proportional to the amount of cached data.
			</p><p>
				Dropping an exclusive glock requires a log flush, and writing back any changed data to disk, followed by the invalidation as per the shared glock.
			</p><p>
				The difference between a single node file system and GFS2, then, is that a single node file system has a single cache and GFS2 has a separate cache on each node. In both cases, latency to access cached data is of a similar order of magnitude, but the latency to access uncached data is much greater in GFS2 if another node has previously cached that same data.
			</p><p>
				Operations such as <code class="literal">read</code> (buffered), <code class="literal">stat,</code> and <code class="literal">readdir</code> only require a shared glock. Operations such as <code class="literal">write</code> (buffered), <code class="literal">mkdir</code>, <code class="literal">rmdir</code>, and <code class="literal">unlink</code> require an exclusive glock. Direct I/O read/write operations require a deferred glock if no allocation is taking place, or an exclusive glock if the write requires an allocation (that is, extending the file, or hole filling).
			</p><p>
				There are two main performance considerations which follow from this. First, read-only operations parallelize extremely well across a cluster, since they can run independently on every node. Second, operations requiring an exclusive glock can reduce performance, if there are multiple nodes contending for access to the same inode(s). Consideration of the working set on each node is thus an important factor in GFS2 file system performance such as when, for example, you perform a file system backup, as described in <a class="link" href="index.html#proc_backing-up-a-gfs2-filesystem-creating-mounting-gfs2" title="3.3. Backing up a GFS2 file system">Backing up a GFS2 file system</a>.
			</p><p>
				A further consequence of this is that we recommend the use of the <code class="literal">noatime</code> or <code class="literal">nodiratime</code> mount option with GFS2 whenever possible, with the preference for <code class="literal">noatime</code> where the application allows for this. This prevents reads from requiring exclusive locks to update the <code class="literal">atime</code> timestamp.
			</p><p>
				For users who are concerned about the working set or caching efficiency, GFS2 provides tools that allow you to monitor the performance of a GFS2 file system: Performance Co-Pilot and GFS2 tracepoints.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Due to the way in which GFS2’s caching is implemented the best performance is obtained when either of the following takes place:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							An inode is used in a read-only fashion across all nodes.
						</li><li class="listitem">
							An inode is written or modified from a single node only.
						</li></ul></div><p>
					Note that inserting and removing entries from a directory during file creation and deletion counts as writing to the directory inode.
				</p><p>
					It is possible to break this rule provided that it is broken relatively infrequently. Ignoring this rule too often will result in a severe performance penalty.
				</p><p>
					If you <code class="literal command">mmap</code>() a file on GFS2 with a read/write mapping, but only read from it, this only counts as a read.
				</p><p>
					If you do not set the <code class="literal">noatime</code> <code class="literal command">mount</code> parameter, then reads will also result in writes to update the file timestamps. We recommend that all GFS2 users should mount with <code class="literal">noatime</code> unless they have a specific requirement for <code class="literal">atime</code>.
				</p></div></div></section><section class="section" id="con_posix-locking-issues-gfs2-performance"><div class="titlepage"><div><div><h2 class="title">6.3. Issues with Posix locking</h2></div></div></div><p>
				When using Posix locking, you should take the following into account:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Use of Flocks will yield faster processing than use of Posix locks.
					</li><li class="listitem">
						Programs using Posix locks in GFS2 should avoid using the <code class="literal">GETLK</code> function since, in a clustered environment, the process ID may be for a different node in the cluster.
					</li></ul></div></section><section class="section" id="con_troubleshooting-gfs2-performance-gfs2-performance"><div class="titlepage"><div><div><h2 class="title">6.4. Performance tuning with GFS2</h2></div></div></div><p>
				It is usually possible to alter the way in which a troublesome application stores its data in order to gain a considerable performance advantage.
			</p><p>
				A typical example of a troublesome application is an email server. These are often laid out with a spool directory containing files for each user (<code class="literal">mbox</code>), or with a directory for each user containing a file for each message (<code class="literal">maildir</code>). When requests arrive over IMAP, the ideal arrangement is to give each user an affinity to a particular node. That way their requests to view and delete email messages will tend to be served from the cache on that one node. Obviously if that node fails, then the session can be restarted on a different node.
			</p><p>
				When mail arrives by means of SMTP, then again the individual nodes can be set up so as to pass a certain user’s mail to a particular node by default. If the default node is not up, then the message can be saved directly into the user’s mail spool by the receiving node. Again this design is intended to keep particular sets of files cached on just one node in the normal case, but to allow direct access in the case of node failure.
			</p><p>
				This setup allows the best use of GFS2’s page cache and also makes failures transparent to the application, whether <code class="literal">imap</code> or <code class="literal">smtp</code>.
			</p><p>
				Backup is often another tricky area. Again, if it is possible it is greatly preferable to back up the working set of each node directly from the node which is caching that particular set of inodes. If you have a backup script which runs at a regular point in time, and that seems to coincide with a spike in the response time of an application running on GFS2, then there is a good chance that the cluster may not be making the most efficient use of the page cache.
			</p><p>
				Obviously, if you are in the position of being able to stop the application in order to perform a backup, then this will not be a problem. On the other hand, if a backup is run from just one node, then after it has completed a large portion of the file system will be cached on that node, with a performance penalty for subsequent accesses from other nodes. This can be mitigated to a certain extent by dropping the VFS page cache on the backup node after the backup has completed with following command:
			</p><pre class="literallayout">echo -n 3 &gt;/proc/sys/vm/drop_caches</pre><p>
				However this is not as good a solution as taking care to ensure the working set on each node is either shared, mostly read-only across the cluster, or accessed largely from a single node.
			</p></section><section class="section" id="con_gfs2-lockdump-gfs2-performance"><div class="titlepage"><div><div><h2 class="title">6.5. Troubleshooting GFS2 performance with the GFS2 lock dump</h2></div></div></div><p>
				If your cluster performance is suffering because of inefficient use of GFS2 caching, you may see large and increasing I/O wait times. You can make use of GFS2’s lock dump information to determine the cause of the problem.
			</p><p>
				This section provides an overview of the GFS2 lock dump.
			</p><p>
				The GFS2 lock dump information can be gathered from the <code class="literal">debugfs</code> file which can be found at the following path name, assuming that <code class="literal">debugfs</code> is mounted on <code class="literal">/sys/kernel/debug/</code>:
			</p><pre class="literallayout">/sys/kernel/debug/gfs2/<span class="emphasis"><em>fsname</em></span>/glocks</pre><p>
				The content of the file is a series of lines. Each line starting with G: represents one glock, and the following lines, indented by a single space, represent an item of information relating to the glock immediately before them in the file.
			</p><p>
				The best way to use the <code class="literal">debugfs</code> file is to use the <code class="literal command">cat</code> command to take a copy of the complete content of the file (it might take a long time if you have a large amount of RAM and a lot of cached inodes) while the application is experiencing problems, and then looking through the resulting data at a later date.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					It can be useful to make two copies of the <code class="literal">debugfs</code> file, one a few seconds or even a minute or two after the other. By comparing the holder information in the two traces relating to the same glock number, you can tell whether the workload is making progress (it is just slow) or whether it has become stuck (which is always a bug and should be reported to Red Hat support immediately).
				</p></div></div><p>
				Lines in the <code class="literal">debugfs</code> file starting with H: (holders) represent lock requests either granted or waiting to be granted. The flags field on the holders line f: shows which: The 'W' flag refers to a waiting request, the 'H' flag refers to a granted request. The glocks which have large numbers of waiting requests are likely to be those which are experiencing particular contention.
			</p><p>
				<a class="xref" href="index.html#tb-glock-flags" title="Table 6.1. Glock flags">Table 6.1, “Glock flags”</a> shows the meanings of the different glock flags and <a class="xref" href="index.html#tb-glock-holderflags" title="Table 6.2. Glock holder flags">Table 6.2, “Glock holder flags”</a> shows the meanings of the different glock holder flags.
			</p><div class="table" id="tb-glock-flags"><p class="title"><strong>Table 6.1. Glock flags</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140464449277200" scope="col">Flag</th><th align="left" valign="top" id="idm140464449276112" scope="col">Name</th><th align="left" valign="top" id="idm140464449275024" scope="col">Meaning</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140464449277200"> <p>
								b
							</p>
							 </td><td align="left" valign="top" headers="idm140464449276112"> <p>
								Blocking
							</p>
							 </td><td align="left" valign="top" headers="idm140464449275024"> <p>
								Valid when the locked flag is set, and indicates that the operation that has been requested from the DLM may block. This flag is cleared for demotion operations and for "try" locks. The purpose of this flag is to allow gathering of stats of the DLM response time independent from the time taken by other nodes to demote locks.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449277200"> <p>
								d
							</p>
							 </td><td align="left" valign="top" headers="idm140464449276112"> <p>
								Pending demote
							</p>
							 </td><td align="left" valign="top" headers="idm140464449275024"> <p>
								A deferred (remote) demote request
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449277200"> <p>
								D
							</p>
							 </td><td align="left" valign="top" headers="idm140464449276112"> <p>
								Demote
							</p>
							 </td><td align="left" valign="top" headers="idm140464449275024"> <p>
								A demote request (local or remote)
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449277200"> <p>
								f
							</p>
							 </td><td align="left" valign="top" headers="idm140464449276112"> <p>
								Log flush
							</p>
							 </td><td align="left" valign="top" headers="idm140464449275024"> <p>
								The log needs to be committed before releasing this glock
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449277200"> <p>
								F
							</p>
							 </td><td align="left" valign="top" headers="idm140464449276112"> <p>
								Frozen
							</p>
							 </td><td align="left" valign="top" headers="idm140464449275024"> <p>
								Replies from remote nodes ignored - recovery is in progress. This flag is not related to file system freeze, which uses a different mechanism, but is used only in recovery.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449277200"> <p>
								i
							</p>
							 </td><td align="left" valign="top" headers="idm140464449276112"> <p>
								Invalidate in progress
							</p>
							 </td><td align="left" valign="top" headers="idm140464449275024"> <p>
								In the process of invalidating pages under this glock
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449277200"> <p>
								I
							</p>
							 </td><td align="left" valign="top" headers="idm140464449276112"> <p>
								Initial
							</p>
							 </td><td align="left" valign="top" headers="idm140464449275024"> <p>
								Set when DLM lock is associated with this glock
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449277200"> <p>
								l
							</p>
							 </td><td align="left" valign="top" headers="idm140464449276112"> <p>
								Locked
							</p>
							 </td><td align="left" valign="top" headers="idm140464449275024"> <p>
								The glock is in the process of changing state
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449277200"> <p>
								L
							</p>
							 </td><td align="left" valign="top" headers="idm140464449276112"> <p>
								LRU
							</p>
							 </td><td align="left" valign="top" headers="idm140464449275024"> <p>
								Set when the glock is on the LRU list
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449277200"> <p>
								o
							</p>
							 </td><td align="left" valign="top" headers="idm140464449276112"> <p>
								Object
							</p>
							 </td><td align="left" valign="top" headers="idm140464449275024"> <p>
								Set when the glock is associated with an object (that is, an inode for type 2 glocks, and a resource group for type 3 glocks)
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449277200"> <p>
								p
							</p>
							 </td><td align="left" valign="top" headers="idm140464449276112"> <p>
								Demote in progress
							</p>
							 </td><td align="left" valign="top" headers="idm140464449275024"> <p>
								The glock is in the process of responding to a demote request
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449277200"> <p>
								q
							</p>
							 </td><td align="left" valign="top" headers="idm140464449276112"> <p>
								Queued
							</p>
							 </td><td align="left" valign="top" headers="idm140464449275024"> <p>
								Set when a holder is queued to a glock, and cleared when the glock is held, but there are no remaining holders. Used as part of the algorithm the calculates the minimum hold time for a glock.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449277200"> <p>
								r
							</p>
							 </td><td align="left" valign="top" headers="idm140464449276112"> <p>
								Reply pending
							</p>
							 </td><td align="left" valign="top" headers="idm140464449275024"> <p>
								Reply received from remote node is awaiting processing
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449277200"> <p>
								y
							</p>
							 </td><td align="left" valign="top" headers="idm140464449276112"> <p>
								Dirty
							</p>
							 </td><td align="left" valign="top" headers="idm140464449275024"> <p>
								Data needs flushing to disk before releasing this glock
							</p>
							 </td></tr></tbody></table></div></div><div class="table" id="tb-glock-holderflags"><p class="title"><strong>Table 6.2. Glock holder flags</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140464447051440" scope="col">Flag</th><th align="left" valign="top" id="idm140464447050352" scope="col">Name</th><th align="left" valign="top" id="idm140464447049264" scope="col">Meaning</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140464447051440"> <p>
								a
							</p>
							 </td><td align="left" valign="top" headers="idm140464447050352"> <p>
								Async
							</p>
							 </td><td align="left" valign="top" headers="idm140464447049264"> <p>
								Do not wait for glock result (will poll for result later)
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447051440"> <p>
								A
							</p>
							 </td><td align="left" valign="top" headers="idm140464447050352"> <p>
								Any
							</p>
							 </td><td align="left" valign="top" headers="idm140464447049264"> <p>
								Any compatible lock mode is acceptable
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447051440"> <p>
								c
							</p>
							 </td><td align="left" valign="top" headers="idm140464447050352"> <p>
								No cache
							</p>
							 </td><td align="left" valign="top" headers="idm140464447049264"> <p>
								When unlocked, demote DLM lock immediately
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447051440"> <p>
								e
							</p>
							 </td><td align="left" valign="top" headers="idm140464447050352"> <p>
								No expire
							</p>
							 </td><td align="left" valign="top" headers="idm140464447049264"> <p>
								Ignore subsequent lock cancel requests
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447051440"> <p>
								E
							</p>
							 </td><td align="left" valign="top" headers="idm140464447050352"> <p>
								exact
							</p>
							 </td><td align="left" valign="top" headers="idm140464447049264"> <p>
								Must have exact lock mode
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447051440"> <p>
								F
							</p>
							 </td><td align="left" valign="top" headers="idm140464447050352"> <p>
								First
							</p>
							 </td><td align="left" valign="top" headers="idm140464447049264"> <p>
								Set when holder is the first to be granted for this lock
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447051440"> <p>
								H
							</p>
							 </td><td align="left" valign="top" headers="idm140464447050352"> <p>
								Holder
							</p>
							 </td><td align="left" valign="top" headers="idm140464447049264"> <p>
								Indicates that requested lock is granted
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447051440"> <p>
								p
							</p>
							 </td><td align="left" valign="top" headers="idm140464447050352"> <p>
								Priority
							</p>
							 </td><td align="left" valign="top" headers="idm140464447049264"> <p>
								Enqueue holder at the head of the queue
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447051440"> <p>
								t
							</p>
							 </td><td align="left" valign="top" headers="idm140464447050352"> <p>
								Try
							</p>
							 </td><td align="left" valign="top" headers="idm140464447049264"> <p>
								A "try" lock
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447051440"> <p>
								T
							</p>
							 </td><td align="left" valign="top" headers="idm140464447050352"> <p>
								Try 1CB
							</p>
							 </td><td align="left" valign="top" headers="idm140464447049264"> <p>
								A "try" lock that sends a callback
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447051440"> <p>
								W
							</p>
							 </td><td align="left" valign="top" headers="idm140464447050352"> <p>
								Wait
							</p>
							 </td><td align="left" valign="top" headers="idm140464447049264"> <p>
								Set while waiting for request to complete
							</p>
							 </td></tr></tbody></table></div></div><p>
				Having identified a glock which is causing a problem, the next step is to find out which inode it relates to. The glock number (n: on the G: line) indicates this. It is of the form <span class="emphasis"><em>type</em></span>/<span class="emphasis"><em>number</em></span> and if <span class="emphasis"><em>type</em></span> is 2, then the glock is an inode glock and the <span class="emphasis"><em>number</em></span> is an inode number. To track down the inode, you can then run <code class="literal command">find -inum <span class="emphasis"><em>number</em></span></code> where <span class="emphasis"><em>number</em></span> is the inode number converted from the hex format in the glocks file into decimal.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					If you run the <code class="literal command">find</code> command on a file system when it is experiencing lock contention, you are likely to make the problem worse. It is a good idea to stop the application before running the <code class="literal command">find</code> command when you are looking for contended inodes.
				</p></div></div><p>
				<a class="xref" href="index.html#tb-glock-types" title="Table 6.3. Glock types">Table 6.3, “Glock types”</a> shows the meanings of the different glock types.
			</p><div class="table" id="tb-glock-types"><p class="title"><strong>Table 6.3. Glock types</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140464445678720" scope="col">Type number</th><th align="left" valign="top" id="idm140464445677632" scope="col">Lock type</th><th align="left" valign="top" id="idm140464445676544" scope="col">Use</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140464445678720"> <p>
								1
							</p>
							 </td><td align="left" valign="top" headers="idm140464445677632"> <p>
								Trans
							</p>
							 </td><td align="left" valign="top" headers="idm140464445676544"> <p>
								Transaction lock
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464445678720"> <p>
								2
							</p>
							 </td><td align="left" valign="top" headers="idm140464445677632"> <p>
								Inode
							</p>
							 </td><td align="left" valign="top" headers="idm140464445676544"> <p>
								Inode metadata and data
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464445678720"> <p>
								3
							</p>
							 </td><td align="left" valign="top" headers="idm140464445677632"> <p>
								Rgrp
							</p>
							 </td><td align="left" valign="top" headers="idm140464445676544"> <p>
								Resource group metadata
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464445678720"> <p>
								4
							</p>
							 </td><td align="left" valign="top" headers="idm140464445677632"> <p>
								Meta
							</p>
							 </td><td align="left" valign="top" headers="idm140464445676544"> <p>
								The superblock
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464445678720"> <p>
								5
							</p>
							 </td><td align="left" valign="top" headers="idm140464445677632"> <p>
								Iopen
							</p>
							 </td><td align="left" valign="top" headers="idm140464445676544"> <p>
								Inode last closer detection
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464445678720"> <p>
								6
							</p>
							 </td><td align="left" valign="top" headers="idm140464445677632"> <p>
								Flock
							</p>
							 </td><td align="left" valign="top" headers="idm140464445676544"> <p>
								<code class="literal command">flock</code>(2) syscall
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464445678720"> <p>
								8
							</p>
							 </td><td align="left" valign="top" headers="idm140464445677632"> <p>
								Quota
							</p>
							 </td><td align="left" valign="top" headers="idm140464445676544"> <p>
								Quota operations
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464445678720"> <p>
								9
							</p>
							 </td><td align="left" valign="top" headers="idm140464445677632"> <p>
								Journal
							</p>
							 </td><td align="left" valign="top" headers="idm140464445676544"> <p>
								Journal mutex
							</p>
							 </td></tr></tbody></table></div></div><p>
				If the glock that was identified was of a different type, then it is most likely to be of type 3: (resource group). If you see significant numbers of processes waiting for other types of glock under normal loads, report this to Red Hat support.
			</p><p>
				If you do see a number of waiting requests queued on a resource group lock there may be a number of reasons for this. One is that there are a large number of nodes compared to the number of resource groups in the file system. Another is that the file system may be very nearly full (requiring, on average, longer searches for free blocks). The situation in both cases can be improved by adding more storage and using the <code class="literal command">gfs2_grow</code> command to expand the file system.
			</p></section><section class="section" id="enabling-data-journaling-gfs2-performance"><div class="titlepage"><div><div><h2 class="title">6.6. Enabling data journaling</h2></div></div></div><p>
				Ordinarily, GFS2 writes only metadata to its journal. File contents are subsequently written to disk by the kernel’s periodic sync that flushes file system buffers. An <code class="literal command">fsync()</code> call on a file causes the file’s data to be written to disk immediately. The call returns when the disk reports that all data is safely written.
			</p><p>
				Data journaling can result in a reduced <code class="literal command">fsync()</code> time for very small files because the file data is written to the journal in addition to the metadata. This advantage rapidly reduces as the file size increases. Writing to medium and larger files will be much slower with data journaling turned on.
			</p><p>
				Applications that rely on <code class="literal command">fsync()</code> to sync file data may see improved performance by using data journaling. Data journaling can be enabled automatically for any GFS2 files created in a flagged directory (and all its subdirectories). Existing files with zero length can also have data journaling turned on or off.
			</p><p>
				Enabling data journaling on a directory sets the directory to "inherit jdata", which indicates that all files and directories subsequently created in that directory are journaled. You can enable and disable data journaling on a file with the <code class="literal command">chattr</code> command.
			</p><p>
				The following commands enable data journaling on the <code class="literal">/mnt/gfs2/gfs2_dir/newfile</code> file and then check whether the flag has been set properly.
			</p><pre class="literallayout"># <code class="literal">chattr +j /mnt/gfs2/gfs2_dir/newfile</code>
# <code class="literal">lsattr /mnt/gfs2/gfs2_dir</code>
---------j--- /mnt/gfs2/gfs2_dir/newfile</pre><p>
				The following commands disable data journaling on the <code class="literal">/mnt/gfs2/gfs2_dir/newfile</code> file and then check whether the flag has been set properly.
			</p><pre class="literallayout"># <code class="literal">chattr -j /mnt/gfs2/gfs2_dir/newfile</code>
# <code class="literal">lsattr /mnt/gfs2/gfs2_dir</code>
------------- /mnt/gfs2/gfs2_dir/newfile</pre><p>
				You can also use the <code class="literal command">chattr</code> command to set the <code class="literal">j</code> flag on a directory. When you set this flag for a directory, all files and directories subsequently created in that directory are journaled. The following set of commands sets the <code class="literal">j</code> flag on the <code class="literal">gfs2_dir</code> directory, then checks whether the flag has been set properly. After this, the commands create a new file called <code class="literal">newfile</code> in the <code class="literal">/mnt/gfs2/gfs2_dir</code> directory and then check whether the <code class="literal">j</code> flag has been set for the file. Since the <code class="literal">j</code> flag is set for the directory, then <code class="literal">newfile</code> should also have journaling enabled.
			</p><pre class="literallayout"># <code class="literal">chattr -j /mnt/gfs2/gfs2_dir</code>
# <code class="literal">lsattr /mnt/gfs2</code>
---------j--- /mnt/gfs2/gfs2_dir
# <code class="literal">touch /mnt/gfs2/gfs2_dir/newfile</code>
# <code class="literal">lsattr /mnt/gfs2/gfs2_dir</code>
---------j--- /mnt/gfs2/gfs2_dir/newfile</pre></section></section><section class="chapter" id="assembly_troubleshooting-gfs2-creating-mounting-gfs2"><div class="titlepage"><div><div><h1 class="title">Chapter 7. Diagnosing and correcting problems with GFS2 file systems</h1></div></div></div><p>
			This section provides information about some common GFS2 issues and how to address them.
		</p><section class="section" id="ref_gfs2-filesystem-unavailable-troubleshooting-gfs2"><div class="titlepage"><div><div><h2 class="title">7.1. GFS2 filesystem unavailable to a node (the GFS2 withdraw function)</h2></div></div></div><p>
				The GFS2 <span class="emphasis"><em>withdraw</em></span> function is a data integrity feature of the GFS2 file system that prevents potential file system damage due to faulty hardware or kernel software. If the GFS2 kernel module detects an inconsistency while using a GFS2 file system on any given cluster node, it withdraws from the file system, leaving it unavailable to that node until it is unmounted and remounted (or the machine detecting the problem is rebooted). All other mounted GFS2 file systems remain fully functional on that node. (The GFS2 withdraw function is less severe than a kernel panic, which causes the node to be fenced.)
			</p><p>
				The main categories of inconsistency that can cause a GFS2 withdraw are as follows:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Inode consistency error
					</li><li class="listitem">
						Resource group consistency error
					</li><li class="listitem">
						Journal consistency error
					</li><li class="listitem">
						Magic number metadata consistency error
					</li><li class="listitem">
						Metadata type consistency error
					</li></ul></div><p>
				An example of an inconsistency that would cause a GFS2 withdraw is an incorrect block count for a file’s inode. When GFS2 deletes a file, it systematically removes all the data and metadata blocks referenced by that file. When done, it checks the inode’s block count. If the block count is not 1 (meaning all that is left is the disk inode itself), that indicates a file system inconsistency, since the inode’s block count did not match the actual blocks used for the file.
			</p><p>
				In many cases, the problem may have been caused by faulty hardware (faulty memory, motherboard, HBA, disk drives, cables, and so forth). It may also have been caused by a kernel bug (another kernel module accidentally overwriting GFS2’s memory), or actual file system damage (caused by a GFS2 bug).
			</p><p>
				In most cases, the best way to recover from a withdrawn GFS2 file system is to reboot or fence the node. The withdrawn GFS2 file system will give you an opportunity to relocate services to another node in the cluster. After services are relocated you can reboot the node or force a fence with this command.
			</p><pre class="literallayout"># <code class="literal">pcs stonith fence <span class="emphasis"><em>node</em></span></code></pre><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Do not try to unmount and remount the file system manually with the <code class="literal command">umount</code> and <code class="literal command">mount</code> commands. You must use the <code class="literal command">pcs</code> command, otherwise Pacemaker will detect the file system service has disappeared and fence the node.
				</p></div></div><p>
				The consistency problem that caused the withdraw may make stopping the file system service impossible as it may cause the system to hang.
			</p><p>
				If the problem persists after a remount, you should stop the file system service to unmount the file system from all nodes in the cluster, then perform a file system check with the fsck.gfs2 command before restarting the service with the following procedure.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Reboot the affected node.
					</li><li class="listitem"><p class="simpara">
						Disable the non-clone file system service in Pacemaker to unmount the file system from every node in the cluster.
					</p><pre class="literallayout"># <code class="literal">pcs resource disable --wait=100 mydata_fs</code></pre></li><li class="listitem"><p class="simpara">
						From one node of the cluster, run the <code class="literal command">fsck.gfs2</code> command on the file system device to check for and repair any file system damage.
					</p><pre class="literallayout"># <code class="literal">fsck.gfs2 -y /dev/vg_mydata/mydata &gt; /tmp/fsck.out</code></pre></li><li class="listitem"><p class="simpara">
						Remount the GFS2 file system from all nodes by re-enabling the file system service:
					</p><pre class="literallayout"># <code class="literal">pcs resource enable --wait=100 mydata_fs</code></pre></li></ol></div><p>
				You can override the GFS2 withdraw function by mounting the file system with the <code class="literal">-o errors=panic</code> option specified in the file system service.
			</p><pre class="literallayout"># <code class="literal">pcs resource update mydata_fs “options=noatime,errors=panic”</code></pre><p>
				When this option is specified, any errors that would normally cause the system to withdraw force a kernel panic instead. This stops the node’s communications, which causes the node to be fenced. This is especially useful for clusters that are left unattended for long periods of time without monitoring or intervention.
			</p><p>
				Internally, the GFS2 withdraw function works by disconnecting the locking protocol to ensure that all further file system operations result in I/O errors. As a result, when the withdraw occurs, it is normal to see a number of I/O errors from the device mapper device reported in the system logs.
			</p></section><section class="section" id="ref_gfs2-filesystem-hangs-one-node-troubleshooting-gfs2"><div class="titlepage"><div><div><h2 class="title">7.2. GFS2 file system hangs and requires reboot of one node</h2></div></div></div><p>
				If your GFS2 file system hangs and does not return commands run against it, but rebooting one specific node returns the system to normal, this may be indicative of a locking problem or bug. Should this occur, gather GFS2 data during one of these occurences and open a support ticket with Red Hat Support, as described in <a class="link" href="index.html#proc_gathering-gfs2-data-troubleshooting-gfs2" title="7.6. Gathering GFS2 data for troubleshooting">Gathering GFS2 data for troubleshooting</a>.
			</p></section><section class="section" id="ref_gfs2-filesystem-hangs-all-nodes-troubleshooting-gfs2"><div class="titlepage"><div><div><h2 class="title">7.3. GFS2 file system hangs and requires reboot of all nodes</h2></div></div></div><p>
				If your GFS2 file system hangs and does not return commands run against it, requiring that you reboot all nodes in the cluster before using it, check for the following issues.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You may have had a failed fence. GFS2 file systems will freeze to ensure data integrity in the event of a failed fence. Check the messages logs to see if there are any failed fences at the time of the hang. Ensure that fencing is configured correctly.
					</li><li class="listitem"><p class="simpara">
						The GFS2 file system may have withdrawn. Check through the messages logs for the word <code class="literal">withdraw</code> and check for any messages and call traces from GFS2 indicating that the file system has been withdrawn. A withdraw is indicative of file system corruption, a storage failure, or a bug. At the earliest time when it is convenient to unmount the file system, you should perform the following procedure:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Reboot the node on which the withdraw occurred.
							</p><pre class="literallayout"># <code class="literal">/sbin/reboot</code></pre></li><li class="listitem"><p class="simpara">
								Stop the file system resource to unmount the GFS2 file system on all nodes.
							</p><pre class="literallayout"># <code class="literal">pcs resource disable --wait=100 mydata_fs</code></pre></li><li class="listitem"><p class="simpara">
								Capture the metadata with the <code class="literal command">gfs2_edit savemeta…​</code> command. You should ensure that there is sufficient space for the file, which in some cases may be large. In this example, the metadata is saved to a file in the <code class="literal">/root</code> directory.
							</p><pre class="literallayout"># <code class="literal">gfs2_edit savemeta /dev/vg_mydata/mydata /root/gfs2metadata.gz</code></pre></li><li class="listitem"><p class="simpara">
								Update the <code class="literal">gfs2-utils</code> package.
							</p><pre class="literallayout"># <code class="literal">sudo yum update gfs2-utils</code></pre></li><li class="listitem"><p class="simpara">
								On one node, run the <code class="literal command">fsck.gfs2</code> command on the file system to ensure file system integrity and repair any damage.
							</p><pre class="literallayout"># <code class="literal">fsck.gfs2 -y /dev/vg_mydata/mydata &gt; /tmp/fsck.out</code></pre></li><li class="listitem"><p class="simpara">
								After the <code class="literal command">fsck.gfs2</code> command has completed, re-enable the file system resource to return it to service:
							</p><pre class="literallayout"># <code class="literal">pcs resource enable --wait=100 mydata_fs</code></pre></li><li class="listitem"><p class="simpara">
								Open a support ticket with Red Hat Support. Inform them you experienced a GFS2 withdraw and provide logs and the debugging information generated by the <code class="literal command">sosreports</code> and <code class="literal command">gfs2_edit savemeta</code> commands.
							</p><p class="simpara">
								In some instances of a GFS2 withdraw, commands can hang that are trying to access the file system or its block device. In these cases a hard reboot is required to reboot the cluster.
							</p><p class="simpara">
								For information on the GFS2 withdraw function, see <a class="link" href="index.html#ref_gfs2-filesystem-unavailable-troubleshooting-gfs2" title="7.1. GFS2 filesystem unavailable to a node (the GFS2 withdraw function)">GFS2 filesystem unavailable to a node (the GFS2 withdraw function)</a>.
							</p></li></ol></div></li><li class="listitem">
						This error may be indicative of a locking problem or bug. Gather data during one of these occurrences and open a support ticket with Red Hat Support, as described in <a class="link" href="index.html#proc_gathering-gfs2-data-troubleshooting-gfs2" title="7.6. Gathering GFS2 data for troubleshooting">Gathering GFS2 data for troubleshooting</a>.
					</li></ul></div></section><section class="section" id="ref_gfs2-nomount-new-cluster-node-troubleshooting-gfs2"><div class="titlepage"><div><div><h2 class="title">7.4. GFS2 file system does not mount on newly added cluster node</h2></div></div></div><p>
				If you add a new node to a cluster and find that you cannot mount your GFS2 file system on that node, you may have fewer journals on the GFS2 file system than nodes attempting to access the GFS2 file system. You must have one journal per GFS2 host you intend to mount the file system on (with the exception of GFS2 file systems mounted with the <code class="literal">spectator</code> mount option set, since these do not require a journal). You can add journals to a GFS2 file system with the <code class="literal command">gfs2_jadd</code> command. <a class="link" href="index.html#proc_adding-gfs2-journal-creating-mounting-gfs2" title="3.6. Adding journals to a GFS2 file system">Adding journals to a GFS2 file system</a>.
			</p></section><section class="section" id="ref_gfs2-used-space-empty-filesystem-troubleshooting-gfs2"><div class="titlepage"><div><div><h2 class="title">7.5. Space indicated as used in empty file system</h2></div></div></div><p>
				If you have an empty GFS2 file system, the <code class="literal command">df</code> command will show that there is space being taken up. This is because GFS2 file system journals consume space (number of journals * journal size) on disk. If you created a GFS2 file system with a large number of journals or specified a large journal size then you will be see (number of journals * journal size) as already in use when you execute the <code class="literal command">df</code> command. Even if you did not specify a large number of journals or large journals, small GFS2 file systems (in the 1GB or less range) will show a large amount of space as being in use with the default GFS2 journal size.
			</p></section><section class="section" id="proc_gathering-gfs2-data-troubleshooting-gfs2"><div class="titlepage"><div><div><h2 class="title">7.6. Gathering GFS2 data for troubleshooting</h2></div></div></div><p>
				If your GFS2 file system hangs and does not return commands run against it and you find that you need to open a ticket with Red Hat Support, you should first gather the following data:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The GFS2 lock dump for the file system on each node:
					</p><pre class="literallayout">cat /sys/kernel/debug/gfs2/<span class="emphasis"><em>fsname</em></span>/glocks &gt;glocks.<span class="emphasis"><em>fsname</em></span>.<span class="emphasis"><em>nodename</em></span></pre></li><li class="listitem"><p class="simpara">
						The DLM lock dump for the file system on each node: You can get this information with the <code class="literal command">dlm_tool</code>:
					</p><pre class="literallayout">dlm_tool lockdebug -sv <span class="emphasis"><em>lsname</em></span>.</pre><p class="simpara">
						In this command, <span class="emphasis"><em>lsname</em></span> is the lockspace name used by DLM for the file system in question. You can find this value in the output from the <code class="literal command">group_tool</code> command.
					</p></li><li class="listitem">
						The output from the <code class="literal command">sysrq -t</code> command.
					</li><li class="listitem">
						The contents of the <code class="literal">/var/log/messages</code> file.
					</li></ul></div><p>
				Once you have gathered that data, you can open a ticket with Red Hat Support and provide the data you have collected.
			</p></section></section><section class="chapter" id="assembly_debugging-gfs2-with-tracepoints-creating-mounting-gfs2"><div class="titlepage"><div><div><h1 class="title">Chapter 8. Debugging GFS2 file systems with GFS2 tracepoints and the debugfs glocks file</h1></div></div></div><p>
			This section describes both the glock <code class="literal">debugfs</code> interface and the GFS2 tracepoints. It is intended for advanced users who are familiar with file system internals who would like to learn more about the design of GFS2 and how to debug GFS2-specific issues.
		</p><section class="section" id="gfs2_tracepoint_types"><div class="titlepage"><div><div><h2 class="title">8.1. GFS2 tracepoint types</h2></div></div></div><p>
				There are currently three types of GFS2 tracepoints: <span class="emphasis"><em>glock</em></span> (pronounced "gee-lock") tracepoints, <span class="emphasis"><em>bmap</em></span> tracepoints and <span class="emphasis"><em>log</em></span> tracepoints. These can be used to monitor a running GFS2 file system and give additional information to that which can be obtained with the debugging options supported in previous releases of Red Hat Enterprise Linux. Tracepoints are particularly useful when a problem, such as a hang or performance issue, is reproducible and thus the tracepoint output can be obtained during the problematic operation. In GFS2, glocks are the primary cache control mechanism and they are the key to understanding the performance of the core of GFS2. The bmap (block map) tracepoints can be used to monitor block allocations and block mapping (lookup of already allocated blocks in the on-disk metadata tree) as they happen and check for any issues relating to locality of access. The log tracepoints keep track of the data being written to and released from the journal and can provide useful information on that part of GFS2.
			</p><p>
				The tracepoints are designed to be as generic as possible. This should mean that it will not be necessary to change the API during the course of Red Hat Enterprise Linux 8. On the other hand, users of this interface should be aware that this is a debugging interface and not part of the normal Red Hat Enterprise Linux 8 API set, and as such Red Hat makes no guarantees that changes in the GFS2 tracepoints interface will not occur.
			</p><p>
				Tracepoints are a generic feature of Red Hat Enterprise Linux and their scope goes well beyond GFS2. In particular they are used to implement the <code class="literal">blktrace</code> infrastructure and the <code class="literal">blktrace</code> tracepoints can be used in combination with those of GFS2 to gain a fuller picture of the system performance. Due to the level at which the tracepoints operate, they can produce large volumes of data in a very short period of time. They are designed to put a minimum load on the system when they are enabled, but it is inevitable that they will have some effect. Filtering events by a variety of means can help reduce the volume of data and help focus on obtaining just the information which is useful for understanding any particular situation.
			</p></section><section class="section" id="ap-tracepoints-gfs2"><div class="titlepage"><div><div><h2 class="title">8.2. Tracepoints</h2></div></div></div><p>
				The tracepoints can be found under the <code class="literal">/sys/kernel/debug/tracing/</code> directory assuming that <code class="literal">debugfs</code> is mounted in the standard place at the <code class="literal">/sys/kernel/debug</code> directory. The <code class="literal">events</code> subdirectory contains all the tracing events that may be specified and, provided the <code class="literal">gfs2</code> module is loaded, there will be a <code class="literal">gfs2</code> subdirectory containing further subdirectories, one for each GFS2 event. The contents of the <code class="literal">/sys/kernel/debug/tracing/events/gfs2</code> directory should look roughly like the following:
			</p><pre class="literallayout">[root@chywoon gfs2]# <code class="literal">ls</code>
enable            gfs2_bmap       gfs2_glock_queue         gfs2_log_flush
filter            gfs2_demote_rq  gfs2_glock_state_change  gfs2_pin
gfs2_block_alloc  gfs2_glock_put  gfs2_log_blocks          gfs2_promote</pre><p>
				To enable all the GFS2 tracepoints, enter the following command:
			</p><pre class="literallayout">[root@chywoon gfs2]# <code class="literal">echo -n 1 &gt;/sys/kernel/debug/tracing/events/gfs2/enable</code></pre><p>
				To enable a specific tracepoint, there is an <code class="literal">enable</code> file in each of the individual event subdirectories. The same is true of the <code class="literal">filter</code> file which can be used to set an event filter for each event or set of events. The meaning of the individual events is explained in more detail below.
			</p><p>
				The output from the tracepoints is available in ASCII or binary format. This appendix does not currently cover the binary interface. The ASCII interface is available in two ways. To list the current content of the ring buffer, you can enter the following command:
			</p><pre class="literallayout">[root@chywoon gfs2]# <code class="literal">cat /sys/kernel/debug/tracing/trace</code></pre><p>
				This interface is useful in cases where you are using a long-running process for a certain period of time and, after some event, want to look back at the latest captured information in the buffer. An alternative interface, <code class="literal">/sys/kernel/debug/tracing/trace_pipe</code>, can be used when all the output is required. Events are read from this file as they occur; there is no historical information available through this interface. The format of the output is the same from both interfaces and is described for each of the GFS2 events in the later sections of this appendix.
			</p><p>
				A utility called <code class="literal command">trace-cmd</code> is available for reading tracepoint data. For more information on this utility, see the link in <a class="xref" href="index.html#ap-references-gfs2" title="8.10. References">Section 8.10, “References”</a>. The <code class="literal command">trace-cmd</code> utility can be used in a similar way to the <code class="literal command">strace</code> utility, for example to run a command while gathering trace data from various sources.
			</p></section><section class="section" id="ap-glocks-gfs2"><div class="titlepage"><div><div><h2 class="title">8.3. Glocks</h2></div></div></div><p>
				To understand GFS2, the most important concept to understand, and the one which sets it aside from other file systems, is the concept of glocks. In terms of the source code, a glock is a data structure that brings together the DLM and caching into a single state machine. Each glock has a 1:1 relationship with a single DLM lock, and provides caching for that lock state so that repetitive operations carried out from a single node of the file system do not have to repeatedly call the DLM, and thus they help avoid unnecessary network traffic. There are two broad categories of glocks, those which cache metadata and those which do not. The inode glocks and the resource group glocks both cache metadata, other types of glocks do not cache metadata. The inode glock is also involved in the caching of data in addition to metadata and has the most complex logic of all glocks.
			</p><div class="table" id="tb-table-glock-dlm-modes"><p class="title"><strong>Table 8.1. Glock Modes and DLM Lock Modes</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140464449948496" scope="col">Glock mode</th><th align="left" valign="top" id="idm140464449312784" scope="col">DLM lock mode</th><th align="left" valign="top" id="idm140464449311696" scope="col">Notes</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140464449948496"> <p>
								UN
							</p>
							 </td><td align="left" valign="top" headers="idm140464449312784"> <p>
								IV/NL
							</p>
							 </td><td align="left" valign="top" headers="idm140464449311696"> <p>
								Unlocked (no DLM lock associated with glock or NL lock depending on I flag)
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449948496"> <p>
								SH
							</p>
							 </td><td align="left" valign="top" headers="idm140464449312784"> <p>
								PR
							</p>
							 </td><td align="left" valign="top" headers="idm140464449311696"> <p>
								Shared (protected read) lock
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449948496"> <p>
								EX
							</p>
							 </td><td align="left" valign="top" headers="idm140464449312784"> <p>
								EX
							</p>
							 </td><td align="left" valign="top" headers="idm140464449311696"> <p>
								Exclusive lock
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449948496"> <p>
								DF
							</p>
							 </td><td align="left" valign="top" headers="idm140464449312784"> <p>
								CW
							</p>
							 </td><td align="left" valign="top" headers="idm140464449311696"> <p>
								Deferred (concurrent write) used for Direct I/O and file system freeze
							</p>
							 </td></tr></tbody></table></div></div><p>
				Glocks remain in memory until either they are unlocked (at the request of another node or at the request of the VM) and there are no local users. At that point they are removed from the glock hash table and freed. When a glock is created, the DLM lock is not associated with the glock immediately. The DLM lock becomes associated with the glock upon the first request to the DLM, and if this request is successful then the 'I' (initial) flag will be set on the glock. <a class="xref" href="index.html#tb-glock-flags-ap" title="Table 8.4. Glock flags">Table 8.4, “Glock flags”</a> shows the meanings of the different glock flags. Once the DLM has been associated with the glock, the DLM lock will always remain at least at NL (Null) lock mode until the glock is to be freed. A demotion of the DLM lock from NL to unlocked is always the last operation in the life of a glock.
			</p><p>
				Each glock can have a number of "holders" associated with it, each of which represents one lock request from the higher layers. System calls relating to GFS2 queue and dequeue holders from the glock to protect the critical section of code.
			</p><p>
				The glock state machine is based on a work queue. For performance reasons, tasklets would be preferable; however, in the current implementation we need to submit I/O from that context which prohibits their use.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Workqueues have their own tracepoints which can be used in combination with the GFS2 tracepoints.
				</p></div></div><p>
				<a class="xref" href="index.html#tb-table-glockmode-data" title="Table 8.2. Glock Modes and Data Types">Table 8.2, “Glock Modes and Data Types”</a> shows what state may be cached under each of the glock modes and whether that cached state may be dirty. This applies to both inode and resource group locks, although there is no data component for the resource group locks, only metadata.
			</p><div class="table" id="tb-table-glockmode-data"><p class="title"><strong>Table 8.2. Glock Modes and Data Types</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 20%; " class="col_2"><!--Empty--></col><col style="width: 20%; " class="col_3"><!--Empty--></col><col style="width: 20%; " class="col_4"><!--Empty--></col><col style="width: 20%; " class="col_5"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140464449849472" scope="col">Glock mode</th><th align="left" valign="top" id="idm140464449848384" scope="col">Cache Data</th><th align="left" valign="top" id="idm140464449847296" scope="col">Cache Metadata</th><th align="left" valign="top" id="idm140464449846208" scope="col">Dirty Data</th><th align="left" valign="top" id="idm140464449845120" scope="col">Dirty Metadata</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140464449849472"> <p>
								UN
							</p>
							 </td><td align="left" valign="top" headers="idm140464449848384"> <p>
								No
							</p>
							 </td><td align="left" valign="top" headers="idm140464449847296"> <p>
								No
							</p>
							 </td><td align="left" valign="top" headers="idm140464449846208"> <p>
								No
							</p>
							 </td><td align="left" valign="top" headers="idm140464449845120"> <p>
								No
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449849472"> <p>
								SH
							</p>
							 </td><td align="left" valign="top" headers="idm140464449848384"> <p>
								Yes
							</p>
							 </td><td align="left" valign="top" headers="idm140464449847296"> <p>
								Yes
							</p>
							 </td><td align="left" valign="top" headers="idm140464449846208"> <p>
								No
							</p>
							 </td><td align="left" valign="top" headers="idm140464449845120"> <p>
								No
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449849472"> <p>
								DF
							</p>
							 </td><td align="left" valign="top" headers="idm140464449848384"> <p>
								No
							</p>
							 </td><td align="left" valign="top" headers="idm140464449847296"> <p>
								Yes
							</p>
							 </td><td align="left" valign="top" headers="idm140464449846208"> <p>
								No
							</p>
							 </td><td align="left" valign="top" headers="idm140464449845120"> <p>
								No
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449849472"> <p>
								EX
							</p>
							 </td><td align="left" valign="top" headers="idm140464449848384"> <p>
								Yes
							</p>
							 </td><td align="left" valign="top" headers="idm140464449847296"> <p>
								Yes
							</p>
							 </td><td align="left" valign="top" headers="idm140464449846208"> <p>
								Yes
							</p>
							 </td><td align="left" valign="top" headers="idm140464449845120"> <p>
								Yes
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="ap-glock-debugfs-gfs2"><div class="titlepage"><div><div><h2 class="title">8.4. The glock debugfs interface</h2></div></div></div><p>
				The glock <code class="literal">debugfs</code> interface allows the visualization of the internal state of the glocks and the holders and it also includes some summary details of the objects being locked in some cases. Each line of the file either begins G: with no indentation (which refers to the glock itself) or it begins with a different letter, indented with a single space, and refers to the structures associated with the glock immediately above it in the file (H: is a holder, I: an inode, and R: a resource group) . Here is an example of what the content of this file might look like:
			</p><pre class="literallayout">G:  s:SH n:5/75320 f:I t:SH d:EX/0 a:0 r:3
 H: s:SH f:EH e:0 p:4466 [postmark] gfs2_inode_lookup+0x14e/0x260 [gfs2]
G:  s:EX n:3/258028 f:yI t:EX d:EX/0 a:3 r:4
 H: s:EX f:tH e:0 p:4466 [postmark] gfs2_inplace_reserve_i+0x177/0x780 [gfs2]
 R: n:258028 f:05 b:22256/22256 i:16800
G:  s:EX n:2/219916 f:yfI t:EX d:EX/0 a:0 r:3
 I: n:75661/219916 t:8 f:0x10 d:0x00000000 s:7522/7522
G:  s:SH n:5/127205 f:I t:SH d:EX/0 a:0 r:3
 H: s:SH f:EH e:0 p:4466 [postmark] gfs2_inode_lookup+0x14e/0x260 [gfs2]
G:  s:EX n:2/50382 f:yfI t:EX d:EX/0 a:0 r:2
G:  s:SH n:5/302519 f:I t:SH d:EX/0 a:0 r:3
 H: s:SH f:EH e:0 p:4466 [postmark] gfs2_inode_lookup+0x14e/0x260 [gfs2]
G:  s:SH n:5/313874 f:I t:SH d:EX/0 a:0 r:3
 H: s:SH f:EH e:0 p:4466 [postmark] gfs2_inode_lookup+0x14e/0x260 [gfs2]
G:  s:SH n:5/271916 f:I t:SH d:EX/0 a:0 r:3
 H: s:SH f:EH e:0 p:4466 [postmark] gfs2_inode_lookup+0x14e/0x260 [gfs2]
G:  s:SH n:5/312732 f:I t:SH d:EX/0 a:0 r:3
 H: s:SH f:EH e:0 p:4466 [postmark] gfs2_inode_lookup+0x14e/0x260 [gfs2]</pre><p>
				The above example is a series of excerpts (from an approximately 18MB file) generated by the command <code class="literal command">cat /sys/kernel/debug/gfs2/unity:myfs/glocks &gt;my.lock</code> during a run of the postmark benchmark on a single node GFS2 file system. The glocks in the figure have been selected in order to show some of the more interesting features of the glock dumps.
			</p><p>
				The glock states are either EX (exclusive), DF (deferred), SH (shared) or UN (unlocked). These states correspond directly with DLM lock modes except for UN which may represent either the DLM null lock state, or that GFS2 does not hold a DLM lock (depending on the I flag as explained above). The s: field of the glock indicates the current state of the lock and the same field in the holder indicates the requested mode. If the lock is granted, the holder will have the H bit set in its flags (f: field). Otherwise, it will have the W wait bit set.
			</p><p>
				The n: field (number) indicates the number associated with each item. For glocks, that is the type number followed by the glock number so that in the above example, the first glock is n:5/75320; which indicates an <code class="literal">iopen</code> glock which relates to inode 75320. In the case of inode and <code class="literal">iopen</code> glocks, the glock number is always identical to the inode’s disk block number.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The glock numbers (n: field) in the debugfs glocks file are in hexadecimal, whereas the tracepoints output lists them in decimal. This is for historical reasons; glock numbers were always written in hex, but decimal was chosen for the tracepoints so that the numbers could easily be compared with the other tracepoint output (from <code class="literal command">blktrace</code> for example) and with output from <code class="literal command">stat</code>(1).
				</p></div></div><p>
				The full listing of all the flags for both the holder and the glock are set out in <a class="xref" href="index.html#tb-glock-flags-ap" title="Table 8.4. Glock flags">Table 8.4, “Glock flags”</a> and <a class="xref" href="index.html#tb-glock-holderflags-ap" title="Table 8.5. Glock holder flags">Table 8.5, “Glock holder flags”</a>. The content of lock value blocks is not currently available through the glock <code class="literal">debugfs</code> interface.
			</p><p>
				<a class="xref" href="index.html#tb-glock-types-ap" title="Table 8.3. Glock Types">Table 8.3, “Glock Types”</a> shows the meanings of the different glock types.
			</p><div class="table" id="tb-glock-types-ap"><p class="title"><strong>Table 8.3. Glock Types</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140464450637440" scope="col">Type number</th><th align="left" valign="top" id="idm140464450636352" scope="col">Lock type</th><th align="left" valign="top" id="idm140464450635264" scope="col">Use</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140464450637440"> <p>
								1
							</p>
							 </td><td align="left" valign="top" headers="idm140464450636352"> <p>
								trans
							</p>
							 </td><td align="left" valign="top" headers="idm140464450635264"> <p>
								Transaction lock
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464450637440"> <p>
								2
							</p>
							 </td><td align="left" valign="top" headers="idm140464450636352"> <p>
								inode
							</p>
							 </td><td align="left" valign="top" headers="idm140464450635264"> <p>
								Inode metadata and data
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464450637440"> <p>
								3
							</p>
							 </td><td align="left" valign="top" headers="idm140464450636352"> <p>
								rgrp
							</p>
							 </td><td align="left" valign="top" headers="idm140464450635264"> <p>
								Resource group metadata
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464450637440"> <p>
								4
							</p>
							 </td><td align="left" valign="top" headers="idm140464450636352"> <p>
								meta
							</p>
							 </td><td align="left" valign="top" headers="idm140464450635264"> <p>
								The superblock
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464450637440"> <p>
								5
							</p>
							 </td><td align="left" valign="top" headers="idm140464450636352"> <p>
								iopen
							</p>
							 </td><td align="left" valign="top" headers="idm140464450635264"> <p>
								Inode last closer detection
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464450637440"> <p>
								6
							</p>
							 </td><td align="left" valign="top" headers="idm140464450636352"> <p>
								flock
							</p>
							 </td><td align="left" valign="top" headers="idm140464450635264"> <p>
								<code class="literal command">flock</code>(2) syscall
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464450637440"> <p>
								8
							</p>
							 </td><td align="left" valign="top" headers="idm140464450636352"> <p>
								quota
							</p>
							 </td><td align="left" valign="top" headers="idm140464450635264"> <p>
								Quota operations
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464450637440"> <p>
								9
							</p>
							 </td><td align="left" valign="top" headers="idm140464450636352"> <p>
								journal
							</p>
							 </td><td align="left" valign="top" headers="idm140464450635264"> <p>
								Journal mutex
							</p>
							 </td></tr></tbody></table></div></div><p>
				One of the more important glock flags is the l (locked) flag. This is the bit lock that is used to arbitrate access to the glock state when a state change is to be performed. It is set when the state machine is about to send a remote lock request through the DLM, and only cleared when the complete operation has been performed. Sometimes this can mean that more than one lock request will have been sent, with various invalidations occurring between times.
			</p><p>
				<a class="xref" href="index.html#tb-glock-flags-ap" title="Table 8.4. Glock flags">Table 8.4, “Glock flags”</a> shows the meanings of the different glock flags.
			</p><div class="table" id="tb-glock-flags-ap"><p class="title"><strong>Table 8.4. Glock flags</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140464449899024" scope="col">Flag</th><th align="left" valign="top" id="idm140464449897936" scope="col">Name</th><th align="left" valign="top" id="idm140464449132928" scope="col">Meaning</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140464449899024"> <p>
								d
							</p>
							 </td><td align="left" valign="top" headers="idm140464449897936"> <p>
								Pending demote
							</p>
							 </td><td align="left" valign="top" headers="idm140464449132928"> <p>
								A deferred (remote) demote request
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449899024"> <p>
								D
							</p>
							 </td><td align="left" valign="top" headers="idm140464449897936"> <p>
								Demote
							</p>
							 </td><td align="left" valign="top" headers="idm140464449132928"> <p>
								A demote request (local or remote)
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449899024"> <p>
								f
							</p>
							 </td><td align="left" valign="top" headers="idm140464449897936"> <p>
								Log flush
							</p>
							 </td><td align="left" valign="top" headers="idm140464449132928"> <p>
								The log needs to be committed before releasing this glock
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449899024"> <p>
								F
							</p>
							 </td><td align="left" valign="top" headers="idm140464449897936"> <p>
								Frozen
							</p>
							 </td><td align="left" valign="top" headers="idm140464449132928"> <p>
								Replies from remote nodes ignored - recovery is in progress.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449899024"> <p>
								i
							</p>
							 </td><td align="left" valign="top" headers="idm140464449897936"> <p>
								Invalidate in progress
							</p>
							 </td><td align="left" valign="top" headers="idm140464449132928"> <p>
								In the process of invalidating pages under this glock
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449899024"> <p>
								I
							</p>
							 </td><td align="left" valign="top" headers="idm140464449897936"> <p>
								Initial
							</p>
							 </td><td align="left" valign="top" headers="idm140464449132928"> <p>
								Set when DLM lock is associated with this glock
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449899024"> <p>
								l
							</p>
							 </td><td align="left" valign="top" headers="idm140464449897936"> <p>
								Locked
							</p>
							 </td><td align="left" valign="top" headers="idm140464449132928"> <p>
								The glock is in the process of changing state
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449899024"> <p>
								L
							</p>
							 </td><td align="left" valign="top" headers="idm140464449897936"> <p>
								LRU
							</p>
							 </td><td align="left" valign="top" headers="idm140464449132928"> <p>
								Set when the glock is on the LRU list`
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449899024"> <p>
								o
							</p>
							 </td><td align="left" valign="top" headers="idm140464449897936"> <p>
								Object
							</p>
							 </td><td align="left" valign="top" headers="idm140464449132928"> <p>
								Set when the glock is associated with an object (that is, an inode for type 2 glocks, and a resource group for type 3 glocks)
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449899024"> <p>
								p
							</p>
							 </td><td align="left" valign="top" headers="idm140464449897936"> <p>
								Demote in progress
							</p>
							 </td><td align="left" valign="top" headers="idm140464449132928"> <p>
								The glock is in the process of responding to a demote request
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449899024"> <p>
								q
							</p>
							 </td><td align="left" valign="top" headers="idm140464449897936"> <p>
								Queued
							</p>
							 </td><td align="left" valign="top" headers="idm140464449132928"> <p>
								Set when a holder is queued to a glock, and cleared when the glock is held, but there are no remaining holders. Used as part of the algorithm the calculates the minimum hold time for a glock.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449899024"> <p>
								r
							</p>
							 </td><td align="left" valign="top" headers="idm140464449897936"> <p>
								Reply pending
							</p>
							 </td><td align="left" valign="top" headers="idm140464449132928"> <p>
								Reply received from remote node is awaiting processing
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464449899024"> <p>
								y
							</p>
							 </td><td align="left" valign="top" headers="idm140464449897936"> <p>
								Dirty
							</p>
							 </td><td align="left" valign="top" headers="idm140464449132928"> <p>
								Data needs flushing to disk before releasing this glock
							</p>
							 </td></tr></tbody></table></div></div><p>
				When a remote callback is received from a node that wants to get a lock in a mode that conflicts with that being held on the local node, then one or other of the two flags D (demote) or d (demote pending) is set. In order to prevent starvation conditions when there is contention on a particular lock, each lock is assigned a minimum hold time. A node which has not yet had the lock for the minimum hold time is allowed to retain that lock until the time interval has expired.
			</p><p>
				If the time interval has expired, then the D (demote) flag will be set and the state required will be recorded. In that case the next time there are no granted locks on the holders queue, the lock will be demoted. If the time interval has not expired, then the d (demote pending) flag is set instead. This also schedules the state machine to clear d (demote pending) and set D (demote) when the minimum hold time has expired.
			</p><p>
				The I (initial) flag is set when the glock has been assigned a DLM lock. This happens when the glock is first used and the I flag will then remain set until the glock is finally freed (which the DLM lock is unlocked).
			</p></section><section class="section" id="ap-glock-holders-gfs2"><div class="titlepage"><div><div><h2 class="title">8.5. Glock holders</h2></div></div></div><p>
				<a class="xref" href="index.html#tb-glock-holderflags-ap" title="Table 8.5. Glock holder flags">Table 8.5, “Glock holder flags”</a> shows the meanings of the different glock holder flags.
			</p><div class="table" id="tb-glock-holderflags-ap"><p class="title"><strong>Table 8.5. Glock holder flags</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140464447854240" scope="col">Flag</th><th align="left" valign="top" id="idm140464450069168" scope="col">Name</th><th align="left" valign="top" id="idm140464450068080" scope="col">Meaning</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140464447854240"> <p>
								a
							</p>
							 </td><td align="left" valign="top" headers="idm140464450069168"> <p>
								Async
							</p>
							 </td><td align="left" valign="top" headers="idm140464450068080"> <p>
								Do not wait for glock result (will poll for result later)
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447854240"> <p>
								A
							</p>
							 </td><td align="left" valign="top" headers="idm140464450069168"> <p>
								Any
							</p>
							 </td><td align="left" valign="top" headers="idm140464450068080"> <p>
								Any compatible lock mode is acceptable
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447854240"> <p>
								c
							</p>
							 </td><td align="left" valign="top" headers="idm140464450069168"> <p>
								No cache
							</p>
							 </td><td align="left" valign="top" headers="idm140464450068080"> <p>
								When unlocked, demote DLM lock immediately
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447854240"> <p>
								e
							</p>
							 </td><td align="left" valign="top" headers="idm140464450069168"> <p>
								No expire
							</p>
							 </td><td align="left" valign="top" headers="idm140464450068080"> <p>
								Ignore subsequent lock cancel requests
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447854240"> <p>
								E
							</p>
							 </td><td align="left" valign="top" headers="idm140464450069168"> <p>
								Exact
							</p>
							 </td><td align="left" valign="top" headers="idm140464450068080"> <p>
								Must have exact lock mode
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447854240"> <p>
								F
							</p>
							 </td><td align="left" valign="top" headers="idm140464450069168"> <p>
								First
							</p>
							 </td><td align="left" valign="top" headers="idm140464450068080"> <p>
								Set when holder is the first to be granted for this lock
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447854240"> <p>
								H
							</p>
							 </td><td align="left" valign="top" headers="idm140464450069168"> <p>
								Holder
							</p>
							 </td><td align="left" valign="top" headers="idm140464450068080"> <p>
								Indicates that requested lock is granted
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447854240"> <p>
								p
							</p>
							 </td><td align="left" valign="top" headers="idm140464450069168"> <p>
								Priority
							</p>
							 </td><td align="left" valign="top" headers="idm140464450068080"> <p>
								Enqueue holder at the head of the queue
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447854240"> <p>
								t
							</p>
							 </td><td align="left" valign="top" headers="idm140464450069168"> <p>
								Try
							</p>
							 </td><td align="left" valign="top" headers="idm140464450068080"> <p>
								A "try" lock
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447854240"> <p>
								T
							</p>
							 </td><td align="left" valign="top" headers="idm140464450069168"> <p>
								Try 1CB
							</p>
							 </td><td align="left" valign="top" headers="idm140464450068080"> <p>
								A "try" lock that sends a callback
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447854240"> <p>
								W
							</p>
							 </td><td align="left" valign="top" headers="idm140464450069168"> <p>
								Wait
							</p>
							 </td><td align="left" valign="top" headers="idm140464450068080"> <p>
								Set while waiting for request to complete
							</p>
							 </td></tr></tbody></table></div></div><p>
				The most important holder flags are H (holder) and W (wait) as mentioned earlier, since they are set on granted lock requests and queued lock requests respectively. The ordering of the holders in the list is important. If there are any granted holders, they will always be at the head of the queue, followed by any queued holders.
			</p><p>
				If there are no granted holders, then the first holder in the list will be the one that triggers the next state change. Since demote requests are always considered higher priority than requests from the file system, that might not always directly result in a change to the state requested.
			</p><p>
				The glock subsystem supports two kinds of "try" lock. These are useful both because they allow the taking of locks out of the normal order (with suitable back-off and retry) and because they can be used to help avoid resources in use by other nodes. The normal t (try) lock is just what its name indicates; it is a "try" lock that does not do anything special. The T (<code class="literal">try 1CB</code>) lock, on the other hand, is identical to the t lock except that the DLM will send a single callback to current incompatible lock holders. One use of the T (<code class="literal">try 1CB</code>) lock is with the <code class="literal">iopen</code> locks, which are used to arbitrate among the nodes when an inode’s <code class="literal">i_nlink</code> count is zero, and determine which of the nodes will be responsible for deallocating the inode. The <code class="literal">iopen</code> glock is normally held in the shared state, but when the <code class="literal">i_nlink</code> count becomes zero and <code class="literal command">→evict_inode</code>() is called, it will request an exclusive lock with T (<code class="literal">try 1CB</code>) set. It will continue to deallocate the inode if the lock is granted. If the lock is not granted it will result in the node(s) which were preventing the grant of the lock marking their glock(s) with the D (demote) flag, which is checked at <code class="literal command">→drop_inode</code>() time in order to ensure that the deallocation is not forgotten.
			</p><p>
				This means that inodes that have zero link count but are still open will be deallocated by the node on which the final <code class="literal command">close</code>() occurs. Also, at the same time as the inode’s link count is decremented to zero the inode is marked as being in the special state of having zero link count but still in use in the resource group bitmap. This functions like the ext3 file system3’s orphan list in that it allows any subsequent reader of the bitmap to know that there is potentially space that might be reclaimed, and to attempt to reclaim it.
			</p></section><section class="section" id="ap-glock-tracepoints-gfs2"><div class="titlepage"><div><div><h2 class="title">8.6. Glock tracepoints</h2></div></div></div><p>
				The tracepoints are also designed to be able to confirm the correctness of the cache control by combining them with the <code class="literal command">blktrace</code> output and with knowledge of the on-disk layout. It is then possible to check that any given I/O has been issued and completed under the correct lock, and that no races are present.
			</p><p>
				The <code class="literal">gfs2_glock_state_change</code> tracepoint is the most important one to understand. It tracks every state change of the glock from initial creation right through to the final demotion which ends with <code class="literal">gfs2_glock_put</code> and the final NL to unlocked transition. The l (locked) glock flag is always set before a state change occurs and will not be cleared until after it has finished. There are never any granted holders (the H glock holder flag) during a state change. If there are any queued holders, they will always be in the W (waiting) state. When the state change is complete then the holders may be granted which is the final operation before the l glock flag is cleared.
			</p><p>
				The <code class="literal">gfs2_demote_rq</code> tracepoint keeps track of demote requests, both local and remote. Assuming that there is enough memory on the node, the local demote requests will rarely be seen, and most often they will be created by <code class="literal command">umount</code> or by occasional memory reclaim. The number of remote demote requests is a measure of the contention between nodes for a particular inode or resource group.
			</p><p>
				The <code class="literal">gfs2_glock_lock_time</code> tracepoint provides information on the time taken by requests to the DLM. The blocking (<code class="literal">b</code>) flag was introduced into the glock specifically to be used in combination with this tracepoint.
			</p><p>
				When a holder is granted a lock, <code class="literal command">gfs2_promote</code> is called, this occurs as the final stages of a state change or when a lock is requested which can be granted immediately due to the glock state already caching a lock of a suitable mode. If the holder is the first one to be granted for this glock, then the f (first) flag is set on that holder. This is currently used only by resource groups.
			</p></section><section class="section" id="ap-bmap-tracepoints-gfs2"><div class="titlepage"><div><div><h2 class="title">8.7. Bmap tracepoints</h2></div></div></div><p>
				Block mapping is a task central to any file system. GFS2 uses a traditional bitmap-based system with two bits per block. The main purpose of the tracepoints in this subsystem is to allow monitoring of the time taken to allocate and map blocks.
			</p><p>
				The <code class="literal">gfs2_bmap</code> tracepoint is called twice for each bmap operation: once at the start to display the bmap request, and once at the end to display the result. This makes it easy to match the requests and results together and measure the time taken to map blocks in different parts of the file system, different file offsets, or even of different files. It is also possible to see what the average extent sizes being returned are in comparison to those being requested.
			</p><p>
				The <code class="literal">gfs2_rs</code> tracepoint traces block reservations as they are created, used, and destroyed in the block allocator.
			</p><p>
				To keep track of allocated blocks, <code class="literal">gfs2_block_alloc</code> is called not only on allocations, but also on freeing of blocks. Since the allocations are all referenced according to the inode for which the block is intended, this can be used to track which physical blocks belong to which files in a live file system. This is particularly useful when combined with <code class="literal">blktrace</code>, which will show problematic I/O patterns that may then be referred back to the relevant inodes using the mapping gained by means this tracepoint.
			</p><p>
				Direct I/O (<code class="literal">iomap</code>) is an alternative cache policy which allows file data transfers to happen directly between disk and the user’s buffer. This has benefits in situations where cache hit rate is expected to be low. Both <code class="literal">gfs2_iomap_start</code> and <code class="literal">gfs2_iomap_end</code> tracepoints trace these operations and can be used to keep track of mapping using Direct I/O, the positions on the file system of the Direct I/O along with the operation type.
			</p></section><section class="section" id="ap-log-gracepoints-gfs2"><div class="titlepage"><div><div><h2 class="title">8.8. Log tracepoints</h2></div></div></div><p>
				The tracepoints in this subsystem track blocks being added to and removed from the journal (<code class="literal">gfs2_pin</code>), as well as the time taken to commit the transactions to the log (<code class="literal">gfs2_log_flush</code>). This can be very useful when trying to debug journaling performance issues.
			</p><p>
				The <code class="literal">gfs2_log_blocks</code> tracepoint keeps track of the reserved blocks in the log, which can help show if the log is too small for the workload, for example.
			</p><p>
				The <code class="literal">gfs2_ail_flush</code> tracepoint is similar to the <code class="literal">gfs2_log_flush</code> tracepoint in that it keeps track of the start and end of flushes of the AIL list. The AIL list contains buffers which have been through the log, but have not yet been written back in place and this is periodically flushed in order to release more log space for use by the file system, or when a process requests a <code class="literal command">sync</code> or <code class="literal command">fsync</code>.
			</p></section><section class="section" id="ap-glockstats-gfs2"><div class="titlepage"><div><div><h2 class="title">8.9. Glock statistics</h2></div></div></div><p>
				GFS2 maintains statistics that can help track what is going on within the file system. This allows you to spot performance issues.
			</p><p>
				GFS2 maintains two counters:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">dcount</code>, which counts the number of DLM operations requested. This shows how much data has gone into the mean/variance calculations.
					</li><li class="listitem">
						<code class="literal">qcount</code>, which counts the number of <code class="literal">syscall</code> level operations requested. Generally <code class="literal">qcount</code> will be equal to or greater than <code class="literal">dcount</code>.
					</li></ul></div><p>
				In addition, GFS2 maintains three mean/variance pairs. The mean/variance pairs are smoothed exponential estimates and the algorithm used is the one used to calculate round trip times in network code.
			</p><p>
				The mean and variance pairs maintained in GFS2 are not scaled, but are in units of integer nanoseconds.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						srtt/srttvar: Smoothed round trip time for non-blocking operations
					</li><li class="listitem">
						srttb/srttvarb: Smoothed round trip time for blocking operations
					</li><li class="listitem">
						irtt/irttvar: Inter-request time (for example, time between DLM requests)
					</li></ul></div><p>
				A non-blocking request is one which will complete right away, whatever the state of the DLM lock in question. That currently means any requests when (a) the current state of the lock is exclusive (b) the requested state is either null or unlocked or (c) the "try lock" flag is set. A blocking request covers all the other lock requests.
			</p><p>
				Larger times are better for IRTTs, whereas smaller times are better for the RTTs.
			</p><p>
				Statistics are kept in two <code class="literal">sysfs</code> files:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">glstats</code> file. This file is similar to the <code class="literal">glocks</code> file, except that it contains statistics, with one glock per line. The data is initialized from "per cpu" data for that glock type for which the glock is created (aside from counters, which are zeroed). This file may be very large.
					</li><li class="listitem">
						The <code class="literal">lkstats</code> file. This contains "per cpu" stats for each glock type. It contains one statistic per line, in which each column is a cpu core. There are eight lines per glock type, with types following on from each other.
					</li></ul></div></section><section class="section" id="ap-references-gfs2"><div class="titlepage"><div><div><h2 class="title">8.10. References</h2></div></div></div><p>
				For more information about tracepoints and the GFS2 <code class="literal">glocks</code> file, see the following resources:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						For information on glock internal locking rules, see <a class="link" href="http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=blob;f=Documentation/filesystems/gfs2-glocks.txt;h=0494f78d87e40c225eb1dc1a1489acd891210761;hb=HEAD"> http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=blob;f=Documentation/filesystems/gfs2-glocks.txt;h=0494f78d87e40c225eb1dc1a1489acd891210761;hb=HEAD</a>.
					</li><li class="listitem">
						For information on event tracing, see <a class="link" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/trace/events.rst"> https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/trace/events.rst</a>.
					</li><li class="listitem">
						For information on the <code class="literal command">trace-cmd</code> utility, see <a class="link" href="http://lwn.net/Articles/341902/"> http://lwn.net/Articles/341902/</a>.
					</li></ul></div></section></section><section class="chapter" id="assembly_analyzing-gfs2-with-pcp-creating-mounting-gfs2"><div class="titlepage"><div><div><h1 class="title">Chapter 9. Monitoring and analyzing GFS2 file systems using Performance Co-Pilot (PCP)</h1></div></div></div><p>
			This section provides information on using Performance Co-Pilot (PCP) to help with monitoring and to analyze GFS2 file systems. Monitoring of GFS2 file systems in PCP is provided by the GFS2 PMDA module in Red Hat Enterprise Linux which is available through the <code class="literal">pcp-pmda-gfs2</code> package.
		</p><p>
			The GFS2 PMDA provides a number of metrics given by the GFS2 statistics provided in the <code class="literal">debugfs</code> subsystem. When installed, the PMDA exposes values given in the <code class="literal">glocks</code>, <code class="literal">glstats</code>, and <code class="literal">sbstats</code> files. These report sets of statistics on each mounted GFS2 filesystem. The PMDA also makes use of the GFS2 kernel tracepoints exposed by the Kernel Function Tracer (<code class="literal">ftrace</code>).
		</p><section class="section" id="proc_examining-number-of-glocks-analyzing-gfs2-with-pcp"><div class="titlepage"><div><div><h2 class="title">9.1. Displaying information about the available performance metrics with the pminfo tool</h2></div></div></div><p>
				The <code class="literal">pminfo</code> tool displays information about the available performance metrics. The following sections show examples of different GFS2 metrics you can display with this tool.
			</p><section class="section" id="examining_the_number_of_glock_structures_that_currently_exist_per_file_system"><div class="titlepage"><div><div><h3 class="title">9.1.1. Examining the number of glock structures that currently exist per file system</h3></div></div></div><p>
					The GFS2 glock metrics give insights to the number of glock structures currently incore for each mounted GFS2 filesystem and their locking states. In GFS2, a glock is a data structure that brings together the DLM and caching into a single state machine. Each glock has a 1:1 mapping with a single DLM lock and provides caching for the lock states so that repetitive operations carried out on a single node do not have to repeatedly call the DLM, reducing unnecessary network traffic.
				</p><p>
					The following <code class="literal">pminfo</code> command displays a list of the number of glocks per mounted GFS2 file system by their lock mode.
				</p><pre class="literallayout"># <code class="literal">pminfo -f gfs2.glocks</code>

gfs2.glocks.total
    inst [0 or "afc_cluster:data"] value 43680
    inst [1 or "afc_cluster:bin"] value 2091

gfs2.glocks.shared
    inst [0 or "afc_cluster:data"] value 25
    inst [1 or "afc_cluster:bin"] value 25

gfs2.glocks.unlocked
    inst [0 or "afc_cluster:data"] value 43652
    inst [1 or "afc_cluster:bin"] value 2063

gfs2.glocks.deferred
    inst [0 or "afc_cluster:data"] value 0
    inst [1 or "afc_cluster:bin"] value 0

gfs2.glocks.exclusive
    inst [0 or "afc_cluster:data"] value 3
    inst [1 or "afc_cluster:bin"] value 3</pre></section><section class="section" id="examining_the_number_of_glock_structures_that_exist_per_file_system_by_type"><div class="titlepage"><div><div><h3 class="title">9.1.2. Examining the number of glock structures that exist per file system by type</h3></div></div></div><p>
					The GFS2 glstats metrics give counts of each type of glock which exist for each filesystem, a large number of these will normally be of either the inode (inode and metadata) or resource group (resource group metadata) type.
				</p><p>
					The following <code class="literal">pminfo</code> command displays a list of the number of each type of Glock per mounted GFS2 file system.
				</p><pre class="literallayout"># <code class="literal">pminfo -f gfs2.glstats</code>

gfs2.glstats.total
    inst [0 or "afc_cluster:data"] value 43680
    inst [1 or "afc_cluster:bin"] value 2091

gfs2.glstats.trans
    inst [0 or "afc_cluster:data"] value 3
    inst [1 or "afc_cluster:bin"] value 3

gfs2.glstats.inode
    inst [0 or "afc_cluster:data"] value 17
    inst [1 or "afc_cluster:bin"] value 17

gfs2.glstats.rgrp
    inst [0 or "afc_cluster:data"] value 43642
    inst [1 or "afc_cluster:bin"] value 2053

gfs2.glstats.meta
    inst [0 or "afc_cluster:data"] value 1
    inst [1 or "afc_cluster:bin"] value 1

gfs2.glstats.iopen
    inst [0 or "afc_cluster:data"] value 16
    inst [1 or "afc_cluster:bin"] value 16

gfs2.glstats.flock
    inst [0 or "afc_cluster:data"] value 0
    inst [1 or "afc_cluster:bin"] value 0

gfs2.glstats.quota
    inst [0 or "afc_cluster:data"] value 0
    inst [1 or "afc_cluster:bin"] value 0

gfs2.glstats.journal
    inst [0 or "afc_cluster:data"] value 1
    inst [1 or "afc_cluster:bin"] value 1</pre></section><section class="section" id="checking_the_number_of_glock_structures_that_are_in_a_wait_state"><div class="titlepage"><div><div><h3 class="title">9.1.3. Checking the number of glock structures that are in a wait state</h3></div></div></div><p>
					The most important holder flags are H (holder: indicates that requested lock is granted) and W (wait: set while waiting for request to complete). These flags are set on granted lock requests and queued lock requests, respectively.
				</p><p>
					The following <code class="literal">pminfo</code> command displays a list of the number of glocks with the Wait (W) holder flag for each mounted GFS2 file system.
				</p><pre class="literallayout"># <code class="literal">pminfo -f gfs2.holders.flags.wait</code>

gfs2.holders.flags.wait
    inst [0 or "afc_cluster:data"] value 0
    inst [1 or "afc_cluster:bin"] value 0</pre><p>
					If you do see a number of waiting requests queued on a resource group lock there may be a number of reasons for this. One is that there are a large number of nodes compared to the number of resource groups in the file system. Another is that the file system may be very nearly full (requiring, on average, longer searches for free blocks). The situation in both cases can be improved by adding more storage and using the <code class="literal">gfs2_grow</code> command to expand the file system.
				</p></section><section class="section" id="checking_file_system_operation_latency_using_the_kernel_tracepoint_based_metrics"><div class="titlepage"><div><div><h3 class="title">9.1.4. Checking file system operation latency using the kernel tracepoint based metrics</h3></div></div></div><p>
					The GFS2 promote metrics count the number of promote requests on the filesystem. These requests are separated by the number of requests that have occurred on the first attempt and “others” of which are granted after their initial promote request. A drop in the number of first time promotes with a rise in “other” promotes can indicate issues with file contention.
				</p><p>
					The GFS2 demote request metrics like the promote request count the number of demote requests which occur on the filesystem. These, however, are also split between requests that have come from the current node and requests that have come from other nodes on the system. A large number of demote requests from remote nodes can be indicative of contention between two nodes for a given resource group.
				</p><p>
					The following <code class="literal">pminfo</code> command displays a list of the number of glocks with the Wait (W) holder flag for each mounted GFS2 file system.
				</p><pre class="literallayout"># <code class="literal">pminfo -f gfs2.latency.grant.all gfs2.latency.demote.all</code>

gfs2.latency.grant.all
    inst [0 or "afc_cluster:data"] value 0
    inst [1 or "afc_cluster:bin"] value 0

gfs2.latency.demote.all
    inst [0 or "afc_cluster:data"] value 0
    inst [1 or "afc_cluster:bin"] value 0</pre><p>
					It is a good idea to determine the general values observed when the workload is running without issues to be able to notice changes in performance when these values differ from their normal range. For example, you might notice the following changes:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							A change in the number of promote requests waiting to complete rather than completing on first attempt
						</li><li class="listitem">
							A large increase in remote demote requests (especially if from other cluster nodes)
						</li><li class="listitem">
							Unexplained increase in log flushes
						</li></ul></div></section></section><section class="section" id="ref_available-gfs2-PCP-metrics-analyzing-gfs2-with-pcp"><div class="titlepage"><div><div><h2 class="title">9.2. Complete listing of available metrics for GFS2 in PCP</h2></div></div></div><p>
				<a class="xref" href="index.html#tb-pcpgfs2metricgroups" title="Table 9.1. Complete Metric List">Table 9.1, “Complete Metric List”</a> describes the full list of performance metrics given by the <code class="literal">pcp-pmda-gfs2</code> package for GFS2 file systems.
			</p><div class="table" id="tb-pcpgfs2metricgroups"><p class="title"><strong>Table 9.1. Complete Metric List</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 29%; " class="col_1"><!--Empty--></col><col style="width: 71%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140464447507920" scope="col">Metric Name</th><th align="left" valign="top" id="idm140464447506944" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140464447507920"> <p>
								<code class="literal">gfs2.glocks.*</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140464447506944"> <p>
								Metrics regarding the information collected from the glock stats file (<code class="literal">glocks</code>) which count the number of glocks in each state that currently exists for each GFS2 file system currently mounted on the system.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447507920"> <p>
								<code class="literal">gfs2.glocks.flags.*</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140464447506944"> <p>
								Range of metrics counting the number of glocks that exist with the given glocks flags
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447507920"> <p>
								<code class="literal">gfs2.holders.*</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140464447506944"> <p>
								Metrics regarding the information collected from the glock stats file (<code class="literal">glocks</code>) which counts the number of glocks with holders in each lock state that currently exists for each GFS2 file system currently mounted on the system.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447507920"> <p>
								<code class="literal">gfs2.holders.flags.*</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140464447506944"> <p>
								Range of metrics counting the number of glocks holders with the given holder flags
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447507920"> <p>
								<code class="literal">gfs2.sbstats.*</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140464447506944"> <p>
								Timing metrics regarding the information collected from the superblock stats file (<code class="literal">sbstats</code>) for each GFS2 file system currently mounted on the system.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447507920"> <p>
								<code class="literal">gfs2.glstats.*</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140464447506944"> <p>
								Metrics regarding the information collected from the glock stats file (<code class="literal">glstats</code>) which count the number of each type of glock that currently exists for each GFS2 file system currently mounted on the system.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447507920"> <p>
								<code class="literal">gfs2.latency.grant.*</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140464447506944"> <p>
								A derived metric making use of the data from both the <code class="literal">gfs2_glock_queue</code> and <code class="literal">gfs2_glock_state_change</code> tracepoints to calculate an average latency in microseconds for glock grant requests to be completed for each mounted file system. This metric is useful for discovering potential slowdowns on the file system when the grant latency increases.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447507920"> <p>
								<code class="literal">gfs2.latency.demote.*</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140464447506944"> <p>
								A derived metric making use of the data from both the <code class="literal">gfs2_glock_state_change</code> and <code class="literal">gfs2_demote_rq</code> tracepoints to calculate an average latency in microseconds for glock demote requests to be completed for each mounted file system. This metric is useful for discovering potential slowdowns on the file system when the demote latency increases.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447507920"> <p>
								<code class="literal">gfs2.latency.queue.*</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140464447506944"> <p>
								A derived metric making use of the data from the <code class="literal">gfs2_glock_queue</code> tracepoint to calculate an average latency in microseconds for glock queue requests to be completed for each mounted file system.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447507920"> <p>
								<code class="literal">gfs2.worst_glock.*</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140464447506944"> <p>
								A derived metric making use of the data from the <code class="literal">gfs2_glock_lock_time</code> tracepoint to calculate a perceived “current worst glock” for each mounted file system. This metric is useful for discovering potential lock contention and file system slowdown if the same lock is suggested multiple times.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447507920"> <p>
								<code class="literal">gfs2.tracepoints.*</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140464447506944"> <p>
								Metrics regarding the output from the GFS2 <code class="literal">debugfs</code> tracepoints for each file system currently mounted on the system. Each sub-type of these metrics (one of each GFS2 tracepoint) can be individually controlled whether on or off using the control metrics.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140464447507920"> <p>
								<code class="literal">gfs2.control.*</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140464447506944"> <p>
								Configuration metrics which are used to switch on or off metric recording in the PMDA. Conrol metricsare toggled by means of the <code class="literal command">pmstore</code> tool.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="proc_installing-minimal-PCP-setup-analyzing-gfs2-with-pcp"><div class="titlepage"><div><div><h2 class="title">9.3. Performing minimal PCP setup to gather file system data</h2></div></div></div><p>
				The following procedure outlines instructions on how to install a minimal PCP setup to collect statistics on Red Hat Enterprise Linux. This setup involves adding the minimum number of packages on a production system needed to gather data for further analysis.
			</p><p>
				The resulting <code class="literal">tar.gz</code> archive of the <code class="literal">pmlogger</code> output can be analyzed by using further PCP tools and can be compared with other sources of performance information.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the required PCP packages.
					</p><pre class="literallayout"># <code class="literal">yum install pcp pcp-pmdas-gfs2</code></pre></li><li class="listitem"><p class="simpara">
						Activate the GFS2 module for PCP.
					</p><p class="simpara">
						# <code class="literal">cd /var/lib/pcp/pmdas/gfs2</code> # <code class="literal">./Install</code>
					</p></li><li class="listitem"><p class="simpara">
						Start both the <code class="literal">pmcd</code> and <code class="literal">pmlogger</code> services.
					</p><p class="simpara">
						# <code class="literal">systemctl start pmcd.service</code> # <code class="literal">systemctl start pmlogger.service</code>
					</p></li><li class="listitem">
						Perform operations on the GFS2 file system.
					</li><li class="listitem"><p class="simpara">
						Stop both the <code class="literal">pmcd</code> and <code class="literal">pmlogger</code> services.
					</p><p class="simpara">
						# <code class="literal">systemctl stop pmcd.service</code> # <code class="literal">systemctl stop pmlogger.service</code>
					</p></li><li class="listitem"><p class="simpara">
						Collect the output and save it to a <code class="literal">tar.gz</code> file named based on the host name and the current date and time.
					</p><p class="simpara">
						# <code class="literal">cd /var/log/pcp/pmlogger</code> # <code class="literal">tar -czf $(hostname).$(date+%F-%Hh%M).pcp.tar.gz $(hostname)</code>
					</p></li></ol></div></section><section class="section" id="references"><div class="titlepage"><div><div><h2 class="title">9.4. References</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information on performance monitoring on GFS2 in general, see <a class="link" href="index.html#assembly_debugging-gfs2-with-tracepoints-creating-mounting-gfs2" title="Chapter 8. Debugging GFS2 file systems with GFS2 tracepoints and the debugfs glocks file">Debugging GFS2 file systems with GFS2 tracepoints and the debugfs glocks file</a>.
					</li><li class="listitem">
						For more general information on using Performance Co-Pilot to monitor system performance see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/monitoring-performance-with-performance-co-pilot_monitoring-and-managing-system-status-and-performance">Monitoring performance with Performance Co-Pilot</a> on the Red Hat Customer Portal.
					</li><li class="listitem">
						For general information about Performance Co-Pilot in Red Hat Enterprise Linux see <a class="link" href="https://access.redhat.com/articles/1145953">Index of Performance Co-Pilot(PCP) articles, solutions, tutorials and white papers</a> on the Red Hat Customer Portal.
					</li></ul></div></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140464449621024"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2020 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div>
  
  </div>
  </div>
</div>
<div id="comments-footer" class="book-comments">
  </div>
<meta itemscope="" itemref="md1">

    <!-- Display: Next/Previous Nav -->
          
      </div>
</article>


  

            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto" href="index.html#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path
                      class="rh-logo-hat"
                      d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                      <path class="rh-logo-band"
                      d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                      <path
                      class="rh-logo-type"
                      d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                  </svg>
                </a>
              </div>

            <div role="navigation">
                <h3>Quick Links</h3>
                <ul>
                    <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li><a class="manage-subscriptions" href="https://access.redhat.com/management/subscriptions/#active">Subscriptions</a></li>
                    <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                    <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                    <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Help</h3>
                <ul>
                    <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                    <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                    <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Site Info</h3>
                <ul>
                  <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                  <li><a class="browser-support-policy" href="https://access.redhat.com/help/browsers/">Browser Support Policy</a></li>
                  <li><a class="accessibility" href="https://access.redhat.com/help/accessibility/">Accessibility</a></li>
                  <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                  <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Related Sites</h3>
                <ul>
                    <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                    <li><a href="https://www.openshift.com" class="openshift-com">openshift.com</a></li>
                    <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                    <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>About</h3>
                <ul>
                    <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                    <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                    <li><a href="http://jobs.redhat.com" class="about-jobs">Red Hat Jobs</a></li>
                </ul>
            </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a hidden href="https://status.redhat.com" class="status-page-widget">
                          <span class="status-description"></span>
                          <span class="status-dot shape-circle"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2020 Red Hat, Inc.</div>

                        <div role="navigation" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://access.redhat.com/help/terms/" class="terms-of-use">Customer Portal Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                      <img src="l_summit.png" alt="Red Hat Summit" />
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHatSupport" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>
                        <a href="https://www.facebook.com/RedHatSupport" class="sm-icon facebook"><span class="nicon-facebook"></span><span class="offscreen">Facebook</span></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--googleon: all-->
</div>
  
  <div id="formatHelp" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="formatTitle" aria-hidden="true"><div class="modal-dialog"><div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="formatTitle">Formatting Tips</h3>
    </div>
    <div class="modal-body">
      <p>Here are the common uses of Markdown.</p><dl class="formatting-help">
        <dt class="codeblock">Code blocks</dt><dd class="codeblock"><pre><code>~~~
Code surrounded in tildes is easier to read
~~~</code></pre></dd>
        <dt class="urls">Links/URLs</dt><dd class="urls"><code>[Red Hat Customer Portal](https://access.redhat.com)</code></dd>
       </dl>
    </div>
    <div class="modal-footer">
      <a target="_blank" href="https://access.redhat.com/help/markdown" class="btn btn-primary">Learn more</a>
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
  </div></div></div></body>
</html>
