<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/ dc: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/ og: http://ogp.me/ns# rdfs: http://www.w3.org/2000/01/rdf-schema# sioc: http://rdfs.org/sioc/ns# sioct: http://rdfs.org/sioc/types# skos: http://www.w3.org/2004/02/skos/core# xsd: http://www.w3.org/2001/XMLSchema# article: http://ogp.me/ns/article# book: http://ogp.me/ns/book# profile: http://ogp.me/ns/profile# video: http://ogp.me/ns/video#" >

<head profile="http://www.w3.org/1999/xhtml/vocab">
	  <!--[if IE]><![endif]-->
<meta charset="utf-8" />
<meta name="revision" title="15c71efd-844a-41b9-98be-50d23cc79a7c" product="f321f43a-4a79-48fe-8aae-117b9d973ec0" revision="2941b4aebf86c9159b872e1fb619d869d7f6c824:en-us" page="4e7682c2-c047-4c49-9dcd-a6254e7a858a" />
<meta name="generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_file_systems/index" />
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_file_systems/index" />
<meta property="og:site_name" content="Red Hat Customer Portal" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_file_systems/index" />
<meta property="og:title" content="Managing file systems Red Hat Enterprise Linux 8 | Red Hat Customer Portal" />
<meta property="og:description" content="This documentation collection provides instructions on how to effectively manage file systems in Red Hat Enterprise Linux 8." />
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_file_systems/index" />
<meta name="twitter:title" content="Managing file systems Red Hat Enterprise Linux 8 | Red Hat Customer Portal" />
<meta name="twitter:description" content="This documentation collection provides instructions on how to effectively manage file systems in Red Hat Enterprise Linux 8." />
<meta name="twitter:image:src" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
  <title>Managing file systems Red Hat Enterprise Linux 8 | Red Hat Customer Portal</title>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="kcs06.web.prod.ext.phx2.redhat.com" />
<meta name="avalon-version" content="2070d6b" />
<meta name="cp-chrome-build-date" content="2020-03-09T20:28:54.189Z" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml" />

 

<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en",  
        version   : "2070d6b",
        builddate : "2020-03-09T20:28:54.189Z",
        fetchdate : "2020-03-11T07:53:05-0400",
        nrid      : "14615289",
        nrlk      : "2a497fa56f"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="favicon.ico" />

<link media="all" rel="stylesheet" type="text/css" href="bootstrap.css%3Fv=2070d6b.css" />
<link media="all" rel="stylesheet" type="text/css" href="main.css%3Fv=2070d6b.css" />
<link media="all" rel="stylesheet" type="text/css" href="components.css%3Fv=2070d6b.css" />
<link media="all" rel="stylesheet" type="text/css" href="pages.css%3Fv=2070d6b.css" />

<link href="chosen.css%3Fv=2070d6b.css" rel="stylesheet" type="text/css" />

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]-->

<noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>

<!-- /cssInclude -->
<script type="text/javascript" src="require.js%3Fv=2070d6b" data-main="/webassets/avalon/j/"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->
  <link type="text/css" rel="stylesheet" href="css__c2Nkkx_5vYh8rvZbfBAGB4EMzMtH5ouFJDBlDsnhSR8__-ax0_8bam15ZDJT9j7LilCfJrDyEhGGAgc0KC8HYvJg__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__Jy3BSr8TrxptaufAzQDT1skBUlX2CnL_wm6BizzYuGw__-YZvqB8yuA4kK_iKklbk5HdZCoG2qAgz1l-8Qi2NFH4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="messages.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__m76iIFREtc70Nmw5xe1ZwHbNBlwOP2Zjc3DcacNWnFQ__STEh8aY3w8E_bKzhB4Xke2WOQ9XMDQquHIP5B8SeDIY__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__4sM4s6XOQ2Nm0pdkrWRLvrgtwpTmHAFzR_LcdesKYj8__vJ0jjVEhoPh3KBeLZfkqg51T3AFxhQCuXg1reipa__k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="print" />
  <link rel="stylesheet" type="text/css" media="all" href="list.css" />
  <script src="js__1YIht1y1Jlm9D0PyxEuhS3DlWdYAlEsNpsFDOaUsfRw__ZnC7278ZsqBG-1FOUqflDl8B3Y1kLiAWXAIkoLrHbYg__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__5ysXPc5KIyMmizxqRY68ILfrEGrj0P29WBIifnPTJvQ__Cap0DACEVMsefumg1gS1APLLd8stDkdGfp6c1uswMo4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>chrometwo_require(["analytics/attributes"], function(attributes) {
attributes.set('ResourceID',       '15c71efd-844a-41b9-98be-50d23cc79a7c');
attributes.set('ResourceTitle',    'Managing file systems');
attributes.set('Language',         'en-us');
attributes.set('RevisionId',       '2941b4aebf86c9159b872e1fb619d869d7f6c824:en-us');
attributes.set('PublicationState', ['active','published']);
attributes.set('Product',          'Red Hat Enterprise Linux');
attributes.set('ProductVersion',   '8');
attributes.set('ProductId',        'Red Hat Enterprise Linux 8');
});</script>
<script>breadcrumbs = [ ["Products &amp; Services", "/products/"], ["Product Documentation", "/documentation/"], ["Red Hat Enterprise Linux", "/documentation/en-us/red_hat_enterprise_linux/"], ["8", "/documentation/en-us/red_hat_enterprise_linux/8/"], ["Managing file systems", "/documentation/en-us/red_hat_enterprise_linux/8/html/managing_file_systems/"] ];</script>
<script>window.siteMapState = "products";</script>
<script src="js__i6ieGBO-OPmIKm_f0srsb6gM7QELIWrBpKh6ub_yj8A__wjRg_duSK4rEZCRV2uwrCIPMl80Z_LJ9ew61H5hE-ZI__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__vGeEtorfXGI3aPAp71YA74N5p8wfpYVhnoIqwaJrOiQ__veGxEiPQW6fkzAPZnAFA23SFz1CyJy2dlu6x8XuHM4s__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"kcs","theme_token":"fusbGCM9Z99jymr0BUpIBfgUr4yJSmz_PHwiqPzSaEw","js":{"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.jquery.min.js":1,"modules\/chosen\/chosen.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/prism.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/underscore.js":1,"sites\/all\/themes\/kcs\/js\/kcs_base.js":1,"sites\/all\/themes\/kcs\/js\/showdown.js":1,"sites\/all\/themes\/kcs\/js\/case_links.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"modules\/date\/date_api\/date.css":1,"modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/contrib\/user_prune\/css\/user_prune.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/contrib\/panels\/css\/panels.css":1,"sites\/all\/modules\/custom\/rate\/rate.css":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/plugins\/layouts\/docs_page\/docs_page.css":1,"https:\/\/access.redhat.com\/webassets\/avalon\/s\/messages.css":1,"sites\/all\/themes\/zen\/system.base.css":1,"sites\/all\/themes\/zen\/system.menus.css":1,"sites\/all\/themes\/zen\/system.messages.css":1,"sites\/all\/themes\/zen\/system.theme.css":1,"sites\/all\/themes\/zen\/comment.css":1,"sites\/all\/themes\/zen\/node.css":1,"sites\/all\/themes\/kcs\/css\/html-reset.css":1,"sites\/all\/themes\/kcs\/css\/wireframes.css":1,"sites\/all\/themes\/kcs\/css\/layout-fixed.css":1,"sites\/all\/themes\/kcs\/css\/page-backgrounds.css":1,"sites\/all\/themes\/kcs\/css\/tabs.css":1,"sites\/all\/themes\/kcs\/css\/pages.css":1,"sites\/all\/themes\/kcs\/css\/blocks.css":1,"sites\/all\/themes\/kcs\/css\/navigation.css":1,"sites\/all\/themes\/kcs\/css\/views-styles.css":1,"sites\/all\/themes\/kcs\/css\/nodes.css":1,"sites\/all\/themes\/kcs\/css\/comments.css":1,"sites\/all\/themes\/kcs\/css\/forms.css":1,"sites\/all\/themes\/kcs\/css\/fields.css":1,"sites\/all\/themes\/kcs\/css\/kcs.css":1,"sites\/all\/themes\/kcs\/css\/print.css":1}},"chosen":{"selector":"#edit-field-kcs-component-select-und, #edit-field-kcs-sbr-select-und, #edit-field-kcs-product-select-und, #edit-field-kcs-type-select-und, #edit-language, #edit-field-kcs-a-category-select-und, #edit-field-kcs-state-select-und, #edit-field-kcs-tags-select-und, #edit-field-kcs-state-select-value, #edit-field-vid-reference-product-und, #edit-state, #edit-product, #edit-category, #edit-field-kcs-product-select-tid, #edit-field-kcs-type-select-tid, #edit-field-kcs-a-category-select-tid, #edit-sort-bef-combine, #edit-kcs-state, #edit-field-category-tid, #edit-field-product-tid, #edit-field-tags-tid, #edit-field-category-und, #edit-field-product-und, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-category, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-product, #views-exposed-form-questions-list-questions-filter-block #edit-field-tags, #edit-field-mega-menu-tab-und, #edit-field-internal-tags-tid, #edit-tags, #edit-field-kcs-tags-select-tid, #edit-subscriptions-and-choose-field-select, #edit-subscriptions-and-type, #edit-vid-13, #edit-vid-4, #edit-vid-5, #edit-vid-53, #edit-vid-1, #edit-vid-3, #edit-group-blog, #edit-group-group, #edit-subscriptions-and-choose-field-select-two, #edit-subscriptions-and-type-two, #edit-vid-13-two, #edit-vid-4-two, #edit-vid-5-two, #edit-vid-53-two, #edit-vid-1-two, #edit-vid-3-two, #edit-group-blog-two, #edit-group-group-two, #edit-subscriptions-and-edit-choose-field-select, #edit-subscriptions-and-type-edit, #edit-subscriptions-and-edit-type-two, #edit-vid-13-edit-two, #edit-vid-4-edit-two, #edit-vid-5-edit-two, #edit-vid-53-edit-two, #edit-vid-1-edit-two, #edit-vid-3-edit-two, #edit-group-group-edit-two, #edit-subscriptions-and-edit-choose-field-select-two, #edit-vid-13-edit, #edit-vid-4-edit, #edit-vid-5-edit, #edit-vid-53-edit, #edit-vid-1-edit, #edit-vid-3-edit, #edit-group-group-edit, #edit-group-blog-edit, #edit-field-supported-languages-tid, #edit-field-geography-und, #edit-field-supported-products-und, #edit-field-supported-languages-und, #edit-field-vendor-und, #edit-field-errata-type-text-und, #edit-field-errata-severity-text-und, #edit-field-software-partner-level-und, #edit-field-scert-product-category-und, #edit-field-certifications-und-0-field-product-und, #edit-kcs-article-type, #edit-field-eco-industry-tag-select-tid, #edit-field-eco-software-catego-select-tid, #edit-field-ecosystem-tag-select-und, #edit-field-eco-industry-tag-select-und, #edit-field-eco-software-catego-select-und, #edit-field-vendor-tsanet-member-ref-und, #edit-field-og-vendor-ref-und-0-default, #edit-field-eco-products-enabled-col-und-0-field-eco-subscription-model-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-support-level-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-archite-select-und, #edit-field-eco-certifications-select-und-0-field-eco-certificati-lvl-select-und, #edit-field-eco-certifications-select-und-0-field-eco-hypervisor-str-und, #edit-field-eco-supported-language-ref-und, #edit-field-eco-region-ref-und, #edit-field-cs-product-category-str-und, #edit-field-eco-certifications-select-und-0-field-eco-format-ref-und, #edit-field-eco-group-access-ref-und, #edit-field-hw-category-tag-ref-und, #edit-field-profile-industry-und, #edit-field-profile-tech-interests-und, #edit-field-product-page-features-ref-und, #edit-field-eco-product-select-und, #edit-field-base-product-ref-und, #edit-field-eco-product-archite-select-und, #edit-field-eco-format-ref-und, #edit-field-certification-status-ref-und, #edit-field-certification-result-ref-und, #edit-field-og-certified-product-ref-und-0-default, #edit-field-eco-subscription-model-ref-und, #edit-field-eco-support-level-ref-und, #edit-field-eco-certificati-lvl-select-und, #edit-field-eco-hypervisor-str-und, #edit-field-ccp-thirdparty-cert-select-und, .use_, #edit-field-eco-cert-product-tag-und, #edit-field-documentation-location-ref-und, #edit-field-documentation-title-und, #edit-field-accelerator-products-und","minimum":"0"},"rh_doc_fetcher":{"page_type":"single"},"section":"","kcs":{"nodeType":null,"nodeId":null}});</script>
    <!--[if lt IE 9]>
  <script src="https://access.redhat.com/sites/all/themes/kcs/js/html5shiv.js"></script>
  <![endif]-->
  
      


    <!--kcs05-->
<script type="text/javascript">
  Drupal.portal = {"version":{"redhat_portal":"package drupal7-redhat_portal is not installed"}};
  Drupal.portal.currentUser = {};
  </script>

</head>

<body class="portal-page admin-bar  kcs_external" >

  
  <div id="page-wrap" class="page-wrap">
    <div class="top-page-wrap">

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <!-- Accessibility Nav & Header -->
<div class="accessibility-nav sr-only">
    <a href="https://access.redhat.com/">
        <h1>Red Hat <span>Customer </span><span>Portal</span></h1>
    </a>
    <p><a href="index.html#cp-main">Skip to main content</a></p>
    <nav aria-labelledby="accessibility-nav-heading">
        <h2 id="accessibility-nav-heading">Main Navigation</h2>
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/support/policy/update_policies/">Product Life Cycle &amp; Update Policies</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/ecosystem/">Ecosystem</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="accessibility-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="accessibility-accountUser">
                    <div class="account-name"><strong id="accessibility-userFullName"></strong></div>
                    <div class="account-org"><span id="accessibility-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="accessibility-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="accessibility-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="accessibility-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="accessibility-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="accessibility-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="accessibility-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- Mobile Header -->
<nav class="mobile-nav-bar hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <button id="menu-btn" class="menu menu-white" type="button" aria-label="Toggle Navigation">
        <span class="lines"></span>
    </button>
    <a class="logo" href="https://access.redhat.com/">
        <span class="logo-crop">
          <!-- logo -->
          <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
            <defs>
              <style>
                .rh-logo-hat {
                  fill: #e00;
                }
                .rh-logo-type {
                  fill: #fff;
                }
              </style>
            </defs>
            <title>Red Hat</title>
            <path
              class="rh-logo-hat"
              d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
              <path class="rh-logo-band"
              d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
              <path
              class="rh-logo-type"
              d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
          </svg>
        </span>
        <span class="site-title"><span>Customer </span><span>Portal</span></span>
    </a>
    <button class="btn btn-search btn-utility" data-target="#site-search">
        <span class="web-icon-search"></span>
        <span class="link-text">Search</span>
    </button>
</nav>

<!-- Mobile Menu Drawer -->
<div class="nav-drawer mobile-nav-drawer hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <nav class="nav-container">
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/support/policy/update_policies/">Product Life Cycle &amp; Update Policies</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/ecosystem/">Ecosystem</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="mobile-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="mobile-accountUser">
                    <div class="account-name"><strong id="mobile-userFullName"></strong></div>
                    <div class="account-org"><span id="mobile-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="mobile-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="mobile-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="mobile-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="mobile-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="mobile-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="mobile-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- White Utility Menu for large screens -->
<div class="utility-wrap" aria-hidden="true">
    <div class="utility-container">
        <div class="utility-bar hidden-xs">
            <div role="navigation" class="top-nav">
                <ul>
                    <li id="nav-subscription" data-portal-tour-1="1"><a class="top-nav-subscriptions" href="https://access.redhat.com/management/">Subscriptions</a></li>
                    <li id="nav-downloads" data-portal-tour-1="2"><a class="top-nav-downloads" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li id="nav-containers"><a class="top-nav-containers" href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
                    <li id="nav-support" data-portal-tour-1="3"><a class="top-nav-support-cases" href="https://access.redhat.com/support/cases/">Support Cases</a></li>
                </ul>
            </div>

            <div role="navigation" class="utility-nav">
                <ul>
                    <li id="searchABTestHide">
                        <a class="btn-search" data-target="#site-search" title="Search" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-search" aria-label="search"></span>
                            <span class="link-text">Search</span>
                        </a>
                    </li>
                    <!-- AB Test -->
                    <li id="searchABTestShow">
                        <form id="topSearchFormABTest" name="topSearchFormABTest">
                            <label for="topSearchInputABTest" class="sr-only">Search</label>
                            <input id="topSearchInputABTest" name="keyword" placeholder="Search" value="" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="form-control">
                            <button type="submit" class="btn btn-app btn-sm btn-link"><span class="web-icon-search" aria-label="search"></span></button>
                        </form>
                    </li>
                    <!-- End of AB Test -->
                    <li>
                        <a class="btn-profile" data-target="#account-info" data-portal-tour-1="4a" title="Account" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-user" aria-label="log in"></span>
                            <span class="link-text">Log In</span>
                            <span class="account-user" id="accountUserName"></span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-language" data-target="#language" data-portal-tour-1="6" title="Language" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-globe" aria-label="language"></span>
                            <span class="link-text">Language</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Utility Tray -->
        <div class="utility-tray-container">
            <div class="utility-tray">
                <div id="site-search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="https://access.redhat.com/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <div class="input-group push-bottom">

                                <input class="form-control searchField" id="topSearchInput" name="keyword" value="" placeholder="Enter your search term" type="text">
                                <span class="input-group-btn">
                                    <button type="submit" class="btn btn-primary">Search</button>
                                </span>
                            </div>
                            <div>Troubleshooting an issue? Try <a href="https://access.redhat.com/solution-engine">Solution Engine</a>&mdash;our new support tool.</div>
                        </form>
                    </div>
                </div>
                <div id="account-info" class="utility-link account-info">
                    <div class="content">

                        <!-- Account Unauthenticated -->
                        <div id="accountLinksLoggedOut" class="unauthenticated">
                            <h2 class="utility-header">Log in to Your Red Hat Account</h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border">
                                    <p><a href="https://access.redhat.com/login" id="accountLogin" class="btn btn-primary">Log In</a></p>
                                    <p>Your Red Hat account gives you access to your profile, preferences, and services, depending on your status.</p>
                                </div>
                                <div class="col-sm-6 col-border col-border-left">
                                    <p><a href="https://www.redhat.com/wapps/ugc/register.html" class="btn btn-primary">Register</a></p>
                                    <p>If you are a new customer, register now for access to product evaluations and purchasing capabilities. </p>

                                    <strong>Need access to an account?</strong><p>If your company has an existing Red Hat account, your organization administrator can grant you access.</p>

                                    <p><a href="https://access.redhat.com/support/contact/customerService/">If you have any questions, please contact customer service.</a></p>
                                </div>
                            </div>
                        </div>

                        <!-- Account Authenticated -->
                        <div id="accountLinksLoggedIn" class="authenticated">
                            <h2 class="utility-header"><span id="userFirstName"></span></h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border col-border-right">
                                    <div class="account-info" id="accountUser">
                                        <div class="avatar"><!-- placeholder--></div>
                                        <div class="account-name"><strong id="userFullName"></strong></div>
                                        <div class="account-org"><span id="userOrg"></span></div>
                                        <div class="account-number accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                                    </div>

                                    <div class="row account-settings">
                                        <div class="col-md-6" data-portal-tour-1="4">
                                            <h3>Red Hat Account</h3>
                                            <ul class="reset">
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
                                                <!-- <li><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
                                                <li><a href="https://access.redhat.com/account-team">Account Team</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6" data-portal-tour-1="5">
                                            <h3>Customer Portal</h3>
                                            <ul class="reset">
                                                <li><a href="https://access.redhat.com/user">My Profile</a></li>
                                                <li><a href="https://access.redhat.com/user" id="userNotificationsLink">Notifications</a></li>
                                                <li><a href="https://access.redhat.com/help/">Help</a></li>
                                            </ul>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-sm-6 col-border">
                                    <p>For your security, if you’re on a public computer and have finished using your Red Hat services, please be sure to log out.</p>
                                    <p><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout" id="accountLogout" class="btn btn-primary">Log Out</a></p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div id="language" class="utility-link language">
                    <div class="content">
                        <h2 class="utility-header">Select Your Language</h2>
                        <div class="row" id="localesMenu">
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=en" data-lang="en" id="en">English</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ko" data-lang="ko" id="ko">한국어</a></li>
                                </ul>
                            </div>
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ja"    data-lang="ja"    id="ja">日本語</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" data-lang="zh_CN" id="zh_CN">中文 (中国)</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="scroll-anchor"></div>

<!-- Main Menu for large screens -->
<div class="header-nav visible-sm visible-md visible-lg" aria-hidden="true">
    <div id="header-nav">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">

                    <a href="https://access.redhat.com/" class="logo">
                        <span class="logo-crop">
                          <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                            <defs>
                              <style>
                                .rh-logo-hat {
                                  fill: #e00;
                                }
                                .rh-logo-type {
                                  fill: #fff;
                                }
                              </style>
                            </defs>
                            <title>Red Hat</title>
                            <path
                              class="rh-logo-hat"
                              d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                              <path class="rh-logo-band"
                              d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                              <path
                              class="rh-logo-type"
                              d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                          </svg>
                        </span>
                        <span class="site-title"><span>Customer </span><span>Portal</span></span>
                    </a>

                    <nav class="primary-nav hidden-sm">
                        <ul>
                            <li id="nav-products"><a class="products" data-link="mega" data-target="products-menu" href="https://access.redhat.com/products/" id="products-menu">Products &amp; Services</a></li>
                            <li id="nav-tools"><a class="tools" data-link="mega" data-target="tools-menu" href="https://access.redhat.com/labs/" id="tools-menu">Tools</a></li>
                            <li id="nav-security"><a class="security" data-link="mega" data-target="security-menu" href="https://access.redhat.com/security/" id="security-menu">Security</a></li>
                            <li id="nav-community"><a class="community" data-link="mega" data-target="community-menu" href="https://access.redhat.com/community/" id="community-menu">Community</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Mega Menu for large screens -->
<div class="mega-wrap visible-sm visible-md visible-lg" aria-hidden="true">
    <nav class="mega">
        <div class="container">
            <div class="mega-menu-wrap">

                <!-- Products Menu -->
                <div aria-labelledby="products-menu" class="products-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-md-6 col-sm-8">
                            <div class="root clearfix" data-portal-tour-1="7">
                                <ul class="subnav subnav-root">
                                    <li data-target="infrastructure-menu" class="active">
                                        <h3>Infrastructure and Management</h3>
                                    </li>
                                    <li data-target="cloud-menu">
                                        <h3>Cloud Computing</h3>
                                    </li>
                                    <li data-target="storage-menu">
                                        <h3>Storage</h3>
                                    </li>
                                    <li data-target="jboss-dev-menu">
                                        <h3>Runtimes</h3>
                                    </li>
                                    <li data-target="jboss-int-menu">
                                        <h3>Integration and Automation</h3>
                                    </li>
                                </ul>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="infrastructure-menu" style="display: block;">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="cloud-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="storage-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a>
                                        </li>
                                        <li>
                                          <a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-dev-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                        </li>
                                    </ul>
                                </div> -->
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul class="border-bottom" id="portal-menu-border-bottom">
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                      </li>
                                    </ul>
                                    <ul>
                                      <li>
                                        <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Automation</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                      </li>
                                    </ul>
                                </div>
                            </div>
                            <a href="https://access.redhat.com/products" class="btn btn-primary">View All Products</a>
                        </div>

                        <div class="col-md-6 col-sm-4 pull-right" data-portal-tour-1="8">
                            <div class="row">
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/support" class="cta-link cta-link-darkbg">Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
                                        <li><a href="https://access.redhat.com/support/policy/update_policies/">Product Life Cycle &amp; Update Policies</a></li>
                                    </ul>
                                    <h4 class="nav-title">Services</h4>
                                    <ul>
                                        <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
                                        <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/documentation" class="cta-link cta-link-darkbg">Documentation</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>
                                    </ul>
                                    <ul>
                                        <li><a href="https://access.redhat.com/ecosystem/" class="cta-link cta-link-darkbg">Ecosystem</a></li>
                                        <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
                                        <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tools Menu -->
                <div aria-labelledby="tools-menu" class="tools-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row" data-portal-tour-1="9">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h3 class="nav-title">Tools</h3>
                                    <ul>
                                        <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
                                        <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
                                        <li><a href="https://access.redhat.com/errata/">Errata</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <ul class="list-flat">
                                        <li><a href="https://access.redhat.com/labs/" class="cta-link cta-link-darkbg">Customer Portal Labs</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <div class="card card-dark-grey">
                                        <h4 class="card-heading">Red Hat Insights</h4>
                                        <p class="text-white">Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                        <ul class="list-flat rh-l-grid rh-m-gutters rh-m-all-6-col-on-md">
                                          <li><a href="https://www.redhat.com/en/technologies/management/insights" class="cta-link cta-link-md cta-link-darkbg">Learn more</a></li>
                                          <li><a href="https://cloud.redhat.com/insights" class="cta-link cta-link-md cta-link-darkbg">Go to Insights</a></li>
                                        </ul>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>

                <!-- Security Menu -->
                <div aria-labelledby="security-menu" class="security-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="10">

                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Red Hat Product Security Center</h2>
                                    <p class="text-white">Engage with our Red Hat Product Security team, access security updates, and ensure your environments are not exposed to any known security vulnerabilities.</p>
                                    <p><a href="https://access.redhat.com/security/" class="btn btn-primary">Product Security Center</a></p>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Security Updates</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
                                    </ul>
                                    <p class="text-white">Keep your systems secure with Red Hat&#039;s specialized responses for high-priority security vulnerabilities.</p>
                                    <ul>
                                        <li class="more-link"><a href="https://access.redhat.com/security/vulnerability">View Responses</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Resources</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
                                        <li><a href="https://www.redhat.com/en/blog/channel/security">Security Blog</a></li>
                                        <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
                                        <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community Menu -->
                <div aria-labelledby="community-menu" class="community-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="11">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Portal Community</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
                                        <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
                                        <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
                                        <p class="push-top"><a href="https://access.redhat.com/community/" class="btn btn-primary">Community Activity</a></p>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Events</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
                                        <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Stories</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
                                        <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
                                        <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!--<a href="https://access.redhat.com/community/" class="btn btn-primary">Explore Community</a>-->
                    </div>
                </div>
            </div>
        </div>
    </nav>
</div>

            <!--[if IE 8]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
            </div>
            <![endif]-->
            <!--[if IE 9]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
            </div>
            <![endif]-->
            <div id="site-section"></div>
        </header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">
  <script type="text/javascript">
    chrometwo_require(['jquery-ui']);
  </script>


      <article class="rh_docs">
  <div class="container">
        <!-- Display: Book Page Content -->
    
  

<div class="row">
  <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
  <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
  


<a class="toc-toggle toc-show" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
  <span class="sr-only">Show Table of Contents</span>
  <span class="web-icon-mobile-menu" aria-hidden="true"></span>
</a>
<nav id="toc-main" class="toc-main collapse in">
  <div class="toc-menu affix-top">
    <a class="toc-toggle toc-hide" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
      <span class="sr-only">Hide Table of Contents</span>
      <span class="icon-remove" aria-hidden="true"></span>
    </a>
    <div class="doc-options">
      <div class="doc-language btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          English <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="index.html">English</a></li>
                      <li><a href="https://access.redhat.com/documentation/ja-jp/red_hat_enterprise_linux/8/html/managing_file_systems/">日本語</a></li>
                  </ul>
      </div>
      <div class="doc-format btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          Single-page HTML <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_file_systems/">Multi-page HTML</a></li>
                                <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/pdf/managing_file_systems/Red_Hat_Enterprise_Linux-8-Managing_file_systems-en-US.pdf">PDF</a></li>
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/epub/managing_file_systems/Red_Hat_Enterprise_Linux-8-Managing_file_systems-en-US.epub">ePub</a></li>
                  </ul>
      </div>
    </div>
    <ol class="menu"><li class=" leaf"><a href="index.html">Managing file systems</a></li><li class=" leaf"><a href="index.html#proc_providing-feedback-on-red-hat-documentation_managing-file-systems">Providing feedback on Red Hat documentation</a></li><li class=" leaf"><a href="index.html#overview-of-available-file-systems_managing-file-systems">1. Overview of available file systems</a><ol class="menu"><li class=" leaf"><a href="index.html#types-of-file-systems_overview-of-available-file-systems">1.1. Types of file systems</a></li><li class=" leaf"><a href="index.html#local-file-systems_overview-of-available-file-systems">1.2. Local file systems</a></li><li class=" leaf"><a href="index.html#the-xfs-file-system_overview-of-available-file-systems">1.3. The XFS file system</a></li><li class=" leaf"><a href="index.html#the-ext4-file-system_overview-of-available-file-systems">1.4. The ext4 file system</a></li><li class=" leaf"><a href="index.html#choosing-a-local-file-system_overview-of-available-file-systems">1.5. Choosing a local file system</a></li><li class=" leaf"><a href="index.html#network-file-systems_overview-of-available-file-systems">1.6. Network file systems</a></li><li class=" leaf"><a href="index.html#shared-storage-file-systems_overview-of-available-file-systems">1.7. Shared storage file systems</a></li><li class=" leaf"><a href="index.html#choosing-between-network-and-shared-storage-file-systems_overview-of-available-file-systems">1.8. Choosing between network and shared storage file systems</a></li><li class=" leaf"><a href="index.html#volume-managing-file-systems_overview-of-available-file-systems">1.9. Volume-managing file systems</a></li></ol></li><li class=" leaf"><a href="index.html#managing-local-storage-using-rhel-system-roles_managing-file-systems">2. Managing local storage using RHEL System Roles</a><ol class="menu"><li class=" leaf"><a href="index.html#storage-role-intro_managing-local-storage-using-rhel-system-roles">2.1. Introduction to the storage role</a></li><li class=" leaf"><a href="index.html#storage-role-parameters_managing-local-storage-using-rhel-system-roles">2.2. Storage role parameters</a></li></ol></li><li class=" leaf"><a href="index.html#mounting-nfs-shares_managing-file-systems">3. Mounting NFS shares</a><ol class="menu"><li class=" leaf"><a href="index.html#introduction-to-nfs_mounting-nfs-shares">3.1. Introduction to NFS</a></li><li class=" leaf"><a href="index.html#supported-nfs-versions_mounting-nfs-shares">3.2. Supported NFS versions</a></li><li class=" leaf"><a href="index.html#services-required-by-nfs_mounting-nfs-shares">3.3. Services required by NFS</a></li><li class=" leaf"><a href="index.html#nfs-host-name-formats_mounting-nfs-shares">3.4. NFS host name formats</a></li><li class=" leaf"><a href="index.html#installing-nfs_mounting-nfs-shares">3.5. Installing NFS</a></li><li class=" leaf"><a href="index.html#discovering-nfs-exports_mounting-nfs-shares">3.6. Discovering NFS exports</a></li><li class=" leaf"><a href="index.html#mounting-an-nfs-share-with-mount_mounting-nfs-shares">3.7. Mounting an NFS share with mount</a></li><li class=" leaf"><a href="index.html#common-nfs-mount-options_mounting-nfs-shares">3.8. Common NFS mount options</a></li><li class=" leaf"><a href="index.html#related-information-mounting-nfs-shares">3.9. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#exporting-nfs-shares_managing-file-systems">4. Exporting NFS shares</a><ol class="menu"><li class=" leaf"><a href="index.html#introduction-to-nfs_exporting-nfs-shares">4.1. Introduction to NFS</a></li><li class=" leaf"><a href="index.html#supported-nfs-versions_exporting-nfs-shares">4.2. Supported NFS versions</a></li><li class=" leaf"><a href="index.html#the-tcp-and-udp-protocols-in-nfsv3-and-nfsv4_exporting-nfs-shares">4.3. The TCP and UDP protocols in NFSv3 and NFSv4</a></li><li class=" leaf"><a href="index.html#services-required-by-nfs_exporting-nfs-shares">4.4. Services required by NFS</a></li><li class=" leaf"><a href="index.html#nfs-host-name-formats_exporting-nfs-shares">4.5. NFS host name formats</a></li><li class=" leaf"><a href="index.html#nfs-server-configuration_exporting-nfs-shares">4.6. NFS server configuration</a><ol class="menu"><li class=" leaf"><a href="index.html#the-etc-exports-configuration-file_exporting-nfs-shares">4.6.1. The /etc/exports configuration file</a></li><li class=" leaf"><a href="index.html#the-exportfs-utility_exporting-nfs-shares">4.6.2. The exportfs utility</a></li></ol></li><li class=" leaf"><a href="index.html#nfs-and-rpcbind_exporting-nfs-shares">4.7. NFS and rpcbind</a></li><li class=" leaf"><a href="index.html#installing-nfs_exporting-nfs-shares">4.8. Installing NFS</a></li><li class=" leaf"><a href="index.html#starting-the-nfs-server_exporting-nfs-shares">4.9. Starting the NFS server</a></li><li class=" leaf"><a href="index.html#troubleshooting-nfs-and-rpcbind_exporting-nfs-shares">4.10. Troubleshooting NFS and rpcbind</a></li><li class=" leaf"><a href="index.html#configuring-the-nfs-server-to-run-behind-a-firewall_exporting-nfs-shares">4.11. Configuring the NFS server to run behind a firewall</a></li><li class=" leaf"><a href="index.html#exporting-rpc-quota-through-a-firewall_exporting-nfs-shares">4.12. Exporting RPC quota through a firewall</a></li><li class=" leaf"><a href="index.html#enabling-nfs-over-rdma-nfsordma_exporting-nfs-shares">4.13. Enabling NFS over RDMA (NFSoRDMA)</a></li><li class=" leaf"><a href="index.html#configuring-an-nfsv4-only-server_exporting-nfs-shares">4.14. Configuring an NFSv4-only server</a><ol class="menu"><li class=" leaf"><a href="index.html#benefits-and-drawbacks-of-an-nfsv4-only-server_configuring-an-nfsv4-only-server">4.14.1. Benefits and drawbacks of an NFSv4-only server</a></li><li class=" leaf"><a href="index.html#nfs-and-rpcbind_configuring-an-nfsv4-only-server">4.14.2. NFS and rpcbind</a></li><li class=" leaf"><a href="index.html#configuring-the-nfs-server-to-support-only-nfsv4_configuring-an-nfsv4-only-server">4.14.3. Configuring the NFS server to support only NFSv4</a></li><li class=" leaf"><a href="index.html#verifying-the-nfsv4-only-configuration_configuring-an-nfsv4-only-server">4.14.4. Verifying the NFSv4-only configuration</a></li></ol></li><li class=" leaf"><a href="index.html#related-information-exporting-nfs-shares">4.15. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#securing-nfs_managing-file-systems">5. Securing NFS</a><ol class="menu"><li class=" leaf"><a href="index.html#nfs-security-with-auth_sys-and-export-controls_securing-nfs">5.1. NFS security with AUTH_SYS and export controls</a></li><li class=" leaf"><a href="index.html#nfs-security-with-auth_gss_securing-nfs">5.2. NFS security with AUTH_GSS</a></li><li class=" leaf"><a href="index.html#configuring-an-nfs-server-and-client-to-use-kerberos_securing-nfs">5.3. Configuring an NFS server and client to use Kerberos</a></li><li class=" leaf"><a href="index.html#nfsv4-security-options_securing-nfs">5.4. NFSv4 security options</a></li><li class=" leaf"><a href="index.html#file-permissions-on-mounted-nfs-exports_securing-nfs">5.5. File permissions on mounted NFS exports</a></li></ol></li><li class=" leaf"><a href="index.html#enabling-pnfs-scsi-layouts-in-nfs_managing-file-systems">6. Enabling pNFS SCSI layouts in NFS</a><ol class="menu"><li class=" leaf"><a href="index.html#the-pnfs-technology_enabling-pnfs-scsi-layouts-in-nfs">6.1. The pNFS technology</a></li><li class=" leaf"><a href="index.html#pnfs-scsi-layouts_enabling-pnfs-scsi-layouts-in-nfs">6.2. pNFS SCSI layouts</a></li><li class=" leaf"><a href="index.html#checking-for-a-scsi-device-compatible-with-pnfs_enabling-pnfs-scsi-layouts-in-nfs">6.3. Checking for a SCSI device compatible with pNFS</a></li><li class=" leaf"><a href="index.html#setting-up-pnfs-scsi-on-the-server_enabling-pnfs-scsi-layouts-in-nfs">6.4. Setting up pNFS SCSI on the server</a></li><li class=" leaf"><a href="index.html#setting-up-pnfs-scsi-on-the-client_enabling-pnfs-scsi-layouts-in-nfs">6.5. Setting up pNFS SCSI on the client</a></li><li class=" leaf"><a href="index.html#releasing-the-pnfs-scsi-reservation-on-the-server_enabling-pnfs-scsi-layouts-in-nfs">6.6. Releasing the pNFS SCSI reservation on the server</a></li><li class=" leaf"><a href="index.html#monitoring-pnfs-scsi-layouts-functionality_enabling-pnfs-scsi-layouts-in-nfs">6.7. Monitoring pNFS SCSI layouts functionality</a><ol class="menu"><li class=" leaf"><a href="index.html#checking-pnfs-scsi-operations-from-the-server-using-nfsstat_monitoring-pnfs-scsi-layouts-functionality">6.7.1. Checking pNFS SCSI operations from the server using nfsstat</a></li><li class=" leaf"><a href="index.html#checking-pnfs-scsi-operations-from-the-client-using-mountstats_monitoring-pnfs-scsi-layouts-functionality">6.7.2. Checking pNFS SCSI operations from the client using mountstats</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#assembly_mounting-an-smb-share-on-red-hat-enterprise-linux_managing-file-systems">7. Mounting an SMB Share on Red Hat Enterprise Linux</a><ol class="menu"><li class=" leaf"><a href="index.html#con_supported-smb-protocol-versions_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux">7.1. Supported SMB protocol versions</a></li><li class=" leaf"><a href="index.html#con_unix-extensions-support_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux">7.2. UNIX extensions support</a></li><li class=" leaf"><a href="index.html#proc_manually-mounting-an-smb-share_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux">7.3. Manually mounting an SMB share</a></li><li class=" leaf"><a href="index.html#proc_mounting-an-smb-share-automatically-when-the-system-boots_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux">7.4. Mounting an SMB share automatically when the system boots</a></li><li class=" leaf"><a href="index.html#proc_authenticating-to-an-smb-share-using-a-credentials-file_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux">7.5. Authenticating to an SMB share using a credentials file</a></li><li class=" leaf"><a href="index.html#assembly_performing-a-multi-user-smb-mount_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux">7.6. Performing a multi-user SMB mount</a><ol class="menu"><li class=" leaf"><a href="index.html#proc_mounting-a-share-with-the-multiuser-option_assembly_performing-a-multi-user-smb-mount">7.6.1. Mounting a share with the multiuser option</a></li><li class=" leaf"><a href="index.html#proc_verifying-if-an-smb-share-is-mounted-with-the-multiuser-option_assembly_performing-a-multi-user-smb-mount">7.6.2. Verifying if an SMB share is mounted with the multiuser option</a></li><li class=" leaf"><a href="index.html#proc_accessing-a-share-as-a-user_assembly_performing-a-multi-user-smb-mount">7.6.3. Accessing a share as a user</a></li></ol></li><li class=" leaf"><a href="index.html#con_frequently-used-mount-options_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux">7.7. Frequently used mount options</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_overview-of-persistent-naming-attributes_managing-file-systems">8. Overview of persistent naming attributes</a><ol class="menu"><li class=" leaf"><a href="index.html#con_disadvantages-of-non-persistent-naming-attributes_assembly_overview-of-persistent-naming-attributes">8.1. Disadvantages of non-persistent naming attributes</a></li><li class=" leaf"><a href="index.html#file-system-and-device-identifiers_assembly_overview-of-persistent-naming-attributes">8.2. File system and device identifiers</a></li><li class=" leaf"><a href="index.html#con_device-names-managed-by-the-udev-mechanism-in-dev-disk-_assembly_overview-of-persistent-naming-attributes">8.3. Device names managed by the udev mechanism in /dev/disk/</a><ol class="menu"><li class=" leaf"><a href="index.html#file-system-identifiers_assembly_overview-of-persistent-naming-attributes">8.3.1. File system identifiers</a></li><li class=" leaf"><a href="index.html#device-identifiers_assembly_overview-of-persistent-naming-attributes">8.3.2. Device identifiers</a></li></ol></li><li class=" leaf"><a href="index.html#con_the-world-wide-identifier-with-dm-multipath_assembly_overview-of-persistent-naming-attributes">8.4. The World Wide Identifier with DM Multipath</a></li><li class=" leaf"><a href="index.html#con_limitations-of-the-udev-device-naming-convention_assembly_overview-of-persistent-naming-attributes">8.5. Limitations of the udev device naming convention</a></li><li class=" leaf"><a href="index.html#proc_listing-persistent-naming-attributes_assembly_overview-of-persistent-naming-attributes">8.6. Listing persistent naming attributes</a></li><li class=" leaf"><a href="index.html#proc_modifying-persistent-naming-attributes_assembly_overview-of-persistent-naming-attributes">8.7. Modifying persistent naming attributes</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_getting-started-with-partitions_managing-file-systems">9. Getting started with partitions</a><ol class="menu"><li class=" leaf"><a href="index.html#assembly_viewing-the-partition-table_assembly_getting-started-with-partitions">9.1. Viewing the partition table</a><ol class="menu"><li class=" leaf"><a href="index.html#proc_viewing-the-partition-table-with-parted_assembly_viewing-the-partition-table">9.1.1. Viewing the partition table with parted</a></li><li class=" leaf"><a href="index.html#ref_example-output-of-parted-print_assembly_viewing-the-partition-table">9.1.2. Example output of parted print</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_creating-a-partition-table-on-a-disk_assembly_getting-started-with-partitions">9.2. Creating a partition table on a disk</a><ol class="menu"><li class=" leaf"><a href="index.html#con_considerations-before-modifying-partitions-on-a-disk_assembly_creating-a-partition-table-on-a-disk">9.2.1. Considerations before modifying partitions on a disk</a></li><li class=" leaf"><a href="index.html#ref_comparison-of-partition-table-types_assembly_creating-a-partition-table-on-a-disk">9.2.2. Comparison of partition table types</a></li><li class=" leaf"><a href="index.html#proc_creating-a-partition-table-on-a-disk-with-parted_assembly_creating-a-partition-table-on-a-disk">9.2.3. Creating a partition table on a disk with parted</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_creating-a-partition_assembly_getting-started-with-partitions">9.3. Creating a partition</a><ol class="menu"><li class=" leaf"><a href="index.html#con_considerations-before-modifying-partitions-on-a-disk_assembly_creating-a-partition">9.3.1. Considerations before modifying partitions on a disk</a></li><li class=" leaf"><a href="index.html#con_partition-types_assembly_creating-a-partition">9.3.2. Partition types</a></li><li class=" leaf"><a href="index.html#proc_creating-a-partition-with-parted_assembly_creating-a-partition">9.3.3. Creating a partition with parted</a></li><li class=" leaf"><a href="index.html#proc_setting-a-partition-type-with-fdisk_assembly_creating-a-partition">9.3.4. Setting a partition type with fdisk</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_removing-a-partition_assembly_getting-started-with-partitions">9.4. Removing a partition</a><ol class="menu"><li class=" leaf"><a href="index.html#con_considerations-before-modifying-partitions-on-a-disk_assembly_removing-a-partition">9.4.1. Considerations before modifying partitions on a disk</a></li><li class=" leaf"><a href="index.html#proc_removing-a-partition-with-parted_assembly_removing-a-partition">9.4.2. Removing a partition with parted</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_resizing-a-partition_assembly_getting-started-with-partitions">9.5. Resizing a partition</a><ol class="menu"><li class=" leaf"><a href="index.html#con_considerations-before-modifying-partitions-on-a-disk_assembly_resizing-a-partition">9.5.1. Considerations before modifying partitions on a disk</a></li><li class=" leaf"><a href="index.html#proc_resizing-a-partition-with-parted_assembly_resizing-a-partition">9.5.2. Resizing a partition with parted</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#assembly_getting-started-with-xfs-managing-file-systems">10. Getting started with XFS</a><ol class="menu"><li class=" leaf"><a href="index.html#the-xfs-file-system_getting-started-with-xfs">10.1. The XFS file system</a></li><li class=" leaf"><a href="index.html#assembly_creating-an-xfs-file-system-getting-started-with-xfs">10.2. Creating an XFS file system</a><ol class="menu"><li class=" leaf"><a href="index.html#proc_creating-an-xfs-file-system-with-mkfs-xfs-creating-an-xfs-file-system">10.2.1. Creating an XFS file system with mkfs.xfs</a></li><li class=" leaf"><a href="index.html#creating-an-xfs-file-system-using-rhel-system-roles_creating-an-xfs-file-system">10.2.2. Creating an XFS file system on a block device using RHEL System Roles</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_backing-up-an-xfs-file-system-getting-started-with-xfs">10.3. Backing up an XFS file system</a><ol class="menu"><li class=" leaf"><a href="index.html#con_features-of-xfs-backup-backing-up-an-xfs-file-system">10.3.1. Features of XFS backup</a></li><li class=" leaf"><a href="index.html#proc_backing-up-an-xfs-file-system-with-xfsdump-backing-up-an-xfs-file-system">10.3.2. Backing up an XFS file system with xfsdump</a></li><li class=" leaf"><a href="index.html#additional-resources-backing-up-an-xfs-file-system">10.3.3. Additional resources</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_recovering-an-xfs-file-system-from-backup-getting-started-with-xfs">10.4. Restoring an XFS file system from backup</a><ol class="menu"><li class=" leaf"><a href="index.html#con_features-of-restoring-xfs-from-backup-restoring-an-xfs-file-system-from-backup">10.4.1. Features of restoring XFS from backup</a></li><li class=" leaf"><a href="index.html#proc_restoring-an-xfs-file-system-from-backup-with-xfsrestore-restoring-an-xfs-file-system-from-backup">10.4.2. Restoring an XFS file system from backup with xfsrestore</a></li><li class=" leaf"><a href="index.html#con_informational-messages-when-restoring-an-xfs-backup-from-a-tape-restoring-an-xfs-file-system-from-backup">10.4.3. Informational messages when restoring an XFS backup from a tape</a></li><li class=" leaf"><a href="index.html#additional-resources-restoring-an-xfs-file-system-from-backup">10.4.4. Additional resources</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_increasing-the-size-of-an-xfs-file-system_getting-started-with-xfs">10.5. Increasing the size of an XFS file system</a><ol class="menu"><li class=" leaf"><a href="index.html#proc_increasing-the-size-of-an-xfs-file-system-with-xfs_growfs_assembly_increasing-the-size-of-an-xfs-file-system">10.5.1. Increasing the size of an XFS file system with xfs_growfs</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#checking-and-repairing-a-file-system_managing-file-systems">11. Checking and repairing a file system</a><ol class="menu"><li class=" leaf"><a href="index.html#file-system-checking-and-repair_checking-and-repairing-a-file-system">11.1. Scenarios that require a file system check</a></li><li class=" leaf"><a href="index.html#potential-side-effects-of-running-fsck_checking-and-repairing-a-file-system">11.2. Potential side effects of running fsck</a></li><li class=" leaf"><a href="index.html#error-handling-mechanisms-in-xfs_checking-and-repairing-a-file-system">11.3. Error-handling mechanisms in XFS</a></li><li class=" leaf"><a href="index.html#checking-an-xfs-file-system-with-xfs-repair_checking-and-repairing-a-file-system">11.4. Checking an XFS file system with xfs_repair</a></li><li class=" leaf"><a href="index.html#proc_repairing-an-xfs-file-system-with-xfs_repair_checking-and-repairing-a-file-system">11.5. Repairing an XFS file system with xfs_repair</a></li><li class=" leaf"><a href="index.html#error-handling-mechanisms-in-ext2-ext3-and-ext4_checking-and-repairing-a-file-system">11.6. Error handling mechanisms in ext2, ext3, and ext4</a></li><li class=" leaf"><a href="index.html#checking-an-ext2-ext3-or-ext4-file-system-with-e2fsck_checking-and-repairing-a-file-system">11.7. Checking an ext2, ext3, or ext4 file system with e2fsck</a></li><li class=" leaf"><a href="index.html#repairing-an-ext2-ext3-or-ext4-file-system-with-e2fsck_checking-and-repairing-a-file-system">11.8. Repairing an ext2, ext3, or ext4 file system with e2fsck</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_mounting-file-systems_managing-file-systems">12. Mounting file systems</a><ol class="menu"><li class=" leaf"><a href="index.html#the-linux-mount-mechanism_assembly_mounting-file-systems">12.1. The Linux mount mechanism</a></li><li class=" leaf"><a href="index.html#listing-currently-mounted-file-systems_assembly_mounting-file-systems">12.2. Listing currently mounted file systems</a></li><li class=" leaf"><a href="index.html#mounting-a-file-system-with-mount_assembly_mounting-file-systems">12.3. Mounting a file system with mount</a></li><li class=" leaf"><a href="index.html#moving-a-mount-point_assembly_mounting-file-systems">12.4. Moving a mount point</a></li><li class=" leaf"><a href="index.html#unmounting-a-file-system-with-umount_assembly_mounting-file-systems">12.5. Unmounting a file system with umount</a></li><li class=" leaf"><a href="index.html#common-mount-options_assembly_mounting-file-systems">12.6. Common mount options</a></li><li class=" leaf"><a href="index.html#sharing-a-mount-on-multiple-mount-points_assembly_mounting-file-systems">12.7. Sharing a mount on multiple mount points</a><ol class="menu"><li class=" leaf"><a href="index.html#types-of-shared-mounts_sharing-a-mount-on-multiple-mount-points">12.7.1. Types of shared mounts</a></li><li class=" leaf"><a href="index.html#creating-a-private-mount-point-duplicate_sharing-a-mount-on-multiple-mount-points">12.7.2. Creating a private mount point duplicate</a></li><li class=" leaf"><a href="index.html#creating-a-shared-mount-point-duplicate_sharing-a-mount-on-multiple-mount-points">12.7.3. Creating a shared mount point duplicate</a></li><li class=" leaf"><a href="index.html#creating-a-slave-mount-point-duplicate_sharing-a-mount-on-multiple-mount-points">12.7.4. Creating a slave mount point duplicate</a></li><li class=" leaf"><a href="index.html#preventing-a-mount-point-from-being-duplicated_sharing-a-mount-on-multiple-mount-points">12.7.5. Preventing a mount point from being duplicated</a></li><li class=" leaf"><a href="index.html#related-information-sharing-a-mount-on-multiple-mount-points">12.7.6. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_persistently-mounting-file-systems_assembly_mounting-file-systems">12.8. Persistently mounting file systems</a><ol class="menu"><li class=" leaf"><a href="index.html#con_the-etc-fstab-file_assembly_persistently-mounting-file-systems">12.8.1. The /etc/fstab file</a></li><li class=" leaf"><a href="index.html#adding-a-file-system-to-etc-fstab_assembly_persistently-mounting-file-systems">12.8.2. Adding a file system to /etc/fstab</a></li><li class=" leaf"><a href="index.html#persistently-mounting-a-file-system-using-rhel-system-roles_assembly_persistently-mounting-file-systems">12.8.3. Persistently mounting a file system using RHEL System Roles</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_mounting-file-systems-on-demand_assembly_mounting-file-systems">12.9. Mounting file systems on demand</a><ol class="menu"><li class=" leaf"><a href="index.html#the-autofs-service_assembly_mounting-file-systems-on-demand">12.9.1. The autofs service</a></li><li class=" leaf"><a href="index.html#the-autofs-configuration-files_assembly_mounting-file-systems-on-demand">12.9.2. The autofs configuration files</a></li><li class=" leaf"><a href="index.html#configuring-autofs-mount-points_assembly_mounting-file-systems-on-demand">12.9.3. Configuring autofs mount points</a></li><li class=" leaf"><a href="index.html#automounting-user-home-directories-with-autofs-service_assembly_mounting-file-systems-on-demand">12.9.4. Automounting NFS server user home directories with autofs service</a></li><li class=" leaf"><a href="index.html#overriding-or-augmenting-autofs-site-configuration-files_assembly_mounting-file-systems-on-demand">12.9.5. Overriding or augmenting autofs site configuration files</a></li><li class=" leaf"><a href="index.html#using-ldap-to-store-automounter-maps_assembly_mounting-file-systems-on-demand">12.9.6. Using LDAP to store automounter maps</a></li></ol></li><li class=" leaf"><a href="index.html#setting-read-only-permissions-for-the-root-file-system_assembly_mounting-file-systems">12.10. Setting read-only permissions for the root file system</a><ol class="menu"><li class=" leaf"><a href="index.html#files-and-directories-that-always-retain-write-permissions_setting-read-only-permissions-for-the-root-file-system">12.10.1. Files and directories that always retain write permissions</a></li><li class=" leaf"><a href="index.html#configuring-the-root-file-system-to-mount-with-read-only-permissions-on-boot_setting-read-only-permissions-for-the-root-file-system">12.10.2. Configuring the root file system to mount with read-only permissions on boot</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#limiting-storage-space-usage-with-quotas_managing-file-systems">13. Limiting storage space usage with quotas</a><ol class="menu"><li class=" leaf"><a href="index.html#disk-quotas_limiting-storage-space-usage-with-quotas">13.1. Disk quotas</a><ol class="menu"><li class=" leaf"><a href="index.html#the-xfs_quota-tool_disk-quotas">13.1.1. The xfs_quota tool</a></li></ol></li><li class=" leaf"><a href="index.html#managing-file-system-quotas-in-xfs_limiting-storage-space-usage-with-quotas">13.2. Managing XFS disk quotas</a><ol class="menu"><li class=" leaf"><a href="index.html#file-system-quota-management-in-xfs_file-system-quota-management-in-xfs">13.2.1. File system quota management in XFS</a></li><li class=" leaf"><a href="index.html#enabling-disk-quotas-for-xfs_file-system-quota-management-in-xfs">13.2.2. Enabling disk quotas for XFS</a></li><li class=" leaf"><a href="index.html#running-the-xfs_quota-tool_file-system-quota-management-in-xfs">13.2.3. Reporting XFS usage</a></li><li class=" leaf"><a href="index.html#running-the-xfs_quota-tool-in-expert-mode_file-system-quota-management-in-xfs">13.2.4. Modifying XFS quota limits</a></li><li class=" leaf"><a href="index.html#setting-project-limits-for-xfs_file-system-quota-management-in-xfs">13.2.5. Setting project limits for XFS</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#discarding-unused-blocks_managing-file-systems">14. Discarding unused blocks</a><ol class="menu"><li class=" leaf"><a href="index.html#block-discard-operations_discarding-unused-blocks">14.1. Block discard operations</a></li><li class=" leaf"><a href="index.html#types-of-block-discard-operations_discarding-unused-blocks">14.2. Types of block discard operations</a></li><li class=" leaf"><a href="index.html#performing-batch-block-discard_discarding-unused-blocks">14.3. Performing batch block discard</a></li><li class=" leaf"><a href="index.html#enabling-online-block-discard_discarding-unused-blocks">14.4. Enabling online block discard</a></li><li class=" leaf"><a href="index.html#enabling-online-block-discard-using-rhel-system-roles_discarding-unused-blocks">14.5. Enabling online block discard using RHEL System Roles</a><ol class="menu"><li class=" leaf"><a href="index.html#an-example-ansible-playbook-to-enable-online-block-discard_enabling-online-block-discard-using-rhel-system-roles">14.5.1. Example Ansible playbook to enable online block discard</a></li><li class=" leaf"><a href="index.html#additional_resources_7">14.5.2. Additional resources</a></li></ol></li><li class=" leaf"><a href="index.html#enabling-periodic-block-discard_discarding-unused-blocks">14.6. Enabling periodic block discard</a></li></ol></li><li class=" leaf"><a href="index.html#managing-layered-local-storage-with-stratis_managing-file-systems">15. Managing layered local storage with Stratis</a><ol class="menu"><li class=" leaf"><a href="index.html#setting-up-stratis-file-systems_managing-layered-local-storage-with-stratis">15.1. Setting up Stratis file systems</a><ol class="menu"><li class=" leaf"><a href="index.html#the-purpose-and-features-of-stratis_setting-up-stratis-file-systems">15.1.1. The purpose and features of Stratis</a></li><li class=" leaf"><a href="index.html#components-of-a-stratis-volume_setting-up-stratis-file-systems">15.1.2. Components of a Stratis volume</a></li><li class=" leaf"><a href="index.html#block-devices-usable-with-stratis_setting-up-stratis-file-systems">15.1.3. Block devices usable with Stratis</a></li><li class=" leaf"><a href="index.html#installing-stratis_setting-up-stratis-file-systems">15.1.4. Installing Stratis</a></li><li class=" leaf"><a href="index.html#creating-a-stratis-pool_setting-up-stratis-file-systems">15.1.5. Creating a Stratis pool</a></li><li class=" leaf"><a href="index.html#creating-a-stratis-file-system_setting-up-stratis-file-systems">15.1.6. Creating a Stratis file system</a></li><li class=" leaf"><a href="index.html#mounting-a-stratis-file-system_setting-up-stratis-file-systems">15.1.7. Mounting a Stratis file system</a></li><li class=" leaf"><a href="index.html#persistently-mounting-a-stratis-file-system_setting-up-stratis-file-systems">15.1.8. Persistently mounting a Stratis file system</a></li><li class=" leaf"><a href="index.html#related-information-setting-up-stratis-file-systems">15.1.9. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#extending-a-stratis-volume-with-additional-block-devices_managing-layered-local-storage-with-stratis">15.2. Extending a Stratis volume with additional block devices</a><ol class="menu"><li class=" leaf"><a href="index.html#components-of-a-stratis-volume_extending-a-stratis-volume-with-additional-block-devices">15.2.1. Components of a Stratis volume</a></li><li class=" leaf"><a href="index.html#adding-block-devices-to-a-stratis-pool_extending-a-stratis-volume-with-additional-block-devices">15.2.2. Adding block devices to a Stratis pool</a></li><li class=" leaf"><a href="index.html#related-information-extending-a-stratis-volume-with-additional-block-devices">15.2.3. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#monitoring-stratis-file-systems_managing-layered-local-storage-with-stratis">15.3. Monitoring Stratis file systems</a><ol class="menu"><li class=" leaf"><a href="index.html#stratis-sizes-reported-by-different-utilities_monitoring-stratis-file-systems">15.3.1. Stratis sizes reported by different utilities</a></li><li class=" leaf"><a href="index.html#displaying-information-about-stratis-volumes_monitoring-stratis-file-systems">15.3.2. Displaying information about Stratis volumes</a></li><li class=" leaf"><a href="index.html#related-information-monitoring-stratis-file-systems">15.3.3. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#using-snapshots-on-stratis-file-systems_managing-layered-local-storage-with-stratis">15.4. Using snapshots on Stratis file systems</a><ol class="menu"><li class=" leaf"><a href="index.html#characteristics-of-stratis-snapshots_using-snapshots-on-stratis-file-systems">15.4.1. Characteristics of Stratis snapshots</a></li><li class=" leaf"><a href="index.html#creating-a-stratis-snapshot_using-snapshots-on-stratis-file-systems">15.4.2. Creating a Stratis snapshot</a></li><li class=" leaf"><a href="index.html#accessing-the-content-of-a-stratis-snapshot_using-snapshots-on-stratis-file-systems">15.4.3. Accessing the content of a Stratis snapshot</a></li><li class=" leaf"><a href="index.html#reverting-a-stratis-file-system-to-a-previous-snapshot_using-snapshots-on-stratis-file-systems">15.4.4. Reverting a Stratis file system to a previous snapshot</a></li><li class=" leaf"><a href="index.html#removing-a-stratis-snapshot_using-snapshots-on-stratis-file-systems">15.4.5. Removing a Stratis snapshot</a></li><li class=" leaf"><a href="index.html#related-information-using-snapshots-on-stratis-file-systems">15.4.6. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#removing-stratis-file-systems_managing-layered-local-storage-with-stratis">15.5. Removing Stratis file systems</a><ol class="menu"><li class=" leaf"><a href="index.html#components-of-a-stratis-volume_removing-stratis-file-systems">15.5.1. Components of a Stratis volume</a></li><li class=" leaf"><a href="index.html#removing-a-stratis-file-system_removing-stratis-file-systems">15.5.2. Removing a Stratis file system</a></li><li class=" leaf"><a href="index.html#removing-a-stratis-pool_removing-stratis-file-systems">15.5.3. Removing a Stratis pool</a></li><li class=" leaf"><a href="index.html#related-information-removing-stratis-file-systems">15.5.4. Related information</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#getting-started-with-an-ext3-file-system_managing-file-systems">16. Getting started with an ext3 file system</a><ol class="menu"><li class=" leaf"><a href="index.html#features-of-an-ext3-file-system_getting-started-with-an-ext3-file-system">16.1. Features of an ext3 file system</a></li><li class=" leaf"><a href="index.html#creating-an-ext-file-system_getting-started-with-an-ext3-file-system">16.2. Creating an ext3 file system</a></li><li class=" leaf"><a href="index.html#mounting-an-ext-file-system_getting-started-with-an-ext3-file-system">16.3. Mounting an ext3 file system</a></li><li class=" leaf"><a href="index.html#resizing-an-ext-file-system_getting-started-with-an-ext3-file-system">16.4. Resizing an ext3 file system</a></li><li class=" leaf"><a href="index.html#creating-mounting-ext3-filesystem-using-rhel-system-roles_getting-started-with-an-ext3-file-system">16.5. Creating and mounting ext3 file systems using RHEL System Roles</a><ol class="menu"><li class=" leaf"><a href="index.html#an-example-ansible-playbook-to-create-mount-ext3-file-system_creating-mounting-ext3-filesystem-using-rhel-system-roles">16.5.1. Example Ansible playbook to create and mount an ext3 file system</a></li><li class=" leaf"><a href="index.html#additional_resources_8">16.5.2. Additional resources</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#getting-started-with-an-ext4-file-system_managing-file-systems">17. Getting started with an ext4 file system</a><ol class="menu"><li class=" leaf"><a href="index.html#features-of-an-ext4-file-system_getting-started-with-an-ext4-file-system">17.1. Features of an ext4 file system</a></li><li class=" leaf"><a href="index.html#creating-an-ext-file-system_getting-started-with-an-ext4-file-system">17.2. Creating an ext4 file system</a></li><li class=" leaf"><a href="index.html#mounting-an-ext-file-system_getting-started-with-an-ext4-file-system">17.3. Mounting an ext4 file system</a></li><li class=" leaf"><a href="index.html#resizing-an-ext-file-system_getting-started-with-an-ext4-file-system">17.4. Resizing an ext4 file system</a></li><li class=" leaf"><a href="index.html#creating-mounting-ext4-file-system-using-rhel-system-roles_getting-started-with-an-ext4-file-system">17.5. Creating and mounting ext4 file systems using RHEL System Roles</a><ol class="menu"><li class=" leaf"><a href="index.html#an-example-playbook-to-create-mount-an-ext4-file-system_creating-mounting-ext4-file-system-using-rhel-system-roles">17.5.1. Example Ansible playbook to create and mount an ext4 file system</a></li><li class=" leaf"><a href="index.html#additional_resources_9">17.5.2. Additional resources</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#idm140591318445936">Legal Notice</a></li></ol>  </div>
</nav>


  <div class="doc-wrapper">
    <div class="panel-pane pane-training-banner"  >
  
      
  
  <div class="card card-light card-md push-bottom">
  <h2 class="card-heading card-heading-red card-heading-sm card-heading-flush">Red Hat Training</h2>
  <p>A Red Hat training course is available for <a href="https://www.redhat.com/en/services/training/courses-by-curriculum?intcmp=701f2000001D4OtAAK&amp;#Red-Hat-Enterprise-Linux" class="cta-link">RHEL 8</a></p>
</div>

  
  </div>
<div class="panel-pane pane-page-title"  >
  
      
  
  <h1 class="title" itemprop="name">Managing file systems</h1>
  
  </div>
<div class="panel-pane pane-page-body"  >
  
      
  
  <div class="body"><div xml:lang="en-US" class="book" id="idm140591309640224"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Enterprise Linux</span> <span class="productnumber">8</span></div><div><h2 class="subtitle">Creating, modifying, and administering file systems in Red Hat Enterprise Linux 8</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat</span> <span class="orgdiv">Customer Content Services</span></div></div><div><a href="index.html#idm140591318445936">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				This documentation collection provides instructions on how to effectively manage file systems in Red Hat Enterprise Linux 8.
			</div></div></div></div><hr/></div><section class="preface" id="proc_providing-feedback-on-red-hat-documentation_managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Providing feedback on Red Hat documentation</h1></div></div></div><p>
			We appreciate your input on our documentation. Please let us know how we could make it better. To do so:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					For simple comments on specific passages:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Make sure you are viewing the documentation in the <span class="emphasis"><em>Multi-page HTML</em></span> format. In addition, ensure you see the <span class="strong strong"><strong>Feedback</strong></span> button in the upper right corner of the document.
						</li><li class="listitem">
							Use your mouse cursor to highlight the part of text that you want to comment on.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Add Feedback</strong></span> pop-up that appears below the highlighted text.
						</li><li class="listitem">
							Follow the displayed instructions.
						</li></ol></div></li><li class="listitem"><p class="simpara">
					For submitting more complex feedback, create a Bugzilla ticket:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Go to the <a class="link" href="https://bugzilla.redhat.com/enter_bug.cgi?product=Red%20Hat%20Enterprise%20Linux%208">Bugzilla</a> website.
						</li><li class="listitem">
							As the Component, use <span class="strong strong"><strong>Documentation</strong></span>.
						</li><li class="listitem">
							Fill in the <span class="strong strong"><strong>Description</strong></span> field with your suggestion for improvement. Include a link to the relevant part(s) of documentation.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Submit Bug</strong></span>.
						</li></ol></div></li></ul></div></section><section class="chapter" id="overview-of-available-file-systems_managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Overview of available file systems</h1></div></div></div><p>
			Choosing the file system that is appropriate for your application is an important decision due to the large number of options available and the trade-offs involved. This chapter describes some of the file systems that ship with Red Hat Enterprise Linux 8 and provides historical background and recommendations on the right file system to suit your application.
		</p><section class="section" id="types-of-file-systems_overview-of-available-file-systems"><div class="titlepage"><div><div><h2 class="title">1.1. Types of file systems</h2></div></div></div><p>
				Red Hat Enterprise Linux 8 supports a variety of file systems (FS). Different types of file systems solve different kinds of problems, and their usage is application specific. At the most general level, available file systems can be grouped into the following major types:
			</p><div class="table" id="idm140591314922144"><p class="title"><strong>Table 1.1. Types of file systems and their use cases</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 25%; " class="col_2"><!--Empty--></col><col style="width: 50%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140591312609936" scope="col">Type</th><th align="left" valign="top" id="idm140591312608848" scope="col">File system</th><th align="left" valign="top" id="idm140591315478368" scope="col">Attributes and use cases</th></tr></thead><tbody><tr><td rowspan="2" align="left" valign="top" headers="idm140591312609936"> <p>
								Disk or local FS
							</p>
							 </td><td align="left" valign="top" headers="idm140591312608848"> <p>
								XFS
							</p>
							 </td><td align="left" valign="top" headers="idm140591315478368"> <p>
								XFS is the default file system in RHEL. Because it lays out files as extents, it is less vulnerable to fragmentation than ext4. Red Hat recommends deploying XFS as your local file system unless there are specific reasons to do otherwise: for example, compatibility or corner cases around performance.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591312608848"> <p>
								ext4
							</p>
							 </td><td align="left" valign="top" headers="idm140591315478368"> <p>
								ext4 has the benefit of longevity in Linux. Therefore, it is supported by almost all Linux applications. In most cases, it rivals XFS on performance. ext4 is commonly used for home directories.
							</p>
							 </td></tr><tr><td rowspan="2" align="left" valign="top" headers="idm140591312609936"> <p>
								Network or client-and-server FS
							</p>
							 </td><td align="left" valign="top" headers="idm140591312608848"> <p>
								NFS
							</p>
							 </td><td align="left" valign="top" headers="idm140591315478368"> <p>
								Use NFS to share files between multiple systems on the same network.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591312608848"> <p>
								SMB
							</p>
							 </td><td align="left" valign="top" headers="idm140591315478368"> <p>
								Use SMB for file sharing with Microsoft Windows systems.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591312609936"> <p>
								Shared storage or shared disk FS
							</p>
							 </td><td align="left" valign="top" headers="idm140591312608848"> <p>
								GFS2
							</p>
							 </td><td align="left" valign="top" headers="idm140591315478368"> <p>
								GFS2 provides shared write access to members of a compute cluster. The emphasis is on stability and reliability, with the functional experience of a local file system as possible. SAS Grid, Tibco MQ, IBM Websphere MQ, and Red Hat Active MQ have been deployed successfully on GFS2.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591312609936"> <p>
								Volume-managing FS
							</p>
							 </td><td align="left" valign="top" headers="idm140591312608848"> <p>
								Stratis (Technology Preview)
							</p>
							 </td><td align="left" valign="top" headers="idm140591315478368"> <p>
								Stratis is a volume manager built on a combination of XFS and LVM. The purpose of Stratis is to emulate capabilities offered by volume-managing file systems like Btrfs and ZFS. It is possible to build this stack manually, but Stratis reduces configuration complexity, implements best practices, and consolidates error information.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="local-file-systems_overview-of-available-file-systems"><div class="titlepage"><div><div><h2 class="title">1.2. Local file systems</h2></div></div></div><p>
				Local file systems are file systems that run on a single, local server and are directly attached to storage.
			</p><p>
				For example, a local file system is the only choice for internal SATA or SAS disks, and is used when your server has internal hardware RAID controllers with local drives. Local file systems are also the most common file systems used on SAN attached storage when the device exported on the SAN is not shared.
			</p><p>
				All local file systems are POSIX-compliant and are fully compatible with all supported Red Hat Enterprise Linux releases. POSIX-compliant file systems provide support for a well-defined set of system calls, such as <code class="literal">read()</code>, <code class="literal">write()</code>, and <code class="literal">seek()</code>.
			</p><p>
				From the application programmer’s point of view, there are relatively few differences between local file systems. The most notable differences from a user’s perspective are related to scalability and performance. When considering a file system choice, consider how large the file system needs to be, what unique features it should have, and how it performs under your workload.
			</p><h4 id="available_local_file_systems">Available local file systems</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						XFS
					</li><li class="listitem">
						ext4
					</li></ul></div></section><section class="section" id="the-xfs-file-system_overview-of-available-file-systems"><div class="titlepage"><div><div><h2 class="title">1.3. The XFS file system</h2></div></div></div><p>
				XFS is a highly scalable, high-performance, robust, and mature 64-bit journaling file system that supports very large files and file systems on a single host. It is the default file system in Red Hat Enterprise Linux 8. XFS was originally developed in the early 1990s by SGI and has a long history of running on extremely large servers and storage arrays.
			</p><p>
				The features of XFS include:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Reliability</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Metadata journaling, which ensures file system integrity after a system crash by keeping a record of file system operations that can be replayed when the system is restarted and the file system remounted
								</li><li class="listitem">
									Extensive run-time metadata consistency checking
								</li><li class="listitem">
									Scalable and fast repair utilities
								</li><li class="listitem">
									Quota journaling. This avoids the need for lengthy quota consistency checks after a crash.
								</li></ul></div></dd><dt><span class="term">Scalability and performance</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Supported file system size up to 1024 TiB
								</li><li class="listitem">
									Ability to support a large number of concurrent operations
								</li><li class="listitem">
									B-tree indexing for scalability of free space management
								</li><li class="listitem">
									Sophisticated metadata read-ahead algorithms
								</li><li class="listitem">
									Optimizations for streaming video workloads
								</li></ul></div></dd><dt><span class="term">Allocation schemes</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Extent-based allocation
								</li><li class="listitem">
									Stripe-aware allocation policies
								</li><li class="listitem">
									Delayed allocation
								</li><li class="listitem">
									Space pre-allocation
								</li><li class="listitem">
									Dynamically allocated inodes
								</li></ul></div></dd><dt><span class="term">Other features</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Reflink-based file copies (new in Red Hat Enterprise Linux 8)
								</li><li class="listitem">
									Tightly integrated backup and restore utilities
								</li><li class="listitem">
									Online defragmentation
								</li><li class="listitem">
									Online file system growing
								</li><li class="listitem">
									Comprehensive diagnostics capabilities
								</li><li class="listitem">
									Extended attributes (<code class="literal">xattr</code>). This allows the system to associate several additional name/value pairs per file.
								</li><li class="listitem">
									Project or directory quotas. This allows quota restrictions over a directory tree.
								</li><li class="listitem">
									Subsecond timestamps
								</li></ul></div></dd></dl></div><h4 id="performance_characteristics">Performance characteristics</h4><p>
				XFS has a high performance on large systems with enterprise workloads. A large system is one with a relatively high number of CPUs, multiple HBAs, and connections to external disk arrays. XFS also performs well on smaller systems that have a multi-threaded, parallel I/O workload.
			</p><p>
				XFS has a relatively low performance for single threaded, metadata-intensive workloads: for example, a workload that creates or deletes large numbers of small files in a single thread.
			</p></section><section class="section" id="the-ext4-file-system_overview-of-available-file-systems"><div class="titlepage"><div><div><h2 class="title">1.4. The ext4 file system</h2></div></div></div><p>
				The ext4 file system is the fourth generation of the ext file system family. It was the default file system in Red Hat Enterprise Linux 6.
			</p><p>
				The ext4 driver can read and write to ext2 and ext3 file systems, but the ext4 file system format is not compatible with ext2 and ext3 drivers.
			</p><p>
				ext4 adds several new and improved features, such as:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Supported file system size up to 50 TiB
					</li><li class="listitem">
						Extent-based metadata
					</li><li class="listitem">
						Delayed allocation
					</li><li class="listitem">
						Journal checksumming
					</li><li class="listitem">
						Large storage support
					</li></ul></div><p>
				The extent-based metadata and the delayed allocation features provide a more compact and efficient way to track utilized space in a file system. These features improve file system performance and reduce the space consumed by metadata. Delayed allocation allows the file system to postpone selection of the permanent location for newly written user data until the data is flushed to disk. This enables higher performance since it can allow for larger, more contiguous allocations, allowing the file system to make decisions with much better information.
			</p><p>
				File system repair time using the <code class="literal">fsck</code> utility in ext4 is much faster than in ext2 and ext3. Some file system repairs have demonstrated up to a six-fold increase in performance.
			</p></section><section class="section" id="choosing-a-local-file-system_overview-of-available-file-systems"><div class="titlepage"><div><div><h2 class="title">1.5. Choosing a local file system</h2></div></div></div><p>
				To choose a file system that meets your application requirements, you need to understand the target system on which you are going to deploy the file system. You can use the following questions to inform your decision:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Do you have a large server?
					</li><li class="listitem">
						Do you have large storage requirements or have a local, slow SATA drive?
					</li><li class="listitem">
						What kind of I/O workload do you expect your application to present?
					</li><li class="listitem">
						What are your throughput and latency requirements?
					</li><li class="listitem">
						How stable is your server and storage hardware?
					</li><li class="listitem">
						What is the typical size of your files and data set?
					</li><li class="listitem">
						If the system fails, how much downtime can you suffer?
					</li></ul></div><p>
				If both your server and your storage device are large, XFS is the best choice. Even with smaller storage arrays, XFS performs very well when the average file sizes are large (for example, hundreds of megabytes in size).
			</p><p>
				If your existing workload has performed well with ext4, staying with ext4 should provide you and your applications with a very familiar environment.
			</p><p>
				The ext4 file system tends to perform better on systems that have limited I/O capability. It performs better on limited bandwidth (less than 200MB/s) and up to around 1000 IOPS capability. For anything with higher capability, XFS tends to be faster.
			</p><p>
				XFS consumes about twice the CPU-per-metadata operation compared to ext4, so if you have a CPU-bound workload with little concurrency, then ext4 will be faster. In general, ext4 is better if an application uses a single read/write thread and small files, while XFS shines when an application uses multiple read/write threads and bigger files.
			</p><p>
				You cannot shrink an XFS file system. If you need to be able to shrink the file system, consider using ext4, which supports offline shrinking.
			</p><p>
				In general, Red Hat recommends that you use XFS unless you have a specific use case for ext4. You should also measure the performance of your specific application on your target server and storage system to make sure that you choose the appropriate type of file system.
			</p><div class="table" id="idm140591313436528"><p class="title"><strong>Table 1.2. Summary of local file system recommendations</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 60%; " class="col_1"><!--Empty--></col><col style="width: 40%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140591313431664" scope="col">Scenario</th><th align="left" valign="top" id="idm140591312655392" scope="col">Recommended file system</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140591313431664"> <p>
								No special use case
							</p>
							 </td><td align="left" valign="top" headers="idm140591312655392"> <p>
								XFS
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591313431664"> <p>
								Large server
							</p>
							 </td><td align="left" valign="top" headers="idm140591312655392"> <p>
								XFS
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591313431664"> <p>
								Large storage devices
							</p>
							 </td><td align="left" valign="top" headers="idm140591312655392"> <p>
								XFS
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591313431664"> <p>
								Large files
							</p>
							 </td><td align="left" valign="top" headers="idm140591312655392"> <p>
								XFS
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591313431664"> <p>
								Multi-threaded I/O
							</p>
							 </td><td align="left" valign="top" headers="idm140591312655392"> <p>
								XFS
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591313431664"> <p>
								Single-threaded I/O
							</p>
							 </td><td align="left" valign="top" headers="idm140591312655392"> <p>
								ext4
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591313431664"> <p>
								Limited I/O capability (under 1000 IOPS)
							</p>
							 </td><td align="left" valign="top" headers="idm140591312655392"> <p>
								ext4
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591313431664"> <p>
								Limited bandwidth (under 200MB/s)
							</p>
							 </td><td align="left" valign="top" headers="idm140591312655392"> <p>
								ext4
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591313431664"> <p>
								CPU-bound workload
							</p>
							 </td><td align="left" valign="top" headers="idm140591312655392"> <p>
								ext4
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591313431664"> <p>
								Support for offline shrinking
							</p>
							 </td><td align="left" valign="top" headers="idm140591312655392"> <p>
								ext4
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="network-file-systems_overview-of-available-file-systems"><div class="titlepage"><div><div><h2 class="title">1.6. Network file systems</h2></div></div></div><p>
				Network file systems, also referred to as client/server file systems, enable client systems to access files that are stored on a shared server. This makes it possible for multiple users on multiple systems to share files and storage resources.
			</p><p>
				Such file systems are built from one or more servers that export a set of file systems to one or more clients. The client nodes do not have access to the underlying block storage, but rather interact with the storage using a protocol that allows for better access control.
			</p><h4 id="available_network_file_systems">Available network file systems</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The most common client/server file system for RHEL customers is the NFS file system. RHEL provides both an NFS server component to export a local file system over the network and an NFS client to import these file systems.
					</li><li class="listitem">
						RHEL also includes a CIFS client that supports the popular Microsoft SMB file servers for Windows interoperability. The userspace Samba server provides Windows clients with a Microsoft SMB service from a RHEL server.
					</li></ul></div></section><section class="section" id="shared-storage-file-systems_overview-of-available-file-systems"><div class="titlepage"><div><div><h2 class="title">1.7. Shared storage file systems</h2></div></div></div><p>
				Shared storage file systems, sometimes referred to as cluster file systems, give each server in the cluster direct access to a shared block device over a local storage area network (SAN).
			</p><h4 id="comparison_with_network_file_systems">Comparison with network file systems</h4><p>
				Like client/server file systems, shared storage file systems work on a set of servers that are all members of a cluster. Unlike NFS, however, no single server provides access to data or metadata to other members: each member of the cluster has direct access to the same storage device (the <span class="emphasis"><em>shared storage</em></span>), and all cluster member nodes access the same set of files.
			</p><h4 id="concurrency">Concurrency</h4><p>
				Cache coherency is key in a clustered file system to ensure data consistency and integrity. There must be a single version of all files in a cluster visible to all nodes within a cluster. The file system must prevent members of the cluster from updating the same storage block at the same time and causing data corruption. In order to do that, shared storage file systems use a cluster wide-locking mechanism to arbitrate access to the storage as a concurrency control mechanism. For example, before creating a new file or writing to a file that is opened on multiple servers, the file system component on the server must obtain the correct lock.
			</p><p>
				The requirement of cluster file systems is to provide a highly available service like an Apache web server. Any member of the cluster will see a fully coherent view of the data stored in their shared disk file system, and all updates will be arbitrated correctly by the locking mechanisms.
			</p><h4 id="performance_characteristics_2">Performance characteristics</h4><p>
				Shared disk file systems do not always perform as well as local file systems running on the same system due to the computational cost of the locking overhead. Shared disk file systems perform well with workloads where each node writes almost exclusively to a particular set of files that are not shared with other nodes or where a set of files is shared in an almost exclusively read-only manner across a set of nodes. This results in a minimum of cross-node cache invalidation and can maximize performance.
			</p><p>
				Setting up a shared disk file system is complex, and tuning an application to perform well on a shared disk file system can be challenging.
			</p><h4 id="available_shared_storage_file_systems">Available shared storage file systems</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Red Hat Enterprise Linux provides the GFS2 file system. GFS2 comes tightly integrated with the Red Hat Enterprise Linux High Availability Add-On and the Resilient Storage Add-On.
					</p><p class="simpara">
						Red Hat Enterprise Linux supports GFS2 on clusters that range in size from 2 to 16 nodes.
					</p></li></ul></div></section><section class="section" id="choosing-between-network-and-shared-storage-file-systems_overview-of-available-file-systems"><div class="titlepage"><div><div><h2 class="title">1.8. Choosing between network and shared storage file systems</h2></div></div></div><p>
				When choosing between network and shared storage file systems, consider the following points:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						NFS-based network file systems are an extremely common and popular choice for environments that provide NFS servers.
					</li><li class="listitem">
						Network file systems can be deployed using very high-performance networking technologies like Infiniband or 10 Gigabit Ethernet. This means that you should not turn to shared storage file systems just to get raw bandwidth to your storage. If the speed of access is of prime importance, then use NFS to export a local file system like XFS.
					</li><li class="listitem">
						Shared storage file systems are not easy to set up or to maintain, so you should deploy them only when you cannot provide your required availability with either local or network file systems.
					</li><li class="listitem">
						A shared storage file system in a clustered environment helps reduce downtime by eliminating the steps needed for unmounting and mounting that need to be done during a typical fail-over scenario involving the relocation of a high-availability service.
					</li></ul></div><p>
				Red Hat recommends that you use network file systems unless you have a specific use case for shared storage file systems. Use shared storage file systems primarily for deployments that need to provide high-availability services with minimum downtime and have stringent service-level requirements.
			</p></section><section class="section" id="volume-managing-file-systems_overview-of-available-file-systems"><div class="titlepage"><div><div><h2 class="title">1.9. Volume-managing file systems</h2></div></div></div><p>
				Volume-managing file systems integrate the entire storage stack for the purposes of simplicity and in-stack optimization.
			</p><h4 id="available_volume_managing_file_systems">Available volume-managing file systems</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Red Hat Enterprise Linux 8 provides the Stratis volume manager as a Technology Preview. Stratis uses XFS for the file system layer and integrates it with LVM, Device Mapper, and other components.
					</p><p class="simpara">
						Stratis was first released in Red Hat Enterprise Linux 8.0. It is conceived to fill the gap created when Red Hat deprecated Btrfs. Stratis 1.0 is an intuitive, command line-based volume manager that can perform significant storage management operations while hiding the complexity from the user:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Volume management
							</li><li class="listitem">
								Pool creation
							</li><li class="listitem">
								Thin storage pools
							</li><li class="listitem">
								Snapshots
							</li><li class="listitem">
								Automated read cache
							</li></ul></div><p class="simpara">
						Stratis offers powerful features, but currently lacks certain capabilities of other offerings that it might be compared to, such as Btrfs or ZFS. Most notably, it does not support CRCs with self healing.
					</p></li></ul></div></section></section><section class="chapter" id="managing-local-storage-using-rhel-system-roles_managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Managing local storage using RHEL System Roles</h1></div></div></div><p>
			To manage LVM and local file systems (FS) using Ansible, you can use the <code class="literal">storage</code> role, which is one of the RHEL System Roles available in RHEL 8.
		</p><p>
			Using the <code class="literal">storage role</code> enables you to automate administration of file systems on disks and logical volumes on multiple machines and across all versions of RHEL starting with RHEL 7.7.
		</p><p>
			For more information on RHEL System Roles and how to apply them, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/getting-started-with-system-administration_configuring-basic-system-settings#what-rhel-system-roles-are_getting-started-with-system-administration">What RHEL System Roles are and which tasks they can be used for</a>.
		</p><section class="section" id="storage-role-intro_managing-local-storage-using-rhel-system-roles"><div class="titlepage"><div><div><h2 class="title">2.1. Introduction to the storage role</h2></div></div></div><p>
				The <code class="literal">storage</code> role can manage:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						File systems on disks which have not been partitioned
					</li><li class="listitem">
						Complete LVM volume groups including their logical volumes and file systems
					</li></ul></div><p>
				With the <code class="literal">storage</code> role you can perform the following tasks:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Create a file system
					</li><li class="listitem">
						Remove a file system
					</li><li class="listitem">
						Mount a file system
					</li><li class="listitem">
						Unmount a file system
					</li><li class="listitem">
						Create LVM volume groups
					</li><li class="listitem">
						Remove LVM volume groups
					</li><li class="listitem">
						Create logical volumes
					</li><li class="listitem">
						Remove logical volumes
					</li></ul></div></section><section class="section" id="storage-role-parameters_managing-local-storage-using-rhel-system-roles"><div class="titlepage"><div><div><h2 class="title">2.2. Storage role parameters</h2></div></div></div><p>
				The section provides a table with input variables that the <code class="literal">storage</code> role accepts.
			</p><div class="table" id="idm140591311047600"><p class="title"><strong>Table 2.1. Storage role parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140591317248784" scope="col">Parameter</th><th align="left" valign="top" id="idm140591317247696" scope="col">Description</th><th align="left" valign="top" id="idm140591317246608" scope="col">Additional information</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140591317248784"> <p>
								storage_volumes
							</p>
							 </td><td align="left" valign="top" headers="idm140591317247696"> <p>
								List of file systems on all unpartitioned disks to be managed.
							</p>
							 </td><td align="left" valign="top" headers="idm140591317246608"> <p>
								Partitions are currently unsupported.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591317248784"> <p>
								storage_pools
							</p>
							 </td><td align="left" valign="top" headers="idm140591317247696"> <p>
								List of pools to be managed.
							</p>
							 </td><td align="left" valign="top" headers="idm140591317246608"> <p>
								Currently the only supported pool type is LVM. With LVM, pools represent volume groups (VGs). Under each pool there is a list of volumes to be managed by the role. With LVM, each volume corresponds to a logical volume (LV) with a file system.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591317248784"> <p>
								storage_safe_mode
							</p>
							 </td><td align="left" valign="top" headers="idm140591317247696"> <p>
								Boolean option to enable and disable safe mode.
							</p>
							 </td><td align="left" valign="top" headers="idm140591317246608"> <p>
								In safe mode, the storage role does not reformat disks containing data such as file systems or LVM physical volumes, but instead the role aborts with an error message. By default, safe mode is on to prevent accidentally overwriting existing data. Red Hat recommends to keep safe mode enabled, and disable it only for specific cases and after thorough testing.
							</p>
							 </td></tr></tbody></table></div></div><p>
				The <code class="literal">storage</code> role only changes file systems, volumes, and pools that are listed in the following variables:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">storage_pools</code>
					</li><li class="listitem">
						<code class="literal">storage_volumes</code>
					</li></ul></div><div class="formalpara"><p class="title"><strong>Additional resources</strong></p><p>
					For more information, install the <code class="literal">rhel-system-roles</code> package, and see the <code class="literal">/usr/share/doc/rhel-system-roles/storage/</code> and <code class="literal">/usr/share/ansible/roles/rhel-system-roles.storage/</code> directories.
				</p></div></section></section><section class="chapter" id="mounting-nfs-shares_managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Mounting NFS shares</h1></div></div></div><p>
			As a system administrator, you can mount remote NFS shares on your system to access shared data.
		</p><section class="section" id="introduction-to-nfs_mounting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">3.1. Introduction to NFS</h2></div></div></div><p>
				This section explains the basic concepts of the NFS service.
			</p><p>
				A Network File System (NFS) allows remote hosts to mount file systems over a network and interact with those file systems as though they are mounted locally. This enables you to consolidate resources onto centralized servers on the network.
			</p><p>
				The NFS server refers to the <code class="literal filename">/etc/exports</code> configuration file to determine whether the client is allowed to access any exported file systems. Once verified, all file and directory operations are available to the user.
			</p></section><section class="section" id="supported-nfs-versions_mounting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">3.2. Supported NFS versions</h2></div></div></div><p>
				This section lists versions of NFS supported in Red Hat Enterprise Linux and their features.
			</p><p>
				Currently, Red Hat Enterprise Linux 8 supports the following major versions of NFS:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						NFS version 3 (NFSv3) supports safe asynchronous writes and is more robust at error handling than the previous NFSv2; it also supports 64-bit file sizes and offsets, allowing clients to access more than 2 GB of file data.
					</li><li class="listitem">
						NFS version 4 (NFSv4) works through firewalls and on the Internet, no longer requires an <code class="literal">rpcbind</code> service, supports Access Control Lists (ACLs), and utilizes stateful operations.
					</li></ul></div><p>
				NFS version 2 (NFSv2) is no longer supported by Red Hat.
			</p><h4 id="default_nfs_version">Default NFS version</h4><p>
				The default NFS version in Red Hat Enterprise Linux 8 is 4.2. NFS clients attempt to mount using NFSv4.2 by default, and fall back to NFSv4.1 when the server does not support NFSv4.2. The mount later falls back to NFSv4.0 and then to NFSv3.
			</p><h4 id="features_of_minor_nfs_versions">Features of minor NFS versions</h4><p>
				Following are the features of NFSv4.2 in Red Hat Enterprise Linux 8:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Server-side copy</span></dt><dd>
							Enables the NFS client to efficiently copy data without wasting network resources using the <code class="literal">copy_file_range()</code> system call.
						</dd><dt><span class="term">Sparse files</span></dt><dd>
							Enables files to have one or more <span class="emphasis"><em>holes</em></span>, which are unallocated or uninitialized data blocks consisting only of zeroes. The <code class="literal">lseek()</code> operation in NFSv4.2 supports <code class="literal">seek_hole()</code> and <code class="literal">seek_data()</code>, which enables applications to map out the location of holes in the sparse file.
						</dd><dt><span class="term">Space reservation</span></dt><dd>
							Permits storage servers to reserve free space, which prohibits servers to run out of space. NFSv4.2 supports the <code class="literal">allocate()</code> operation to reserve space, the <code class="literal">deallocate()</code> operation to unreserve space, and the <code class="literal">fallocate()</code> operation to preallocate or deallocate space in a file.
						</dd><dt><span class="term">Labeled NFS</span></dt><dd>
							Enforces data access rights and enables SELinux labels between a client and a server for individual files on an NFS file system.
						</dd><dt><span class="term">Layout enhancements</span></dt><dd>
							Provides the <code class="literal">layoutstats()</code> operation, which enables some Parallel NFS (pNFS) servers to collect better performance statistics.
						</dd></dl></div><p>
				Following are the features of NFSv4.1:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Enhances performance and security of network, and also includes client-side support for pNFS.
					</li><li class="listitem">
						No longer requires a separate TCP connection for callbacks, which allows an NFS server to grant delegations even when it cannot contact the client: for example, when NAT or a firewall interferes.
					</li><li class="listitem">
						Provides exactly once semantics (except for reboot operations), preventing a previous issue whereby certain operations sometimes returned an inaccurate result if a reply was lost and the operation was sent twice.
					</li></ul></div></section><section class="section" id="services-required-by-nfs_mounting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">3.3. Services required by NFS</h2></div></div></div><p>
				This section lists system services that are required for running an NFS server or mounting NFS shares. Red Hat Enterprise Linux starts these services automatically.
			</p><p>
				Red Hat Enterprise Linux uses a combination of kernel-level support and service processes to provide NFS file sharing. All NFS versions rely on Remote Procedure Calls (RPC) between clients and servers. To share or mount NFS file systems, the following services work together depending on which version of NFS is implemented:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">nfsd</code></span></dt><dd>
							The NFS server kernel module that services requests for shared NFS file systems.
						</dd><dt><span class="term"><code class="literal">rpcbind</code></span></dt><dd>
							Accepts port reservations from local RPC services. These ports are then made available (or advertised) so the corresponding remote RPC services can access them. The <code class="literal">rpcbind</code> service responds to requests for RPC services and sets up connections to the requested RPC service. This is not used with NFSv4.
						</dd><dt><span class="term"><code class="literal">rpc.mountd</code></span></dt><dd>
							This process is used by an NFS server to process <code class="literal">MOUNT</code> requests from NFSv3 clients. It checks that the requested NFS share is currently exported by the NFS server, and that the client is allowed to access it. If the mount request is allowed, the <code class="literal">nfs-mountd</code> service replies with a Success status and provides the File-Handle for this NFS share back to the NFS client.
						</dd><dt><span class="term"><code class="literal">rpc.nfsd</code></span></dt><dd>
							This process enables explicit NFS versions and protocols the server advertises to be defined. It works with the Linux kernel to meet the dynamic demands of NFS clients, such as providing server threads each time an NFS client connects. This process corresponds to the <code class="literal">nfs-server</code> service.
						</dd><dt><span class="term"><code class="literal">lockd</code></span></dt><dd>
							This is a kernel thread that runs on both clients and servers. It implements the Network Lock Manager (NLM) protocol, which enables NFSv3 clients to lock files on the server. It is started automatically whenever the NFS server is run and whenever an NFS file system is mounted.
						</dd><dt><span class="term"><code class="literal">rpc.statd</code></span></dt><dd>
							This process implements the Network Status Monitor (NSM) RPC protocol, which notifies NFS clients when an NFS server is restarted without being gracefully brought down. The <code class="literal">rpc-statd</code> service is started automatically by the <code class="literal">nfs-server</code> service, and does not require user configuration. This is not used with NFSv4.
						</dd><dt><span class="term"><code class="literal">rpc.rquotad</code></span></dt><dd>
							This process provides user quota information for remote users. The <code class="literal">rpc-rquotad</code> service is started automatically by the <code class="literal">nfs-server</code> service and does not require user configuration.
						</dd><dt><span class="term"><code class="literal">rpc.idmapd</code></span></dt><dd><p class="simpara">
							This process provides NFSv4 client and server upcalls, which map between on-the-wire NFSv4 names (strings in the form of <code class="literal"><span class="emphasis"><em>user</em></span>@<span class="emphasis"><em>domain</em></span></code>) and local UIDs and GIDs. For <code class="literal">idmapd</code> to function with NFSv4, the <code class="literal filename">/etc/idmapd.conf</code> file must be configured. At a minimum, the <code class="literal">Domain</code> parameter should be specified, which defines the NFSv4 mapping domain. If the NFSv4 mapping domain is the same as the DNS domain name, this parameter can be skipped. The client and server must agree on the NFSv4 mapping domain for ID mapping to function properly.
						</p><p class="simpara">
							Only the NFSv4 server uses <code class="literal">rpc.idmapd</code>, which is started by the <code class="literal">nfs-idmapd</code> service. The NFSv4 client uses the keyring-based <code class="literal">nfsidmap</code> utility, which is called by the kernel on-demand to perform ID mapping. If there is a problem with <code class="literal">nfsidmap</code>, the client falls back to using <code class="literal">rpc.idmapd</code>.
						</p></dd></dl></div><h4 id="the_rpc_services_with_nfsv4">The RPC services with NFSv4</h4><p>
				The mounting and locking protocols have been incorporated into the NFSv4 protocol. The server also listens on the well-known TCP port 2049. As such, NFSv4 does not need to interact with <code class="literal">rpcbind</code>, <code class="literal">lockd</code>, and <code class="literal">rpc-statd</code> services. The <code class="literal">nfs-mountd</code> service is still required on the NFS server to set up the exports, but is not involved in any over-the-wire operations.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						To configure an NFSv4-only server, which does not require <code class="literal">rpcbind</code>, see <a class="xref" href="index.html#configuring-an-nfsv4-only-server_exporting-nfs-shares" title="4.14. Configuring an NFSv4-only server">Section 4.14, “Configuring an NFSv4-only server”</a>.
					</li></ul></div></section><section class="section" id="nfs-host-name-formats_mounting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">3.4. NFS host name formats</h2></div></div></div><p>
				This section describes different formats that you can use to specify a host when mounting or exporting an NFS share.
			</p><p>
				You can specify the host in the following formats:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Single machine</span></dt><dd><p class="simpara">
							Either of the following:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									A fully-qualified domain name (that can be resolved by the server)
								</li><li class="listitem">
									Host name (that can be resolved by the server)
								</li><li class="listitem">
									An IP address.
								</li></ul></div></dd><dt><span class="term">Series of machines specified with wildcards</span></dt><dd><p class="simpara">
							You can use the <code class="literal">*</code> or <code class="literal">?</code> characters to specify a string match.
						</p><p class="simpara">
							Wildcards are not to be used with IP addresses; however, they might accidentally work if reverse DNS lookups fail. When specifying wildcards in fully qualified domain names, dots (<code class="literal">.</code>) are not included in the wildcard. For example, <code class="literal">*.example.com</code> includes <code class="literal">one.example.com</code> but does not include <code class="literal">one.two.example.com</code>.
						</p></dd><dt><span class="term">IP networks</span></dt><dd><p class="simpara">
							Either of the following formats is valid:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="emphasis"><em><span class="replaceable replaceable"><code class="literal">a.b.c.d/z</code></span></em></span>, where <span class="emphasis"><em><span class="replaceable replaceable"><code class="literal">a.b.c.d</code></span></em></span> is the network and <span class="emphasis"><em><span class="replaceable replaceable"><code class="literal">z</code></span></em></span> is the number of bits in the netmask; for example <code class="literal">192.168.0.0/24</code>.
								</li><li class="listitem">
									<span class="emphasis"><em><span class="replaceable replaceable"><code class="literal">a.b.c.d/netmask</code></span></em></span>, where <span class="emphasis"><em><span class="replaceable replaceable"><code class="literal">a.b.c.d</code></span></em></span> is the network and <span class="emphasis"><em><span class="replaceable replaceable"><code class="literal">netmask</code></span></em></span> is the netmask; for example, <code class="literal">192.168.100.8/255.255.255.0</code>.
								</li></ul></div></dd><dt><span class="term">Netgroups</span></dt><dd>
							The <code class="literal">@<span class="emphasis"><em>group-name</em></span></code> format , where <span class="emphasis"><em><span class="replaceable replaceable"><code class="literal">group-name</code></span></em></span> is the NIS netgroup name.
						</dd></dl></div></section><section class="section" id="installing-nfs_mounting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">3.5. Installing NFS</h2></div></div></div><p>
				This procedure installs all packages necessary to mount or export NFS shares.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Install the <code class="literal">nfs-utils</code> package:
					</p><pre class="screen"># yum install nfs-utils</pre></li></ul></div></section><section class="section" id="discovering-nfs-exports_mounting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">3.6. Discovering NFS exports</h2></div></div></div><p>
				This procedure discovers which file systems a given NFSv3 or NFSv4 server exports.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						With any server that supports NFSv3, use the <code class="literal">showmount</code> utility:
					</p><pre class="screen">$ showmount --exports <span class="emphasis"><em><span class="replaceable replaceable">my-server</span></em></span>

Export list for <span class="emphasis"><em><span class="replaceable replaceable">my-server</span></em></span>
<span class="emphasis"><em><span class="replaceable replaceable">/exports/foo</span></em></span>
<span class="emphasis"><em><span class="replaceable replaceable">/exports/bar</span></em></span></pre></li><li class="listitem"><p class="simpara">
						With any server that supports NFSv4, mount the root directory and look around:
					</p><pre class="screen"># mount <span class="emphasis"><em><span class="replaceable replaceable">my-server</span></em></span>:/ /mnt/
# ls /mnt/

<span class="emphasis"><em><span class="replaceable replaceable">exports</span></em></span>

# ls /mnt/<span class="emphasis"><em><span class="replaceable replaceable">exports/</span></em></span>

<span class="emphasis"><em><span class="replaceable replaceable">foo</span></em></span>
<span class="emphasis"><em><span class="replaceable replaceable">bar</span></em></span></pre></li></ul></div><p>
				On servers that support both NFSv4 and NFSv3, both methods work and give the same results.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">showmount(8)</code> man page.
					</li></ul></div></section><section class="section" id="mounting-an-nfs-share-with-mount_mounting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">3.7. Mounting an NFS share with mount</h2></div></div></div><p>
				This procedure mounts an NFS share exported from a server using the <code class="literal">mount</code> utility.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To mount an NFS share, use the following command:
					</p><pre class="screen"># mount -t nfs -o <span class="emphasis"><em><span class="replaceable replaceable">options</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">host</span></em></span>:<span class="emphasis"><em><span class="replaceable replaceable">/remote/export</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">/local/directory</span></em></span></pre><p class="simpara">
						This command uses the following variables:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em><span class="replaceable replaceable">options</span></em></span></span></dt><dd>
									A comma-delimited list of mount options.
								</dd><dt><span class="term"><span class="emphasis"><em><span class="replaceable replaceable">host</span></em></span></span></dt><dd>
									The host name, IP address, or fully qualified domain name of the server exporting the file system you wish to mount.
								</dd><dt><span class="term"><span class="emphasis"><em><span class="replaceable replaceable">/remote/export</span></em></span></span></dt><dd>
									The file system or directory being exported from the server, that is, the directory you wish to mount.
								</dd><dt><span class="term"><span class="emphasis"><em><span class="replaceable replaceable">/local/directory</span></em></span></span></dt><dd>
									The client location where <span class="emphasis"><em><span class="replaceable replaceable">/remote/export</span></em></span> is mounted.
								</dd></dl></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="xref" href="index.html#common-nfs-mount-options_mounting-nfs-shares" title="3.8. Common NFS mount options">Section 3.8, “Common NFS mount options”</a>
					</li><li class="listitem">
						<a class="xref" href="index.html#nfs-host-name-formats_mounting-nfs-shares" title="3.4. NFS host name formats">Section 3.4, “NFS host name formats”</a>
					</li><li class="listitem">
						<a class="xref" href="index.html#mounting-a-file-system-with-mount_assembly_mounting-file-systems" title="12.3. Mounting a file system with mount">Section 12.3, “Mounting a file system with mount”</a>
					</li><li class="listitem">
						The <code class="literal">mount(8)</code> man page
					</li></ul></div></section><section class="section" id="common-nfs-mount-options_mounting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">3.8. Common NFS mount options</h2></div></div></div><p>
				This section lists options commonly used when mounting NFS shares. These options can be used with manual mount commands, <code class="literal filename">/etc/fstab</code> settings, and <code class="literal">autofs</code>.
			</p><div class="variablelist"><p class="title"><strong>Common NFS mount options</strong></p><dl class="variablelist"><dt><span class="term"><code class="literal option">lookupcache=<span class="emphasis"><em><span class="replaceable replaceable">mode</span></em></span></code></span></dt><dd>
							Specifies how the kernel should manage its cache of directory entries for a given mount point. Valid arguments for <span class="emphasis"><em><span class="replaceable replaceable">mode</span></em></span> are <code class="literal">all</code>, <code class="literal">none</code>, or <code class="literal">positive</code>.
						</dd><dt><span class="term"><code class="literal option">nfsvers=<span class="emphasis"><em><span class="replaceable replaceable">version</span></em></span></code></span></dt><dd><p class="simpara">
							Specifies which version of the NFS protocol to use, where <span class="emphasis"><em><span class="replaceable replaceable">version</span></em></span> is <code class="literal">3</code>, <code class="literal">4</code>, <code class="literal">4.0</code>, <code class="literal">4.1</code>, or <code class="literal">4.2</code>. This is useful for hosts that run multiple NFS servers, or to disable retrying a mount with lower versions. If no version is specified, NFS uses the highest version supported by the kernel and the <code class="literal">mount</code> utility.
						</p><p class="simpara">
							The option <code class="literal option">vers</code> is identical to <code class="literal option">nfsvers</code>, and is included in this release for compatibility reasons.
						</p></dd><dt><span class="term"><code class="literal option">noacl</code></span></dt><dd>
							Turns off all ACL processing. This may be needed when interfacing with older versions of Red Hat Enterprise Linux, Red Hat Linux, or Solaris, because the most recent ACL technology is not compatible with older systems.
						</dd><dt><span class="term"><code class="literal option">nolock</code></span></dt><dd>
							Disables file locking. This setting is sometimes required when connecting to very old NFS servers.
						</dd><dt><span class="term"><code class="literal option">noexec</code></span></dt><dd>
							Prevents execution of binaries on mounted file systems. This is useful if the system is mounting a non-Linux file system containing incompatible binaries.
						</dd><dt><span class="term"><code class="literal option">nosuid</code></span></dt><dd>
							Disables the <code class="literal">set-user-identifier</code> and <code class="literal">set-group-identifier</code> bits. This prevents remote users from gaining higher privileges by running a <code class="literal">setuid</code> program.
						</dd><dt><span class="term"><code class="literal option">port=<span class="emphasis"><em><span class="replaceable replaceable">num</span></em></span></code></span></dt><dd>
							Specifies the numeric value of the NFS server port. If <span class="emphasis"><em><span class="replaceable replaceable">num</span></em></span> is <code class="literal">0</code> (the default value), then <code class="literal">mount</code> queries the <code class="literal">rpcbind</code> service on the remote host for the port number to use. If the NFS service on the remote host is not registered with its <code class="literal">rpcbind</code> service, the standard NFS port number of TCP 2049 is used instead.
						</dd><dt><span class="term"><code class="literal option">rsize=<span class="emphasis"><em><span class="replaceable replaceable">num</span></em></span></code> and <code class="literal option">wsize=<span class="emphasis"><em><span class="replaceable replaceable">num</span></em></span></code></span></dt><dd><p class="simpara">
							These options set the maximum number of bytes to be transferred in a single NFS read or write operation.
						</p><p class="simpara">
							There is no fixed default value for <code class="literal">rsize</code> and <code class="literal">wsize</code>. By default, NFS uses the largest possible value that both the server and the client support. In Red Hat Enterprise Linux 8, the client and server maximum is 1,048,576 bytes. For more details, see the <a class="link" href="https://access.redhat.com/solutions/753853">What are the default and maximum values for rsize and wsize with NFS mounts?</a> KBase article.
						</p></dd><dt><span class="term"><code class="literal option">sec=<span class="emphasis"><em><span class="replaceable replaceable">mode</span></em></span></code></span></dt><dd><p class="simpara">
							Security flavors to use for accessing files on the mounted export.
						</p><p class="simpara">
							The default setting is <code class="literal">sec=sys</code>, which uses local UNIX UIDs and GIDs. These use <code class="literal">AUTH_SYS</code> to authenticate NFS operations.
						</p><p class="simpara">
							Other options include:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal option">sec=krb5</code> uses Kerberos V5 instead of local UNIX UIDs and GIDs to authenticate users.
								</li><li class="listitem">
									<code class="literal option">sec=krb5i</code> uses Kerberos V5 for user authentication and performs integrity checking of NFS operations using secure checksums to prevent data tampering.
								</li><li class="listitem">
									<code class="literal option">sec=krb5p</code> uses Kerberos V5 for user authentication, integrity checking, and encrypts NFS traffic to prevent traffic sniffing. This is the most secure setting, but it also involves the most performance overhead.
								</li></ul></div></dd><dt><span class="term"><code class="literal option">tcp</code></span></dt><dd>
							Instructs the NFS mount to use the TCP protocol.
						</dd></dl></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">mount(8)</code> man page
					</li><li class="listitem">
						The <code class="literal">nfs(5)</code> man page
					</li></ul></div></section><section class="section" id="related-information-mounting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">3.9. Related information</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The Linux NFS wiki: <a class="link" href="https://linux-nfs.org">https://linux-nfs.org</a>
					</li><li class="listitem">
						To mount NFS shares persistently, see <a class="xref" href="index.html#assembly_persistently-mounting-file-systems_assembly_mounting-file-systems" title="12.8. Persistently mounting file systems">Section 12.8, “Persistently mounting file systems”</a>.
					</li><li class="listitem">
						To mount NFS shares on demand, see <a class="xref" href="index.html#assembly_mounting-file-systems-on-demand_assembly_mounting-file-systems" title="12.9. Mounting file systems on demand">Section 12.9, “Mounting file systems on demand”</a>.
					</li></ul></div></section></section><section class="chapter" id="exporting-nfs-shares_managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Exporting NFS shares</h1></div></div></div><p>
			As a system administrator, you can use the NFS server to share a directory on your system over network.
		</p><section class="section" id="introduction-to-nfs_exporting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">4.1. Introduction to NFS</h2></div></div></div><p>
				This section explains the basic concepts of the NFS service.
			</p><p>
				A Network File System (NFS) allows remote hosts to mount file systems over a network and interact with those file systems as though they are mounted locally. This enables you to consolidate resources onto centralized servers on the network.
			</p><p>
				The NFS server refers to the <code class="literal filename">/etc/exports</code> configuration file to determine whether the client is allowed to access any exported file systems. Once verified, all file and directory operations are available to the user.
			</p></section><section class="section" id="supported-nfs-versions_exporting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">4.2. Supported NFS versions</h2></div></div></div><p>
				This section lists versions of NFS supported in Red Hat Enterprise Linux and their features.
			</p><p>
				Currently, Red Hat Enterprise Linux 8 supports the following major versions of NFS:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						NFS version 3 (NFSv3) supports safe asynchronous writes and is more robust at error handling than the previous NFSv2; it also supports 64-bit file sizes and offsets, allowing clients to access more than 2 GB of file data.
					</li><li class="listitem">
						NFS version 4 (NFSv4) works through firewalls and on the Internet, no longer requires an <code class="literal">rpcbind</code> service, supports Access Control Lists (ACLs), and utilizes stateful operations.
					</li></ul></div><p>
				NFS version 2 (NFSv2) is no longer supported by Red Hat.
			</p><h4 id="default_nfs_version_2">Default NFS version</h4><p>
				The default NFS version in Red Hat Enterprise Linux 8 is 4.2. NFS clients attempt to mount using NFSv4.2 by default, and fall back to NFSv4.1 when the server does not support NFSv4.2. The mount later falls back to NFSv4.0 and then to NFSv3.
			</p><h4 id="features_of_minor_nfs_versions_2">Features of minor NFS versions</h4><p>
				Following are the features of NFSv4.2 in Red Hat Enterprise Linux 8:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Server-side copy</span></dt><dd>
							Enables the NFS client to efficiently copy data without wasting network resources using the <code class="literal">copy_file_range()</code> system call.
						</dd><dt><span class="term">Sparse files</span></dt><dd>
							Enables files to have one or more <span class="emphasis"><em>holes</em></span>, which are unallocated or uninitialized data blocks consisting only of zeroes. The <code class="literal">lseek()</code> operation in NFSv4.2 supports <code class="literal">seek_hole()</code> and <code class="literal">seek_data()</code>, which enables applications to map out the location of holes in the sparse file.
						</dd><dt><span class="term">Space reservation</span></dt><dd>
							Permits storage servers to reserve free space, which prohibits servers to run out of space. NFSv4.2 supports the <code class="literal">allocate()</code> operation to reserve space, the <code class="literal">deallocate()</code> operation to unreserve space, and the <code class="literal">fallocate()</code> operation to preallocate or deallocate space in a file.
						</dd><dt><span class="term">Labeled NFS</span></dt><dd>
							Enforces data access rights and enables SELinux labels between a client and a server for individual files on an NFS file system.
						</dd><dt><span class="term">Layout enhancements</span></dt><dd>
							Provides the <code class="literal">layoutstats()</code> operation, which enables some Parallel NFS (pNFS) servers to collect better performance statistics.
						</dd></dl></div><p>
				Following are the features of NFSv4.1:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Enhances performance and security of network, and also includes client-side support for pNFS.
					</li><li class="listitem">
						No longer requires a separate TCP connection for callbacks, which allows an NFS server to grant delegations even when it cannot contact the client: for example, when NAT or a firewall interferes.
					</li><li class="listitem">
						Provides exactly once semantics (except for reboot operations), preventing a previous issue whereby certain operations sometimes returned an inaccurate result if a reply was lost and the operation was sent twice.
					</li></ul></div></section><section class="section" id="the-tcp-and-udp-protocols-in-nfsv3-and-nfsv4_exporting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">4.3. The TCP and UDP protocols in NFSv3 and NFSv4</h2></div></div></div><p>
				NFSv4 requires the Transmission Control Protocol (TCP) running over an IP network.
			</p><p>
				NFSv3 could also use the User Datagram Protocol (UDP) in earlier Red Hat Enterprise Linux versions. In Red Hat Enterprise Linux 8, NFS over UDP is no longer supported. By default, UDP is disabled in the NFS server.
			</p></section><section class="section" id="services-required-by-nfs_exporting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">4.4. Services required by NFS</h2></div></div></div><p>
				This section lists system services that are required for running an NFS server or mounting NFS shares. Red Hat Enterprise Linux starts these services automatically.
			</p><p>
				Red Hat Enterprise Linux uses a combination of kernel-level support and service processes to provide NFS file sharing. All NFS versions rely on Remote Procedure Calls (RPC) between clients and servers. To share or mount NFS file systems, the following services work together depending on which version of NFS is implemented:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">nfsd</code></span></dt><dd>
							The NFS server kernel module that services requests for shared NFS file systems.
						</dd><dt><span class="term"><code class="literal">rpcbind</code></span></dt><dd>
							Accepts port reservations from local RPC services. These ports are then made available (or advertised) so the corresponding remote RPC services can access them. The <code class="literal">rpcbind</code> service responds to requests for RPC services and sets up connections to the requested RPC service. This is not used with NFSv4.
						</dd><dt><span class="term"><code class="literal">rpc.mountd</code></span></dt><dd>
							This process is used by an NFS server to process <code class="literal">MOUNT</code> requests from NFSv3 clients. It checks that the requested NFS share is currently exported by the NFS server, and that the client is allowed to access it. If the mount request is allowed, the <code class="literal">nfs-mountd</code> service replies with a Success status and provides the File-Handle for this NFS share back to the NFS client.
						</dd><dt><span class="term"><code class="literal">rpc.nfsd</code></span></dt><dd>
							This process enables explicit NFS versions and protocols the server advertises to be defined. It works with the Linux kernel to meet the dynamic demands of NFS clients, such as providing server threads each time an NFS client connects. This process corresponds to the <code class="literal">nfs-server</code> service.
						</dd><dt><span class="term"><code class="literal">lockd</code></span></dt><dd>
							This is a kernel thread that runs on both clients and servers. It implements the Network Lock Manager (NLM) protocol, which enables NFSv3 clients to lock files on the server. It is started automatically whenever the NFS server is run and whenever an NFS file system is mounted.
						</dd><dt><span class="term"><code class="literal">rpc.statd</code></span></dt><dd>
							This process implements the Network Status Monitor (NSM) RPC protocol, which notifies NFS clients when an NFS server is restarted without being gracefully brought down. The <code class="literal">rpc-statd</code> service is started automatically by the <code class="literal">nfs-server</code> service, and does not require user configuration. This is not used with NFSv4.
						</dd><dt><span class="term"><code class="literal">rpc.rquotad</code></span></dt><dd>
							This process provides user quota information for remote users. The <code class="literal">rpc-rquotad</code> service is started automatically by the <code class="literal">nfs-server</code> service and does not require user configuration.
						</dd><dt><span class="term"><code class="literal">rpc.idmapd</code></span></dt><dd><p class="simpara">
							This process provides NFSv4 client and server upcalls, which map between on-the-wire NFSv4 names (strings in the form of <code class="literal"><span class="emphasis"><em>user</em></span>@<span class="emphasis"><em>domain</em></span></code>) and local UIDs and GIDs. For <code class="literal">idmapd</code> to function with NFSv4, the <code class="literal filename">/etc/idmapd.conf</code> file must be configured. At a minimum, the <code class="literal">Domain</code> parameter should be specified, which defines the NFSv4 mapping domain. If the NFSv4 mapping domain is the same as the DNS domain name, this parameter can be skipped. The client and server must agree on the NFSv4 mapping domain for ID mapping to function properly.
						</p><p class="simpara">
							Only the NFSv4 server uses <code class="literal">rpc.idmapd</code>, which is started by the <code class="literal">nfs-idmapd</code> service. The NFSv4 client uses the keyring-based <code class="literal">nfsidmap</code> utility, which is called by the kernel on-demand to perform ID mapping. If there is a problem with <code class="literal">nfsidmap</code>, the client falls back to using <code class="literal">rpc.idmapd</code>.
						</p></dd></dl></div><h4 id="the_rpc_services_with_nfsv4_2">The RPC services with NFSv4</h4><p>
				The mounting and locking protocols have been incorporated into the NFSv4 protocol. The server also listens on the well-known TCP port 2049. As such, NFSv4 does not need to interact with <code class="literal">rpcbind</code>, <code class="literal">lockd</code>, and <code class="literal">rpc-statd</code> services. The <code class="literal">nfs-mountd</code> service is still required on the NFS server to set up the exports, but is not involved in any over-the-wire operations.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						To configure an NFSv4-only server, which does not require <code class="literal">rpcbind</code>, see <a class="xref" href="index.html#configuring-an-nfsv4-only-server_exporting-nfs-shares" title="4.14. Configuring an NFSv4-only server">Section 4.14, “Configuring an NFSv4-only server”</a>.
					</li></ul></div></section><section class="section" id="nfs-host-name-formats_exporting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">4.5. NFS host name formats</h2></div></div></div><p>
				This section describes different formats that you can use to specify a host when mounting or exporting an NFS share.
			</p><p>
				You can specify the host in the following formats:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Single machine</span></dt><dd><p class="simpara">
							Either of the following:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									A fully-qualified domain name (that can be resolved by the server)
								</li><li class="listitem">
									Host name (that can be resolved by the server)
								</li><li class="listitem">
									An IP address.
								</li></ul></div></dd><dt><span class="term">Series of machines specified with wildcards</span></dt><dd><p class="simpara">
							You can use the <code class="literal">*</code> or <code class="literal">?</code> characters to specify a string match.
						</p><p class="simpara">
							Wildcards are not to be used with IP addresses; however, they might accidentally work if reverse DNS lookups fail. When specifying wildcards in fully qualified domain names, dots (<code class="literal">.</code>) are not included in the wildcard. For example, <code class="literal">*.example.com</code> includes <code class="literal">one.example.com</code> but does not include <code class="literal">one.two.example.com</code>.
						</p></dd><dt><span class="term">IP networks</span></dt><dd><p class="simpara">
							Either of the following formats is valid:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="emphasis"><em><span class="replaceable replaceable"><code class="literal">a.b.c.d/z</code></span></em></span>, where <span class="emphasis"><em><span class="replaceable replaceable"><code class="literal">a.b.c.d</code></span></em></span> is the network and <span class="emphasis"><em><span class="replaceable replaceable"><code class="literal">z</code></span></em></span> is the number of bits in the netmask; for example <code class="literal">192.168.0.0/24</code>.
								</li><li class="listitem">
									<span class="emphasis"><em><span class="replaceable replaceable"><code class="literal">a.b.c.d/netmask</code></span></em></span>, where <span class="emphasis"><em><span class="replaceable replaceable"><code class="literal">a.b.c.d</code></span></em></span> is the network and <span class="emphasis"><em><span class="replaceable replaceable"><code class="literal">netmask</code></span></em></span> is the netmask; for example, <code class="literal">192.168.100.8/255.255.255.0</code>.
								</li></ul></div></dd><dt><span class="term">Netgroups</span></dt><dd>
							The <code class="literal">@<span class="emphasis"><em>group-name</em></span></code> format , where <span class="emphasis"><em><span class="replaceable replaceable"><code class="literal">group-name</code></span></em></span> is the NIS netgroup name.
						</dd></dl></div></section><section class="section" id="nfs-server-configuration_exporting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">4.6. NFS server configuration</h2></div></div></div><p>
				This section describes the syntax and options of two ways to configure exports on an NFS server:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Manually editing the <code class="literal filename">/etc/exports</code> configuration file
					</li><li class="listitem">
						Using the <code class="literal">exportfs</code> utility on the command line
					</li></ul></div><section class="section" id="the-etc-exports-configuration-file_exporting-nfs-shares"><div class="titlepage"><div><div><h3 class="title">4.6.1. The /etc/exports configuration file</h3></div></div></div><p>
					The <code class="literal filename">/etc/exports</code> file controls which file systems are exported to remote hosts and specifies options. It follows the following syntax rules:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Blank lines are ignored.
						</li><li class="listitem">
							To add a comment, start a line with the hash mark (<code class="literal">#</code>).
						</li><li class="listitem">
							You can wrap long lines with a backslash (<code class="literal">\</code>).
						</li><li class="listitem">
							Each exported file system should be on its own individual line.
						</li><li class="listitem">
							Any lists of authorized hosts placed after an exported file system must be separated by space characters.
						</li><li class="listitem">
							Options for each of the hosts must be placed in parentheses directly after the host identifier, without any spaces separating the host and the first parenthesis.
						</li></ul></div><h5 id="export_entry">Export entry</h5><p>
					Each entry for an exported file system has the following structure:
				</p><pre class="screen"><span class="emphasis"><em><span class="replaceable replaceable">export</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">host</span></em></span>(<span class="emphasis"><em><span class="replaceable replaceable">options</span></em></span>)</pre><p>
					It is also possible to specify multiple hosts, along with specific options for each host. To do so, list them on the same line as a space-delimited list, with each host name followed by its respective options (in parentheses), as in:
				</p><pre class="screen"><span class="emphasis"><em><span class="replaceable replaceable">export</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">host1</span></em></span>(<span class="emphasis"><em><span class="replaceable replaceable">options1</span></em></span>) <span class="emphasis"><em><span class="replaceable replaceable">host2</span></em></span>(<span class="emphasis"><em><span class="replaceable replaceable">options2</span></em></span>) <span class="emphasis"><em><span class="replaceable replaceable">host3</span></em></span>(<span class="emphasis"><em><span class="replaceable replaceable">options3</span></em></span>)</pre><p>
					In this structure:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em><span class="replaceable replaceable">export</span></em></span></span></dt><dd>
								The directory being exported
							</dd><dt><span class="term"><span class="emphasis"><em><span class="replaceable replaceable">host</span></em></span></span></dt><dd>
								The host or network to which the export is being shared
							</dd><dt><span class="term"><span class="emphasis"><em><span class="replaceable replaceable">options</span></em></span></span></dt><dd>
								The options to be used for host
							</dd></dl></div><div class="example" id="idm140591312931184"><p class="title"><strong>Example 4.1. A simple /etc/exports file</strong></p><div class="example-contents"><p>
						In its simplest form, the <code class="literal filename">/etc/exports</code> file only specifies the exported directory and the hosts permitted to access it:
					</p><pre class="screen">/exported/directory bob.example.com</pre><p>
						Here, <code class="literal">bob.example.com</code> can mount <code class="literal filename">/exported/directory/</code> from the NFS server. Because no options are specified in this example, NFS uses default options.
					</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The format of the <code class="literal filename">/etc/exports</code> file is very precise, particularly in regards to use of the space character. Remember to always separate exported file systems from hosts and hosts from one another with a space character. However, there should be no other space characters in the file except on comment lines.
					</p><p>
						For example, the following two lines do not mean the same thing:
					</p><pre class="screen">/home bob.example.com(rw)
/home bob.example.com (rw)</pre><p>
						The first line allows only users from <code class="literal">bob.example.com</code> read and write access to the <code class="literal filename">/home</code> directory. The second line allows users from <code class="literal">bob.example.com</code> to mount the directory as read-only (the default), while the rest of the world can mount it read/write.
					</p></div></div><h5 id="default_options">Default options</h5><p>
					The default options for an export entry are:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal option">ro</code></span></dt><dd>
								The exported file system is read-only. Remote hosts cannot change the data shared on the file system. To allow hosts to make changes to the file system (that is, read and write), specify the rw option.
							</dd><dt><span class="term"><code class="literal options">sync</code></span></dt><dd>
								The NFS server will not reply to requests before changes made by previous requests are written to disk. To enable asynchronous writes instead, specify the option <code class="literal option">async</code>.
							</dd><dt><span class="term"><code class="literal option">wdelay</code></span></dt><dd>
								The NFS server will delay writing to the disk if it suspects another write request is imminent. This can improve performance as it reduces the number of times the disk must be accessed by separate write commands, thereby reducing write overhead. To disable this, specify the <code class="literal option">no_wdelay</code> option, which is available only if the default sync option is also specified.
							</dd><dt><span class="term"><code class="literal option">root_squash</code></span></dt><dd><p class="simpara">
								This prevents root users connected remotely (as opposed to locally) from having root privileges; instead, the NFS server assigns them the user ID <code class="literal">nfsnobody</code>. This effectively "squashes" the power of the remote root user to the lowest local user, preventing possible unauthorized writes on the remote server. To disable root squashing, specify the <code class="literal option">no_root_squash</code> option.
							</p><p class="simpara">
								To squash every remote user (including root), use the <code class="literal option">all_squash</code> option. To specify the user and group IDs that the NFS server should assign to remote users from a particular host, use the <code class="literal option">anonuid</code> and <code class="literal option">anongid</code> options, respectively, as in:
							</p><pre class="screen"><span class="emphasis"><em><span class="replaceable replaceable">export</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">host</span></em></span>(anonuid=<span class="emphasis"><em><span class="replaceable replaceable">uid</span></em></span>,anongid=<span class="emphasis"><em><span class="replaceable replaceable">gid</span></em></span>)</pre><p class="simpara">
								Here, <span class="emphasis"><em><span class="replaceable replaceable">uid</span></em></span> and <span class="emphasis"><em><span class="replaceable replaceable">gid</span></em></span> are user ID number and group ID number, respectively. The <code class="literal option">anonuid</code> and <code class="literal option">anongid</code> options enable you to create a special user and group account for remote NFS users to share.
							</p></dd></dl></div><p>
					By default, access control lists (ACLs) are supported by NFS under Red Hat Enterprise Linux. To disable this feature, specify the <code class="literal option">no_acl</code> option when exporting the file system.
				</p><h5 id="default_and_overridden_options">Default and overridden options</h5><p>
					Each default for every exported file system must be explicitly overridden. For example, if the <code class="literal">rw</code> option is not specified, then the exported file system is shared as read-only. The following is a sample line from <code class="literal filename">/etc/exports</code> which overrides two default options:
				</p><pre class="screen">/another/exported/directory 192.168.0.3(rw,async)</pre><p>
					In this example, <code class="literal">192.168.0.3</code> can mount <code class="literal filename">/another/exported/directory/</code> read and write, and all writes to disk are asynchronous.
				</p></section><section class="section" id="the-exportfs-utility_exporting-nfs-shares"><div class="titlepage"><div><div><h3 class="title">4.6.2. The exportfs utility</h3></div></div></div><p>
					The <code class="literal">exportfs</code> utility enables the root user to selectively export or unexport directories without restarting the NFS service. When given the proper options, the <code class="literal">exportfs</code> utility writes the exported file systems to <code class="literal filename">/var/lib/nfs/xtab</code>. Because the <code class="literal">nfs-mountd</code> service refers to the <code class="literal">xtab</code> file when deciding access privileges to a file system, changes to the list of exported file systems take effect immediately.
				</p><h5 id="common_exportfs_options">Common exportfs options</h5><p>
					The following is a list of commonly-used options available for <code class="literal">exportfs</code>:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal option">-r</code></span></dt><dd>
								Causes all directories listed in <code class="literal filename">/etc/exports</code> to be exported by constructing a new export list in <code class="literal filename">/etc/lib/nfs/xtab</code>. This option effectively refreshes the export list with any changes made to <code class="literal filename">/etc/exports</code>.
							</dd><dt><span class="term"><code class="literal option">-a</code></span></dt><dd>
								Causes all directories to be exported or unexported, depending on what other options are passed to <code class="literal">exportfs</code>. If no other options are specified, <code class="literal">exportfs</code> exports all file systems specified in <code class="literal filename">/etc/exports</code>.
							</dd><dt><span class="term"><code class="literal option">-o <span class="emphasis"><em><span class="replaceable replaceable">file-systems</span></em></span></code></span></dt><dd>
								Specifies directories to be exported that are not listed in <code class="literal filename">/etc/exports</code>. Replace <span class="emphasis"><em><span class="replaceable replaceable">file-systems</span></em></span> with additional file systems to be exported. These file systems must be formatted in the same way they are specified in <code class="literal filename">/etc/exports</code>. This option is often used to test an exported file system before adding it permanently to the list of exported file systems.
							</dd><dt><span class="term"><code class="literal option">-i</code></span></dt><dd>
								Ignores <code class="literal filename">/etc/exports</code>; only options given from the command line are used to define exported file systems.
							</dd><dt><span class="term"><code class="literal option">-u</code></span></dt><dd>
								Unexports all shared directories. The command <code class="literal command">exportfs -ua</code> suspends NFS file sharing while keeping all NFS services up. To re-enable NFS sharing, use <code class="literal command">exportfs -r</code>.
							</dd><dt><span class="term"><code class="literal option">-v</code></span></dt><dd>
								Verbose operation, where the file systems being exported or unexported are displayed in greater detail when the <code class="literal">exportfs</code> command is executed.
							</dd></dl></div><p>
					If no options are passed to the <code class="literal">exportfs</code> utility, it displays a list of currently exported file systems.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For information on different methods for specifying host names, see <a class="xref" href="index.html#nfs-host-name-formats_exporting-nfs-shares" title="4.5. NFS host name formats">Section 4.5, “NFS host name formats”</a>.
						</li><li class="listitem">
							For a complete list of export options, see the <code class="literal">exports(5)</code> man page.
						</li><li class="listitem">
							For more information about the <code class="literal">exportfs</code> utility, see the <code class="literal">exportfs(8)</code> man page.
						</li></ul></div></section></section><section class="section" id="nfs-and-rpcbind_exporting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">4.7. NFS and rpcbind</h2></div></div></div><p>
				This section explains the purpose of the <code class="literal">rpcbind</code> service, which is required by NFSv3.
			</p><p>
				The <code class="literal">rpcbind</code> service maps Remote Procedure Call (RPC) services to the ports on which they listen. RPC processes notify <code class="literal">rpcbind</code> when they start, registering the ports they are listening on and the RPC program numbers they expect to serve. The client system then contacts <code class="literal">rpcbind</code> on the server with a particular RPC program number. The <code class="literal">rpcbind</code> service redirects the client to the proper port number so it can communicate with the requested service.
			</p><p>
				Because RPC-based services rely on <code class="literal">rpcbind</code> to make all connections with incoming client requests, <code class="literal">rpcbind</code> must be available before any of these services start.
			</p><p>
				Access control rules for <code class="literal">rpcbind</code> affect all RPC-based services. Alternatively, it is possible to specify access control rules for each of the NFS RPC daemons.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For the precise syntax of access control rules, see the <code class="literal">rpc.mountd(8)</code> and <code class="literal">rpc.statd(8)</code> man pages.
					</li></ul></div></section><section class="section" id="installing-nfs_exporting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">4.8. Installing NFS</h2></div></div></div><p>
				This procedure installs all packages necessary to mount or export NFS shares.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Install the <code class="literal">nfs-utils</code> package:
					</p><pre class="screen"># yum install nfs-utils</pre></li></ul></div></section><section class="section" id="starting-the-nfs-server_exporting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">4.9. Starting the NFS server</h2></div></div></div><p>
				This procedure describes how to start the NFS server, which is required to export NFS shares.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						For servers that support NFSv2 or NFSv3 connections, the <code class="literal">rpcbind</code> service must be running. To verify that <code class="literal">rpcbind</code> is active, use the following command:
					</p><pre class="screen">$ systemctl status rpcbind</pre><p class="simpara">
						If the service is stopped, start and enable it:
					</p><pre class="screen">$ systemctl enable --now rpcbind</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To start the NFS server and enable it to start automatically at boot, use the following command:
					</p><pre class="screen"># systemctl enable --now nfs-server</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						To configure an NFSv4-only server, which does not require <code class="literal">rpcbind</code>, see <a class="xref" href="index.html#configuring-an-nfsv4-only-server_exporting-nfs-shares" title="4.14. Configuring an NFSv4-only server">Section 4.14, “Configuring an NFSv4-only server”</a>.
					</li></ul></div></section><section class="section" id="troubleshooting-nfs-and-rpcbind_exporting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">4.10. Troubleshooting NFS and rpcbind</h2></div></div></div><p>
				Because the <code class="literal">rpcbind</code> service provides coordination between RPC services and the port numbers used to communicate with them, it is useful to view the status of current RPC services using <code class="literal">rpcbind</code> when troubleshooting. The <code class="literal">rpcinfo</code> utility shows each RPC-based service with port numbers, an RPC program number, a version number, and an IP protocol type (TCP or UDP).
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To make sure the proper NFS RPC-based services are enabled for <code class="literal">rpcbind</code>, use the following command:
					</p><pre class="screen"># rpcinfo -p</pre><div class="example" id="idm140591311945104"><p class="title"><strong>Example 4.2. rpcinfo -p command output</strong></p><div class="example-contents"><p>
							The following is sample output from this command:
						</p><pre class="screen">   program vers proto   port  service
    100000    4   tcp    111  portmapper
    100000    3   tcp    111  portmapper
    100000    2   tcp    111  portmapper
    100000    4   udp    111  portmapper
    100000    3   udp    111  portmapper
    100000    2   udp    111  portmapper
    100005    1   udp  20048  mountd
    100005    1   tcp  20048  mountd
    100005    2   udp  20048  mountd
    100005    2   tcp  20048  mountd
    100005    3   udp  20048  mountd
    100005    3   tcp  20048  mountd
    100024    1   udp  37769  status
    100024    1   tcp  49349  status
    100003    3   tcp   2049  nfs
    100003    4   tcp   2049  nfs
    100227    3   tcp   2049  nfs_acl
    100021    1   udp  56691  nlockmgr
    100021    3   udp  56691  nlockmgr
    100021    4   udp  56691  nlockmgr
    100021    1   tcp  46193  nlockmgr
    100021    3   tcp  46193  nlockmgr
    100021    4   tcp  46193  nlockmgr</pre></div></div><p class="simpara">
						If one of the NFS services does not start up correctly, <code class="literal">rpcbind</code> will be unable to map RPC requests from clients for that service to the correct port.
					</p></li><li class="listitem"><p class="simpara">
						In many cases, if NFS is not present in <code class="literal">rpcinfo</code> output, restarting NFS causes the service to correctly register with <code class="literal">rpcbind</code> and begin working:
					</p><pre class="screen"># systemctl restart nfs-server</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information and a list of <code class="literal">rpcinfo</code> options, see the <code class="literal">rpcinfo(8)</code> man page.
					</li><li class="listitem">
						To configure an NFSv4-only server, which does not require <code class="literal">rpcbind</code>, see <a class="xref" href="index.html#configuring-an-nfsv4-only-server_exporting-nfs-shares" title="4.14. Configuring an NFSv4-only server">Section 4.14, “Configuring an NFSv4-only server”</a>.
					</li></ul></div></section><section class="section" id="configuring-the-nfs-server-to-run-behind-a-firewall_exporting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">4.11. Configuring the NFS server to run behind a firewall</h2></div></div></div><p>
				NFS requires the <code class="literal">rpcbind</code> service, which dynamically assigns ports for RPC services and can cause issues for configuring firewall rules. This procedure describes how to configure the NFS server to work behind a firewall.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To allow clients to access NFS shares behind a firewall, set which ports the RPC services run on in the <code class="literal">[mountd]</code> section of the <code class="literal filename">/etc/nfs.conf</code> file:
					</p><pre class="screen">[mountd]

port=<span class="emphasis"><em><span class="replaceable replaceable">port-number</span></em></span></pre><p class="simpara">
						This adds the <code class="literal option">-p <span class="emphasis"><em><span class="replaceable replaceable">port-number</span></em></span></code> option to the <code class="literal">rpc.mount</code> command line: <code class="literal command">rpc.mount -p <span class="emphasis"><em><span class="replaceable replaceable">port-number</span></em></span></code>.
					</p></li><li class="listitem"><p class="simpara">
						To allow clients to access NFS shares behind a firewall, configure the firewall by running the following commands on the NFS server:
					</p><pre class="screen">firewall-cmd --permanent --add-service mountd
firewall-cmd --permanent --add-service rpc-bind
firewall-cmd --permanent --add-service nfs
firewall-cmd --permanent --add-port=<span class="emphasis"><em>&lt;mountd-port&gt;</em></span>/tcp
firewall-cmd --permanent --add-port=<span class="emphasis"><em>&lt;mountd-port&gt;</em></span>/udp
firewall-cmd --reload</pre><p class="simpara">
						In the commands, replace <span class="emphasis"><em>&lt;mountd-port&gt;</em></span> with the intended port or a port range. When specifying a port range, use the <span class="emphasis"><em>--add-port=&lt;mountd-port&gt;-&lt;mountd-port&gt;/udp</em></span> syntax.
					</p></li><li class="listitem"><p class="simpara">
						To allow NFSv4.0 callbacks to pass through firewalls, set <code class="literal filename">/proc/sys/fs/nfs/nfs_callback_tcpport</code> and allow the server to connect to that port on the client.
					</p><p class="simpara">
						This step is not needed for NFSv4.1 or higher, and the other ports for <code class="literal">mountd</code>, <code class="literal">statd</code>, and <code class="literal">lockd</code> are not required in a pure NFSv4 environment.
					</p></li><li class="listitem">
						To specify the ports to be used by the RPC service <code class="literal">nlockmgr</code>, set the port number for the <code class="literal">nlm_tcpport</code> and <code class="literal">nlm_udpport</code> options in the <code class="literal filename">/etc/modprobe.d/lockd.conf</code> file.
					</li><li class="listitem"><p class="simpara">
						Restart the NFS server:
					</p><pre class="screen">#  systemctl restart nfs-server</pre><p class="simpara">
						If NFS fails to start, check <code class="literal filename">/var/log/messages</code>. Commonly, NFS fails to start if you specify a port number that is already in use.
					</p></li><li class="listitem"><p class="simpara">
						Confirm the changes have taken effect:
					</p><pre class="screen"># rpcinfo -p</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						To configure an NFSv4-only server, which does not require <code class="literal">rpcbind</code>, see <a class="xref" href="index.html#configuring-an-nfsv4-only-server_exporting-nfs-shares" title="4.14. Configuring an NFSv4-only server">Section 4.14, “Configuring an NFSv4-only server”</a>.
					</li></ul></div></section><section class="section" id="exporting-rpc-quota-through-a-firewall_exporting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">4.12. Exporting RPC quota through a firewall</h2></div></div></div><p>
				If you export a file system that uses disk quotas, you can use the quota Remote Procedure Call (RPC) service to provide disk quota data to NFS clients.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable and start the <code class="literal">rpc-rquotad</code> service:
					</p><pre class="screen"># systemctl enable --now rpc-rquotad</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The <code class="literal">rpc-rquotad</code> service is, if enabled, started automatically after starting the nfs-server service.
						</p></div></div></li><li class="listitem"><p class="simpara">
						To make the quota RPC service accessible behind a firewall, the TCP (or UDP, if UDP is enabled) port 875 need to be open. The default port number is defined in the <code class="literal filename">/etc/services</code> file.
					</p><p class="simpara">
						You can override the default port number by appending <code class="literal option">-p port-number</code> to the <code class="literal">RPCRQUOTADOPTS</code> variable in the <code class="literal filename">/etc/sysconfig/rpc-rquotad</code> file.
					</p></li><li class="listitem">
						By default, remote hosts can only read quotas. If you want to allow clients to set quotas, append the <code class="literal option">-S</code> option to the <code class="literal">RPCRQUOTADOPTS</code> variable in the <code class="literal filename">/etc/sysconfig/rpc-rquotad</code> file.
					</li><li class="listitem"><p class="simpara">
						Restart <code class="literal">rpc-rquotad</code> for the changes in the <code class="literal filename">/etc/sysconfig/rpc-rquotad</code> file to take effect:
					</p><pre class="screen"># systemctl restart rpc-rquotad</pre></li></ol></div></section><section class="section" id="enabling-nfs-over-rdma-nfsordma_exporting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">4.13. Enabling NFS over RDMA (NFSoRDMA)</h2></div></div></div><p>
				The remote direct memory access (RDMA) service works automatically in Red Hat Enterprise Linux 8 if there is RDMA-capable hardware present.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal package">rdma-core</code> package:
					</p><pre class="screen"># yum install rdma-core</pre></li><li class="listitem"><p class="simpara">
						To enable automatic loading of NFSoRDMA <span class="emphasis"><em>server</em></span> modules, add the <code class="literal option">SVCRDMA_LOAD=yes</code> option on a new line in the <code class="literal filename">/etc/rdma/rdma.conf</code> configuration file.
					</p><p class="simpara">
						The <code class="literal">rdma=20049</code> option in the <code class="literal">[nfsd]</code> section of the <code class="literal filename">/etc/nfs.conf</code> file specifies the port number on which the NFSoRDMA service listens for clients. The RFC 5667 standard specifies that servers must listen on port <code class="literal">20049</code> when providing NFSv4 services over RDMA.
					</p><p class="simpara">
						The <code class="literal filename">/etc/rdma/rdma.conf</code> file contains a line that sets the <code class="literal option">XPRTRDMA_LOAD=yes</code> option by default, which requests the <code class="literal">rdma</code> service to load the NFSoRDMA <span class="emphasis"><em>client</em></span> module.
					</p></li><li class="listitem"><p class="simpara">
						Restart the <code class="literal">nfs-server</code> service:
					</p><pre class="screen"># systemctl restart nfs-server</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The RFC 5667 standard: <a class="link" href="https://tools.ietf.org/html/rfc5667">https://tools.ietf.org/html/rfc5667</a>.
					</li></ul></div></section><section class="section" id="configuring-an-nfsv4-only-server_exporting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">4.14. Configuring an NFSv4-only server</h2></div></div></div><p>
				As an NFS server administrator, you can configure the NFS server to support only NFSv4, which minimizes the number of open ports and running services on the system.
			</p><section class="section" id="benefits-and-drawbacks-of-an-nfsv4-only-server_configuring-an-nfsv4-only-server"><div class="titlepage"><div><div><h3 class="title">4.14.1. Benefits and drawbacks of an NFSv4-only server</h3></div></div></div><p>
					This section explains the benefits and drawbacks of configuring the NFS server to only support NFSv4.
				</p><p>
					By default, the NFS server supports NFSv2, NFSv3, and NFSv4 connections in Red Hat Enterprise Linux 8. However, you can also configure NFS to support only NFS version 4.0 and later. This minimizes the number of open ports and running services on the system, because NFSv4 does not require the <code class="literal">rpcbind</code> service to listen on the network.
				</p><p>
					When your NFS server is configured as NFSv4-only, clients attempting to mount shares using NFSv2 or NFSv3 fail with an error like the following:
				</p><pre class="screen">Requested NFS version or transport protocol is not supported.</pre><p>
					Optionally, you can also disable listening for the <code class="literal">RPCBIND</code>, <code class="literal">MOUNT</code>, and <code class="literal">NSM</code> protocol calls, which are not necessary in the NFSv4-only case.
				</p><p>
					The effects of disabling these additional options are:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Clients that attempt to mount shares from your server using NFSv2 or NFSv3 become unresponsive.
						</li><li class="listitem">
							The NFS server itself is unable to mount NFSv2 and NFSv3 file systems.
						</li></ul></div></section><section class="section" id="nfs-and-rpcbind_configuring-an-nfsv4-only-server"><div class="titlepage"><div><div><h3 class="title">4.14.2. NFS and rpcbind</h3></div></div></div><p>
					This section explains the purpose of the <code class="literal">rpcbind</code> service, which is required by NFSv3.
				</p><p>
					The <code class="literal">rpcbind</code> service maps Remote Procedure Call (RPC) services to the ports on which they listen. RPC processes notify <code class="literal">rpcbind</code> when they start, registering the ports they are listening on and the RPC program numbers they expect to serve. The client system then contacts <code class="literal">rpcbind</code> on the server with a particular RPC program number. The <code class="literal">rpcbind</code> service redirects the client to the proper port number so it can communicate with the requested service.
				</p><p>
					Because RPC-based services rely on <code class="literal">rpcbind</code> to make all connections with incoming client requests, <code class="literal">rpcbind</code> must be available before any of these services start.
				</p><p>
					Access control rules for <code class="literal">rpcbind</code> affect all RPC-based services. Alternatively, it is possible to specify access control rules for each of the NFS RPC daemons.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For the precise syntax of access control rules, see the <code class="literal">rpc.mountd(8)</code> and <code class="literal">rpc.statd(8)</code> man pages.
						</li></ul></div></section><section class="section" id="configuring-the-nfs-server-to-support-only-nfsv4_configuring-an-nfsv4-only-server"><div class="titlepage"><div><div><h3 class="title">4.14.3. Configuring the NFS server to support only NFSv4</h3></div></div></div><p>
					This procedure describes how to configure your NFS server to support only NFS version 4.0 and later.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Disable NFSv2 and NFSv3 by adding the following lines to the <code class="literal">[nfsd]</code> section of the <code class="literal filename">/etc/nfs.conf</code> configuration file:
						</p><pre class="screen">[nfsd]

vers2=no
vers3=no</pre></li><li class="listitem"><p class="simpara">
							Optionally, disable listening for the <code class="literal">RPCBIND</code>, <code class="literal">MOUNT</code>, and <code class="literal">NSM</code> protocol calls, which are not necessary in the NFSv4-only case. Disable related services:
						</p><pre class="screen"># systemctl mask --now rpc-statd.service rpcbind.service rpcbind.socket</pre></li><li class="listitem"><p class="simpara">
							Restart the NFS server:
						</p><pre class="screen"># systemctl restart nfs-server</pre></li></ol></div><p>
					The changes take effect as soon as you start or restart the NFS server.
				</p></section><section class="section" id="verifying-the-nfsv4-only-configuration_configuring-an-nfsv4-only-server"><div class="titlepage"><div><div><h3 class="title">4.14.4. Verifying the NFSv4-only configuration</h3></div></div></div><p>
					This procedure describes how to verify that your NFS server is configured in the NFSv4-only mode by using the <code class="literal">netstat</code> utility.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the <code class="literal">netstat</code> utility to list services listening on the TCP and UDP protocols:
						</p><pre class="screen"># netstat --listening --tcp --udp</pre><div class="example" id="idm140591313272704"><p class="title"><strong>Example 4.3. Output on an NFSv4-only server</strong></p><div class="example-contents"><p>
								The following is an example <code class="literal">netstat</code> output on an NFSv4-only server; listening for <code class="literal">RPCBIND</code>, <code class="literal">MOUNT</code>, and <code class="literal">NSM</code> is also disabled. Here, <code class="literal">nfs</code> is the only listening NFS service:
							</p><pre class="screen"># netstat --listening --tcp --udp

Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 0.0.0.0:ssh             0.0.0.0:*               LISTEN
tcp        0      0 0.0.0.0:nfs             0.0.0.0:*               LISTEN
tcp6       0      0 [::]:ssh                [::]:*                  LISTEN
tcp6       0      0 [::]:nfs                [::]:*                  LISTEN
udp        0      0 localhost.locald:bootpc 0.0.0.0:*</pre></div></div><div class="example" id="idm140591313267920"><p class="title"><strong>Example 4.4. Output before configuring an NFSv4-only server</strong></p><div class="example-contents"><p>
								In comparison, the <code class="literal">netstat</code> output before configuring an NFSv4-only server includes the <code class="literal">sunrpc</code> and <code class="literal">mountd</code> services:
							</p><pre class="screen"># netstat --listening --tcp --udp

Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address State
tcp        0      0 0.0.0.0:ssh             0.0.0.0:*       LISTEN
tcp        0      0 0.0.0.0:40189           0.0.0.0:*       LISTEN
tcp        0      0 0.0.0.0:46813           0.0.0.0:*       LISTEN
tcp        0      0 0.0.0.0:nfs             0.0.0.0:*       LISTEN
tcp        0      0 0.0.0.0:sunrpc          0.0.0.0:*       LISTEN
tcp        0      0 0.0.0.0:mountd          0.0.0.0:*       LISTEN
tcp6       0      0 [::]:ssh                [::]:*          LISTEN
tcp6       0      0 [::]:51227              [::]:*          LISTEN
tcp6       0      0 [::]:nfs                [::]:*          LISTEN
tcp6       0      0 [::]:sunrpc             [::]:*          LISTEN
tcp6       0      0 [::]:mountd             [::]:*          LISTEN
tcp6       0      0 [::]:45043              [::]:*          LISTEN
udp        0      0 localhost:1018          0.0.0.0:*
udp        0      0 localhost.locald:bootpc 0.0.0.0:*
udp        0      0 0.0.0.0:mountd          0.0.0.0:*
udp        0      0 0.0.0.0:46672           0.0.0.0:*
udp        0      0 0.0.0.0:sunrpc          0.0.0.0:*
udp        0      0 0.0.0.0:33494           0.0.0.0:*
udp6       0      0 [::]:33734              [::]:*
udp6       0      0 [::]:mountd             [::]:*
udp6       0      0 [::]:sunrpc             [::]:*
udp6       0      0 [::]:40243              [::]:*</pre></div></div></li></ul></div></section></section><section class="section" id="related-information-exporting-nfs-shares"><div class="titlepage"><div><div><h2 class="title">4.15. Related information</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The Linux NFS wiki: <a class="link" href="https://linux-nfs.org">https://linux-nfs.org</a>
					</li></ul></div></section></section><section class="chapter" id="securing-nfs_managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Securing NFS</h1></div></div></div><p>
			To minimize NFS security risks and protect data on the server, consider the following sections when exporting NFS file systems on a server or mounting them on a client.
		</p><section class="section" id="nfs-security-with-auth_sys-and-export-controls_securing-nfs"><div class="titlepage"><div><div><h2 class="title">5.1. NFS security with AUTH_SYS and export controls</h2></div></div></div><p>
				NFS provides the following traditional options in order to control access to exported files:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The server restricts which hosts are allowed to mount which file systems either by IP address or by host name.
					</li><li class="listitem">
						The server enforces file system permissions for users on NFS clients in the same way it does for local users. Traditionally, NFS does this using the <code class="literal">AUTH_SYS</code> call message (also called <code class="literal">AUTH_UNIX</code>), which relies on the client to state the UID and GIDs of the user. Be aware that this means that a malicious or misconfigured client might easily get this wrong and allow a user access to files that it should not.
					</li></ul></div><p>
				To limit the potential risks, administrators often limits the access to read-only or squash user permissions to a common user and group ID. Unfortunately, these solutions prevent the NFS share from being used in the way it was originally intended.
			</p><p>
				Additionally, if an attacker gains control of the DNS server used by the system exporting the NFS file system, they can point the system associated with a particular hostname or fully qualified domain name to an unauthorized machine. At this point, the unauthorized machine <span class="emphasis"><em>is</em></span> the system permitted to mount the NFS share, because no username or password information is exchanged to provide additional security for the NFS mount.
			</p><p>
				Wildcards should be used sparingly when exporting directories through NFS, as it is possible for the scope of the wildcard to encompass more systems than intended.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information on securing NFS and <code class="literal command">rpcbind</code>, see the <code class="literal">iptables</code> man page.
					</li></ul></div></section><section class="section" id="nfs-security-with-auth_gss_securing-nfs"><div class="titlepage"><div><div><h2 class="title">5.2. NFS security with <code class="literal">AUTH_GSS</code></h2></div></div></div><p>
				All version of NFS support RPCSEC_GSS and the Kerberos mechanism.
			</p><p>
				Unlike AUTH_SYS, with the RPCSEC_GSS Kerberos mechanism, the server does not depend on the client to correctly represent which user is accessing the file. Instead, cryptography is used to authenticate users to the server, which prevents a malicious client from impersonating a user without having that user’s Kerberos credentials. Using the RPCSEC_GSS Kerberos mechanism is the most straightforward way to secure mounts because after configuring Kerberos, no additional setup is needed.
			</p></section><section class="section" id="configuring-an-nfs-server-and-client-to-use-kerberos_securing-nfs"><div class="titlepage"><div><div><h2 class="title">5.3. Configuring an NFS server and client to use Kerberos</h2></div></div></div><p>
				Kerberos is a network authentication system that allows clients and servers to authenticate to each other by using symmetric encryption and a trusted third party, the KDC. Red Hat recommends using Identity Management (IdM) for setting up Kerberos.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The Kerberos Key Distribution Centre (<code class="literal">KDC</code>) is installed and configured.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">

					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Create the <code class="literal">nfs/hostname.<span class="emphasis"><em>domain@REALM</em></span></code> principal on the NFS server side.
							</li><li class="listitem">
								Create the <code class="literal">host/hostname.<span class="emphasis"><em>domain@REALM</em></span></code> principal on both the server and the client side.
							</li><li class="listitem">
								Add the corresponding keys to keytabs for the client and server.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						On the server side, use the <code class="literal option">sec=</code> option to enable the wanted security flavors. To enable all security flavors as well as non-cryptographic mounts:
					</p><pre class="screen">/export *(sec=sys:krb5:krb5i:krb5p)</pre><p class="simpara">
						Valid security flavors to use with the <code class="literal option">sec=</code> option are:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">sys</code>: no cryptographic protection, the default
							</li><li class="listitem">
								<code class="literal">krb5</code>: authentication only
							</li><li class="listitem">
								<code class="literal">krb5i</code>: integrity protection
							</li><li class="listitem">
								<code class="literal">krb5p</code>: privacy protection
							</li></ul></div></li><li class="listitem"><p class="simpara">
						On the client side, add <code class="literal">sec=krb5</code> (or <code class="literal">sec=krb5i</code>, or <code class="literal">sec=krb5p</code>, depending on the setup) to the mount options:
					</p><pre class="screen"># mount -o sec=krb5 server:/export /mnt</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If you need to write files as root on the Kerberos-secured NFS share and keep root ownership on these files, see <a class="link" href="https://access.redhat.com/articles/4040141">https://access.redhat.com/articles/4040141</a>. Note that this configuration is not recommended.
					</li><li class="listitem">
						For more information on NFS configuration, see the <span class="strong strong"><strong>exports</strong></span>(5) and <span class="strong strong"><strong>nfs</strong></span>(5) man pages.
					</li></ul></div></section><section class="section" id="nfsv4-security-options_securing-nfs"><div class="titlepage"><div><div><h2 class="title">5.4. NFSv4 security options</h2></div></div></div><p>
				NFSv4 includes ACL support based on the Microsoft Windows NT model, not the POSIX model, because of the Microsoft Windows NT model’s features and wide deployment.
			</p><p>
				Another important security feature of NFSv4 is the removal of the use of the <code class="literal">MOUNT</code> protocol for mounting file systems. The <code class="literal">MOUNT</code> protocol presented a security risk because of the way the protocol processed file handles.
			</p></section><section class="section" id="file-permissions-on-mounted-nfs-exports_securing-nfs"><div class="titlepage"><div><div><h2 class="title">5.5. File permissions on mounted NFS exports</h2></div></div></div><p>
				Once the NFS file system is mounted as either read or read and write by a remote host, the only protection each shared file has is its permissions. If two users that share the same user ID value mount the same NFS file system on different client systems, they can modify each others' files. Additionally, anyone logged in as root on the client system can use the <code class="literal command">su -</code> command to access any files with the NFS share.
			</p><p>
				By default, access control lists (ACLs) are supported by NFS under Red Hat Enterprise Linux. Red Hat recommends to keep this feature enabled.
			</p><p>
				By default, NFS uses <span class="emphasis"><em>root squashing</em></span> when exporting a file system. This sets the user ID of anyone accessing the NFS share as the root user on their local machine to <code class="literal">nobody</code>. Root squashing is controlled by the default option <code class="literal command">root_squash</code>; for more information about this option, see <a class="xref" href="index.html#nfs-server-configuration_exporting-nfs-shares" title="4.6. NFS server configuration">Section 4.6, “NFS server configuration”</a>.
			</p><p>
				When exporting an NFS share as read-only, consider using the <code class="literal option">all_squash</code> option. This option makes every user accessing the exported file system take the user ID of the <code class="literal">nfsnobody</code> user.
			</p></section></section><section class="chapter" id="enabling-pnfs-scsi-layouts-in-nfs_managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Enabling pNFS SCSI layouts in NFS</h1></div></div></div><p>
			You can configure the NFS server and client to use the pNFS SCSI layout for accessing data. pNFS SCSI is beneficial in use cases that involve longer-duration single-client access to a file.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					Both the client and the server must be able to send SCSI commands to the same block device. That is, the block device must be on a shared SCSI bus.
				</li><li class="listitem">
					The block device must contain an XFS file system.
				</li><li class="listitem">
					The SCSI device must support SCSI Persistent Reservations as described in the SCSI-3 Primary Commands specification.
				</li></ul></div><section class="section" id="the-pnfs-technology_enabling-pnfs-scsi-layouts-in-nfs"><div class="titlepage"><div><div><h2 class="title">6.1. The pNFS technology</h2></div></div></div><p>
				The pNFS architecture improves the scalability of NFS. When a server implements pNFS, the client is able to access data through multiple servers concurrently. This can lead to performance improvements.
			</p><p>
				pNFS supports the following storage protocols or layouts on RHEL:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Files
					</li><li class="listitem">
						Flexfiles
					</li><li class="listitem">
						SCSI
					</li></ul></div></section><section class="section" id="pnfs-scsi-layouts_enabling-pnfs-scsi-layouts-in-nfs"><div class="titlepage"><div><div><h2 class="title">6.2. pNFS SCSI layouts</h2></div></div></div><p>
				The SCSI layout builds on the work of pNFS block layouts. The layout is defined across SCSI devices. It contains a sequential series of fixed-size blocks as logical units (LUs) that must be capable of supporting SCSI persistent reservations. The LU devices are identified by their SCSI device identification.
			</p><p>
				pNFS SCSI performs well in use cases that involve longer-duration single-client access to a file. An example might be a mail server or a virtual machine housing a cluster.
			</p><h4 id="operations_between_the_client_and_the_server">Operations between the client and the server</h4><p>
				When an NFS client reads from a file or writes to it, the client performs a <code class="literal">LAYOUTGET</code> operation. The server responds with the location of the file on the SCSI device. The client might need to perform an additional operation of <code class="literal">GETDEVICEINFO</code> to determine which SCSI device to use. If these operations work correctly, the client can issue I/O requests directly to the SCSI device instead of sending <code class="literal">READ</code> and <code class="literal">WRITE</code> operations to the server.
			</p><p>
				Errors or contention between clients might cause the server to recall layouts or not issue them to the clients. In those cases, the clients fall back to issuing <code class="literal">READ</code> and <code class="literal">WRITE</code> operations to the server instead of sending I/O requests directly to the SCSI device.
			</p><p>
				To monitor the operations, see <a class="xref" href="index.html#monitoring-pnfs-scsi-layouts-functionality_enabling-pnfs-scsi-layouts-in-nfs" title="6.7. Monitoring pNFS SCSI layouts functionality">Section 6.7, “Monitoring pNFS SCSI layouts functionality”</a>.
			</p><h4 id="device_reservations">Device reservations</h4><p>
				pNFS SCSI handles fencing through the assignment of reservations. Before the server issues layouts to clients, it reserves the SCSI device to ensure that only registered clients may access the device. If a client can issue commands to that SCSI device but is not registered with the device, many operations from the client on that device fail. For example, the <code class="literal">blkid</code> command on the client fails to show the UUID of the XFS file system if the server has not given a layout for that device to the client.
			</p><p>
				The server does not remove its own persistent reservation. This protects the data within the file system on the device across restarts of clients and servers. In order to repurpose the SCSI device, you might need to manually remove the persistent reservation on the NFS server.
			</p></section><section class="section" id="checking-for-a-scsi-device-compatible-with-pnfs_enabling-pnfs-scsi-layouts-in-nfs"><div class="titlepage"><div><div><h2 class="title">6.3. Checking for a SCSI device compatible with pNFS</h2></div></div></div><p>
				This procedure checks if a SCSI device supports the pNFS SCSI layout.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Install the <code class="literal package">sg3_utils</code> package:
					</p><pre class="screen"># yum install sg3_utils</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						On both the server and client, check for the proper SCSI device support:
					</p><pre class="screen"># sg_persist --in --report-capabilities --verbose <span class="emphasis"><em><span class="replaceable replaceable">path-to-scsi-device</span></em></span></pre><p class="simpara">
						Ensure that the <span class="emphasis"><em>Persist Through Power Loss Active</em></span> (<code class="literal">PTPL_A</code>) bit is set.
					</p><div class="example" id="idm140591311003904"><p class="title"><strong>Example 6.1. A SCSI device that supports pNFS SCSI</strong></p><div class="example-contents"><p>
							The following is an example of <code class="literal">sg_persist</code> output for a SCSI device that supports pNFS SCSI. The <code class="literal">PTPL_A</code> bit reports <code class="literal">1</code>.
						</p><pre class="screen">    inquiry cdb: 12 00 00 00 24 00
    Persistent Reservation In cmd: 5e 02 00 00 00 00 00 20 00 00
  LIO-ORG   block11           4.0
  Peripheral device type: disk
Report capabilities response:
  Compatible Reservation Handling(CRH): 1
  Specify Initiator Ports Capable(SIP_C): 1
  All Target Ports Capable(ATP_C): 1
  Persist Through Power Loss Capable(PTPL_C): 1
  Type Mask Valid(TMV): 1
  Allow Commands: 1
  <span class="strong strong"><strong>Persist Through Power Loss Active(PTPL_A): 1</strong></span>
    Support indicated in Type mask:
      Write Exclusive, all registrants: 1
      Exclusive Access, registrants only: 1
      Write Exclusive, registrants only: 1
      Exclusive Access: 1
      Write Exclusive: 1
      Exclusive Access, all registrants: 1</pre></div></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">sg_persist(8)</code> man page
					</li></ul></div></section><section class="section" id="setting-up-pnfs-scsi-on-the-server_enabling-pnfs-scsi-layouts-in-nfs"><div class="titlepage"><div><div><h2 class="title">6.4. Setting up pNFS SCSI on the server</h2></div></div></div><p>
				This procedure configures an NFS server to export a pNFS SCSI layout.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						On the server, mount the XFS file system created on the SCSI device.
					</li><li class="listitem"><p class="simpara">
						Configure the NFS server to export NFS version 4.1 or higher. Set the following option in the <code class="literal">[nfsd]</code> section of the <code class="literal filename">/etc/nfs.conf</code> file:
					</p><pre class="screen">[nfsd]

vers4.1=y</pre></li><li class="listitem"><p class="simpara">
						Configure the NFS server to export the XFS file system over NFS with the <code class="literal">pnfs</code> option:
					</p><div class="example" id="idm140591313012080"><p class="title"><strong>Example 6.2. An entry in /etc/exports to export pNFS SCSI</strong></p><div class="example-contents"><p>
							The following entry in the <code class="literal filename">/etc/exports</code> configuration file exports the file system mounted at <code class="literal filename">/exported/directory/</code> to the <code class="literal">allowed.example.com</code> client as a pNFS SCSI layout:
						</p><pre class="screen">/exported/directory allowed.example.com(pnfs)</pre></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information on configuring an NFS server, see <a class="xref" href="index.html#exporting-nfs-shares_managing-file-systems" title="Chapter 4. Exporting NFS shares">Chapter 4, <em>Exporting NFS shares</em></a>.
					</li></ul></div></section><section class="section" id="setting-up-pnfs-scsi-on-the-client_enabling-pnfs-scsi-layouts-in-nfs"><div class="titlepage"><div><div><h2 class="title">6.5. Setting up pNFS SCSI on the client</h2></div></div></div><p>
				This procedure configures an NFS client to mount a pNFS SCSI layout.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The NFS server is configured to export an XFS file system over pNFS SCSI. See <a class="xref" href="index.html#setting-up-pnfs-scsi-on-the-server_enabling-pnfs-scsi-layouts-in-nfs" title="6.4. Setting up pNFS SCSI on the server">Section 6.4, “Setting up pNFS SCSI on the server”</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						On the client, mount the exported XFS file system using NFS version 4.1 or higher:
					</p><pre class="screen"># mount -t nfs -o nfsvers=4.1 <span class="emphasis"><em><span class="replaceable replaceable">host:/remote/export</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">/local/directory</span></em></span></pre><p class="simpara">
						Do not mount the XFS file system directly without NFS.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information on mounting NFS shares, see <a class="xref" href="index.html#mounting-nfs-shares_managing-file-systems" title="Chapter 3. Mounting NFS shares">Chapter 3, <em>Mounting NFS shares</em></a>.
					</li></ul></div></section><section class="section" id="releasing-the-pnfs-scsi-reservation-on-the-server_enabling-pnfs-scsi-layouts-in-nfs"><div class="titlepage"><div><div><h2 class="title">6.6. Releasing the pNFS SCSI reservation on the server</h2></div></div></div><p>
				This procedure releases the persistent reservation that an NFS server holds on a SCSI device. This enables you to repurpose the SCSI device when you no longer need to export pNFS SCSI.
			</p><p>
				You must remove the reservation from the server. It cannot be removed from a different IT Nexus.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Install the <code class="literal package">sg3_utils</code> package:
					</p><pre class="screen"># yum install sg3_utils</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Query an existing reservation on the server:
					</p><pre class="screen"># sg_persist --read-reservation <span class="emphasis"><em><span class="replaceable replaceable">path-to-scsi-device</span></em></span></pre><div class="example" id="idm140591311969552"><p class="title"><strong>Example 6.3. Querying a reservation on /dev/sda</strong></p><div class="example-contents"><pre class="screen"># sg_persist --read-reservation /dev/sda

  LIO-ORG   block_1           4.0
  Peripheral device type: disk
  PR generation=0x8, Reservation follows:
    Key=0x100000000000000
    scope: LU_SCOPE,  type: Exclusive Access, registrants only</pre></div></div></li><li class="listitem"><p class="simpara">
						Remove the existing registration on the server:
					</p><pre class="screen"># sg_persist --out \
             --release \
             --param-rk=<span class="emphasis"><em><span class="replaceable replaceable">reservation-key</span></em></span> \
             --prout-type=6 \
             <span class="emphasis"><em><span class="replaceable replaceable">path-to-scsi-device</span></em></span></pre><div class="example" id="idm140591313798464"><p class="title"><strong>Example 6.4. Removing a reservation on /dev/sda</strong></p><div class="example-contents"><pre class="screen"># sg_persist --out \
             --release \
             --param-rk=0x100000000000000 \
             --prout-type=6 \
             /dev/sda

  LIO-ORG   block_1           4.0
  Peripheral device type: disk</pre></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">sg_persist(8)</code> man page
					</li></ul></div></section><section class="section" id="monitoring-pnfs-scsi-layouts-functionality_enabling-pnfs-scsi-layouts-in-nfs"><div class="titlepage"><div><div><h2 class="title">6.7. Monitoring pNFS SCSI layouts functionality</h2></div></div></div><p>
				You can monitor if the pNFS client and server exchange proper pNFS SCSI operations or if they fall back on regular NFS operations.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A pNFS SCSI client and server are configured.
					</li></ul></div><section class="section" id="checking-pnfs-scsi-operations-from-the-server-using-nfsstat_monitoring-pnfs-scsi-layouts-functionality"><div class="titlepage"><div><div><h3 class="title">6.7.1. Checking pNFS SCSI operations from the server using nfsstat</h3></div></div></div><p>
					This procedure uses the <code class="literal">nfsstat</code> utility to monitor pNFS SCSI operations from the server.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Monitor the operations serviced from the server:
						</p><pre class="screen"># watch --differences \
        "nfsstat --server | egrep --after-context=1 read\|write\|layout"

Every 2.0s: nfsstat --server | egrep --after-context=1 read\|write\|layout

putrootfh    read         readdir      readlink     remove	 rename
2         0% 0         0% 1         0% 0         0% 0         0% 0         0%
--
setcltidconf verify	  write        rellockowner bc_ctl	 bind_conn
0         0% 0         0% 0         0% 0         0% 0         0% 0         0%
--
getdevlist   layoutcommit layoutget    layoutreturn secinfononam sequence
0         0% 29        1% 49        1% 5         0% 0         0% 2435     86%</pre></li><li class="listitem"><p class="simpara">
							The client and server use pNFS SCSI operations when:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The <code class="literal">layoutget</code>, <code class="literal">layoutreturn</code>, and <code class="literal">layoutcommit</code> counters increment. This means that the server is serving layouts.
								</li><li class="listitem">
									The server <code class="literal">read</code> and <code class="literal">write</code> counters do not increment. This means that the clients are performing I/O requests directly to the SCSI devices.
								</li></ul></div></li></ol></div></section><section class="section" id="checking-pnfs-scsi-operations-from-the-client-using-mountstats_monitoring-pnfs-scsi-layouts-functionality"><div class="titlepage"><div><div><h3 class="title">6.7.2. Checking pNFS SCSI operations from the client using mountstats</h3></div></div></div><p>
					This procedure uses the <code class="literal filename">/proc/self/mountstats</code> file to monitor pNFS SCSI operations from the client.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							List the per-mount operation counters:
						</p><pre class="screen"># cat /proc/self/mountstats \
      | awk /scsi_lun_0/,/^$/ \
      | egrep device\|READ\|WRITE\|LAYOUT

device 192.168.122.73:/exports/scsi_lun_0 mounted on /mnt/rhel7/scsi_lun_0 with fstype nfs4 statvers=1.1
    nfsv4:  bm0=0xfdffbfff,bm1=0x40f9be3e,bm2=0x803,acl=0x3,sessions,pnfs=LAYOUT_SCSI
            READ: 0 0 0 0 0 0 0 0
           WRITE: 0 0 0 0 0 0 0 0
        READLINK: 0 0 0 0 0 0 0 0
         READDIR: 0 0 0 0 0 0 0 0
       LAYOUTGET: 49 49 0 11172 9604 2 19448 19454
    LAYOUTCOMMIT: 28 28 0 7776 4808 0 24719 24722
    LAYOUTRETURN: 0 0 0 0 0 0 0 0
     LAYOUTSTATS: 0 0 0 0 0 0 0 0</pre></li><li class="listitem"><p class="simpara">
							In the results:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The <code class="literal">LAYOUT</code> statistics indicate requests where the client and server use pNFS SCSI operations.
								</li><li class="listitem">
									The <code class="literal">READ</code> and <code class="literal">WRITE</code> statistics indicate requests where the client and server fall back to NFS operations.
								</li></ul></div></li></ol></div></section></section></section><section class="chapter" id="assembly_mounting-an-smb-share-on-red-hat-enterprise-linux_managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 7. Mounting an SMB Share on Red Hat Enterprise Linux</h1></div></div></div><p>
			The Server Message Block (SMB) protocol implements an application-layer network protocol used to access resources on a server, such as file shares and shared printers.
		</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				In the context of SMB, you can find mentions about the Common Internet File System (CIFS) protocol, which is a dialect of SMB. Both the SMB and CIFS protocol are supported, and the kernel module and utilities involved in mounting SMB and CIFS shares both use the name <code class="literal">cifs</code>.
			</p></div></div><p>
			This section describes how to mount shares from an SMB server. For details about setting up an SMB server on Red Hat Enterprise Linux using Samba, see the section about using Samba in the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring-and-deploying-different-types-of-servers/assembly_using-samba">Configuring and deploying different types of servers</a> guide.
		</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
				On Microsoft Windows, SMB is implemented by default. On Red Hat Enterprise Linux, the <code class="literal">cifs.ko</code> file system module of the kernel provides support for mounting SMB shares. Therefor install the <code class="literal">cifs-utils</code> package:
			</p></div><pre class="literallayout"># yum install cifs-utils</pre><p>
			The <code class="literal">cifs-utils</code> package provides utilities to:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Mount SMB and CIFS shares
				</li><li class="listitem">
					Manage NT Lan Manager (NTLM) credentials in the kernel’s keyring
				</li><li class="listitem">
					Set and display Access Control Lists (ACL) in a security descriptor on SMB and CIFS shares
				</li></ul></div><section class="section" id="con_supported-smb-protocol-versions_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux"><div class="titlepage"><div><div><h2 class="title">7.1. Supported SMB protocol versions</h2></div></div></div><p>
				The <code class="literal">cifs.ko</code> kernel module supports the following SMB protocol versions:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						SMB 1
					</li><li class="listitem">
						SMB 2.0
					</li><li class="listitem">
						SMB 2.1
					</li><li class="listitem">
						SMB 3.0
					</li><li class="listitem">
						SMB 3.1.1
					</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Depending on the protocol version, not all SMB features are implemented.
				</p></div></div></section><section class="section" id="con_unix-extensions-support_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux"><div class="titlepage"><div><div><h2 class="title">7.2. UNIX extensions support</h2></div></div></div><p>
				Samba uses the <code class="literal">CAP_UNIX</code> capability bit in the SMB protocol to provide the UNIX extensions feature. These extensions are also supported by the <code class="literal">cifs.ko</code> kernel module. However, both Samba and the kernel module support UNIX extensions only in the SMB 1 protocol.
			</p><p>
				To use UNIX extensions:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Set the <code class="literal">server min protocol</code> parameter in the <code class="literal">[global]</code> section in the <code class="literal filename">/etc/samba/smb.conf</code> file to <code class="literal">NT1</code>.
					</li><li class="listitem"><p class="simpara">
						Mount the share using the SMB 1 protocol by providing the <code class="literal">-o vers=1.0</code> option to the mount command. For example:
					</p><pre class="literallayout"># mount -t cifs <span class="strong strong"><strong>-o vers=1.0</strong></span>,username=<span class="emphasis"><em>user_name</em></span> <span class="emphasis"><em>//server_name/share_name</em></span> <span class="emphasis"><em>/mnt/</em></span></pre><p class="simpara">
						By default, the kernel module uses SMB 2 or the highest later protocol version supported by the server. Passing the <code class="literal">-o vers=1.0</code> option to the <code class="literal">mount</code> command forces that the kernel module uses the SMB 1 protocol that is required for using UNIX extensions.
					</p></li></ol></div><p>
				To verify if UNIX extensions are enabled, display the options of the mounted share:
			</p><pre class="literallayout"># mount
...
<span class="emphasis"><em>//server/share</em></span> on <span class="emphasis"><em>/mnt</em></span> type cifs (...,<code class="literal">unix</code>,...)</pre><p>
				If the <code class="literal">unix</code> entry is displayed in the list of mount options, UNIX extensions are enabled.
			</p></section><section class="section" id="proc_manually-mounting-an-smb-share_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux"><div class="titlepage"><div><div><h2 class="title">7.3. Manually mounting an SMB share</h2></div></div></div><p>
				If you only require an SMB share to be temporary mounted, you can mount it manually using the <code class="literal">mount</code> utility.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Manually mounted shares are not mounted automatically again when you reboot the system. To configure that Red Hat Enterprise Linux automatically mounts the share when the system boots, see <a class="xref" href="index.html#proc_mounting-an-smb-share-automatically-when-the-system-boots_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux" title="7.4. Mounting an SMB share automatically when the system boots">Section 7.4, “Mounting an SMB share automatically when the system boots”</a>.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal package">cifs-utils</code> package is installed.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					To manually mount an SMB share, use the <code class="literal">mount</code> utility with the <code class="literal">-t cifs</code> parameter:
				</p></div><pre class="literallayout"># mount -t cifs -o username=<span class="emphasis"><em>user_name</em></span> <span class="emphasis"><em>//server_name/share_name</em></span> <span class="emphasis"><em>/mnt/</em></span>
Password for <span class="emphasis"><em>user_name@//server_name/share_name</em></span>:  <span class="emphasis"><em>password</em></span></pre><p>
				In the <code class="literal">-o</code> parameter, you can specify options that are used to mount the share. For details, see <a class="xref" href="index.html#con_frequently-used-mount-options_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux" title="7.7. Frequently used mount options">Section 7.7, “Frequently used mount options”</a> and the <code class="literal">OPTIONS</code> section in the <code class="literal">mount.cifs(8)</code> man page.
			</p><div class="example" id="example_mounting-a-share-using-an-encrypted-smb30-connection_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux"><p class="title"><strong>Example 7.1. Mounting a share using an encrypted SMB 3.0 connection</strong></p><div class="example-contents"><p>
					To mount the <code class="literal">\\server\example\</code> share as the <code class="literal"><span class="emphasis"><em>DOMAIN</em></span>\Administrator</code> user over an encrypted SMB 3.0 connection into the <code class="literal">/mnt/</code> directory:
				</p><pre class="literallayout"># mount -t cifs -o username=<span class="emphasis"><em>DOMAIN</em></span>\Administrator,seal,vers=3.0 //server/example /mnt/
Password for <span class="emphasis"><em>DOMAIN</em></span>\Administrator@//server_name/share_name:  <span class="emphasis"><em>password</em></span></pre></div></div></section><section class="section" id="proc_mounting-an-smb-share-automatically-when-the-system-boots_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux"><div class="titlepage"><div><div><h2 class="title">7.4. Mounting an SMB share automatically when the system boots</h2></div></div></div><p>
				If access to a mounted SMB share is permanently required on a server, mount the share automatically at boot time.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal package">cifs-utils</code> package is installed.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					To mount an SMB share automatically when the system boots, add an entry for the share to the <code class="literal filename">/etc/fstab</code> file. For example:
				</p></div><pre class="literallayout"><span class="emphasis"><em>//server_name/share_name</em></span>  <span class="emphasis"><em>/mnt</em></span>  cifs  credentials=<span class="emphasis"><em>/root/smb.cred</em></span>  0 0</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					To enable the system to mount a share automatically, you must store the user name, password, and domain name in a credentials file. For details, see <a class="xref" href="index.html#proc_authenticating-to-an-smb-share-using-a-credentials-file_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux" title="7.5. Authenticating to an SMB share using a credentials file">Section 7.5, “Authenticating to an SMB share using a credentials file”</a>.
				</p></div></div><p>
				In the fourth field of the row in the <code class="literal filename">/etc/fstab</code>, specify mount options, such as the path to the credentials file. For details, see <a class="xref" href="index.html#con_frequently-used-mount-options_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux" title="7.7. Frequently used mount options">Section 7.7, “Frequently used mount options”</a> and the <code class="literal">OPTIONS</code> section in the <code class="literal">mount.cifs(8)</code> man page.
			</p><p>
				To verify that the share mounts successfully, enter:
			</p><pre class="literallayout"># mount /mnt/</pre></section><section class="section" id="proc_authenticating-to-an-smb-share-using-a-credentials-file_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux"><div class="titlepage"><div><div><h2 class="title">7.5. Authenticating to an SMB share using a credentials file</h2></div></div></div><p>
				In certain situations, such as when mounting a share automatically at boot time, a share should be mounted without entering the user name and password. To implement this, create a credentials file.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal package">cifs-utils</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a file, such as <code class="literal filename">/root/smb.cred</code>, and specify the user name, password, and domain name that file:
					</p><pre class="literallayout">username=<span class="emphasis"><em>user_name</em></span>
password=<span class="emphasis"><em>password</em></span>
domain=<span class="emphasis"><em>domain_name</em></span></pre></li><li class="listitem"><p class="simpara">
						Set the permissions to only allow the owner to access the file:
					</p><pre class="literallayout"># chown user_name /root/smb.cred
# chmod 600 /root/smb.cred</pre></li></ol></div><p>
				You can now pass the <code class="literal">credentials=<span class="emphasis"><em>file_name</em></span></code> mount option to the <code class="literal">mount</code> utility or use it in the <code class="literal filename">/etc/fstab</code> file to mount the share without being prompted for the user name and password.
			</p></section><section class="section" id="assembly_performing-a-multi-user-smb-mount_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux"><div class="titlepage"><div><div><h2 class="title">7.6. Performing a multi-user SMB mount</h2></div></div></div><p>
				The credentials you provide to mount a share determine the access permissions on the mount point by default. For example, if you use the <code class="literal"><span class="emphasis"><em>DOMAIN</em></span>\example</code> user when you mount a share, all operations on the share will be executed as this user, regardless which local user performs the operation.
			</p><p>
				However, in certain situations, the administrator wants to mount a share automatically when the system boots, but users should perform actions on the share’s content using their own credentials. The <code class="literal">multiuser</code> mount options lets you configure this scenario.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					To use the <code class="literal">multiuser</code> mount option, you must additionally set the <code class="literal">sec</code> mount option to a security type that supports providing credentials in a non-interactive way, such as <code class="literal">krb5</code> or the <code class="literal">ntlmssp</code> option with a credentials file. For details, see <a class="xref" href="index.html#proc_accessing-a-share-as-a-user_assembly_performing-a-multi-user-smb-mount" title="7.6.3. Accessing a share as a user">Section 7.6.3, “Accessing a share as a user”</a>.
				</p></div></div><p>
				The <code class="literal">root</code> user mounts the share using the <code class="literal">multiuser</code> option and an account that has minimal access to the contents of the share. Regular users can then provide their user name and password to the current session’s kernel keyring using the <code class="literal">cifscreds</code> utility. If the user accesses the content of the mounted share, the kernel uses the credentials from the kernel keyring instead of the one initially used to mount the share.
			</p><p>
				Using this feature consists of the following steps:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="index.html#proc_mounting-a-share-with-the-multiuser-option_assembly_performing-a-multi-user-smb-mount" title="7.6.1. Mounting a share with the multiuser option">Mount a share with the <code class="literal">multiuser</code> option</a>.
					</li><li class="listitem">
						<a class="link" href="index.html#proc_verifying-if-an-smb-share-is-mounted-with-the-multiuser-option_assembly_performing-a-multi-user-smb-mount" title="7.6.2. Verifying if an SMB share is mounted with the multiuser option">Optionally, verify if the share was successfully mounted with the <code class="literal">multiuser</code> option</a>.
					</li><li class="listitem">
						<a class="link" href="index.html#proc_accessing-a-share-as-a-user_assembly_performing-a-multi-user-smb-mount" title="7.6.3. Accessing a share as a user">Access the share as a user</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal package">cifs-utils</code> package is installed.
					</li></ul></div><section class="section" id="proc_mounting-a-share-with-the-multiuser-option_assembly_performing-a-multi-user-smb-mount"><div class="titlepage"><div><div><h3 class="title">7.6.1. Mounting a share with the multiuser option</h3></div></div></div><p>
					Before users can access the share with their own credentials, mount the share as the <code class="literal">root</code> user using an account with limited permissions.
				</p><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						To mount a share automatically with the <code class="literal">multiuser</code> option when the system boots:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the entry for the share in the <code class="literal filename">/etc/fstab</code> file. For example:
						</p><pre class="literallayout"><span class="emphasis"><em>//server_name/share_name</em></span>  <span class="emphasis"><em>/mnt</em></span>  cifs  <code class="literal">multiuser,sec=ntlmssp</code>,credentials=<span class="emphasis"><em>/root/smb.cred</em></span>  0 0</pre></li><li class="listitem"><p class="simpara">
							Mount the share:
						</p><pre class="literallayout"># mount /mnt/</pre></li></ol></div><p>
					If you do not want to mount the share automatically when the system boots, mount it manually by passing <code class="literal">-o multiuser,sec=security_type</code> to the <code class="literal">mount</code> command. For details about mounting an SMB share manually, see <a class="xref" href="index.html#proc_manually-mounting-an-smb-share_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux" title="7.3. Manually mounting an SMB share">Section 7.3, “Manually mounting an SMB share”</a>.
				</p></section><section class="section" id="proc_verifying-if-an-smb-share-is-mounted-with-the-multiuser-option_assembly_performing-a-multi-user-smb-mount"><div class="titlepage"><div><div><h3 class="title">7.6.2. Verifying if an SMB share is mounted with the multiuser option</h3></div></div></div><p>
					To verify if a share is mounted with the <code class="literal">multiuser</code> option, display the mount options.
				</p><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						
<pre class="literallayout"># mount
...
<span class="emphasis"><em>//server_name/share_name</em></span> on <span class="emphasis"><em>/mnt</em></span> type cifs (sec=ntlmssp,<code class="literal">multiuser</code>,...)</pre>

					</p></div><p>
					If the <code class="literal">multiuser</code> entry is displayed in the list of mount options, the feature is enabled.
				</p></section><section class="section" id="proc_accessing-a-share-as-a-user_assembly_performing-a-multi-user-smb-mount"><div class="titlepage"><div><div><h3 class="title">7.6.3. Accessing a share as a user</h3></div></div></div><p>
					If an SMB share is mounted with the <code class="literal">multiuser</code> option, users can provide their credentials for the server to the kernel’s keyring:
				</p><pre class="literallayout"># cifscreds add -u <span class="emphasis"><em>SMB_user_name</em></span> <span class="emphasis"><em>server_name</em></span>
Password: <span class="emphasis"><em>password</em></span></pre><p>
					When the user performs operations in the directory that contains the mounted SMB share, the server applies the file system permissions for this user, instead of the one initially used when the share was mounted.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Multiple users can perform operations using their own credentials on the mounted share at the same time.
					</p></div></div></section></section><section class="section" id="con_frequently-used-mount-options_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux"><div class="titlepage"><div><div><h2 class="title">7.7. Frequently used mount options</h2></div></div></div><p>
				When you mount an SMB share, the mount options determine:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						How the connection will be established with the server. For example, which SMB protocol version is used when connecting to the server.
					</li><li class="listitem">
						How the share will be mounted into the local file system. For example, if the system overrides the remote file and directory permissions to enable multiple local users to access the content on the server.
					</li></ul></div><p>
				To set multiple options in the fourth field of the <code class="literal filename">/etc/fstab</code> file or in the <code class="literal">-o</code> parameter of a mount command, separate them with commas. For example, see <a class="xref" href="index.html#proc_mounting-a-share-with-the-multiuser-option_assembly_performing-a-multi-user-smb-mount" title="7.6.1. Mounting a share with the multiuser option">Section 7.6.1, “Mounting a share with the multiuser option”</a>.
			</p><p>
				The following list gives frequently used mount options:
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 29%; " class="col_1"><!--Empty--></col><col style="width: 71%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140591312530160" scope="col">Option</th><th align="left" valign="top" id="idm140591312529072" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140591312530160"> <p>
								credentials=<span class="emphasis"><em>file_name</em></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140591312529072"> <p>
								Sets the path to the credentials file. See <a class="xref" href="index.html#proc_authenticating-to-an-smb-share-using-a-credentials-file_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux" title="7.5. Authenticating to an SMB share using a credentials file">Section 7.5, “Authenticating to an SMB share using a credentials file”</a>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591312530160"> <p>
								dir_mode=<span class="emphasis"><em>mode</em></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140591312529072"> <p>
								Sets the directory mode if the server does not support CIFS UNIX extensions.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591312530160"> <p>
								file_mode=<span class="emphasis"><em>mode</em></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140591312529072"> <p>
								Sets the file mode if the server does not support CIFS UNIX extensions.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591312530160"> <p>
								password=<span class="emphasis"><em>password</em></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140591312529072"> <p>
								Sets the password used to authenticate to the SMB server. Alternatively, specify a credentials file using the <code class="literal">credentials</code> option.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591312530160"> <p>
								seal
							</p>
							 </td><td align="left" valign="top" headers="idm140591312529072"> <p>
								Enables encryption support for connections using SMB 3.0 or a later protocol version. Therefore, use <code class="literal">seal</code> together with the <code class="literal">vers</code> mount option set to <code class="literal">3.0</code> or later. See <a class="xref" href="index.html#example_mounting-a-share-using-an-encrypted-smb30-connection_assembly_mounting-an-smb-share-on-red-hat-enterprise-linux" title="Example 7.1. Mounting a share using an encrypted SMB 3.0 connection">Example 7.1, “Mounting a share using an encrypted SMB 3.0 connection”</a>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591312530160"> <p>
								sec=<span class="emphasis"><em>security_mode</em></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140591312529072"> <p>
								Sets the security mode, such as <code class="literal">ntlmsspi</code>, to enable NTLMv2 password hashing and enabled packet signing. For a list of supported values, see the option’s description in the <code class="literal">mount.cifs(8)</code> man page.
							</p>
							 <p>
								If the server does not support the <code class="literal">ntlmv2</code> security mode, use <code class="literal">sec=ntlmssp</code>, which is the default.
							</p>
							 <p>
								For security reasons, do not use the insecure <code class="literal">ntlm</code> security mode.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591312530160"> <p>
								username=<span class="emphasis"><em>user_name</em></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140591312529072"> <p>
								Sets the user name used to authenticate to the SMB server. Alternatively, specify a credentials file using the <code class="literal">credentials</code> option.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591312530160"> <p>
								vers=<span class="emphasis"><em>SMB_protocol_version</em></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140591312529072"> <p>
								Sets the SMB protocol version used for the communication with the server.
							</p>
							 </td></tr></tbody></table></div><p>
				For a complete list, see the <code class="literal">OPTIONS</code> section in the <code class="literal">mount.cifs(8)</code> man page.
			</p></section></section><section class="chapter" id="assembly_overview-of-persistent-naming-attributes_managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 8. Overview of persistent naming attributes</h1></div></div></div><p>
			As a system administrator, you need to refer to storage volumes using persistent naming attributes to build storage setups that are reliable over multiple system boots.
		</p><section class="section" id="con_disadvantages-of-non-persistent-naming-attributes_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h2 class="title">8.1. Disadvantages of non-persistent naming attributes</h2></div></div></div><p>
				Red Hat Enterprise Linux provides a number of ways to identify storage devices. It is important to use the correct option to identify each device when used in order to avoid inadvertently accessing the wrong device, particularly when installing to or reformatting drives.
			</p><p>
				Traditionally, non-persistent names in the form of <code class="literal">/dev/sd<span class="emphasis"><em><span class="replaceable replaceable">(major number)</span></em></span><span class="emphasis"><em><span class="replaceable replaceable">(minor number)</span></em></span></code> are used on Linux to refer to storage devices. The major and minor number range and associated <code class="literal">sd</code> names are allocated for each device when it is detected. This means that the association between the major and minor number range and associated <code class="literal">sd</code> names can change if the order of device detection changes.
			</p><p>
				Such a change in the ordering might occur in the following situations:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The parallelization of the system boot process detects storage devices in a different order with each system boot.
					</li><li class="listitem">
						A disk fails to power up or respond to the SCSI controller. This results in it not being detected by the normal device probe. The disk is not accessible to the system and subsequent devices will have their major and minor number range, including the associated <code class="literal">sd</code> names shifted down. For example, if a disk normally referred to as <code class="literal">sdb</code> is not detected, a disk that is normally referred to as <code class="literal">sdc</code> would instead appear as <code class="literal">sdb</code>.
					</li><li class="listitem">
						A SCSI controller (host bus adapter, or HBA) fails to initialize, causing all disks connected to that HBA to not be detected. Any disks connected to subsequently probed HBAs are assigned different major and minor number ranges, and different associated <code class="literal">sd</code> names.
					</li><li class="listitem">
						The order of driver initialization changes if different types of HBAs are present in the system. This causes the disks connected to those HBAs to be detected in a different order. This might also occur if HBAs are moved to different PCI slots on the system.
					</li><li class="listitem">
						Disks connected to the system with Fibre Channel, iSCSI, or FCoE adapters might be inaccessible at the time the storage devices are probed, due to a storage array or intervening switch being powered off, for example. This might occur when a system reboots after a power failure, if the storage array takes longer to come online than the system take to boot. Although some Fibre Channel drivers support a mechanism to specify a persistent SCSI target ID to WWPN mapping, this does not cause the major and minor number ranges, and the associated <code class="literal">sd</code> names to be reserved; it only provides consistent SCSI target ID numbers.
					</li></ul></div><p>
				These reasons make it undesirable to use the major and minor number range or the associated <code class="literal">sd</code> names when referring to devices, such as in the <code class="literal filename">/etc/fstab</code> file. There is the possibility that the wrong device will be mounted and data corruption might result.
			</p><p>
				Occasionally, however, it is still necessary to refer to the <code class="literal">sd</code> names even when another mechanism is used, such as when errors are reported by a device. This is because the Linux kernel uses <code class="literal">sd</code> names (and also SCSI host/channel/target/LUN tuples) in kernel messages regarding the device.
			</p></section><section class="section" id="file-system-and-device-identifiers_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h2 class="title">8.2. File system and device identifiers</h2></div></div></div><p>
				This sections explains the difference between persistent attributes identifying file systems and block devices.
			</p><h4 id="file_system_identifiers">File system identifiers</h4><p>
				File system identifiers are tied to a particular file system created on a block device. The identifier is also stored as part of the file system. If you copy the file system to a different device, it still carries the same file system identifier. On the other hand, if you rewrite the device, such as by formatting it with the <code class="literal">mkfs</code> utility, the device loses the attribute.
			</p><p>
				File system identifiers include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Unique identifier (UUID)
					</li><li class="listitem">
						Label
					</li></ul></div><h4 id="device_identifiers">Device identifiers</h4><p>
				Device identifiers are tied to a block device: for example, a disk or a partition. If you rewrite the device, such as by formatting it with the <code class="literal">mkfs</code> utility, the device keeps the attribute, because it is not stored in the file system.
			</p><p>
				Device identifiers include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						World Wide Identifier (WWID)
					</li><li class="listitem">
						Partition UUID
					</li><li class="listitem">
						Serial number
					</li></ul></div><h4 id="recommendations">Recommendations</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Some file systems, such as logical volumes, span multiple devices. Red Hat recommends accessing these file systems using file system identifiers rather than device identifiers.
					</li></ul></div></section><section class="section" id="con_device-names-managed-by-the-udev-mechanism-in-dev-disk-_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h2 class="title">8.3. Device names managed by the udev mechanism in /dev/disk/</h2></div></div></div><p>
				This section lists different kinds of persistent naming attributes that the <code class="literal">udev</code> service provides in the <code class="literal filename">/dev/disk/</code> directory.
			</p><p>
				The <code class="literal">udev</code> mechanism is used for all types of devices in Linux, not just for storage devices. In the case of storage devices, Red Hat Enterprise Linux contains <code class="literal">udev</code> rules that create symbolic links in the <code class="literal filename">/dev/disk/</code> directory. This enables you to refer to storage devices by:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Their content
					</li><li class="listitem">
						A unique identifier
					</li><li class="listitem">
						Their serial number.
					</li></ul></div><p>
				Although <code class="literal">udev</code> naming attributes are persistent, in that they do not change on their own across system reboots, some are also configurable.
			</p><section class="section" id="file-system-identifiers_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h3 class="title">8.3.1. File system identifiers</h3></div></div></div><h4 id="the_uuid_attribute_in_dev_disk_by_uuid">The UUID attribute in /dev/disk/by-uuid/</h4><p>
					Entries in this directory provide a symbolic name that refers to the storage device by a <span class="strong strong"><strong>unique identifier</strong></span> (UUID) in the content (that is, the data) stored on the device. For example:
				</p><pre class="screen">/dev/disk/by-uuid/<span class="emphasis"><em>3e6be9de-8139-11d1-9106-a43f08d823a6</em></span></pre><p>
					You can use the UUID to refer to the device in the <code class="literal filename">/etc/fstab</code> file using the following syntax:
				</p><pre class="screen">UUID=<span class="emphasis"><em>3e6be9de-8139-11d1-9106-a43f08d823a6</em></span></pre><p>
					You can configure the UUID attribute when creating a file system, and you can also change it later on.
				</p><h4 id="the_label_attribute_in_dev_disk_by_label">The Label attribute in /dev/disk/by-label/</h4><p>
					Entries in this directory provide a symbolic name that refers to the storage device by a <span class="strong strong"><strong>label</strong></span> in the content (that is, the data) stored on the device.
				</p><p>
					For example:
				</p><pre class="screen">/dev/disk/by-label/<span class="emphasis"><em>Boot</em></span></pre><p>
					You can use the label to refer to the device in the <code class="literal filename">/etc/fstab</code> file using the following syntax:
				</p><pre class="screen">LABEL=<span class="emphasis"><em>Boot</em></span></pre><p>
					You can configure the Label attribute when creating a file system, and you can also change it later on.
				</p></section><section class="section" id="device-identifiers_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h3 class="title">8.3.2. Device identifiers</h3></div></div></div><h4 id="the_wwid_attribute_in_dev_disk_by_id">The WWID attribute in /dev/disk/by-id/</h4><p>
					The World Wide Identifier (WWID) is a persistent, <span class="strong strong"><strong>system-independent identifier</strong></span> that the SCSI Standard requires from all SCSI devices. The WWID identifier is guaranteed to be unique for every storage device, and independent of the path that is used to access the device. The identifier is a property of the device but is not stored in the content (that is, the data) on the devices.
				</p><p>
					This identifier can be obtained by issuing a SCSI Inquiry to retrieve the Device Identification Vital Product Data (page <code class="literal">0x83</code>) or Unit Serial Number (page <code class="literal">0x80</code>).
				</p><p>
					Red Hat Enterprise Linux automatically maintains the proper mapping from the WWID-based device name to a current <code class="literal">/dev/sd</code> name on that system. Applications can use the <code class="literal">/dev/disk/by-id/</code> name to reference the data on the disk, even if the path to the device changes, and even when accessing the device from different systems.
				</p><div class="example" id="idm140591318520496"><p class="title"><strong>Example 8.1. WWID mappings</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 25%; " class="col_2"><!--Empty--></col><col style="width: 25%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140591318514416" scope="col">WWID symlink</th><th align="left" valign="top" id="idm140591311855344" scope="col">Non-persistent device</th><th align="left" valign="top" id="idm140591311854256" scope="col">Note</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140591318514416"> <p>
										<code class="literal filename">/dev/disk/by-id/scsi-3600508b400105e210000900000490000</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140591311855344"> <p>
										<code class="literal filename">/dev/sda</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140591311854256"> <p>
										A device with a page <code class="literal">0x83</code> identifier
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140591318514416"> <p>
										<code class="literal filename">/dev/disk/by-id/scsi-SSEAGATE_ST373453LW_3HW1RHM6</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140591311855344"> <p>
										<code class="literal filename">/dev/sdb</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140591311854256"> <p>
										A device with a page <code class="literal">0x80</code> identifier
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140591318514416"> <p>
										<code class="literal filename">/dev/disk/by-id/ata-SAMSUNG_MZNLN256HMHQ-000L7_S2WDNX0J336519-part3</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140591311855344"> <p>
										<code class="literal filename">/dev/sdc3</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140591311854256"> <p>
										A disk partition
									</p>
									 </td></tr></tbody></table></div></div></div><p>
					In addition to these persistent names provided by the system, you can also use <code class="literal">udev</code> rules to implement persistent names of your own, mapped to the WWID of the storage.
				</p><h4 id="the_partition_uuid_attribute_in_dev_disk_by_partuuid">The Partition UUID attribute in /dev/disk/by-partuuid</h4><p>
					The Partition UUID (PARTUUID) attribute identifies partitions as defined by GPT partition table.
				</p><div class="example" id="idm140591305666976"><p class="title"><strong>Example 8.2. Partition UUID mappings</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 60%; " class="col_1"><!--Empty--></col><col style="width: 40%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140591301872080" scope="col">PARTUUID symlink</th><th align="left" valign="top" id="idm140591301870992" scope="col">Non-persistent device</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140591301872080"> <p>
										<code class="literal filename">/dev/disk/by-partuuid/4cd1448a-01</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140591301870992"> <p>
										<code class="literal filename">/dev/sda1</code>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140591301872080"> <p>
										<code class="literal filename">/dev/disk/by-partuuid/4cd1448a-02</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140591301870992"> <p>
										<code class="literal filename">/dev/sda2</code>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140591301872080"> <p>
										<code class="literal filename">/dev/disk/by-partuuid/4cd1448a-03</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140591301870992"> <p>
										<code class="literal filename">/dev/sda3</code>
									</p>
									 </td></tr></tbody></table></div></div></div><h4 id="the_path_attribute_in_dev_disk_by_path">The Path attribute in /dev/disk/by-path/</h4><p>
					This attribute provides a symbolic name that refers to the storage device by the <span class="strong strong"><strong>hardware path</strong></span> used to access the device.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						The Path attribute is unreliable, and Red Hat does not recommend using it.
					</p></div></div></section></section><section class="section" id="con_the-world-wide-identifier-with-dm-multipath_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h2 class="title">8.4. The World Wide Identifier with DM Multipath</h2></div></div></div><p>
				This section describes the mapping between the World Wide Identifier (WWID) and non-persistent device names in a Device Mapper Multipath configuration.
			</p><p>
				If there are multiple paths from a system to a device, DM Multipath uses the WWID to detect this. DM Multipath then presents a single "pseudo-device" in the <code class="literal filename">/dev/mapper/wwid</code> directory, such as <code class="literal filename">/dev/mapper/3600508b400105df70000e00000ac0000</code>.
			</p><p>
				The command <code class="literal command">multipath -l</code> shows the mapping to the non-persistent identifiers:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal"><span class="emphasis"><em>Host</em></span>:<span class="emphasis"><em>Channel</em></span>:<span class="emphasis"><em>Target</em></span>:<span class="emphasis"><em>LUN</em></span></code>
					</li><li class="listitem">
						<code class="literal">/dev/sd</code> name
					</li><li class="listitem">
						<code class="literal"><span class="emphasis"><em>major</em></span>:<span class="emphasis"><em>minor</em></span></code> number
					</li></ul></div><div class="example" id="idm140591306314128"><p class="title"><strong>Example 8.3. WWID mappings in a multipath configuration</strong></p><div class="example-contents"><p>
					An example output of the <code class="literal command">multipath -l</code> command:
				</p><pre class="screen">3600508b400105df70000e00000ac0000 dm-2 vendor,product
[size=20G][features=1 queue_if_no_path][hwhandler=0][rw]
\_ round-robin 0 [prio=0][active]
 \_ 5:0:1:1 sdc 8:32  [active][undef]
 \_ 6:0:1:1 sdg 8:96  [active][undef]
\_ round-robin 0 [prio=0][enabled]
 \_ 5:0:0:1 sdb 8:16  [active][undef]
 \_ 6:0:0:1 sdf 8:80  [active][undef]</pre></div></div><p>
				DM Multipath automatically maintains the proper mapping of each WWID-based device name to its corresponding <code class="literal">/dev/sd</code> name on the system. These names are persistent across path changes, and they are consistent when accessing the device from different systems.
			</p><p>
				When the <code class="literal option">user_friendly_names</code> feature of DM Multipath is used, the WWID is mapped to a name of the form <code class="literal">/dev/mapper/mpath<span class="emphasis"><em>N</em></span></code>. By default, this mapping is maintained in the file <code class="literal filename">/etc/multipath/bindings</code>. These <code class="literal">mpath<span class="emphasis"><em>N</em></span></code> names are persistent as long as that file is maintained.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					If you use <code class="literal option">user_friendly_names</code>, then additional steps are required to obtain consistent names in a cluster.
				</p></div></div></section><section class="section" id="con_limitations-of-the-udev-device-naming-convention_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h2 class="title">8.5. Limitations of the udev device naming convention</h2></div></div></div><p>
				The following are some limitations of the <code class="literal">udev</code> naming convention:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						It is possible that the device might not be accessible at the time the query is performed because the <code class="literal">udev</code> mechanism might rely on the ability to query the storage device when the <code class="literal">udev</code> rules are processed for a <code class="literal">udev</code> event. This is more likely to occur with Fibre Channel, iSCSI or FCoE storage devices when the device is not located in the server chassis.
					</li><li class="listitem">
						The kernel might send <code class="literal">udev</code> events at any time, causing the rules to be processed and possibly causing the <code class="literal filename">/dev/disk/by-*/</code> links to be removed if the device is not accessible.
					</li><li class="listitem">
						There might be a delay between when the <code class="literal">udev</code> event is generated and when it is processed, such as when a large number of devices are detected and the user-space <code class="literal">udevd</code> service takes some amount of time to process the rules for each one. This might cause a delay between when the kernel detects the device and when the <code class="literal filename">/dev/disk/by-*/</code> names are available.
					</li><li class="listitem">
						External programs such as <code class="literal">blkid</code> invoked by the rules might open the device for a brief period of time, making the device inaccessible for other uses.
					</li></ul></div></section><section class="section" id="proc_listing-persistent-naming-attributes_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h2 class="title">8.6. Listing persistent naming attributes</h2></div></div></div><p>
				This procedure describes how to find out the persistent naming attributes of non-persistent storage devices.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To list the UUID and Label attributes, use the <code class="literal">lsblk</code> utility:
					</p><pre class="screen">$ lsblk --fs <span class="emphasis"><em><span class="replaceable replaceable">storage-device</span></em></span></pre><p class="simpara">
						For example:
					</p><div class="example" id="idm140591301838624"><p class="title"><strong>Example 8.4. Viewing the UUID and Label of a file system</strong></p><div class="example-contents"><pre class="screen">$ lsblk --fs /dev/sda1

NAME FSTYPE <span class="strong strong"><strong>LABEL</strong></span> <span class="strong strong"><strong>UUID</strong></span>                                 MOUNTPOINT
sda1 xfs    <span class="strong strong"><strong>Boot</strong></span>  <span class="strong strong"><strong>afa5d5e3-9050-48c3-acc1-bb30095f3dc4</strong></span> /boot</pre></div></div></li><li class="listitem"><p class="simpara">
						To list the PARTUUID attribute, use the <code class="literal">lsblk</code> utility with the <code class="literal option">--output +PARTUUID</code> option:
					</p><pre class="screen">$ lsblk --output +PARTUUID</pre><p class="simpara">
						For example:
					</p><div class="example" id="idm140591301930688"><p class="title"><strong>Example 8.5. Viewing the PARTUUID attribute of a partition</strong></p><div class="example-contents"><pre class="screen">$ lsblk --output +PARTUUID /dev/sda1

NAME MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT <span class="strong strong"><strong>PARTUUID</strong></span>
sda1   8:1    0  512M  0 part /boot      <span class="strong strong"><strong>4cd1448a-01</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						To list the WWID attribute, examine the targets of symbolic links in the <code class="literal filename">/dev/disk/by-id/</code> directory. For example:
					</p><div class="example" id="idm140591301925936"><p class="title"><strong>Example 8.6. Viewing the WWID of all storage devices on the system</strong></p><div class="example-contents"><pre class="screen">$ file /dev/disk/by-id/*

/dev/disk/by-id/ata-QEMU_HARDDISK_QM00001
symbolic link to ../../sda
/dev/disk/by-id/ata-QEMU_HARDDISK_QM00001-part1
symbolic link to ../../sda1
/dev/disk/by-id/ata-QEMU_HARDDISK_QM00001-part2
symbolic link to ../../sda2
/dev/disk/by-id/dm-name-rhel_rhel8-root
symbolic link to ../../dm-0
/dev/disk/by-id/dm-name-rhel_rhel8-swap
symbolic link to ../../dm-1
/dev/disk/by-id/dm-uuid-LVM-QIWtEHtXGobe5bewlIUDivKOz5ofkgFhP0RMFsNyySVihqEl2cWWbR7MjXJolD6g
symbolic link to ../../dm-1
/dev/disk/by-id/dm-uuid-LVM-QIWtEHtXGobe5bewlIUDivKOz5ofkgFhXqH2M45hD2H9nAf2qfWSrlRLhzfMyOKd
symbolic link to ../../dm-0
/dev/disk/by-id/lvm-pv-uuid-atlr2Y-vuMo-ueoH-CpMG-4JuH-AhEF-wu4QQm
symbolic link to ../../sda2</pre></div></div></li></ul></div></section><section class="section" id="proc_modifying-persistent-naming-attributes_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h2 class="title">8.7. Modifying persistent naming attributes</h2></div></div></div><p>
				This procedure describes how to change the UUID or Label persistent naming attribute of a file system.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Changing <code class="literal">udev</code> attributes happens in the background and might take a long time. The <code class="literal command">udevadm settle</code> command waits until the change is fully registered, which ensures that your next command will be able to utilize the new attribute correctly.
				</p></div></div><p>
				In the following commands:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Replace <span class="emphasis"><em><span class="replaceable replaceable">new-uuid</span></em></span> with the UUID you want to set; for example, <code class="literal">1cdfbc07-1c90-4984-b5ec-f61943f5ea50</code>. You can generate a UUID using the <code class="literal command">uuidgen</code> command.
					</li><li class="listitem">
						Replace <span class="emphasis"><em><span class="replaceable replaceable">new-label</span></em></span> with a label; for example, <code class="literal">backup_data</code>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If you are modifying the attributes of an XFS file system, unmount it first.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To change the UUID or Label attributes of an <span class="strong strong"><strong>XFS</strong></span> file system, use the <code class="literal">xfs_admin</code> utility:
					</p><pre class="screen"># xfs_admin -U <span class="emphasis"><em><span class="replaceable replaceable">new-uuid</span></em></span> -L <span class="emphasis"><em><span class="replaceable replaceable">new-label</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">storage-device</span></em></span>
# udevadm settle</pre></li><li class="listitem"><p class="simpara">
						To change the UUID or Label attributes of an <span class="strong strong"><strong>ext4</strong></span>, <span class="strong strong"><strong>ext3</strong></span>, or <span class="strong strong"><strong>ext2</strong></span> file system, use the <code class="literal">tune2fs</code> utility:
					</p><pre class="screen"># tune2fs -U <span class="emphasis"><em><span class="replaceable replaceable">new-uuid</span></em></span> -L <span class="emphasis"><em><span class="replaceable replaceable">new-label</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">storage-device</span></em></span>
# udevadm settle</pre></li><li class="listitem"><p class="simpara">
						To change the UUID or Label attributes of a swap volume, use the <code class="literal">swaplabel</code> utility:
					</p><pre class="screen"># swaplabel --uuid <span class="emphasis"><em><span class="replaceable replaceable">new-uuid</span></em></span> --label <span class="emphasis"><em><span class="replaceable replaceable">new-label</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">swap-device</span></em></span>
# udevadm settle</pre></li></ul></div></section></section><section class="chapter" id="assembly_getting-started-with-partitions_managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 9. Getting started with partitions</h1></div></div></div><p>
			As a system administrator, you can use the following procedures to create, delete, and modify various types of disk partitions.
		</p><p>
			For an overview of the advantages and disadvantages to using partitions on block devices, see the following KBase article: <a class="link" href="https://access.redhat.com/solutions/163853">https://access.redhat.com/solutions/163853</a>.
		</p><section class="section" id="assembly_viewing-the-partition-table_assembly_getting-started-with-partitions"><div class="titlepage"><div><div><h2 class="title">9.1. Viewing the partition table</h2></div></div></div><p>
				As a system administrator, you can display the partition table of a block device to see the partition layout and details about individual partitions.
			</p><section class="section" id="proc_viewing-the-partition-table-with-parted_assembly_viewing-the-partition-table"><div class="titlepage"><div><div><h3 class="title">9.1.1. Viewing the partition table with parted</h3></div></div></div><p>
					This procedure describes how to view the partition table on a block device using the <code class="literal">parted</code> utility.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start the interactive <code class="literal">parted</code> shell:
						</p><pre class="screen"># parted <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> with the path to the device you want to examine: for example, <code class="literal filename">/dev/sda</code>.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							View the partition table:
						</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">
							Optionally, use the following command to switch to another device you want to examine next:
						</p><pre class="screen">(parted) select <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">parted(8)</code> man page.
						</li></ul></div></section><section class="section" id="ref_example-output-of-parted-print_assembly_viewing-the-partition-table"><div class="titlepage"><div><div><h3 class="title">9.1.2. Example output of <code class="literal">parted print</code></h3></div></div></div><p>
					This section provides an example output of the <code class="literal">print</code> command in the <code class="literal">parted</code> shell and describes fields in the output.
				</p><div class="example" id="idm140591302637280"><p class="title"><strong>Example 9.1. Output of the <code class="literal">print</code> command</strong></p><div class="example-contents"><pre class="screen">Model: ATA SAMSUNG MZNLN256 (scsi)
Disk /dev/sda: 256GB
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags:

Number  Start   End     Size    Type      File system  Flags
 1      1049kB  269MB   268MB   primary   xfs          boot
 2      269MB   34.6GB  34.4GB  primary
 3      34.6GB  45.4GB  10.7GB  primary
 4      45.4GB  256GB   211GB   extended
 5      45.4GB  256GB   211GB   logical</pre><p>
						Following is a description of the fields:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">Model: ATA SAMSUNG MZNLN256 (scsi)</code></span></dt><dd>
									The disk type, manufacturer, model number, and interface.
								</dd><dt><span class="term"><code class="literal">Disk /dev/sda: 256GB</code></span></dt><dd>
									The file path to the block device and the storage capacity.
								</dd><dt><span class="term"><code class="literal">Partition Table: msdos</code></span></dt><dd>
									The disk label type.
								</dd><dt><span class="term"><code class="literal">Number</code></span></dt><dd>
									The partition number. For example, the partition with minor number 1 corresponds to <code class="literal filename">/dev/sda1</code>.
								</dd><dt><span class="term"><code class="literal">Start</code> and <code class="literal">End</code></span></dt><dd>
									The location on the device where the partition starts and ends.
								</dd><dt><span class="term"><code class="literal">Type</code></span></dt><dd>
									Valid types are metadata, free, primary, extended, or logical.
								</dd><dt><span class="term"><code class="literal">File system</code></span></dt><dd>
									The file system type. If the <code class="literal">File system</code> field of a device shows no value, this means that its file system type is unknown. The <code class="literal">parted</code> utility cannot recognize the file system on encrypted devices.
								</dd><dt><span class="term"><code class="literal">Flags</code></span></dt><dd>
									Lists the flags set for the partition. Available flags are <code class="literal">boot</code>, <code class="literal">root</code>, <code class="literal">swap</code>, <code class="literal">hidden</code>, <code class="literal">raid</code>, <code class="literal">lvm</code>, or <code class="literal">lba</code>.
								</dd></dl></div></div></div></section></section><section class="section" id="assembly_creating-a-partition-table-on-a-disk_assembly_getting-started-with-partitions"><div class="titlepage"><div><div><h2 class="title">9.2. Creating a partition table on a disk</h2></div></div></div><p>
				As a system administrator, you can format a block device with different types of partition tables to enable using partitions on the device.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Formatting a block device with a partition table deletes all data stored on the device.
				</p></div></div><section class="section" id="con_considerations-before-modifying-partitions-on-a-disk_assembly_creating-a-partition-table-on-a-disk"><div class="titlepage"><div><div><h3 class="title">9.2.1. Considerations before modifying partitions on a disk</h3></div></div></div><p>
					This section lists key points to consider before creating, removing, or resizing partitions.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This section does not cover the DASD partition table, which is specific to the IBM Z architecture. For information on DASD, see:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/configuring-a-linux-instance-on-ibm-z_installing-rhel">Configuring a Linux instance on IBM Z</a>
							</li><li class="listitem">
								The <a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lgdd/lgdd_c_dasd_know.html">What you should know about DASD</a> article at the IBM Knowledge Center
							</li></ul></div></div></div><h5 id="the_maximum_number_of_partitions">The maximum number of partitions</h5><p>
					The number of partitions on a device is limited by the type of the partition table:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							On a device formatted with the <span class="strong strong"><strong>Master Boot Record (MBR)</strong></span> partition table, you can have either:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Up to four primary partitions, or
								</li><li class="listitem">
									Up to three primary partitions, one extended partition, and multiple logical partitions within the extended.
								</li></ul></div></li><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>GUID Partition Table (GPT)</strong></span>, the maximum number of partitions is 128. While the GPT specification allows for more partitions by growing the area reserved for the partition table, common practice used by the <code class="literal">parted</code> utility is to limit it to enough area for 128 partitions.
						</li></ul></div><h5 id="the_maximum_size_of_a_partition">The maximum size of a partition</h5><p>
					The size of a partition on a device is limited by the type of the partition table:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>Master Boot Record (MBR)</strong></span> partition table, the maximum size is 2TiB.
						</li><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>GUID Partition Table (GPT)</strong></span>, the maximum size is 8ZiB.
						</li></ul></div><p>
					If you want to create a partition larger than 2TiB, the disk must be formatted with GPT.
				</p><h5 id="size_alignment">Size alignment</h5><p>
					The <code class="literal">parted</code> utility enables you to specify partition size using multiple different suffixes:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">MiB, GiB, or TiB</span></dt><dd><p class="simpara">
								Size expressed in powers of 2.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The starting point of the partition is aligned to the exact sector specified by size.
									</li><li class="listitem">
										The ending point is aligned to the specified size minus 1 sector.
									</li></ul></div></dd><dt><span class="term">MB, GB, or TB</span></dt><dd><p class="simpara">
								Size expressed in powers of 10.
							</p><p class="simpara">
								The starting and ending point is aligned within one half of the specified unit: for example, ±500KB when using the MB suffix.
							</p></dd></dl></div></section><section class="section" id="ref_comparison-of-partition-table-types_assembly_creating-a-partition-table-on-a-disk"><div class="titlepage"><div><div><h3 class="title">9.2.2. Comparison of partition table types</h3></div></div></div><p>
					This section compares the properties of different types of partition tables that you can create on a block device.
				</p><div class="table" id="idm140591303343664"><p class="title"><strong>Table 9.1. Partition table types</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140591333892880" scope="col">Partition table</th><th align="left" valign="top" id="idm140591333891792" scope="col">Maximum number of partitions</th><th align="left" valign="top" id="idm140591333890736" scope="col">Maximum partition size</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140591333892880"> <p>
									Master Boot Record (MBR)
								</p>
								 </td><td align="left" valign="top" headers="idm140591333891792"> <p>
									4 primary, or 3 primary and 12 logical inside an extended partition
								</p>
								 </td><td align="left" valign="top" headers="idm140591333890736"> <p>
									2TiB
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140591333892880"> <p>
									GUID Partition Table (GPT)
								</p>
								 </td><td align="left" valign="top" headers="idm140591333891792"> <p>
									128
								</p>
								 </td><td align="left" valign="top" headers="idm140591333890736"> <p>
									8ZiB
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="proc_creating-a-partition-table-on-a-disk-with-parted_assembly_creating-a-partition-table-on-a-disk"><div class="titlepage"><div><div><h3 class="title">9.2.3. Creating a partition table on a disk with parted</h3></div></div></div><p>
					This procedure describes how to format a block device with a partition table using the <code class="literal">parted</code> utility.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start the interactive <code class="literal">parted</code> shell:
						</p><pre class="screen"># parted <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> with the path to the device where you want to create a partition table: for example, <code class="literal filename">/dev/sda</code>.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Determine if there already is a partition table on the device:
						</p><pre class="screen">(parted) print</pre><p class="simpara">
							If the device already contains partitions, they will be deleted in the next steps.
						</p></li><li class="listitem"><p class="simpara">
							Create the new partition table:
						</p><pre class="screen">(parted) mklabel <span class="emphasis"><em><span class="replaceable replaceable">table-type</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">table-type</span></em></span> with with the intended partition table type:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											<code class="literal">msdos</code> for MBR
										</li><li class="listitem">
											<code class="literal">gpt</code> for GPT
										</li></ul></div></li></ul></div><div class="example" id="idm140591305926544"><p class="title"><strong>Example 9.2. Creating a GPT table</strong></p><div class="example-contents"><p>
								For example, to create a GPT table on the disk, use:
							</p><pre class="screen">(parted) mklabel gpt</pre></div></div><p class="simpara">
							The changes start taking place as soon as you enter this command, so review it before executing it.
						</p></li><li class="listitem"><p class="simpara">
							View the partition table to confirm that the partition table exists:
						</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">
							Exit the <code class="literal">parted</code> shell:
						</p><pre class="screen">(parted) quit</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">parted(8)</code> man page.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create partitions on the device. See <a class="xref" href="index.html#assembly_creating-a-partition_assembly_getting-started-with-partitions" title="9.3. Creating a partition">Section 9.3, “Creating a partition”</a> for details.
						</li></ul></div></section></section><section class="section" id="assembly_creating-a-partition_assembly_getting-started-with-partitions"><div class="titlepage"><div><div><h2 class="title">9.3. Creating a partition</h2></div></div></div><p>
				As a system administrator, you can create new partitions on a disk.
			</p><section class="section" id="con_considerations-before-modifying-partitions-on-a-disk_assembly_creating-a-partition"><div class="titlepage"><div><div><h3 class="title">9.3.1. Considerations before modifying partitions on a disk</h3></div></div></div><p>
					This section lists key points to consider before creating, removing, or resizing partitions.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This section does not cover the DASD partition table, which is specific to the IBM Z architecture. For information on DASD, see:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/configuring-a-linux-instance-on-ibm-z_installing-rhel">Configuring a Linux instance on IBM Z</a>
							</li><li class="listitem">
								The <a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lgdd/lgdd_c_dasd_know.html">What you should know about DASD</a> article at the IBM Knowledge Center
							</li></ul></div></div></div><h5 id="the_maximum_number_of_partitions_2">The maximum number of partitions</h5><p>
					The number of partitions on a device is limited by the type of the partition table:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							On a device formatted with the <span class="strong strong"><strong>Master Boot Record (MBR)</strong></span> partition table, you can have either:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Up to four primary partitions, or
								</li><li class="listitem">
									Up to three primary partitions, one extended partition, and multiple logical partitions within the extended.
								</li></ul></div></li><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>GUID Partition Table (GPT)</strong></span>, the maximum number of partitions is 128. While the GPT specification allows for more partitions by growing the area reserved for the partition table, common practice used by the <code class="literal">parted</code> utility is to limit it to enough area for 128 partitions.
						</li></ul></div><h5 id="the_maximum_size_of_a_partition_2">The maximum size of a partition</h5><p>
					The size of a partition on a device is limited by the type of the partition table:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>Master Boot Record (MBR)</strong></span> partition table, the maximum size is 2TiB.
						</li><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>GUID Partition Table (GPT)</strong></span>, the maximum size is 8ZiB.
						</li></ul></div><p>
					If you want to create a partition larger than 2TiB, the disk must be formatted with GPT.
				</p><h5 id="size_alignment_2">Size alignment</h5><p>
					The <code class="literal">parted</code> utility enables you to specify partition size using multiple different suffixes:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">MiB, GiB, or TiB</span></dt><dd><p class="simpara">
								Size expressed in powers of 2.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The starting point of the partition is aligned to the exact sector specified by size.
									</li><li class="listitem">
										The ending point is aligned to the specified size minus 1 sector.
									</li></ul></div></dd><dt><span class="term">MB, GB, or TB</span></dt><dd><p class="simpara">
								Size expressed in powers of 10.
							</p><p class="simpara">
								The starting and ending point is aligned within one half of the specified unit: for example, ±500KB when using the MB suffix.
							</p></dd></dl></div></section><section class="section" id="con_partition-types_assembly_creating-a-partition"><div class="titlepage"><div><div><h3 class="title">9.3.2. Partition types</h3></div></div></div><p>
					This section describes different attributes that specify the type of a partition.
				</p><h5 id="partition_types_or_flags">Partition types or flags</h5><p>
					The partition type, or flag, is used by a running system only rarely. However, the partition type matters to on-the-fly generators, such as <code class="literal">systemd-gpt-auto-generator</code>, which use the partition type to, for example, automatically identify and mount devices.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">parted</code> utility provides some control of partition types by mapping the partition type to <span class="emphasis"><em>flags</em></span>. The parted utility can handle only certain partition types: for example LVM, swap, or RAID.
						</li><li class="listitem">
							The <code class="literal">fdisk</code> utility supports the full range of partition types by specifying hexadecimal codes.
						</li></ul></div><h5 id="partition_file_system_type">Partition file system type</h5><p>
					The <code class="literal">parted</code> utility optionally accepts a file system type argument when creating a partition. The value is used to:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Set the partition flags on MBR, or
						</li><li class="listitem">
							Set the partition UUID type on GPT. For example, the <code class="literal">swap</code>, <code class="literal">fat</code>, or <code class="literal">hfs</code> file system types set different GUIDs. The default value is the Linux Data GUID.
						</li></ul></div><p>
					The argument does not modify the file system on the partition in any way. It only differentiates between the supported flags or GUIDs.
				</p><p>
					The following file system types are supported:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">xfs</code>
						</li><li class="listitem">
							<code class="literal">ext2</code>
						</li><li class="listitem">
							<code class="literal">ext3</code>
						</li><li class="listitem">
							<code class="literal">ext4</code>
						</li><li class="listitem">
							<code class="literal">fat16</code>
						</li><li class="listitem">
							<code class="literal">fat32</code>
						</li><li class="listitem">
							<code class="literal">hfs</code>
						</li><li class="listitem">
							<code class="literal">hfs+</code>
						</li><li class="listitem">
							<code class="literal">linux-swap</code>
						</li><li class="listitem">
							<code class="literal">ntfs</code>
						</li><li class="listitem">
							<code class="literal">reiserfs</code>
						</li></ul></div></section><section class="section" id="proc_creating-a-partition-with-parted_assembly_creating-a-partition"><div class="titlepage"><div><div><h3 class="title">9.3.3. Creating a partition with parted</h3></div></div></div><p>
					This procedure describes how to create a new partition on a block device using the <code class="literal">parted</code> utility.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							There is a partition table on the disk. For details on how to format the disk, see <a class="xref" href="index.html#assembly_creating-a-partition-table-on-a-disk_assembly_getting-started-with-partitions" title="9.2. Creating a partition table on a disk">Section 9.2, “Creating a partition table on a disk”</a>.
						</li><li class="listitem">
							If the partition you want to create is larger than 2TiB, the disk must be formatted with the GUID Partition Table (GPT).
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start the interactive <code class="literal">parted</code> shell:
						</p><pre class="screen"># parted <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> with the path to the device where you want to create a partition: for example, <code class="literal filename">/dev/sda</code>.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							View the current partition table to determine if there is enough free space:
						</p><pre class="screen">(parted) print</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									If there is not enough free space, you can resize an existing partition. For more information, see <a class="xref" href="index.html#assembly_resizing-a-partition_assembly_getting-started-with-partitions" title="9.5. Resizing a partition">Section 9.5, “Resizing a partition”</a>.
								</li><li class="listitem"><p class="simpara">
									From the partition table, determine:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											The start and end points of the new partition
										</li><li class="listitem">
											On MBR, what partition type it should be.
										</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
							Create the new partition:
						</p><pre class="screen">(parted) mkpart <span class="emphasis"><em><span class="replaceable replaceable">part-type</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">name</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">fs-type</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">start</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">end</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">part-type</span></em></span> with with <code class="literal">primary</code>, <code class="literal">logical</code>, or <code class="literal">extended</code> based on what you decided from the partition table. This applies only to the MBR partition table.
								</li><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">name</span></em></span> with an arbitrary partition name. This is required for GPT partition tables.
								</li><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">fs-type</span></em></span> with any one of <code class="literal">xfs</code>, <code class="literal">ext2</code>, <code class="literal">ext3</code>, <code class="literal">ext4</code>, <code class="literal">fat16</code>, <code class="literal">fat32</code>, <code class="literal">hfs</code>, <code class="literal">hfs+</code>, <code class="literal">linux-swap</code>, <code class="literal">ntfs</code>, or <code class="literal">reiserfs</code>. The <span class="emphasis"><em><span class="replaceable replaceable">fs-type</span></em></span> parameter is optional. Note that <code class="literal">parted</code> does not create the file system on the partition.
								</li><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">start</span></em></span> and <span class="emphasis"><em><span class="replaceable replaceable">end</span></em></span> with the sizes that determine the starting and ending points of the partition, counting from the beginning of the disk. You can use size suffixes, such as <code class="literal">512MiB</code>, <code class="literal">20GiB</code>, or <code class="literal">1.5TiB</code>. The default size megabytes.
								</li></ul></div><div class="example" id="idm140591304690640"><p class="title"><strong>Example 9.3. Creating a small primary partition</strong></p><div class="example-contents"><p>
								For example, to create a primary partition from 1024MiB until 2048MiB on an MBR table, use:
							</p><pre class="screen">(parted) mkpart primary 1024MiB 2048MiB</pre></div></div><p class="simpara">
							The changes start taking place as soon as you enter this command, so review it before executing it.
						</p></li><li class="listitem"><p class="simpara">
							View the partition table to confirm that the created partition is in the partition table with the correct partition type, file system type, and size:
						</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">
							Exit the <code class="literal">parted</code> shell:
						</p><pre class="screen">(parted) quit</pre></li><li class="listitem"><p class="simpara">
							Use the following command to wait for the system to register the new device node:
						</p><pre class="screen"># udevadm settle</pre></li><li class="listitem"><p class="simpara">
							Verify that the kernel recognizes the new partition:
						</p><pre class="screen"># cat /proc/partitions</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">parted(8)</code> man page.
						</li></ul></div></section><section class="section" id="proc_setting-a-partition-type-with-fdisk_assembly_creating-a-partition"><div class="titlepage"><div><div><h3 class="title">9.3.4. Setting a partition type with fdisk</h3></div></div></div><p>
					This procedure describes how to set a partition type, or flag, using the <code class="literal">fdisk</code> utility.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							There is a partition on the disk.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start the interactive <code class="literal">fdisk</code> shell:
						</p><pre class="screen"># fdisk <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> with the path to the device where you want to set a partition type: for example, <code class="literal filename">/dev/sda</code>.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							View the current partition table to determine the minor partition number:
						</p><pre class="screen">Command (m for help): <span class="strong strong"><strong><span class="command command">print</span></strong></span></pre><p class="simpara">
							You can see the current partition type in the <code class="literal">Type</code> column and its corresponding type ID in the <code class="literal">Id</code> column.
						</p></li><li class="listitem"><p class="simpara">
							Enter the partition type command and select a partition using its minor number:
						</p><pre class="screen">Command (m for help): <span class="strong strong"><strong><span class="command command">type</span></strong></span>
Partition number (<span class="emphasis"><em><span class="replaceable replaceable">1,2,3</span></em></span> default <span class="emphasis"><em><span class="replaceable replaceable">3</span></em></span>): <span class="emphasis"><em><span class="replaceable replaceable"><span class="strong strong"><strong>2</strong></span></span></em></span></pre></li><li class="listitem"><p class="simpara">
							Optionally, list the available hexadecimal codes:
						</p><pre class="screen">Hex code (type L to list all codes): <span class="strong strong"><strong><span class="command command">L</span></strong></span></pre></li><li class="listitem"><p class="simpara">
							Set the partition type:
						</p><pre class="screen">Hex code (type L to list all codes): <span class="emphasis"><em><span class="replaceable replaceable"><span class="strong strong"><strong>8e</strong></span></span></em></span></pre></li><li class="listitem"><p class="simpara">
							Write your changes and exit the <code class="literal">fdisk</code> shell:
						</p><pre class="screen">Command (m for help): <span class="strong strong"><strong><span class="command command">write</span></strong></span>
The partition table has been altered.
Syncing disks.</pre></li><li class="listitem"><p class="simpara">
							Verify your changes:
						</p><pre class="screen"># fdisk --list <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre></li></ol></div></section></section><section class="section" id="assembly_removing-a-partition_assembly_getting-started-with-partitions"><div class="titlepage"><div><div><h2 class="title">9.4. Removing a partition</h2></div></div></div><p>
				As a system administrator, you can remove a disk partition that is no longer used to free up disk space.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Removing a partition deletes all data stored on the partition.
				</p></div></div><section class="section" id="con_considerations-before-modifying-partitions-on-a-disk_assembly_removing-a-partition"><div class="titlepage"><div><div><h3 class="title">9.4.1. Considerations before modifying partitions on a disk</h3></div></div></div><p>
					This section lists key points to consider before creating, removing, or resizing partitions.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This section does not cover the DASD partition table, which is specific to the IBM Z architecture. For information on DASD, see:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/configuring-a-linux-instance-on-ibm-z_installing-rhel">Configuring a Linux instance on IBM Z</a>
							</li><li class="listitem">
								The <a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lgdd/lgdd_c_dasd_know.html">What you should know about DASD</a> article at the IBM Knowledge Center
							</li></ul></div></div></div><h5 id="the_maximum_number_of_partitions_3">The maximum number of partitions</h5><p>
					The number of partitions on a device is limited by the type of the partition table:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							On a device formatted with the <span class="strong strong"><strong>Master Boot Record (MBR)</strong></span> partition table, you can have either:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Up to four primary partitions, or
								</li><li class="listitem">
									Up to three primary partitions, one extended partition, and multiple logical partitions within the extended.
								</li></ul></div></li><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>GUID Partition Table (GPT)</strong></span>, the maximum number of partitions is 128. While the GPT specification allows for more partitions by growing the area reserved for the partition table, common practice used by the <code class="literal">parted</code> utility is to limit it to enough area for 128 partitions.
						</li></ul></div><h5 id="the_maximum_size_of_a_partition_3">The maximum size of a partition</h5><p>
					The size of a partition on a device is limited by the type of the partition table:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>Master Boot Record (MBR)</strong></span> partition table, the maximum size is 2TiB.
						</li><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>GUID Partition Table (GPT)</strong></span>, the maximum size is 8ZiB.
						</li></ul></div><p>
					If you want to create a partition larger than 2TiB, the disk must be formatted with GPT.
				</p><h5 id="size_alignment_3">Size alignment</h5><p>
					The <code class="literal">parted</code> utility enables you to specify partition size using multiple different suffixes:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">MiB, GiB, or TiB</span></dt><dd><p class="simpara">
								Size expressed in powers of 2.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The starting point of the partition is aligned to the exact sector specified by size.
									</li><li class="listitem">
										The ending point is aligned to the specified size minus 1 sector.
									</li></ul></div></dd><dt><span class="term">MB, GB, or TB</span></dt><dd><p class="simpara">
								Size expressed in powers of 10.
							</p><p class="simpara">
								The starting and ending point is aligned within one half of the specified unit: for example, ±500KB when using the MB suffix.
							</p></dd></dl></div></section><section class="section" id="proc_removing-a-partition-with-parted_assembly_removing-a-partition"><div class="titlepage"><div><div><h3 class="title">9.4.2. Removing a partition with parted</h3></div></div></div><p>
					This procedure describes how to remove a disk partition using the <code class="literal">parted</code> utility.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start the interactive <code class="literal">parted</code> shell:
						</p><pre class="screen"># parted <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> with the path to the device where you want to remove a partition: for example, <code class="literal filename">/dev/sda</code>.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							View the current partition table to determine the minor number of the partition to remove:
						</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">
							Remove the partition:
						</p><pre class="screen">(parted) rm <span class="emphasis"><em><span class="replaceable replaceable">minor-number</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">minor-number</span></em></span> with the minor number of the partition you want to remove: for example, <code class="literal">3</code>.
								</li></ul></div><p class="simpara">
							The changes start taking place as soon as you enter this command, so review it before executing it.
						</p></li><li class="listitem"><p class="simpara">
							Confirm that the partition is removed from the partition table:
						</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">
							Exit the <code class="literal">parted</code> shell:
						</p><pre class="screen">(parted) quit</pre></li><li class="listitem"><p class="simpara">
							Verify that the kernel knows the partition is removed:
						</p><pre class="screen"># cat /proc/partitions</pre></li><li class="listitem">
							Remove the partition from the <code class="literal filename">/etc/fstab</code> file if it is present. Find the line that declares the removed partition, and remove it from the file.
						</li><li class="listitem"><p class="simpara">
							Regenerate mount units so that your system registers the new <code class="literal filename">/etc/fstab</code> configuration:
						</p><pre class="screen"># systemctl daemon-reload</pre></li><li class="listitem"><p class="simpara">
							If you have deleted a swap partition or removed pieces of LVM, remove all references to the partition from the kernel command line in the <code class="literal filename">/etc/default/grub</code> file and regenerate GRUB configuration:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									On a BIOS-based system:
								</p><pre class="screen"># grub2-mkconfig --output=/etc/grub2.cfg</pre></li><li class="listitem"><p class="simpara">
									On a UEFI-based system:
								</p><pre class="screen"># grub2-mkconfig --output=/etc/grub2-efi.cfg</pre></li></ul></div></li><li class="listitem"><p class="simpara">
							To register the changes in the early boot system, rebuild the <code class="literal">initramfs</code> file system:
						</p><pre class="screen"># dracut --force --verbose</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">parted(8)</code> man page
						</li></ul></div></section></section><section class="section" id="assembly_resizing-a-partition_assembly_getting-started-with-partitions"><div class="titlepage"><div><div><h2 class="title">9.5. Resizing a partition</h2></div></div></div><p>
				As a system administrator, you can extend a partition to utilize unused disk space, or shrink a partition to use its capacity for different purposes.
			</p><section class="section" id="con_considerations-before-modifying-partitions-on-a-disk_assembly_resizing-a-partition"><div class="titlepage"><div><div><h3 class="title">9.5.1. Considerations before modifying partitions on a disk</h3></div></div></div><p>
					This section lists key points to consider before creating, removing, or resizing partitions.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This section does not cover the DASD partition table, which is specific to the IBM Z architecture. For information on DASD, see:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/configuring-a-linux-instance-on-ibm-z_installing-rhel">Configuring a Linux instance on IBM Z</a>
							</li><li class="listitem">
								The <a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lgdd/lgdd_c_dasd_know.html">What you should know about DASD</a> article at the IBM Knowledge Center
							</li></ul></div></div></div><h5 id="the_maximum_number_of_partitions_4">The maximum number of partitions</h5><p>
					The number of partitions on a device is limited by the type of the partition table:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							On a device formatted with the <span class="strong strong"><strong>Master Boot Record (MBR)</strong></span> partition table, you can have either:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Up to four primary partitions, or
								</li><li class="listitem">
									Up to three primary partitions, one extended partition, and multiple logical partitions within the extended.
								</li></ul></div></li><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>GUID Partition Table (GPT)</strong></span>, the maximum number of partitions is 128. While the GPT specification allows for more partitions by growing the area reserved for the partition table, common practice used by the <code class="literal">parted</code> utility is to limit it to enough area for 128 partitions.
						</li></ul></div><h5 id="the_maximum_size_of_a_partition_4">The maximum size of a partition</h5><p>
					The size of a partition on a device is limited by the type of the partition table:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>Master Boot Record (MBR)</strong></span> partition table, the maximum size is 2TiB.
						</li><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>GUID Partition Table (GPT)</strong></span>, the maximum size is 8ZiB.
						</li></ul></div><p>
					If you want to create a partition larger than 2TiB, the disk must be formatted with GPT.
				</p><h5 id="size_alignment_4">Size alignment</h5><p>
					The <code class="literal">parted</code> utility enables you to specify partition size using multiple different suffixes:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">MiB, GiB, or TiB</span></dt><dd><p class="simpara">
								Size expressed in powers of 2.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The starting point of the partition is aligned to the exact sector specified by size.
									</li><li class="listitem">
										The ending point is aligned to the specified size minus 1 sector.
									</li></ul></div></dd><dt><span class="term">MB, GB, or TB</span></dt><dd><p class="simpara">
								Size expressed in powers of 10.
							</p><p class="simpara">
								The starting and ending point is aligned within one half of the specified unit: for example, ±500KB when using the MB suffix.
							</p></dd></dl></div></section><section class="section" id="proc_resizing-a-partition-with-parted_assembly_resizing-a-partition"><div class="titlepage"><div><div><h3 class="title">9.5.2. Resizing a partition with parted</h3></div></div></div><p>
					This procedure resizes a disk partition using the <code class="literal">parted</code> utility.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If you want to shrink a partition, back up the data that are stored on it.
						</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								Shrinking a partition might result in data loss on the partition.
							</p></div></div></li><li class="listitem">
							If you want to resize a partition to be larger than 2TiB, the disk must be formatted with the GUID Partition Table (GPT). For details on how to format the disk, see <a class="xref" href="index.html#assembly_creating-a-partition-table-on-a-disk_assembly_getting-started-with-partitions" title="9.2. Creating a partition table on a disk">Section 9.2, “Creating a partition table on a disk”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							If you want to shrink the partition, shrink the file system on it first so that it is not larger than the resized partition. Note that XFS does not support shrinking.
						</li><li class="listitem"><p class="simpara">
							Start the interactive <code class="literal">parted</code> shell:
						</p><pre class="screen"># parted <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> with the path to the device where you want to resize a partition: for example, <code class="literal filename">/dev/sda</code>.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							View the current partition table:
						</p><pre class="screen">(parted) print</pre><p class="simpara">
							From the partition table, determine:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The minor number of the partition
								</li><li class="listitem">
									The location of the existing partition and its new ending point after resizing
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Resize the partition:
						</p><pre class="screen">(parted) resizepart <span class="emphasis"><em><span class="replaceable replaceable">minor-number</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">new-end</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">minor-number</span></em></span> with the minor number of the partition that you are resizing: for example, <code class="literal">3</code>.
								</li><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">new-end</span></em></span> with the size that determines the new ending point of the resized partition, counting from the beginning of the disk. You can use size suffixes, such as <code class="literal">512MiB</code>, <code class="literal">20GiB</code>, or <code class="literal">1.5TiB</code>. The default size megabytes.
								</li></ul></div><div class="example" id="idm140591303886032"><p class="title"><strong>Example 9.4. Extending a partition</strong></p><div class="example-contents"><p>
								For example, to extend a partition located at the beginning of the disk to be 2GiB in size, use:
							</p><pre class="screen">(parted) resizepart 1 2GiB</pre></div></div><p class="simpara">
							The changes start taking place as soon as you enter this command, so review it before executing it.
						</p></li><li class="listitem"><p class="simpara">
							View the partition table to confirm that the resized partition is in the partition table with the correct size:
						</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">
							Exit the <code class="literal">parted</code> shell:
						</p><pre class="screen">(parted) quit</pre></li><li class="listitem"><p class="simpara">
							Verify that the kernel recognizes the new partition:
						</p><pre class="screen"># cat /proc/partitions</pre></li><li class="listitem">
							If you extended the partition, extend the file system on it as well. See (reference) for details.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">parted(8)</code> man page.
						</li></ul></div></section></section></section><section class="chapter" id="assembly_getting-started-with-xfs-managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 10. Getting started with XFS</h1></div></div></div><p>
			This is an overview of how to create and maintain XFS file systems.
		</p><section class="section" id="the-xfs-file-system_getting-started-with-xfs"><div class="titlepage"><div><div><h2 class="title">10.1. The XFS file system</h2></div></div></div><p>
				XFS is a highly scalable, high-performance, robust, and mature 64-bit journaling file system that supports very large files and file systems on a single host. It is the default file system in Red Hat Enterprise Linux 8. XFS was originally developed in the early 1990s by SGI and has a long history of running on extremely large servers and storage arrays.
			</p><p>
				The features of XFS include:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Reliability</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Metadata journaling, which ensures file system integrity after a system crash by keeping a record of file system operations that can be replayed when the system is restarted and the file system remounted
								</li><li class="listitem">
									Extensive run-time metadata consistency checking
								</li><li class="listitem">
									Scalable and fast repair utilities
								</li><li class="listitem">
									Quota journaling. This avoids the need for lengthy quota consistency checks after a crash.
								</li></ul></div></dd><dt><span class="term">Scalability and performance</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Supported file system size up to 1024 TiB
								</li><li class="listitem">
									Ability to support a large number of concurrent operations
								</li><li class="listitem">
									B-tree indexing for scalability of free space management
								</li><li class="listitem">
									Sophisticated metadata read-ahead algorithms
								</li><li class="listitem">
									Optimizations for streaming video workloads
								</li></ul></div></dd><dt><span class="term">Allocation schemes</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Extent-based allocation
								</li><li class="listitem">
									Stripe-aware allocation policies
								</li><li class="listitem">
									Delayed allocation
								</li><li class="listitem">
									Space pre-allocation
								</li><li class="listitem">
									Dynamically allocated inodes
								</li></ul></div></dd><dt><span class="term">Other features</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Reflink-based file copies (new in Red Hat Enterprise Linux 8)
								</li><li class="listitem">
									Tightly integrated backup and restore utilities
								</li><li class="listitem">
									Online defragmentation
								</li><li class="listitem">
									Online file system growing
								</li><li class="listitem">
									Comprehensive diagnostics capabilities
								</li><li class="listitem">
									Extended attributes (<code class="literal">xattr</code>). This allows the system to associate several additional name/value pairs per file.
								</li><li class="listitem">
									Project or directory quotas. This allows quota restrictions over a directory tree.
								</li><li class="listitem">
									Subsecond timestamps
								</li></ul></div></dd></dl></div><h4 id="performance_characteristics_3">Performance characteristics</h4><p>
				XFS has a high performance on large systems with enterprise workloads. A large system is one with a relatively high number of CPUs, multiple HBAs, and connections to external disk arrays. XFS also performs well on smaller systems that have a multi-threaded, parallel I/O workload.
			</p><p>
				XFS has a relatively low performance for single threaded, metadata-intensive workloads: for example, a workload that creates or deletes large numbers of small files in a single thread.
			</p></section><section class="section" id="assembly_creating-an-xfs-file-system-getting-started-with-xfs"><div class="titlepage"><div><div><h2 class="title">10.2. Creating an XFS file system</h2></div></div></div><p>
				As a system administrator, you can create an XFS file system on a block device to enable it to store files and directories.
			</p><section class="section" id="proc_creating-an-xfs-file-system-with-mkfs-xfs-creating-an-xfs-file-system"><div class="titlepage"><div><div><h3 class="title">10.2.1. Creating an XFS file system with mkfs.xfs</h3></div></div></div><p>
					This procedure describes how to create an XFS file system on a block device.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To create the file system:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									If the device is a regular partition, an LVM volume, an MD volume, a disk, or a similar device, use the following command:
								</p><pre class="screen"># mkfs.xfs <span class="emphasis"><em>block-device</em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											Replace <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> with the path to the block device. For example, <code class="literal filename">/dev/sdb1</code>, <code class="literal filename">/dev/disk/by-uuid/05e99ec8-def1-4a5e-8a9d-5945339ceb2a</code>, or <code class="literal filename">/dev/my-volgroup/my-lv</code>.
										</li><li class="listitem">
											In general, the default options are optimal for common use.
										</li><li class="listitem">
											When using <code class="literal">mkfs.xfs</code> on a block device containing an existing file system, add the <code class="literal option">-f</code> option to overwrite that file system.
										</li></ul></div></li><li class="listitem"><p class="simpara">
									To create the file system on a hardware RAID device, check if the system correctly detects the stripe geometry of the device:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
											If the stripe geometry information is correct, no additional options are needed. Create the file system:
										</p><pre class="screen"># mkfs.xfs <span class="emphasis"><em>block-device</em></span></pre></li><li class="listitem"><p class="simpara">
											If the information is incorrect, specify stripe geometry manually with the <code class="literal option">su</code> and <code class="literal option">sw</code> parameters of the <code class="literal option">-d</code> option. The <code class="literal option">su</code> parameter specifies the RAID chunk size, and the <code class="literal option">sw</code> parameter specifies the number of data disks in the RAID device.
										</p><p class="simpara">
											For example:
										</p><pre class="screen"># mkfs.xfs -d su=<span class="emphasis"><em>64k</em></span>,sw=<span class="emphasis"><em>4</em></span> <span class="emphasis"><em>/dev/sda3</em></span></pre></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
							Use the following command to wait for the system to register the new device node:
						</p><pre class="screen"># udevadm settle</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">mkfs.xfs(8)</code> man page.
						</li></ul></div></section><section class="section" id="creating-an-xfs-file-system-using-rhel-system-roles_creating-an-xfs-file-system"><div class="titlepage"><div><div><h3 class="title">10.2.2. Creating an XFS file system on a block device using RHEL System Roles</h3></div></div></div><p>
					This section describes how to create an XFS file system on a block device on multiple target machines using the <code class="literal">storage</code> role.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							An Ansible playbook that uses the <code class="literal">storage</code> role exists.
						</p><p class="simpara">
							For information on how to apply such a playbook, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/getting-started-with-system-administration_configuring-basic-system-settings#applying-a-role_what-rhel-system-roles-are">Applying a role</a>.
						</p></li></ul></div><section class="section" id="an-example-ansible-playbook-to-create-an-xfs-file-system_creating-an-xfs-file-system-using-rhel-system-roles"><div class="titlepage"><div><div><h4 class="title">10.2.2.1. Example Ansible playbook to create an XFS file system on a block device</h4></div></div></div><p>
						This section provides an example Ansible playbook. This playbook applies the <code class="literal">storage</code> role to create an XFS file system on a block device (<code class="literal">/dev/sdb</code>) using the default parameters.
					</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							The <code class="literal">storage</code> role can create file systems only on whole disks. Partitions are not supported.
						</p></div></div><pre class="literallayout">---
- hosts: all
  vars:
    storage_volumes:
      - name: barefs
        type: disk
        disks:
          - sdb
        fs_type: xfs
  roles:
    - rhel-system-roles.storage</pre><p>
						The volume name (<code class="literal">barefs</code> in the example) is currently arbitrary. The volume is identified by the disk device listed under the <code class="literal">disks:</code> attribute.
					</p><p>
						XFS is the default file system type in RHEL 8, so <code class="literal">fs_type: xfs</code> can be omitted.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							To create a file system on a logical volume, do not provide the path to the LV device under the <code class="literal">disks:</code> attribute. Instead, provide the LVM setup including the enclosing volume group as described in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_and_managing_logical_volumes#an-example-playbook-to-manage-logical-volumes_managing-lvm-logical-volumes-using-rhel-system-roles">Configuring and managing logical volumes</a>.
						</p></div></div></section><section class="section" id="additional_resources"><div class="titlepage"><div><div><h4 class="title">10.2.2.2. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								For more information about the <code class="literal">storage</code> role, see <a class="xref" href="index.html#storage-role-intro_managing-local-storage-using-rhel-system-roles" title="2.1. Introduction to the storage role">Section 2.1, “Introduction to the storage role”</a>.
							</li></ul></div></section></section></section><section class="section" id="assembly_backing-up-an-xfs-file-system-getting-started-with-xfs"><div class="titlepage"><div><div><h2 class="title">10.3. Backing up an XFS file system</h2></div></div></div><p>
				As a system administrator, you can use the <code class="literal">xfsdump</code> to back up an XFS file system into a file or on a tape. This provides a simple backup mechanism.
			</p><section class="section" id="con_features-of-xfs-backup-backing-up-an-xfs-file-system"><div class="titlepage"><div><div><h3 class="title">10.3.1. Features of XFS backup</h3></div></div></div><p>
					This section describes key concepts and features of backing up an XFS file system with the <code class="literal">xfsdump</code> utility.
				</p><p>
					You can use the <code class="literal">xfsdump</code> utility to:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Perform backups to regular file images.
						</p><p class="simpara">
							Only one backup can be written to a regular file.
						</p></li><li class="listitem"><p class="simpara">
							Perform backups to tape drives.
						</p><p class="simpara">
							The <code class="literal">xfsdump</code> utility also enables you to write multiple backups to the same tape. A backup can span multiple tapes.
						</p><p class="simpara">
							To back up multiple file systems to a single tape device, simply write the backup to a tape that already contains an XFS backup. This appends the new backup to the previous one. By default, <code class="literal">xfsdump</code> never overwrites existing backups.
						</p></li><li class="listitem"><p class="simpara">
							Create incremental backups.
						</p><p class="simpara">
							The <code class="literal">xfsdump</code> utility uses dump levels to determine a base backup to which other backups are relative. Numbers from 0 to 9 refer to increasing dump levels. An incremental backup only backs up files that have changed since the last dump of a lower level:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									To perform a full backup, perform a level 0 dump on the file system.
								</li><li class="listitem">
									A level 1 dump is the first incremental backup after a full backup. The next incremental backup would be level 2, which only backs up files that have changed since the last level 1 dump; and so on, to a maximum of level 9.
								</li></ul></div></li><li class="listitem">
							Exclude files from a backup using size, subtree, or inode flags to filter them.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">xfsdump(8)</code> man page.
						</li></ul></div></section><section class="section" id="proc_backing-up-an-xfs-file-system-with-xfsdump-backing-up-an-xfs-file-system"><div class="titlepage"><div><div><h3 class="title">10.3.2. Backing up an XFS file system with xfsdump</h3></div></div></div><p>
					This procedure describes how to back up the content of an XFS file system into a file or a tape.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							An XFS file system that you can back up.
						</li><li class="listitem">
							Another file system or a tape drive where you can store the backup.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the following command to back up an XFS file system:
						</p><pre class="screen"># xfsdump -l <span class="emphasis"><em>level</em></span> [-L <span class="emphasis"><em>label</em></span>] \
          -f <span class="emphasis"><em>backup-destination</em></span> <span class="emphasis"><em>path-to-xfs-filesystem</em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Replace <span class="emphasis"><em>level</em></span> with the dump level of your backup. Use <code class="literal">0</code> to perform a full backup or <code class="literal">1</code> to <code class="literal">9</code> to perform consequent incremental backups.
								</li><li class="listitem">
									Replace <span class="emphasis"><em>backup-destination</em></span> with the path where you want to store your backup. The destination can be a regular file, a tape drive, or a remote tape device. For example, <code class="literal filename">/backup-files/Data.xfsdump</code> for a file or <code class="literal filename">/dev/st0</code> for a tape drive.
								</li><li class="listitem">
									Replace <span class="emphasis"><em>path-to-xfs-filesystem</em></span> with the mount point of the XFS file system you want to back up. For example, <code class="literal filename">/mnt/data/</code>. The file system must be mounted.
								</li><li class="listitem">
									When backing up multiple file systems and saving them on a single tape device, add a session label to each backup using the <code class="literal">-L <span class="emphasis"><em>label</em></span></code> option so that it is easier to identify them when restoring. Replace <span class="emphasis"><em>label</em></span> with any name for your backup: for example, <code class="literal">backup_data</code>.
								</li></ul></div></li></ul></div><div class="example" id="idm140591305144336"><p class="title"><strong>Example 10.1. Backing up multiple XFS file systems</strong></p><div class="example-contents"><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To back up the content of XFS file systems mounted on the <code class="literal filename">/boot/</code> and <code class="literal filename">/data/</code> directories and save them as files in the <code class="literal filename">/backup-files/</code> directory:
							</p><pre class="screen"># xfsdump -l 0 -f <span class="emphasis"><em>/backup-files/boot.xfsdump</em></span> <span class="emphasis"><em>/boot</em></span>
# xfsdump -l 0 -f <span class="emphasis"><em>/backup-files/data.xfsdump</em></span> <span class="emphasis"><em>/data</em></span></pre></li><li class="listitem"><p class="simpara">
								To back up multiple file systems on a single tape device, add a session label to each backup using the <code class="literal">-L <span class="emphasis"><em>label</em></span></code> option:
							</p><pre class="screen"># xfsdump -l 0 -L <span class="emphasis"><em>"backup_boot"</em></span> -f <span class="emphasis"><em>/dev/st0</em></span> <span class="emphasis"><em>/boot</em></span>
# xfsdump -l 0 -L <span class="emphasis"><em>"backup_data"</em></span> -f <span class="emphasis"><em>/dev/st0</em></span> <span class="emphasis"><em>/data</em></span></pre></li></ul></div></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">xfsdump(8)</code> man page.
						</li></ul></div></section><section class="section" id="additional-resources-backing-up-an-xfs-file-system"><div class="titlepage"><div><div><h3 class="title">10.3.3. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">xfsdump(8)</code> man page.
						</li></ul></div></section></section><section class="section" id="assembly_recovering-an-xfs-file-system-from-backup-getting-started-with-xfs"><div class="titlepage"><div><div><h2 class="title">10.4. Restoring an XFS file system from backup</h2></div></div></div><p>
				As a system administrator, you can use the <code class="literal">xfsrestore</code> utility to restore XFS backup created with the <code class="literal">xfsdump</code> utility and stored in a file or on a tape.
			</p><section class="section" id="con_features-of-restoring-xfs-from-backup-restoring-an-xfs-file-system-from-backup"><div class="titlepage"><div><div><h3 class="title">10.4.1. Features of restoring XFS from backup</h3></div></div></div><p>
					This section describes key concepts and features of restoring an XFS file system from backup with the <code class="literal">xfsrestore</code> utility.
				</p><p>
					The <code class="literal">xfsrestore</code> utility restores file systems from backups produced by <code class="literal">xfsdump</code>. The <code class="literal">xfsrestore</code> utility has two modes:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="strong strong"><strong>simple</strong></span> mode enables users to restore an entire file system from a level 0 dump. This is the default mode.
						</li><li class="listitem">
							The <span class="strong strong"><strong>cumulative</strong></span> mode enables file system restoration from an incremental backup: that is, level 1 to level 9.
						</li></ul></div><p>
					A unique <span class="emphasis"><em>session ID</em></span> or <span class="emphasis"><em>session label</em></span> identifies each backup. Restoring a backup from a tape containing multiple backups requires its corresponding session ID or label.
				</p><p>
					To extract, add, or delete specific files from a backup, enter the <code class="literal">xfsrestore</code> interactive mode. The interactive mode provides a set of commands to manipulate the backup files.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">xfsrestore(8)</code> man page.
						</li></ul></div></section><section class="section" id="proc_restoring-an-xfs-file-system-from-backup-with-xfsrestore-restoring-an-xfs-file-system-from-backup"><div class="titlepage"><div><div><h3 class="title">10.4.2. Restoring an XFS file system from backup with xfsrestore</h3></div></div></div><p>
					This procedure describes how to restore the content of an XFS file system from a file or tape backup.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A file or tape backup of XFS file systems, as described in <a class="xref" href="index.html#assembly_backing-up-an-xfs-file-system-getting-started-with-xfs" title="10.3. Backing up an XFS file system">Section 10.3, “Backing up an XFS file system”</a>.
						</li><li class="listitem">
							A storage device where you can restore the backup.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The command to restore the backup varies depending on whether you are restoring from a full backup or an incremental one, or are restoring multiple backups from a single tape device:
						</p><pre class="screen"># xfsrestore [-r] [-S session-id] [-L session-label] [-i]
             -f backup-location restoration-path</pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">backup-location</span></em></span> with the location of the backup. This can be a regular file, a tape drive, or a remote tape device. For example, <code class="literal filename">/backup-files/Data.xfsdump</code> for a file or <code class="literal filename">/dev/st0</code> for a tape drive.
								</li><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">restoration-path</span></em></span> with the path to the directory where you want to restore the file system. For example, <code class="literal filename">/mnt/data/</code>.
								</li><li class="listitem">
									To restore a file system from an incremental (level 1 to level 9) backup, add the <code class="literal option">-r</code> option.
								</li><li class="listitem"><p class="simpara">
									To restore a backup from a tape device that contains multiple backups, specify the backup using the <code class="literal option">-S</code> or <code class="literal option">-L</code> options.
								</p><p class="simpara">
									The <code class="literal option">-S</code> option lets you choose a backup by its session ID, while the <code class="literal option">-L</code> option lets you choose by the session label. To obtain the session ID and session labels, use the <code class="literal command">xfsrestore -I</code> command.
								</p><p class="simpara">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">session-id</span></em></span> with the session ID of the backup. For example, <code class="literal">b74a3586-e52e-4a4a-8775-c3334fa8ea2c</code>. Replace <span class="emphasis"><em><span class="replaceable replaceable">session-label</span></em></span> with the session label of the backup. For example, <code class="literal">my_backup_session_label</code>.
								</p></li><li class="listitem"><p class="simpara">
									To use <code class="literal">xfsrestore</code> interactively, use the <code class="literal option">-i</code> option.
								</p><p class="simpara">
									The interactive dialog begins after <code class="literal">xfsrestore</code> finishes reading the specified device. Available commands in the interactive <code class="literal">xfsrestore</code> shell include <code class="literal">cd</code>, <code class="literal">ls</code>, <code class="literal">add</code>, <code class="literal">delete</code>, and <code class="literal">extract</code>; for a complete list of commands, use the <code class="literal">help</code> command.
								</p></li></ul></div></li></ul></div><div class="example" id="idm140591304089792"><p class="title"><strong>Example 10.2. Restoring Multiple XFS File Systems</strong></p><div class="example-contents"><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To restore the XFS backup files and save their content into directories under <code class="literal filename">/mnt/</code>:
							</p><pre class="screen"># xfsrestore -f <span class="emphasis"><em>/backup-files/boot.xfsdump</em></span> <span class="emphasis"><em>/mnt/boot/</em></span>
# xfsrestore -f <span class="emphasis"><em>/backup-files/data.xfsdump</em></span> <span class="emphasis"><em>/mnt/data/</em></span></pre></li><li class="listitem"><p class="simpara">
								To restore from a tape device containing multiple backups, specify each backup by its session label or session ID:
							</p><pre class="screen"># xfsrestore -L <span class="emphasis"><em>"backup_boot"</em></span> -f <span class="emphasis"><em>/dev/st0</em></span> <span class="emphasis"><em>/mnt/boot/</em></span>
# xfsrestore -S <span class="emphasis"><em>"45e9af35-efd2-4244-87bc-4762e476cbab"</em></span> \
             -f <span class="emphasis"><em>/dev/st0</em></span> <span class="emphasis"><em>/mnt/data/</em></span></pre></li></ul></div></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">xfsrestore(8)</code> man page.
						</li></ul></div></section><section class="section" id="con_informational-messages-when-restoring-an-xfs-backup-from-a-tape-restoring-an-xfs-file-system-from-backup"><div class="titlepage"><div><div><h3 class="title">10.4.3. Informational messages when restoring an XFS backup from a tape</h3></div></div></div><p>
					When restoring a backup from a tape with backups from multiple file systems, the <code class="literal">xfsrestore</code> utility might issue messages. The messages inform you whether a match of the requested backup has been found when <code class="literal">xfsrestore</code> examines each backup on the tape in sequential order. For example:
				</p><pre class="screen">xfsrestore: preparing drive
xfsrestore: examining media file 0
xfsrestore: inventory session uuid (8590224e-3c93-469c-a311-fc8f23029b2a) does not match the media header's session uuid (7eda9f86-f1e9-4dfd-b1d4-c50467912408)
xfsrestore: examining media file 1
xfsrestore: inventory session uuid (8590224e-3c93-469c-a311-fc8f23029b2a) does not match the media header's session uuid (7eda9f86-f1e9-4dfd-b1d4-c50467912408)
[...]</pre><p>
					The informational messages keep appearing until the matching backup is found.
				</p></section><section class="section" id="additional-resources-restoring-an-xfs-file-system-from-backup"><div class="titlepage"><div><div><h3 class="title">10.4.4. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">xfsrestore(8)</code> man page.
						</li></ul></div></section></section><section class="section" id="assembly_increasing-the-size-of-an-xfs-file-system_getting-started-with-xfs"><div class="titlepage"><div><div><h2 class="title">10.5. Increasing the size of an XFS file system</h2></div></div></div><p>
				As a system administrator, you can increase the size of an XFS file system to utilize larger storage capacity.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					It is not currently possible to decrease the size of XFS file systems.
				</p></div></div><section class="section" id="proc_increasing-the-size-of-an-xfs-file-system-with-xfs_growfs_assembly_increasing-the-size-of-an-xfs-file-system"><div class="titlepage"><div><div><h3 class="title">10.5.1. Increasing the size of an XFS file system with xfs_growfs</h3></div></div></div><p>
					This procedure describes how to grow an XFS file system using the <code class="literal">xfs_growfs</code> utility.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Ensure that the underlying block device is of an appropriate size to hold the resized file system later. Use the appropriate resizing methods for the affected block device.
						</li><li class="listitem">
							Mount the XFS file system.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							While the XFS file system is mounted, use the <code class="literal">xfs_growfs</code> utility to increase its size:
						</p><pre class="screen"># xfs_growfs <span class="emphasis"><em><span class="replaceable replaceable">file-system</span></em></span> -D <span class="emphasis"><em><span class="replaceable replaceable">new-size</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">file-system</span></em></span> with the mount point of the XFS file system.
								</li><li class="listitem"><p class="simpara">
									With the <code class="literal option">-D</code> option, replace <span class="emphasis"><em><span class="replaceable replaceable">new-size</span></em></span> with the desired new size of the file system specified in the number of file system blocks.
								</p><p class="simpara">
									To find out the block size in kB of a given XFS file system, use the <code class="literal">xfs_info</code> utility:
								</p><pre class="screen"># xfs_info <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span>

...
data     =              bsize=4096
...</pre></li><li class="listitem">
									Without the <code class="literal option">-D</code> option, <code class="literal">xfs_growfs</code> grows the file system to the maximum size supported by the underlying device.
								</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">xfs_growfs(8)</code> man page.
						</li></ul></div></section></section></section><section class="chapter" id="checking-and-repairing-a-file-system_managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 11. Checking and repairing a file system</h1></div></div></div><p>
			RHEL provides file system administration utilities which are capable of checking and repairing file systems. These tools are often referred to as <code class="literal">fsck</code> tools, where <code class="literal">fsck</code> is a shortened version of <span class="emphasis"><em>file system check</em></span>. In most cases, these utilities are run automatically during system boot, if needed, but can also be manually invoked if required.
		</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
				File system checkers guarantee only metadata consistency across the file system. They have no awareness of the actual data contained within the file system and are not data recovery tools.
			</p></div></div><section class="section" id="file-system-checking-and-repair_checking-and-repairing-a-file-system"><div class="titlepage"><div><div><h2 class="title">11.1. Scenarios that require a file system check</h2></div></div></div><p>
				The relevant <code class="literal">fsck</code> tools can be used to check your system if any of the following occurs:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						System fails to boot
					</li><li class="listitem">
						Files on a specific disk become corrupt
					</li><li class="listitem">
						The file system shuts down or changes to read-only due to inconsistencies
					</li><li class="listitem">
						A file on the file system is inaccessible
					</li></ul></div><p>
				File system inconsistencies can occur for various reasons, including but not limited to hardware errors, storage administration errors, and software bugs.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					File system check tools cannot repair hardware problems. A file system must be fully readable and writable if repair is to operate successfully. If a file system was corrupted due to a hardware error, the file system must first be moved to a good disk, for example with the <code class="literal">dd(8)</code> utility.
				</p></div></div><p>
				For journaling file systems, all that is normally required at boot time is to replay the journal if required and this is usually a very short operation.
			</p><p>
				However, if a file system inconsistency or corruption occurs, even for journaling file systems, then the file system checker must be used to repair the file system.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					It is possible to disable file system check at boot by setting the sixth field in <code class="literal">/etc/fstab</code> to <code class="literal">0</code>. However, Red Hat does not recommend doing so unless you are having issues with <code class="literal">fsck</code> at boot time, for example with extremely large or remote file systems.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">fstab(5)</code> man page.
					</li><li class="listitem">
						The <code class="literal">fsck(8)</code> man page.
					</li><li class="listitem">
						The <code class="literal">dd(8)</code> man page.
					</li></ul></div></section><section class="section" id="potential-side-effects-of-running-fsck_checking-and-repairing-a-file-system"><div class="titlepage"><div><div><h2 class="title">11.2. Potential side effects of running fsck</h2></div></div></div><p>
				Generally, running the file system check and repair tool can be expected to automatically repair at least some of the inconsistencies it finds. In some cases, the following issues can arise:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Severely damaged inodes or directories may be discarded if they cannot be repaired.
					</li><li class="listitem">
						Significant changes to the file system may occur.
					</li></ul></div><p>
				To ensure that unexpected or undesirable changes are not permanently made, ensure you follow any precautionary steps outlined in the procedure.
			</p></section><section class="section" id="error-handling-mechanisms-in-xfs_checking-and-repairing-a-file-system"><div class="titlepage"><div><div><h2 class="title">11.3. Error-handling mechanisms in XFS</h2></div></div></div><p>
				This section describes how XFS handles various kinds of errors in the file system.
			</p><h4 id="unclean_unmounts">Unclean unmounts</h4><p>
				Journalling maintains a transactional record of metadata changes that happen on the file system.
			</p><p>
				In the event of a system crash, power failure, or other unclean unmount, XFS uses the journal (also called log) to recover the file system. The kernel performs journal recovery when mounting the XFS file system.
			</p><h4 id="corruption">Corruption</h4><p>
				In this context, <span class="emphasis"><em>corruption</em></span> means errors on the file system caused by, for example:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Hardware faults
					</li><li class="listitem">
						Bugs in storage firmware, device drivers, the software stack, or the file system itself
					</li><li class="listitem">
						Problems that cause parts of the file system to be overwritten by something outside of the file system
					</li></ul></div><p>
				When XFS detects corruption in the file system or the file-system metadata, it may shut down the file system and report the incident in the system log. Note that if the corruption occurred on the file system hosting the <code class="literal filename">/var</code> directory, these logs will not be available after a reboot.
			</p><div class="example" id="idm140591306699344"><p class="title"><strong>Example 11.1. System log entry reporting an XFS corruption</strong></p><div class="example-contents"><pre class="screen"># dmesg --notime | tail -15

XFS (loop0): Mounting V5 Filesystem
XFS (loop0): Metadata CRC error detected at xfs_agi_read_verify+0xcb/0xf0 [xfs], xfs_agi block 0x2
XFS (loop0): Unmount and run xfs_repair
XFS (loop0): First 128 bytes of corrupted metadata buffer:
00000000027b3b56: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
000000005f9abc7a: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
000000005b0aef35: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000000da9d2ded: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
000000001e265b07: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
000000006a40df69: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
000000000b272907: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000000e484aac5: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
XFS (loop0): metadata I/O error in "xfs_trans_read_buf_map" at daddr 0x2 len 1 error 74
XFS (loop0): xfs_imap_lookup: xfs_ialloc_read_agi() returned error -117, agno 0
XFS (loop0): Failed to read root inode 0x80, error 11</pre></div></div><p>
				User-space utilities usually report the <span class="emphasis"><em>Input/output error</em></span> message when trying to access a corrupted XFS file system. Mounting an XFS file system with a corrupted log results in a failed mount and the following error message:
			</p><pre class="screen">mount: <span class="emphasis"><em><span class="replaceable replaceable">/mount-point</span></em></span>: mount(2) system call failed: Structure needs cleaning.</pre><p>
				You must manually use the <code class="literal">xfs_repair</code> utility to repair the corruption.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">xfs_repair(8)</code> man page provides a detailed list of XFS corruption checks.
					</li></ul></div></section><section class="section" id="checking-an-xfs-file-system-with-xfs-repair_checking-and-repairing-a-file-system"><div class="titlepage"><div><div><h2 class="title">11.4. Checking an XFS file system with <code class="literal">xfs_repair</code></h2></div></div></div><p>
				This procedure performs a read-only check of an XFS file system using the <code class="literal">xfs_repair</code> utility. You must manually use the <code class="literal">xfs_repair</code> utility to repair any corruption. Unlike other file system repair utilities, <code class="literal">xfs_repair</code> does not run at boot time, even when an XFS file system was not cleanly unmounted. In the event of an unclean unmount, XFS simply replays the log at mount time, ensuring a consistent file system; <code class="literal">xfs_repair</code> cannot repair an XFS file system with a dirty log without remounting it first.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Although an <code class="literal">fsck.xfs</code> binary is present in the <code class="literal">xfsprogs</code> package, this is present only to satisfy <code class="literal">initscripts</code> that look for an <code class="literal">fsck.file</code> system binary at boot time. <code class="literal">fsck.xfs</code> immediately exits with an exit code of 0.
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Replay the log by mounting and unmounting the file system:
					</p><pre class="screen"># mount <span class="emphasis"><em><span class="replaceable replaceable">file-system</span></em></span>
# umount <span class="emphasis"><em><span class="replaceable replaceable">file-system</span></em></span></pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If the mount fails with a structure needs cleaning error, the log is corrupted and cannot be replayed. The dry run should discover and report more on-disk corruption as a result.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">xfs_repair</code> utility to perform a dry run to check the file system. Any errors are printed and an indication of the actions that would be taken, without modifying the file system.
					</p><pre class="screen"># xfs_repair -n <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre></li><li class="listitem"><p class="simpara">
						Mount the file system:
					</p><pre class="screen"># mount <span class="emphasis"><em><span class="replaceable replaceable">file-system</span></em></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">xfs_repair(8)</code> man page.
					</li><li class="listitem">
						The <code class="literal">xfs_metadump(8)</code> man page.
					</li></ul></div></section><section class="section" id="proc_repairing-an-xfs-file-system-with-xfs_repair_checking-and-repairing-a-file-system"><div class="titlepage"><div><div><h2 class="title">11.5. Repairing an XFS file system with xfs_repair</h2></div></div></div><p>
				This procedure repairs a corrupted XFS file system using the <code class="literal">xfs_repair</code> utility.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a metadata image prior to repair for diagnostic or testing purposes using the <code class="literal">xfs_metadump</code> utility. A pre-repair file system metadata image can be useful for support investigations if the corruption is due to a software bug. Patterns of corruption present in the pre-repair image can aid in root-cause analysis.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Use the <code class="literal">xfs_metadump</code> debugging tool to copy the metadata from an XFS file system to a file. The resulting <code class="literal">metadump</code> file can be compressed using standard compression utilities to reduce the file size if large <code class="literal">metadump</code> files need to be sent to support.
							</p><pre class="screen"># xfs_metadump <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">metadump-file</span></em></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Replay the log by remounting the file system:
					</p><pre class="screen"># mount <span class="emphasis"><em><span class="replaceable replaceable">file-system</span></em></span>
# umount <span class="emphasis"><em><span class="replaceable replaceable">file-system</span></em></span></pre></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">xfs_repair</code> utility to repair the unmounted file system:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If the mount succeeded, no additional options are required:
							</p><pre class="screen"># xfs_repair <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre></li><li class="listitem"><p class="simpara">
								If the mount failed with the <span class="emphasis"><em>Structure needs cleaning</em></span> error, the log is corrupted and cannot be replayed. Use the <code class="literal option">-L</code> option (<span class="emphasis"><em>force log zeroing</em></span>) to clear the log:
							</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
									This command causes all metadata updates in progress at the time of the crash to be lost, which might cause significant file system damage and data loss. This should be used only as a last resort if the log cannot be replayed.
								</p></div></div><pre class="screen"># xfs_repair -L <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Mount the file system:
					</p><pre class="screen"># mount <span class="emphasis"><em><span class="replaceable replaceable">file-system</span></em></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">xfs_repair(8)</code> man page.
					</li></ul></div></section><section class="section" id="error-handling-mechanisms-in-ext2-ext3-and-ext4_checking-and-repairing-a-file-system"><div class="titlepage"><div><div><h2 class="title">11.6. Error handling mechanisms in ext2, ext3, and ext4</h2></div></div></div><p>
				The ext2, ext3, and ext4 file systems use the <code class="literal">e2fsck</code> utility to perform file system checks and repairs. The file names <code class="literal">fsck.ext2</code>, <code class="literal">fsck.ext3</code>, and <code class="literal">fsck.ext4</code> are hardlinks to the <code class="literal">e2fsck</code> utility. These binaries are run automatically at boot time and their behavior differs based on the file system being checked and the state of the file system.
			</p><p>
				A full file system check and repair is invoked for ext2, which is not a metadata journaling file system, and for ext4 file systems without a journal.
			</p><p>
				For ext3 and ext4 file systems with metadata journaling, the journal is replayed in userspace and the utility exits. This is the default action because journal replay ensures a consistent file system after a crash.
			</p><p>
				If these file systems encounter metadata inconsistencies while mounted, they record this fact in the file system superblock. If <code class="literal">e2fsck</code> finds that a file system is marked with such an error, <code class="literal">e2fsck</code> performs a full check after replaying the journal (if present).
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">fsck(8)</code> man page.
					</li><li class="listitem">
						The <code class="literal">e2fsck(8)</code> man page.
					</li></ul></div></section><section class="section" id="checking-an-ext2-ext3-or-ext4-file-system-with-e2fsck_checking-and-repairing-a-file-system"><div class="titlepage"><div><div><h2 class="title">11.7. Checking an ext2, ext3, or ext4 file system with e2fsck</h2></div></div></div><p>
				This procedure checks an ext2, ext3, or ext4 file system using the <code class="literal">e2fsck</code> utility.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Replay the log by remounting the file system:
					</p><pre class="screen"># mount <span class="emphasis"><em><span class="replaceable replaceable">file-system</span></em></span>
# umount <span class="emphasis"><em><span class="replaceable replaceable">file-system</span></em></span></pre></li><li class="listitem"><p class="simpara">
						Perform a dry run to check the file system.
					</p><pre class="screen"># e2fsck -n <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Any errors are printed and an indication of the actions that would be taken, without modifying the file system. Later phases of consistency checking may print extra errors as it discovers inconsistencies which would have been fixed in early phases if it were running in repair mode.
						</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">e2image(8)</code> man page.
					</li><li class="listitem">
						The <code class="literal">e2fsck(8)</code> man page.
					</li></ul></div></section><section class="section" id="repairing-an-ext2-ext3-or-ext4-file-system-with-e2fsck_checking-and-repairing-a-file-system"><div class="titlepage"><div><div><h2 class="title">11.8. Repairing an ext2, ext3, or ext4 file system with e2fsck</h2></div></div></div><p>
				This procedure repairs a corrupted ext2, ext3, or ext4 file system using the <code class="literal">e2fsck</code> utility.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Save a file system image for support investigations. A pre-repair file system metadata image can be useful for support investigations if the corruption is due to a software bug. Patterns of corruption present in the pre-repair image can aid in root-cause analysis.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Severely damaged file systems may cause problems with metadata image creation.
						</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If you are creating the image for testing purposes, use the <code class="literal">-r</code> option to create a sparse file of the same size as the file system itself. <code class="literal">e2fsck</code> can then operate directly on the resulting file.
							</p><pre class="screen"># e2image -r <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">image-file</span></em></span></pre></li><li class="listitem"><p class="simpara">
								If you are creating the image to be archived or provided for diagnostic, use the <code class="literal">-Q</code> option, which creates a more compact file format suitable for transfer.
							</p><pre class="screen"># e2image -Q <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">image-file</span></em></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Replay the log by remounting the file system:
					</p><pre class="screen"># mount <span class="emphasis"><em><span class="replaceable replaceable">file-system</span></em></span>
# umount <span class="emphasis"><em><span class="replaceable replaceable">file-system</span></em></span></pre></li><li class="listitem"><p class="simpara">
						Automatically repair the file system. If user intervention is required, <code class="literal">e2fsck</code> indicates the unfixed problem in its output and reflects this status in the exit code.
					</p><pre class="screen"># e2fsck -p <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The <code class="literal">e2image(8)</code> man page.
							</li><li class="listitem">
								The <code class="literal">e2fsck(8)</code> man page.
							</li></ul></div></li></ol></div></section></section><section class="chapter" id="assembly_mounting-file-systems_managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 12. Mounting file systems</h1></div></div></div><p>
			As a system administrator, you can mount file systems on your system to access data on them.
		</p><section class="section" id="the-linux-mount-mechanism_assembly_mounting-file-systems"><div class="titlepage"><div><div><h2 class="title">12.1. The Linux mount mechanism</h2></div></div></div><p>
				This section explains basic concepts of mounting file systems on Linux.
			</p><p>
				On Linux, UNIX, and similar operating systems, file systems on different partitions and removable devices (CDs, DVDs, or USB flash drives for example) can be attached to a certain point (the mount point) in the directory tree, and then detached again. While a file system is mounted on a directory, the original content of the directory is not accessible.
			</p><p>
				Note that Linux does not prevent you from mounting a file system to a directory with a file system already attached to it.
			</p><p>
				When mounting, you can identify the device by:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						a universally unique identifier (UUID): for example, <code class="literal">UUID=34795a28-ca6d-4fd8-a347-73671d0c19cb</code>
					</li><li class="listitem">
						a volume label: for example, <code class="literal">LABEL=home</code>
					</li><li class="listitem">
						a full path to a non-persistent block device: for example, <code class="literal filename">/dev/sda3</code>
					</li></ul></div><p>
				When you mount a file system using the <code class="literal">mount</code> command without all required information, that is without the device name, the target directory, or the file system type, the <code class="literal">mount</code> utility reads the content of the <code class="literal filename">/etc/fstab</code> file to check if the given file system is listed there. The <code class="literal filename">/etc/fstab</code> file contains a list of device names and the directories in which the selected file systems are set to be mounted as well as the file system type and mount options. Therefore, when mounting a file system that is specified in <code class="literal filename">/etc/fstab</code>, the following command syntax is sufficient:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Mounting by the mount point:
					</p><pre class="screen"># mount <span class="emphasis"><em><span class="replaceable replaceable">directory</span></em></span></pre></li><li class="listitem"><p class="simpara">
						Mounting by the block device:
					</p><pre class="screen"># mount <span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span></pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">mount(8)</code> man page.
					</li><li class="listitem">
						For information on how to list persistent naming attributes such as the UUID, see <a class="xref" href="index.html#proc_listing-persistent-naming-attributes_assembly_overview-of-persistent-naming-attributes" title="8.6. Listing persistent naming attributes">Section 8.6, “Listing persistent naming attributes”</a>.
					</li></ul></div></section><section class="section" id="listing-currently-mounted-file-systems_assembly_mounting-file-systems"><div class="titlepage"><div><div><h2 class="title">12.2. Listing currently mounted file systems</h2></div></div></div><p>
				This procedure describes how to list all currently mounted file systems on the command line.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To list all mounted file systems, use the <code class="literal">findmnt</code> utility:
					</p><pre class="screen">$ findmnt</pre></li><li class="listitem"><p class="simpara">
						To limit the listed file systems only to a certain file system type, add the <code class="literal option">--types</code> option:
					</p><pre class="screen">$ findmnt --types <span class="emphasis"><em><span class="replaceable replaceable">fs-type</span></em></span></pre><p class="simpara">
						For example:
					</p><div class="example" id="idm140591303032640"><p class="title"><strong>Example 12.1. Listing only XFS file systems</strong></p><div class="example-contents"><pre class="screen">$ findmnt --types xfs

TARGET  SOURCE                                                FSTYPE OPTIONS
/       /dev/mapper/luks-5564ed00-6aac-4406-bfb4-c59bf5de48b5 xfs    rw,relatime
├─/boot /dev/sda1                                             xfs    rw,relatime
└─/home /dev/mapper/luks-9d185660-7537-414d-b727-d92ea036051e xfs    rw,relatime</pre></div></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">findmnt(8)</code> man page.
					</li></ul></div></section><section class="section" id="mounting-a-file-system-with-mount_assembly_mounting-file-systems"><div class="titlepage"><div><div><h2 class="title">12.3. Mounting a file system with mount</h2></div></div></div><p>
				This procedure describes how to mount a file system using the <code class="literal">mount</code> utility.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Make sure that no file system is already mounted on your chosen mount point:
					</p><pre class="screen">$ findmnt <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To attach a certain file system, use the <code class="literal">mount</code> utility:
					</p><pre class="screen"># mount <span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre><div class="example" id="idm140591303123248"><p class="title"><strong>Example 12.2. Mounting an XFS file system</strong></p><div class="example-contents"><p>
							For example, to mount a local XFS file system identified by UUID:
						</p><pre class="screen"># mount UUID=ea74bbec-536d-490c-b8d9-5b40bbd7545b /mnt/data</pre></div></div></li><li class="listitem"><p class="simpara">
						If <code class="literal">mount</code> cannot recognize the file system type automatically, specify it using the <code class="literal option">--types</code> option:
					</p><pre class="screen"># mount --types <span class="emphasis"><em><span class="replaceable replaceable">type</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre><div class="example" id="idm140591303115760"><p class="title"><strong>Example 12.3. Mounting an NFS file system</strong></p><div class="example-contents"><p>
							For example, to mount a remote NFS file system:
						</p><pre class="screen"># mount --types nfs4 host:/remote-export /mnt/nfs</pre></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">mount(8)</code> man page.
					</li></ul></div></section><section class="section" id="moving-a-mount-point_assembly_mounting-file-systems"><div class="titlepage"><div><div><h2 class="title">12.4. Moving a mount point</h2></div></div></div><p>
				This procedure describes how to change the mount point of a mounted file system to a different directory.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To change the directory in which a file system is mounted:
					</p><pre class="screen"># mount --move <span class="emphasis"><em><span class="replaceable replaceable">old-directory</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">new-directory</span></em></span></pre><div class="example" id="idm140591303104736"><p class="title"><strong>Example 12.4. Moving a home file system</strong></p><div class="example-contents"><p>
							For example, to move the file system mounted in the <code class="literal filename">/mnt/userdirs/</code> directory to the <code class="literal filename">/home/</code> mount point:
						</p><pre class="screen"># mount --move /mnt/userdirs /home</pre></div></div></li><li class="listitem"><p class="simpara">
						Verify that the file system has been moved as expected:
					</p><pre class="screen">$ findmnt
$ ls <span class="emphasis"><em><span class="replaceable replaceable">old-directory</span></em></span>
$ ls <span class="emphasis"><em><span class="replaceable replaceable">new-directory</span></em></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">mount(8)</code> man page.
					</li></ul></div></section><section class="section" id="unmounting-a-file-system-with-umount_assembly_mounting-file-systems"><div class="titlepage"><div><div><h2 class="title">12.5. Unmounting a file system with umount</h2></div></div></div><p>
				This procedure describes how to unmount a file system using the <code class="literal">umount</code> utility.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Try unmounting the file system using either of the following commands:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								By mount point:
							</p><pre class="screen"># umount <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li><li class="listitem"><p class="simpara">
								By device:
							</p><pre class="screen"># umount <span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span></pre></li></ul></div><p class="simpara">
						If the command fails with an error similar to the following, it means that the file system is in use because of a process is using resources on it:
					</p><pre class="screen">umount: <span class="emphasis"><em><span class="replaceable replaceable">/run/media/user/FlashDrive</span></em></span>: target is busy.</pre></li><li class="listitem"><p class="simpara">
						If the file system is in use, use the <code class="literal">fuser</code> utility to determine which processes are accessing it. For example:
					</p><pre class="screen">$ fuser --mount <span class="emphasis"><em><span class="replaceable replaceable">/run/media/user/FlashDrive</span></em></span>

<span class="emphasis"><em><span class="replaceable replaceable">/run/media/user/FlashDrive</span></em></span>: <span class="emphasis"><em><span class="replaceable replaceable">18351</span></em></span></pre><p class="simpara">
						Afterwards, terminate the processes using the file system and try unmounting it again.
					</p></li></ol></div></section><section class="section" id="common-mount-options_assembly_mounting-file-systems"><div class="titlepage"><div><div><h2 class="title">12.6. Common mount options</h2></div></div></div><p>
				This section lists some commonly used options of the <code class="literal">mount</code> utility.
			</p><p>
				You can use these options in the following syntax:
			</p><pre class="screen"># mount --options <span class="emphasis"><em><span class="replaceable replaceable">option1,option2,option3</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre><div class="table" id="idm140591306122336"><p class="title"><strong>Table 12.1. Common mount options</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140591306117504" scope="col">Option</th><th align="left" valign="top" id="idm140591306116416" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140591306117504"> <p>
								<code class="literal">async</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140591306116416"> <p>
								Enables asynchronous input and output operations on the file system.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591306117504"> <p>
								<code class="literal">auto</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140591306116416"> <p>
								Enables the file system to be mounted automatically using the <code class="literal command">mount -a</code> command.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591306117504"> <p>
								<code class="literal">defaults</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140591306116416"> <p>
								Provides an alias for the <code class="literal">async,auto,dev,exec,nouser,rw,suid</code> options.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591306117504"> <p>
								<code class="literal">exec</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140591306116416"> <p>
								Allows the execution of binary files on the particular file system.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591306117504"> <p>
								<code class="literal">loop</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140591306116416"> <p>
								Mounts an image as a loop device.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591306117504"> <p>
								<code class="literal">noauto</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140591306116416"> <p>
								Default behavior disables the automatic mount of the file system using the <code class="literal command">mount -a</code> command.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591306117504"> <p>
								<code class="literal">noexec</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140591306116416"> <p>
								Disallows the execution of binary files on the particular file system.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591306117504"> <p>
								<code class="literal">nouser</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140591306116416"> <p>
								Disallows an ordinary user (that is, other than root) to mount and unmount the file system.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591306117504"> <p>
								<code class="literal">remount</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140591306116416"> <p>
								Remounts the file system in case it is already mounted.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591306117504"> <p>
								<code class="literal">ro</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140591306116416"> <p>
								Mounts the file system for reading only.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591306117504"> <p>
								<code class="literal">rw</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140591306116416"> <p>
								Mounts the file system for both reading and writing.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140591306117504"> <p>
								<code class="literal">user</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140591306116416"> <p>
								Allows an ordinary user (that is, other than root) to mount and unmount the file system.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="sharing-a-mount-on-multiple-mount-points_assembly_mounting-file-systems"><div class="titlepage"><div><div><h2 class="title">12.7. Sharing a mount on multiple mount points</h2></div></div></div><p>
				As a system administrator, you can duplicate mount points to make the file systems accessible from multiple directories.
			</p><section class="section" id="types-of-shared-mounts_sharing-a-mount-on-multiple-mount-points"><div class="titlepage"><div><div><h3 class="title">12.7.1. Types of shared mounts</h3></div></div></div><p>
					There are multiple types of shared mounts that you can use. The difference between them is what happens when you mount another file system under one of the shared mount points. The shared mounts are implemented using the <span class="emphasis"><em>shared subtrees</em></span> functionality.
				</p><p>
					The types are:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Private mount</span></dt><dd><p class="simpara">
								This type does not receive or forward any propagation events.
							</p><p class="simpara">
								When you mount another file system under either the duplicate or the original mount point, it is not reflected in the other.
							</p></dd><dt><span class="term">Shared mount</span></dt><dd><p class="simpara">
								This type creates an exact replica of a given mount point.
							</p><p class="simpara">
								When a mount point is marked as a shared mount, any mount within the original mount point is reflected in it, and vice versa.
							</p><p class="simpara">
								This is the default mount type of the root file system.
							</p></dd><dt><span class="term">Slave mount</span></dt><dd><p class="simpara">
								This type creates a limited duplicate of a given mount point.
							</p><p class="simpara">
								When a mount point is marked as a slave mount, any mount within the original mount point is reflected in it, but no mount within a slave mount is reflected in its original.
							</p></dd><dt><span class="term">Unbindable mount</span></dt><dd>
								This type prevents the given mount point from being duplicated whatsoever.
							</dd></dl></div></section><section class="section" id="creating-a-private-mount-point-duplicate_sharing-a-mount-on-multiple-mount-points"><div class="titlepage"><div><div><h3 class="title">12.7.2. Creating a private mount point duplicate</h3></div></div></div><p>
					This procedure duplicates a mount point as a private mount. File systems that you later mount under the duplicate or the original mount point are not reflected in the other.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a virtual file system (VFS) node from the original mount point:
						</p><pre class="screen"># mount --bind <span class="emphasis"><em><span class="replaceable replaceable">original-dir</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">original-dir</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Mark the original mount point as private:
						</p><pre class="screen"># mount --make-private <span class="emphasis"><em><span class="replaceable replaceable">original-dir</span></em></span></pre><p class="simpara">
							Alternatively, to change the mount type for the selected mount point and all mount points under it, use the <code class="literal option">--make-rprivate</code> option instead of <code class="literal option">--make-private</code>.
						</p></li><li class="listitem"><p class="simpara">
							Create the duplicate:
						</p><pre class="screen"># mount --bind <span class="emphasis"><em><span class="replaceable replaceable">original-dir</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">duplicate-dir</span></em></span></pre></li></ol></div><div class="example" id="idm140591304533680"><p class="title"><strong>Example 12.5. Duplicating /media into /mnt as a private mount point</strong></p><div class="example-contents"><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a VFS node from the <code class="literal filename">/media</code> directory:
							</p><pre class="screen"># mount --bind /media /media</pre></li><li class="listitem"><p class="simpara">
								Mark the <code class="literal filename">/media</code> directory as private:
							</p><pre class="screen"># mount --make-private /media</pre></li><li class="listitem"><p class="simpara">
								Create its duplicate in <code class="literal filename">/mnt</code>:
							</p><pre class="screen"># mount --bind /media /mnt</pre></li><li class="listitem"><p class="simpara">
								It is now possible to verify that <code class="literal filename">/media</code> and <code class="literal filename">/mnt</code> share content but none of the mounts within <code class="literal filename">/media</code> appear in <code class="literal filename">/mnt</code>. For example, if the CD-ROM drive contains non-empty media and the <code class="literal filename">/media/cdrom/</code> directory exists, use:
							</p><pre class="screen"># mount /dev/cdrom /media/cdrom
# ls /media/cdrom
EFI  GPL  isolinux  LiveOS
# ls /mnt/cdrom
#</pre></li><li class="listitem"><p class="simpara">
								It is also possible to verify that file systems mounted in the <code class="literal filename">/mnt</code> directory are not reflected in <code class="literal filename">/media</code>. For instance, if a non-empty USB flash drive that uses the <code class="literal filename">/dev/sdc1</code> device is plugged in and the <code class="literal filename">/mnt/flashdisk/</code> directory is present, use:
							</p><pre class="screen"># mount /dev/sdc1 /mnt/flashdisk
# ls /media/flashdisk
# ls /mnt/flashdisk
en-US  publican.cfg</pre></li></ol></div></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">mount(8)</code> man page.
						</li></ul></div></section><section class="section" id="creating-a-shared-mount-point-duplicate_sharing-a-mount-on-multiple-mount-points"><div class="titlepage"><div><div><h3 class="title">12.7.3. Creating a shared mount point duplicate</h3></div></div></div><p>
					This procedure duplicates a mount point as a shared mount. File systems that you later mount under the original directory or the duplicate are always reflected in the other.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a virtual file system (VFS) node from the original mount point:
						</p><pre class="screen"># mount --bind <span class="emphasis"><em><span class="replaceable replaceable">original-dir</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">original-dir</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Mark the original mount point as shared:
						</p><pre class="screen"># mount --make-shared <span class="emphasis"><em><span class="replaceable replaceable">original-dir</span></em></span></pre><p class="simpara">
							Alternatively, to change the mount type for the selected mount point and all mount points under it, use the <code class="literal option">--make-rshared</code> option instead of <code class="literal option">--make-shared</code>.
						</p></li><li class="listitem"><p class="simpara">
							Create the duplicate:
						</p><pre class="screen"># mount --bind <span class="emphasis"><em><span class="replaceable replaceable">original-dir</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">duplicate-dir</span></em></span></pre></li></ol></div><div class="example" id="idm140591306139168"><p class="title"><strong>Example 12.6. Duplicating /media into /mnt as a shared mount point</strong></p><div class="example-contents"><p>
						To make the <code class="literal filename">/media</code> and <code class="literal filename">/mnt</code> directories share the same content:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a VFS node from the <code class="literal filename">/media</code> directory:
							</p><pre class="screen"># mount --bind /media /media</pre></li><li class="listitem"><p class="simpara">
								Mark the <code class="literal filename">/media</code> directory as shared:
							</p><pre class="screen"># mount --make-shared /media</pre></li><li class="listitem"><p class="simpara">
								Create its duplicate in <code class="literal filename">/mnt</code>:
							</p><pre class="screen"># mount --bind /media /mnt</pre></li><li class="listitem"><p class="simpara">
								It is now possible to verify that a mount within <code class="literal filename">/media</code> also appears in <code class="literal filename">/mnt</code>. For example, if the CD-ROM drive contains non-empty media and the <code class="literal filename">/media/cdrom/</code> directory exists, use:
							</p><pre class="screen"># mount /dev/cdrom /media/cdrom
# ls /media/cdrom
EFI  GPL  isolinux  LiveOS
# ls /mnt/cdrom
EFI  GPL  isolinux  LiveOS</pre></li><li class="listitem"><p class="simpara">
								Similarly, it is possible to verify that any file system mounted in the <code class="literal filename">/mnt</code> directory is reflected in <code class="literal filename">/media</code>. For instance, if a non-empty USB flash drive that uses the <code class="literal filename">/dev/sdc1</code> device is plugged in and the <code class="literal filename">/mnt/flashdisk/</code> directory is present, use:
							</p><pre class="screen"># mount /dev/sdc1 /mnt/flashdisk
# ls /media/flashdisk
en-US  publican.cfg
# ls /mnt/flashdisk
en-US  publican.cfg</pre></li></ol></div></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">mount(8)</code> man page.
						</li></ul></div></section><section class="section" id="creating-a-slave-mount-point-duplicate_sharing-a-mount-on-multiple-mount-points"><div class="titlepage"><div><div><h3 class="title">12.7.4. Creating a slave mount point duplicate</h3></div></div></div><p>
					This procedure duplicates a mount point as a slave mount. File systems that you later mount under the original mount point are reflected in the duplicate but not the other way around.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a virtual file system (VFS) node from the original mount point:
						</p><pre class="screen"># mount --bind <span class="emphasis"><em><span class="replaceable replaceable">original-dir</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">original-dir</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Mark the original mount point as shared:
						</p><pre class="screen"># mount --make-shared <span class="emphasis"><em><span class="replaceable replaceable">original-dir</span></em></span></pre><p class="simpara">
							Alternatively, to change the mount type for the selected mount point and all mount points under it, use the <code class="literal option">--make-rshared</code> option instead of <code class="literal option">--make-shared</code>.
						</p></li><li class="listitem"><p class="simpara">
							Create the duplicate and mark it as slave:
						</p><pre class="screen"># mount --bind <span class="emphasis"><em><span class="replaceable replaceable">original-dir</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">duplicate-dir</span></em></span>
# mount --make-slave <span class="emphasis"><em><span class="replaceable replaceable">duplicate-dir</span></em></span></pre></li></ol></div><div class="example" id="idm140591303283536"><p class="title"><strong>Example 12.7. Duplicating /media into /mnt as a slave mount point</strong></p><div class="example-contents"><p>
						This example shows how to get the content of the <code class="literal filename">/media</code> directory to appear in <code class="literal filename">/mnt</code> as well, but without any mounts in the <code class="literal filename">/mnt</code> directory to be reflected in <code class="literal filename">/media</code>.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a VFS node from the <code class="literal filename">/media</code> directory:
							</p><pre class="screen"># mount --bind /media /media</pre></li><li class="listitem"><p class="simpara">
								Mark the <code class="literal filename">/media</code> directory as shared:
							</p><pre class="screen"># mount --make-shared /media</pre></li><li class="listitem"><p class="simpara">
								Create its duplicate in <code class="literal filename">/mnt</code> and mark it as slave:
							</p><pre class="screen"># mount --bind /media /mnt
# mount --make-slave /mnt</pre></li><li class="listitem"><p class="simpara">
								Verify that a mount within <code class="literal filename">/media</code> also appears in <code class="literal filename">/mnt</code>. For example, if the CD-ROM drive contains non-empty media and the <code class="literal filename">/media/cdrom/</code> directory exists, use:
							</p><pre class="screen"># mount /dev/cdrom /media/cdrom
# ls /media/cdrom
EFI  GPL  isolinux  LiveOS
# ls /mnt/cdrom
EFI  GPL  isolinux  LiveOS</pre></li><li class="listitem"><p class="simpara">
								Also verify that file systems mounted in the <code class="literal filename">/mnt</code> directory are not reflected in <code class="literal filename">/media</code>. For instance, if a non-empty USB flash drive that uses the <code class="literal filename">/dev/sdc1</code> device is plugged in and the <code class="literal filename">/mnt/flashdisk/</code> directory is present, use:
							</p><pre class="screen"># mount /dev/sdc1 /mnt/flashdisk
# ls /media/flashdisk
# ls /mnt/flashdisk
en-US  publican.cfg</pre></li></ol></div></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">mount(8)</code> man page.
						</li></ul></div></section><section class="section" id="preventing-a-mount-point-from-being-duplicated_sharing-a-mount-on-multiple-mount-points"><div class="titlepage"><div><div><h3 class="title">12.7.5. Preventing a mount point from being duplicated</h3></div></div></div><p>
					This procedure marks a mount point as unbindable so that it is not possible to duplicate it in another mount point.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To change the type of a mount point to an unbindable mount, use:
						</p><pre class="screen"># mount --bind <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span>
# mount --make-unbindable <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre><p class="simpara">
							Alternatively, to change the mount type for the selected mount point and all mount points under it, use the <code class="literal option">--make-runbindable</code> option instead of <code class="literal option">--make-unbindable</code>.
						</p><p class="simpara">
							Any subsequent attempt to make a duplicate of this mount fails with the following error:
						</p><pre class="screen"># mount --bind <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">duplicate-dir</span></em></span>

mount: wrong fs type, bad option, bad superblock on <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span>,
missing codepage or helper program, or other error
In some cases useful info is found in syslog - try
dmesg | tail  or so</pre></li></ul></div><div class="example" id="idm140591305013360"><p class="title"><strong>Example 12.8. Preventing /media from being duplicated</strong></p><div class="example-contents"><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To prevent the <code class="literal filename">/media</code> directory from being shared, use:
							</p><pre class="screen"># mount --bind /media /media
# mount --make-unbindable /media</pre></li></ul></div></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">mount(8)</code> man page.
						</li></ul></div></section><section class="section" id="related-information-sharing-a-mount-on-multiple-mount-points"><div class="titlepage"><div><div><h3 class="title">12.7.6. Related information</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="emphasis"><em>Shared subtrees</em></span> article on Linux Weekly News: <a class="link" href="https://lwn.net/Articles/159077/">https://lwn.net/Articles/159077/</a>.
						</li></ul></div></section></section><section class="section" id="assembly_persistently-mounting-file-systems_assembly_mounting-file-systems"><div class="titlepage"><div><div><h2 class="title">12.8. Persistently mounting file systems</h2></div></div></div><p>
				As a system administrator, you can persistently mount file systems to configure non-removable storage.
			</p><section class="section" id="con_the-etc-fstab-file_assembly_persistently-mounting-file-systems"><div class="titlepage"><div><div><h3 class="title">12.8.1. The /etc/fstab file</h3></div></div></div><p>
					This section describes the <code class="literal filename">/etc/fstab</code> configuration file, which controls persistent mount points of file systems. Using <code class="literal filename">/etc/fstab</code> is the recommended way to persistently mount file systems.
				</p><p>
					Each line in the <code class="literal filename">/etc/fstab</code> file defines a mount point of a file system. It includes six fields separated by white space:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							The block device identified by a persistent attribute or a path it the <code class="literal">/dev</code> directory.
						</li><li class="listitem">
							The directory where the device will be mounted.
						</li><li class="listitem">
							The file system on the device.
						</li><li class="listitem">
							Mount options for the file system. The option <code class="literal">defaults</code> means that the partition is mounted at boot time with default options. This section also recognizes <code class="literal">systemd</code> mount unit options in the <code class="literal">x-systemd.<span class="emphasis"><em><span class="replaceable replaceable">option</span></em></span></code> format.
						</li><li class="listitem">
							Backup option for the <code class="literal">dump</code> utility.
						</li><li class="listitem">
							Check order for the <code class="literal">fsck</code> utility.
						</li></ol></div><div class="example" id="idm140591303190944"><p class="title"><strong>Example 12.9. The <code class="literal filename">/boot</code> file system in <code class="literal filename">/etc/fstab</code></strong></p><div class="example-contents"><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 29%; " class="col_1"><!--Empty--></col><col style="width: 14%; " class="col_2"><!--Empty--></col><col style="width: 14%; " class="col_3"><!--Empty--></col><col style="width: 14%; " class="col_4"><!--Empty--></col><col style="width: 14%; " class="col_5"><!--Empty--></col><col style="width: 14%; " class="col_6"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140591303180672" scope="col">Block device</th><th align="left" valign="top" id="idm140591303179584" scope="col">Mount point</th><th align="left" valign="top" id="idm140591303178496" scope="col">File system</th><th align="left" valign="top" id="idm140591303177408" scope="col">Options</th><th align="left" valign="top" id="idm140591303176320" scope="col">Backup</th><th align="left" valign="top" id="idm140591303175232" scope="col">Check</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140591303180672"> <p>
										<code class="literal">UUID=ea74bbec-536d-490c-b8d9-5b40bbd7545b</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140591303179584"> <p>
										<code class="literal">/boot</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140591303178496"> <p>
										<code class="literal">xfs</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140591303177408"> <p>
										<code class="literal">defaults</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140591303176320"> <p>
										<code class="literal">0</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140591303175232"> <p>
										<code class="literal">0</code>
									</p>
									 </td></tr></tbody></table></div></div></div><p>
					The <code class="literal">systemd</code> service automatically generates mount units from entries in <code class="literal filename">/etc/fstab</code>.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">fstab(5)</code> man page.
						</li><li class="listitem">
							The <span class="emphasis"><em>fstab</em></span> section of the <code class="literal">systemd.mount(5)</code> man page.
						</li></ul></div></section><section class="section" id="adding-a-file-system-to-etc-fstab_assembly_persistently-mounting-file-systems"><div class="titlepage"><div><div><h3 class="title">12.8.2. Adding a file system to /etc/fstab</h3></div></div></div><p>
					This procedure describes how to configure persistent mount point for a file system in the <code class="literal filename">/etc/fstab</code> configuration file.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Find out the UUID attribute of the file system:
						</p><pre class="screen">$ lsblk --fs <span class="emphasis"><em><span class="replaceable replaceable">storage-device</span></em></span></pre><p class="simpara">
							For example:
						</p><div class="example" id="idm140591303570272"><p class="title"><strong>Example 12.10. Viewing the UUID of a partition</strong></p><div class="example-contents"><pre class="screen">$ lsblk --fs <span class="emphasis"><em><span class="replaceable replaceable">/dev/sda1</span></em></span>

NAME FSTYPE LABEL <span class="strong strong"><strong>UUID</strong></span>                                 MOUNTPOINT
sda1 xfs    Boot  <span class="strong strong"><strong>ea74bbec-536d-490c-b8d9-5b40bbd7545b</strong></span> /boot</pre></div></div></li><li class="listitem"><p class="simpara">
							If the mount point directory does not exist, create it:
						</p><pre class="screen"># mkdir --parents <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li><li class="listitem"><p class="simpara">
							As root, edit the <code class="literal filename">/etc/fstab</code> file and add a line for the file system, identified by the UUID.
						</p><p class="simpara">
							For example:
						</p><div class="example" id="idm140591303561744"><p class="title"><strong>Example 12.11. The /boot mount point in /etc/fstab</strong></p><div class="example-contents"><pre class="screen">UUID=ea74bbec-536d-490c-b8d9-5b40bbd7545b /boot xfs defaults 0 0</pre></div></div></li><li class="listitem"><p class="simpara">
							Regenerate mount units so that your system registers the new configuration:
						</p><pre class="screen"># systemctl daemon-reload</pre></li><li class="listitem"><p class="simpara">
							Try mounting the file system to verify that the configuration works:
						</p><pre class="screen"># mount <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Other persistent attributes that you can use to identify the file system: <a class="xref" href="index.html#con_device-names-managed-by-the-udev-mechanism-in-dev-disk-_assembly_overview-of-persistent-naming-attributes" title="8.3. Device names managed by the udev mechanism in /dev/disk/">Section 8.3, “Device names managed by the udev mechanism in /dev/disk/”</a>
						</li></ul></div></section><section class="section" id="persistently-mounting-a-file-system-using-rhel-system-roles_assembly_persistently-mounting-file-systems"><div class="titlepage"><div><div><h3 class="title">12.8.3. Persistently mounting a file system using RHEL System Roles</h3></div></div></div><p>
					This section describes how to persistently mount a file system using the <code class="literal">storage</code> role.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							An Ansible playbook that uses the <code class="literal">storage</code> role exists.
						</p><p class="simpara">
							For information on how to apply such a playbook, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/getting-started-with-system-administration_configuring-basic-system-settings#applying-a-role_what-rhel-system-roles-are">Applying a role</a>.
						</p></li></ul></div><section class="section" id="an-example-ansible-playbook-to-persistently-mount-a-file-system_persistently-mounting-a-file-system-using-rhel-system-roles"><div class="titlepage"><div><div><h4 class="title">12.8.3.1. Example Ansible playbook to persistently mount a file system</h4></div></div></div><p>
						This section provides an example Ansible playbook. This playbook applies the <code class="literal">storage</code> role to immediately and persistently mount an XFS file system.
					</p><pre class="literallayout">---
- hosts: all
  vars:
    storage_volumes:
      - name: barefs
        type: disk
        disks:
          - sdb
        fs_type: xfs
        mount_point: /mnt/data
  roles:
    - rhel-system-roles.storage</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Applying the storage role in this playbook adds the file system to the <code class="literal filename">/etc/fstab</code> file, and mounts the file system immediately. If the file system does not exist on the <code class="literal">/dev/sdb</code> disk device, it is created. If the mount point directory does not exist, it is created as well.
						</p></div></div></section><section class="section" id="additional_resources_2"><div class="titlepage"><div><div><h4 class="title">12.8.3.2. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								For more information about the <code class="literal">storage</code> role, see <a class="xref" href="index.html#storage-role-intro_managing-local-storage-using-rhel-system-roles" title="2.1. Introduction to the storage role">Section 2.1, “Introduction to the storage role”</a>.
							</li></ul></div></section></section></section><section class="section" id="assembly_mounting-file-systems-on-demand_assembly_mounting-file-systems"><div class="titlepage"><div><div><h2 class="title">12.9. Mounting file systems on demand</h2></div></div></div><p>
				As a system administrator, you can configure file systems, such as NFS, to mount automatically on demand.
			</p><section class="section" id="the-autofs-service_assembly_mounting-file-systems-on-demand"><div class="titlepage"><div><div><h3 class="title">12.9.1. The autofs service</h3></div></div></div><p>
					This section explains the benefits and basic concepts of the <code class="literal">autofs</code> service, used to mount file systems on demand.
				</p><p>
					One drawback of permanent mounting using the <code class="literal filename">/etc/fstab</code> configuration is that, regardless of how infrequently a user accesses the mounted file system, the system must dedicate resources to keep the mounted file system in place. This might affect system performance when, for example, the system is maintaining NFS mounts to many systems at one time.
				</p><p>
					An alternative to <code class="literal filename">/etc/fstab</code> is to use the kernel-based <code class="literal">autofs</code> service. It consists of the following components:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							A kernel module that implements a file system, and
						</li><li class="listitem">
							A user-space service that performs all of the other functions.
						</li></ul></div><p>
					The <code class="literal">autofs</code> service can mount and unmount file systems automatically (on-demand), therefore saving system resources. It can be used to mount file systems such as NFS, AFS, SMBFS, CIFS, and local file systems.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">autofs(8)</code> man page.
						</li></ul></div></section><section class="section" id="the-autofs-configuration-files_assembly_mounting-file-systems-on-demand"><div class="titlepage"><div><div><h3 class="title">12.9.2. The autofs configuration files</h3></div></div></div><p>
					This section describes the usage and syntax of configuration files used by the <code class="literal">autofs</code> service.
				</p><h5 id="the_master_map_file">The master map file</h5><p>
					The <code class="literal">autofs</code> service uses <code class="literal filename">/etc/auto.master</code> (master map) as its default primary configuration file. This can be changed to use another supported network source and name using the <code class="literal">autofs</code> configuration in the <code class="literal filename">/etc/autofs.conf</code> configuration file in conjunction with the Name Service Switch (NSS) mechanism.
				</p><p>
					All on-demand mount points must be configured in the master map. Mount point, host name, exported directory, and options can all be specified in a set of files (or other supported network sources) rather than configuring them manually for each host.
				</p><p>
					The master map file lists mount points controlled by <code class="literal">autofs</code>, and their corresponding configuration files or network sources known as automount maps. The format of the master map is as follows:
				</p><pre class="screen"><span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span>  <span class="emphasis"><em><span class="replaceable replaceable">map-name</span></em></span>  <span class="emphasis"><em><span class="replaceable replaceable">options</span></em></span></pre><p>
					The variables used in this format are:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></span></dt><dd>
								The <code class="literal">autofs</code> mount point; for example, <code class="literal filename">/mnt/data/</code>.
							</dd><dt><span class="term"><span class="emphasis"><em><span class="replaceable replaceable">map-file</span></em></span></span></dt><dd>
								The map source file, which contains a list of mount points and the file system location from which those mount points should be mounted.
							</dd><dt><span class="term"><span class="emphasis"><em><span class="replaceable replaceable">options</span></em></span></span></dt><dd>
								If supplied, these apply to all entries in the given map, if they do not themselves have options specified.
							</dd></dl></div><div class="example" id="idm140591306626960"><p class="title"><strong>Example 12.12. The /etc/auto.master file</strong></p><div class="example-contents"><p>
						The following is a sample line from <code class="literal filename">/etc/auto.master</code> file:
					</p><pre class="screen">/mnt/data  /etc/auto.data</pre></div></div><h5 id="map_files">Map files</h5><p>
					Map files configure the properties of individual on-demand mount points.
				</p><p>
					The automounter creates the directories if they do not exist. If the directories exist before the automounter was started, the automounter will not remove them when it exits. If a timeout is specified, the directory is automatically unmounted if the directory is not accessed for the timeout period.
				</p><p>
					The general format of maps is similar to the master map. However, the options field appears between the mount point and the location instead of at the end of the entry as in the master map:
				</p><pre class="screen"><span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span>  <span class="emphasis"><em><span class="replaceable replaceable">options</span></em></span>  <span class="emphasis"><em><span class="replaceable replaceable">location</span></em></span></pre><p>
					The variables used in this format are:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></span></dt><dd>
								This refers to the <code class="literal">autofs</code> mount point. This can be a single directory name for an indirect mount or the full path of the mount point for direct mounts. Each direct and indirect map entry key (<span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span>) can be followed by a space separated list of offset directories (subdirectory names each beginning with <code class="literal">/</code>) making them what is known as a multi-mount entry.
							</dd><dt><span class="term"><span class="emphasis"><em><span class="replaceable replaceable">options</span></em></span></span></dt><dd>
								When supplied, these are the mount options for the map entries that do not specify their own options. This field is optional.
							</dd><dt><span class="term"><span class="emphasis"><em><span class="replaceable replaceable">location</span></em></span></span></dt><dd>
								This refers to the file system location such as a local file system path (preceded with the Sun map format escape character <code class="literal">:</code> for map names beginning with <code class="literal">/</code>), an NFS file system or other valid file system location.
							</dd></dl></div><div class="example" id="idm140591303910848"><p class="title"><strong>Example 12.13. A map file</strong></p><div class="example-contents"><p>
						The following is a sample from a map file; for example, <code class="literal filename">/etc/auto.misc</code>:
					</p><pre class="screen">payroll  -fstype=nfs4  personnel:/dev/disk/by-uuid/52b94495-e106-4f29-b868-fe6f6c2789b1
sales    -fstype=xfs   :/dev/disk/by-uuid/5564ed00-6aac-4406-bfb4-c59bf5de48b5</pre><p>
						The first column in the map file indicates the <code class="literal">autofs</code> mount point: <code class="literal">sales</code> and <code class="literal">payroll</code> from the server called <code class="literal">personnel</code>. The second column indicates the options for the <code class="literal">autofs</code> mount. The third column indicates the source of the mount.
					</p><p>
						Following the given configuration, the <code class="literal">autofs</code> mount points will be <code class="literal">/home/payroll</code> and <code class="literal">/home/sales</code>. The <code class="literal option">-fstype=</code> option is often omitted and is generally not needed for correct operation.
					</p><p>
						Using the given configuration, if a process requires access to an <code class="literal">autofs</code> unmounted directory such as <code class="literal filename">/home/payroll/2006/July.sxc</code>, the <code class="literal">autofs</code> service automatically mounts the directory.
					</p></div></div><h5 id="the_amd_map_format">The amd map format</h5><p>
					The <code class="literal">autofs</code> service recognizes map configuration in the <code class="literal">amd</code> format as well. This is useful if you want to reuse existing automounter configuration written for the <code class="literal">am-utils</code> service, which has been removed from Red Hat Enterprise Linux.
				</p><p>
					However, Red Hat recommends using the simpler <code class="literal">autofs</code> format described in the previous sections.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">autofs(5)</code>, <code class="literal">autofs.conf(5)</code>, and <code class="literal">auto.master(5)</code> man pages.
						</li><li class="listitem">
							For details on the <code class="literal">amd</code> map format, see the <code class="literal filename">/usr/share/doc/autofs/README.amd-maps</code> file, which is provided by the <code class="literal package">autofs</code> package.
						</li></ul></div></section><section class="section" id="configuring-autofs-mount-points_assembly_mounting-file-systems-on-demand"><div class="titlepage"><div><div><h3 class="title">12.9.3. Configuring autofs mount points</h3></div></div></div><p>
					This procedure describes how to configure on-demand mount points using the <code class="literal">autofs</code> service.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Install the <code class="literal package">autofs</code> package:
						</p><pre class="screen"># yum install autofs</pre></li><li class="listitem"><p class="simpara">
							Start and enable the <code class="literal">autofs</code> service:
						</p><pre class="screen"># systemctl enable --now autofs</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Create a map file for the on-demand mount point, located at <code class="literal filename">/etc/auto.<span class="emphasis"><em><span class="replaceable replaceable">identifier</span></em></span></code>. Replace <span class="emphasis"><em><span class="replaceable replaceable">identifier</span></em></span> with a name that identifies the mount point.
						</li><li class="listitem">
							In the map file, fill in the mount point, options, and location fields as described in <a class="xref" href="index.html#the-autofs-configuration-files_assembly_mounting-file-systems-on-demand" title="12.9.2. The autofs configuration files">Section 12.9.2, “The autofs configuration files”</a>.
						</li><li class="listitem">
							Register the map file in the master map file, as described in <a class="xref" href="index.html#the-autofs-configuration-files_assembly_mounting-file-systems-on-demand" title="12.9.2. The autofs configuration files">Section 12.9.2, “The autofs configuration files”</a>.
						</li><li class="listitem"><p class="simpara">
							Try accessing content in the on-demand directory:
						</p><pre class="screen">$ ls <span class="emphasis"><em><span class="replaceable replaceable">automounted-directory</span></em></span></pre></li></ol></div></section><section class="section" id="automounting-user-home-directories-with-autofs-service_assembly_mounting-file-systems-on-demand"><div class="titlepage"><div><div><h3 class="title">12.9.4. Automounting NFS server user home directories with autofs service</h3></div></div></div><p>
					This procedure describes how to configure the autofs service to mount user home directories automatically.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="strong strong"><strong><span class="package package">autofs</span></strong></span> package is installed.
						</li><li class="listitem">
							The <span class="strong strong"><strong><span class="service service">autofs</span></strong></span> service is enabled and running.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Specify the mount point and location of the map file by editing the <code class="literal filename">/etc/auto.master</code> file on a server on which you need to mount user home directories. To do so, add the following line into the <code class="literal filename">/etc/auto.master</code> file:
						</p><pre class="screen">/home /etc/auto.home</pre></li><li class="listitem"><p class="simpara">
							Create a map file with the name of <code class="literal filename">/etc/auto.home</code> on a server on which you need to mount user home directories, and edit the file with the following parameters:
						</p><pre class="screen">* -fstype=nfs,rw,sync <span class="emphasis"><em>host.example.com</em></span>:/home/&amp;i</pre><p class="simpara">
							You can skip <code class="literal"><span class="emphasis"><em>fstype</em></span></code> parameter, as it is <code class="literal"><span class="emphasis"><em>nfs</em></span></code> by default. For more information, see <code class="literal">autofs(5)</code> man page.
						</p></li><li class="listitem"><p class="simpara">
							Reload the <code class="literal service">autofs</code> service:
						</p><pre class="screen"># systemctl reload autofs</pre></li></ol></div></section><section class="section" id="overriding-or-augmenting-autofs-site-configuration-files_assembly_mounting-file-systems-on-demand"><div class="titlepage"><div><div><h3 class="title">12.9.5. Overriding or augmenting autofs site configuration files</h3></div></div></div><p>
					It is sometimes useful to override site defaults for a specific mount point on a client system.
				</p><div class="example" id="idm140591306358224"><p class="title"><strong>Example 12.14. Initial conditions</strong></p><div class="example-contents"><p>
						For example, consider the following conditions:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Automounter maps are stored in NIS and the <code class="literal filename">/etc/nsswitch.conf</code> file has the following directive:
							</p><pre class="screen">automount:    files nis</pre></li><li class="listitem"><p class="simpara">
								The <code class="literal">auto.master</code> file contains:
							</p><pre class="screen">+auto.master</pre></li><li class="listitem"><p class="simpara">
								The NIS <code class="literal">auto.master</code> map file contains:
							</p><pre class="screen">/home auto.home</pre></li><li class="listitem"><p class="simpara">
								The NIS <code class="literal">auto.home</code> map contains:
							</p><pre class="screen">beth    fileserver.example.com:/export/home/beth
joe     fileserver.example.com:/export/home/joe
*       fileserver.example.com:/export/home/&amp;</pre></li><li class="listitem">
								The file map <code class="literal filename">/etc/auto.home</code> does not exist.
							</li></ul></div></div></div><div class="example" id="idm140591306346272"><p class="title"><strong>Example 12.15. Mounting home directories from a different server</strong></p><div class="example-contents"><p>
						Given the preceding conditions, let’s assume that the client system needs to override the NIS map <code class="literal">auto.home</code> and mount home directories from a different server.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								In this case, the client needs to use the following <code class="literal filename">/etc/auto.master</code> map:
							</p><pre class="screen">/home ­/etc/auto.home
+auto.master</pre></li><li class="listitem"><p class="simpara">
								The <code class="literal filename">/etc/auto.home</code> map contains the entry:
							</p><pre class="screen">*    host.example.com:/export/home/&amp;</pre></li></ul></div><p>
						Because the automounter only processes the first occurrence of a mount point, the <code class="literal filename">/home</code> directory contains the content of <code class="literal filename">/etc/auto.home</code> instead of the NIS <code class="literal">auto.home</code> map.
					</p></div></div><div class="example" id="idm140591305884672"><p class="title"><strong>Example 12.16. Augmenting auto.home with only selected entries</strong></p><div class="example-contents"><p>
						Alternatively, to augment the site-wide <code class="literal">auto.home</code> map with just a few entries:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create an <code class="literal filename">/etc/auto.home</code> file map, and in it put the new entries. At the end, include the NIS <code class="literal">auto.home</code> map. Then the <code class="literal filename">/etc/auto.home</code> file map looks similar to:
							</p><pre class="screen">mydir someserver:/export/mydir
+auto.home</pre></li><li class="listitem"><p class="simpara">
								With these NIS <code class="literal">auto.home</code> map conditions, listing the content of the <code class="literal filename">/home</code> directory outputs:
							</p><pre class="screen">$ ls /home

beth joe mydir</pre></li></ol></div><p>
						This last example works as expected because <code class="literal">autofs</code> does not include the contents of a file map of the same name as the one it is reading. As such, <code class="literal">autofs</code> moves on to the next map source in the <code class="literal">nsswitch</code> configuration.
					</p></div></div></section><section class="section" id="using-ldap-to-store-automounter-maps_assembly_mounting-file-systems-on-demand"><div class="titlepage"><div><div><h3 class="title">12.9.6. Using LDAP to store automounter maps</h3></div></div></div><p>
					This procedure configures <code class="literal">autofs</code> to store automounter maps in LDAP configuration rather than in <code class="literal">autofs</code> map files.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							LDAP client libraries must be installed on all systems configured to retrieve automounter maps from LDAP. On Red Hat Enterprise Linux, the <code class="literal package">openldap</code> package should be installed automatically as a dependency of the <code class="literal package">autofs</code> package.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							To configure LDAP access, modify the <code class="literal filename">/etc/openldap/ldap.conf</code> file. Ensure that the <code class="literal">BASE</code>, <code class="literal">URI</code>, and <code class="literal">schema</code> options are set appropriately for your site.
						</li><li class="listitem"><p class="simpara">
							The most recently established schema for storing automount maps in LDAP is described by the <code class="literal">rfc2307bis</code> draft. To use this schema, set it in the <code class="literal filename">/etc/autofs.conf</code> configuration file by removing the comment characters from the schema definition. For example:
						</p><div class="example" id="idm140591305859856"><p class="title"><strong>Example 12.17. Setting autofs configuration</strong></p><div class="example-contents"><pre class="screen">DEFAULT_MAP_OBJECT_CLASS="automountMap"
DEFAULT_ENTRY_OBJECT_CLASS="automount"
DEFAULT_MAP_ATTRIBUTE="automountMapName"
DEFAULT_ENTRY_ATTRIBUTE="automountKey"
DEFAULT_VALUE_ATTRIBUTE="automountInformation"</pre></div></div></li><li class="listitem"><p class="simpara">
							Ensure that all other schema entries are commented in the configuration. The <code class="literal">automountKey</code> attribute replaces the <code class="literal">cn</code> attribute in the <code class="literal">rfc2307bis</code> schema. Following is an example of an LDAP Data Interchange Format (LDIF) configuration:
						</p><div class="example" id="idm140591302915856"><p class="title"><strong>Example 12.18. LDF Configuration</strong></p><div class="example-contents"><pre class="screen"># extended LDIF
#
# LDAPv3
# base &lt;&gt; with scope subtree
# filter: (&amp;(objectclass=automountMap)(automountMapName=auto.master))
# requesting: ALL
#

# auto.master, example.com
dn: automountMapName=auto.master,dc=example,dc=com
objectClass: top
objectClass: automountMap
automountMapName: auto.master

# extended LDIF
#
# LDAPv3
# base &lt;automountMapName=auto.master,dc=example,dc=com&gt; with scope subtree
# filter: (objectclass=automount)
# requesting: ALL
#

# /home, auto.master, example.com
dn: automountMapName=auto.master,dc=example,dc=com
objectClass: automount
cn: /home

automountKey: /home
automountInformation: auto.home

# extended LDIF
#
# LDAPv3
# base &lt;&gt; with scope subtree
# filter: (&amp;(objectclass=automountMap)(automountMapName=auto.home))
# requesting: ALL
#

# auto.home, example.com
dn: automountMapName=auto.home,dc=example,dc=com
objectClass: automountMap
automountMapName: auto.home

# extended LDIF
#
# LDAPv3
# base &lt;automountMapName=auto.home,dc=example,dc=com&gt; with scope subtree
# filter: (objectclass=automount)
# requesting: ALL
#

# foo, auto.home, example.com
dn: automountKey=foo,automountMapName=auto.home,dc=example,dc=com
objectClass: automount
automountKey: foo
automountInformation: filer.example.com:/export/foo

# /, auto.home, example.com
dn: automountKey=/,automountMapName=auto.home,dc=example,dc=com
objectClass: automount
automountKey: /
automountInformation: filer.example.com:/export/&amp;</pre></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">rfc2307bis</code> draft: <a class="link" href="https://tools.ietf.org/html/draft-howard-rfc2307bis">https://tools.ietf.org/html/draft-howard-rfc2307bis</a>.
						</li></ul></div></section></section><section class="section" id="setting-read-only-permissions-for-the-root-file-system_assembly_mounting-file-systems"><div class="titlepage"><div><div><h2 class="title">12.10. Setting read-only permissions for the root file system</h2></div></div></div><p>
				Sometimes, you need to mount the root file system (<code class="literal filename">/</code>) with read-only permissions. Example use cases include enhancing security or ensuring data integrity after an unexpected system power-off.
			</p><section class="section" id="files-and-directories-that-always-retain-write-permissions_setting-read-only-permissions-for-the-root-file-system"><div class="titlepage"><div><div><h3 class="title">12.10.1. Files and directories that always retain write permissions</h3></div></div></div><p>
					For the system to function properly, some files and directories need to retain write permissions. When the root file system is mounted in read-only mode, these files are mounted in RAM using the <code class="literal">tmpfs</code> temporary file system.
				</p><p>
					The default set of such files and directories is read from the <code class="literal filename">/etc/rwtab</code> file, which contains:
				</p><pre class="screen">dirs	/var/cache/man
dirs	/var/gdm
<span class="emphasis"><em>&lt;content truncated&gt;</em></span>

empty	/tmp
empty	/var/cache/foomatic
<span class="emphasis"><em>&lt;content truncated&gt;</em></span>

files	/etc/adjtime
files	/etc/ntp.conf
<span class="emphasis"><em>&lt;content truncated&gt;</em></span></pre><p>
					Entries in the <code class="literal filename">/etc/rwtab</code> file follow this format:
				</p><pre class="screen"><span class="emphasis"><em><span class="replaceable replaceable">copy-method</span></em></span>    <span class="emphasis"><em><span class="replaceable replaceable">path</span></em></span></pre><p>
					In this syntax:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Replace <span class="emphasis"><em><span class="replaceable replaceable">copy-method</span></em></span> with one of the keywords specifying how the file or directory is copied to tmpfs.
						</li><li class="listitem">
							Replace <span class="emphasis"><em><span class="replaceable replaceable">path</span></em></span> with the path to the file or directory.
						</li></ul></div><p>
					The <code class="literal filename">/etc/rwtab</code> file recognizes the following ways in which a file or directory can be copied to <code class="literal">tmpfs</code>:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">empty</code></span></dt><dd><p class="simpara">
								An empty path is copied to <code class="literal">tmpfs</code>. For example:
							</p><pre class="screen">empty /tmp</pre></dd><dt><span class="term"><code class="literal">dirs</code></span></dt><dd><p class="simpara">
								A directory tree is copied to <code class="literal">tmpfs</code>, empty. For example:
							</p><pre class="screen">dirs /var/run</pre></dd><dt><span class="term"><code class="literal">files</code></span></dt><dd><p class="simpara">
								A file or a directory tree is copied to <code class="literal">tmpfs</code> intact. For example:
							</p><pre class="screen">files /etc/resolv.conf</pre></dd></dl></div><p>
					The same format applies when adding custom paths to <code class="literal filename">/etc/rwtab.d/</code>.
				</p></section><section class="section" id="configuring-the-root-file-system-to-mount-with-read-only-permissions-on-boot_setting-read-only-permissions-for-the-root-file-system"><div class="titlepage"><div><div><h3 class="title">12.10.2. Configuring the root file system to mount with read-only permissions on boot</h3></div></div></div><p>
					With this procedure, the root file system is mounted read-only on all following boots.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <code class="literal filename">/etc/sysconfig/readonly-root</code> file, set the <code class="literal option">READONLY</code> option to <code class="literal">yes</code>:
						</p><pre class="screen"># Set to 'yes' to mount the file systems as read-only.
READONLY=yes</pre></li><li class="listitem"><p class="simpara">
							Add the <code class="literal option">ro</code> option in the root entry (<code class="literal filename">/</code>) in the <code class="literal filename">/etc/fstab</code> file:
						</p><pre class="screen">/dev/mapper/luks-c376919e...  /  xfs  x-systemd.device-timeout=0,<span class="strong strong"><strong>ro</strong></span>  1  1</pre></li><li class="listitem"><p class="simpara">
							Add the <code class="literal option">ro</code> option to the <code class="literal">GRUB_CMDLINE_LINUX</code> directive in the <code class="literal filename">/etc/default/grub</code> file and ensure that the directive does not contain <code class="literal">rw</code>:
						</p><pre class="screen">GRUB_CMDLINE_LINUX="rhgb quiet... <span class="strong strong"><strong>ro</strong></span>"</pre></li><li class="listitem"><p class="simpara">
							Recreate the GRUB2 configuration file:
						</p><pre class="screen"># grub2-mkconfig -o /boot/grub2/grub.cfg</pre></li><li class="listitem"><p class="simpara">
							If you need to add files and directories to be mounted with write permissions in the <code class="literal">tmpfs</code> file system, create a text file in the <code class="literal filename">/etc/rwtab.d/</code> directory and put the configuration there.
						</p><p class="simpara">
							For example, to mount the <code class="literal filename">/etc/example/file</code> file with write permissions, add this line to the <code class="literal filename">/etc/rwtab.d/example</code> file:
						</p><pre class="screen">files /etc/example/file</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								Changes made to files and directories in <code class="literal">tmpfs</code> do not persist across boots.
							</p></div></div></li><li class="listitem">
							Reboot the system to apply the changes.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If you mount the root file system with read-only permissions by mistake, you can remount it with read-and-write permissions again using the following command:
						</p><pre class="screen"># mount -o remount,rw /</pre></li></ul></div></section></section></section><section class="chapter" id="limiting-storage-space-usage-with-quotas_managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 13. Limiting storage space usage with quotas</h1></div></div></div><p>
			You can restrict the amount of disk space available to users or groups by implementing disk quotas. You can also define a warning level at which system administrators are informed before a user consumes too much disk space or a partition becomes full.
		</p><section class="section" id="disk-quotas_limiting-storage-space-usage-with-quotas"><div class="titlepage"><div><div><h2 class="title">13.1. Disk quotas</h2></div></div></div><p>
				In most computing environments, disk space is not infinite. The quota subsystem provides a mechanism to control usage of disk space.
			</p><p>
				You can configure disk quotas for individual users as well as user groups on the local file systems. This makes it possible to manage the space allocated for user-specific files (such as email) separately from the space allocated to the projects that a user works on. The quota subsystem warns users when they exceed their allotted limit, but allows some extra space for current work (hard limit/soft limit).
			</p><p>
				If quotas are implemented, you need to check if the quotas are exceeded and make sure the quotas are accurate. If users repeatedly exceed their quotas or consistently reach their soft limits, a system administrator can either help the user determine how to use less disk space or increase the user’s disk quota.
			</p><p>
				You can set quotas to control:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The number of consumed disk blocks.
					</li><li class="listitem">
						The number of inodes, which are data structures that contain information about files in UNIX file systems. Because inodes store file-related information, this allows control over the number of files that can be created.
					</li></ul></div><section class="section" id="the-xfs_quota-tool_disk-quotas"><div class="titlepage"><div><div><h3 class="title">13.1.1. The <code class="literal">xfs_quota</code> tool</h3></div></div></div><p>
					You can use the <code class="literal">xfs_quota</code> tool to manage quotas on XFS file systems. In addition, you can use XFS file systems with limit enforcement turned off as an effective disk usage accounting system.
				</p><p>
					The XFS quota system differs from other file systems in a number of ways. Most importantly, XFS considers quota information as file system metadata and uses journaling to provide a higher level guarantee of consistency.
				</p><h5 id="additional_resources_3">Additional resources</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">xfs_quota(8)</code> man page.
						</li></ul></div></section></section><section class="section" id="managing-file-system-quotas-in-xfs_limiting-storage-space-usage-with-quotas"><div class="titlepage"><div><div><h2 class="title">13.2. Managing XFS disk quotas</h2></div></div></div><p>
				You can use the <code class="literal">xfs_quota</code> tool to manage quotas in XFS and to configure limits for project-controlled directories.
			</p><p>
				Generic quota configuration tools (<code class="literal">quota</code>, <code class="literal">repquota</code>, and <code class="literal">edquota</code> for example) may also be used to manipulate XFS quotas. However, these tools cannot be used with XFS project quotas.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Red Hat recommends the use of <code class="literal">xfs_quota</code> over all other available tools.
				</p></div></div><section class="section" id="file-system-quota-management-in-xfs_file-system-quota-management-in-xfs"><div class="titlepage"><div><div><h3 class="title">13.2.1. File system quota management in XFS</h3></div></div></div><p>
					The XFS quota subsystem manages limits on disk space (blocks) and file (inode) usage. XFS quotas control or report on usage of these items on a user, group, or directory or project level. Group and project quotas are only mutually exclusive on older non-default XFS disk formats.
				</p><p>
					When managing on a per-directory or per-project basis, XFS manages the disk usage of directory hierarchies associated with a specific project.
				</p></section><section class="section" id="enabling-disk-quotas-for-xfs_file-system-quota-management-in-xfs"><div class="titlepage"><div><div><h3 class="title">13.2.2. Enabling disk quotas for XFS</h3></div></div></div><p>
					This procedure enables disk quotas for users, groups, and projects on an XFS file system. Once quotas are enabled, the <code class="literal">xfs_quota</code> tool can be used to set limits and report on disk usage.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Enable quotas for users:
						</p><pre class="screen"># mount -o uquota /dev/xvdb1 /xfs</pre><p class="simpara">
							Replace <code class="literal">uquota</code> with <code class="literal">uqnoenforce</code> to allow usage reporting without enforcing any limits.
						</p></li><li class="listitem"><p class="simpara">
							Enable quotas for groups:
						</p><pre class="screen"># mount -o gquota /dev/xvdb1 /xfs</pre><p class="simpara">
							Replace <code class="literal">gquota</code> with <code class="literal">gqnoenforce</code> to allow usage reporting without enforcing any limits.
						</p></li><li class="listitem"><p class="simpara">
							Enable quotas for projects:
						</p><pre class="screen"># mount -o pquota /dev/xvdb1 /xfs</pre><p class="simpara">
							Replace <code class="literal">pquota</code> with <code class="literal">pqnoenforce</code> to allow usage reporting without enforcing any limits.
						</p></li><li class="listitem"><p class="simpara">
							Alternatively, include the quota mount options in the <code class="literal">/etc/fstab</code> file. The following example shows entries in the <code class="literal">/etc/fstab</code> file to enable quotas for users, groups, and projects, respectively, on an XFS file system. These examples also mount the file system with read/write permissions:
						</p><pre class="screen"># vim /etc/fstab
/dev/xvdb1    /xfs    xfs    rw,quota       0  0
/dev/xvdb1    /xfs    xfs    rw,gquota      0  0
/dev/xvdb1    /xfs    xfs    rw,prjquota    0  0</pre><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									The <code class="literal">mount(8)</code> man page.
								</li><li class="listitem">
									The <code class="literal">xfs_quota(8)</code> man page.
								</li></ul></div></li></ol></div></section><section class="section" id="running-the-xfs_quota-tool_file-system-quota-management-in-xfs"><div class="titlepage"><div><div><h3 class="title">13.2.3. Reporting XFS usage</h3></div></div></div><p>
					You can use the <code class="literal">xfs_quota</code> tool to set limits and report on disk usage. By default, <code class="literal">xfs_quota</code> is run interactively, and in basic mode. Basic mode subcommands simply report usage, and are available to all users.
				</p><h5 id="prerequisites">Prerequisites</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Quotas have been enabled for the XFS file system. See <a class="link" href="index.html#enabling-disk-quotas-for-xfs_file-system-quota-management-in-xfs" title="13.2.2. Enabling disk quotas for XFS">Enabling disk quotas for XFS</a>.
						</li></ul></div><h5 id="procedure">Procedure</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start the <code class="literal">xfs_quota</code> shell:
						</p><pre class="screen"># xfs_quota</pre></li><li class="listitem"><p class="simpara">
							Show usage and limits for the given user:
						</p><pre class="screen"># xfs_quota&gt; quota <span class="emphasis"><em>username</em></span></pre></li><li class="listitem"><p class="simpara">
							Show free and used counts for blocks and inodes:
						</p><pre class="screen"># xfs_quota&gt; df</pre></li><li class="listitem"><p class="simpara">
							Run the help command to display the basic commands available with <code class="literal">xfs_quota</code>.
						</p><pre class="screen"># xfs_quota&gt; help</pre></li><li class="listitem"><p class="simpara">
							Specify <code class="literal">q</code> to exit <code class="literal">xfs_quota</code>.
						</p><pre class="screen"># xfs_quota&gt; q</pre></li></ol></div><h5 id="additional_resources_4">Additional resources</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">xfs_quota(8)</code> man page.
						</li></ul></div></section><section class="section" id="running-the-xfs_quota-tool-in-expert-mode_file-system-quota-management-in-xfs"><div class="titlepage"><div><div><h3 class="title">13.2.4. Modifying XFS quota limits</h3></div></div></div><p>
					Start the <code class="literal">xfs_quota</code> tool with the <code class="literal">-x</code> option to enable expert mode and run the administrator commands, which allow modifications to the quota system. The subcommands of this mode allow actual configuration of limits, and are available only to users with elevated privileges.
				</p><h5 id="prerequisites_2">Prerequisites</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Quotas have been enabled for the XFS file system. See <a class="link" href="index.html#enabling-disk-quotas-for-xfs_file-system-quota-management-in-xfs" title="13.2.2. Enabling disk quotas for XFS">Enabling disk quotas for XFS</a>.
						</li></ul></div><h5 id="procedure_2">Procedure</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start the <code class="literal">xfs_quota</code> shell with the <code class="literal">-x</code> option to enable expert mode:
						</p><pre class="screen"># xfs_quota -x</pre></li><li class="listitem"><p class="simpara">
							Report quota information for a specific file system:
						</p><pre class="screen"># xfs_quota&gt; report /<span class="emphasis"><em>path</em></span></pre><p class="simpara">
							For example, to display a sample quota report for <code class="literal">/home</code> (on <code class="literal">/dev/blockdevice</code>), use the command <code class="literal">report -h /home</code>. This displays output similar to the following:
						</p><pre class="screen">User quota on /home (/dev/blockdevice)
Blocks
User ID      Used   Soft   Hard Warn/Grace
---------- ---------------------------------
root            0      0      0  00 [------]
testuser   103.4G      0      0  00 [------]</pre></li><li class="listitem"><p class="simpara">
							Modify quota limits:
						</p><pre class="screen"># xfs_quota&gt; limit isoft=<span class="emphasis"><em>500m</em></span> ihard=<span class="emphasis"><em>700m</em></span> <span class="emphasis"><em>user</em></span> /<span class="emphasis"><em>path</em></span></pre><p class="simpara">
							For example, to set a soft and hard inode count limit of 500 and 700 respectively for user <code class="literal">john</code>, whose home directory is <code class="literal">/home/john</code>, use the following command:
						</p><pre class="screen"># xfs_quota -x -c 'limit isoft=500 ihard=700 john' /home/</pre><p class="simpara">
							In this case, pass <code class="literal">mount_point</code> which is the mounted xfs file system.
						</p></li><li class="listitem"><p class="simpara">
							Run the help command to display the expert commands available with <code class="literal">xfs_quota -x</code>:
						</p><pre class="screen"># xfs_quota&gt; help</pre><h5 id="additional_resources_5">Additional resources</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The <code class="literal">xfs_quota(8)</code> man page.
								</li></ul></div></li></ol></div></section><section class="section" id="setting-project-limits-for-xfs_file-system-quota-management-in-xfs"><div class="titlepage"><div><div><h3 class="title">13.2.5. Setting project limits for XFS</h3></div></div></div><p>
					This procedure configures limits for project-controlled directories.
				</p><h5 id="procedure_3">Procedure</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Add the project-controlled directories to <code class="literal">/etc/projects</code>. For example, the following adds the <code class="literal">/var/log</code> path with a unique ID of 11 to <code class="literal">/etc/projects</code>. Your project ID can be any numerical value mapped to your project.
						</p><pre class="screen"># echo 11:/var/log &gt;&gt; /etc/projects</pre></li><li class="listitem"><p class="simpara">
							Add project names to <code class="literal">/etc/projid</code> to map project IDs to project names. For example, the following associates a project called <code class="literal">Logs</code> with the project ID of 11 as defined in the previous step.
						</p><pre class="screen"># echo Logs:11 &gt;&gt; /etc/projid</pre></li><li class="listitem"><p class="simpara">
							Initialize the project directory. For example, the following initializes the project directory <code class="literal">/var</code>:
						</p><pre class="screen"># xfs_quota -x -c 'project -s logfiles' /var</pre></li><li class="listitem"><p class="simpara">
							Configure quotas for projects with initialized directories:
						</p><pre class="screen"># xfs_quota -x -c 'limit -p bhard=lg logfiles' /var</pre><h5 id="additional_resources_6">Additional resources</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The <code class="literal">xfs_quota(8)</code> man page.
								</li><li class="listitem">
									The <code class="literal">projid(5)</code> man page.
								</li><li class="listitem">
									The <code class="literal">projects(5)</code> man page.
								</li></ul></div></li></ol></div></section></section></section><section class="chapter" id="discarding-unused-blocks_managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 14. Discarding unused blocks</h1></div></div></div><p>
			You can perform or schedule discard operations on block devices that support them.
		</p><section class="section" id="block-discard-operations_discarding-unused-blocks"><div class="titlepage"><div><div><h2 class="title">14.1. Block discard operations</h2></div></div></div><p>
				Block discard operations discard blocks that are no longer in use by a mounted file system. They are useful on:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Solid-state drives (SSDs)
					</li><li class="listitem">
						Thinly-provisioned storage
					</li></ul></div><h4 id="requirements">Requirements</h4><p>
				The block device underlying the file system must support physical discard operations.
			</p><p>
				Physical discard operations are supported if the value in the <code class="literal filename">/sys/block/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span>/queue/discard_max_bytes</code> file is not zero.
			</p></section><section class="section" id="types-of-block-discard-operations_discarding-unused-blocks"><div class="titlepage"><div><div><h2 class="title">14.2. Types of block discard operations</h2></div></div></div><p>
				You can run discard operations using different methods:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Batch discard</span></dt><dd>
							Are run explicitly by the user. They discard all unused blocks in the selected file systems.
						</dd><dt><span class="term">Online discard</span></dt><dd>
							Are specified at mount time. They run in real time without user intervention. Online discard operations discard only the blocks that are transitioning from used to free.
						</dd><dt><span class="term">Periodic discard</span></dt><dd>
							Are batch operations that are run regularly by a <code class="literal">systemd</code> service.
						</dd></dl></div><p>
				All types are supported by the XFS and ext4 file systems and by VDO.
			</p><h4 id="recommendations_2">Recommendations</h4><p>
				Red Hat recommends that you use batch or periodic discard.
			</p><p>
				Use online discard only if:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						the system’s workload is such that batch discard is not feasible, or
					</li><li class="listitem">
						online discard operations are necessary to maintain performance.
					</li></ul></div></section><section class="section" id="performing-batch-block-discard_discarding-unused-blocks"><div class="titlepage"><div><div><h2 class="title">14.3. Performing batch block discard</h2></div></div></div><p>
				This procedure performs a batch block discard operation to discard unused blocks on a mounted file system.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The file system is mounted.
					</li><li class="listitem">
						The block device underlying the file system supports physical discard operations.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the <code class="literal">fstrim</code> utility:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								To perform discard only on a selected file system, use:
							</p><pre class="screen"># fstrim <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li><li class="listitem"><p class="simpara">
								To perform discard on all mounted file systems, use:
							</p><pre class="screen"># fstrim --all</pre></li></ul></div></li></ul></div><p>
				If you execute the <code class="literal">fstrim</code> command on:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						a device that does not support discard operations, or
					</li><li class="listitem">
						a logical device (LVM or MD) composed of multiple devices, where any one of the device does not support discard operations,
					</li></ul></div><p>
				the following message displays:
			</p><pre class="screen"># fstrim <span class="emphasis"><em><span class="replaceable replaceable">/mnt/non_discard</span></em></span>

fstrim: <span class="emphasis"><em><span class="replaceable replaceable">/mnt/non_discard</span></em></span>: the discard operation is not supported</pre><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">fstrim(8)</code> man page
					</li></ul></div></section><section class="section" id="enabling-online-block-discard_discarding-unused-blocks"><div class="titlepage"><div><div><h2 class="title">14.4. Enabling online block discard</h2></div></div></div><p>
				This procedure enables online block discard operations that automatically discard unused blocks on all supported file systems.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Enable online discard at mount time:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								When mounting a file system manually, add the <code class="literal option">-o discard</code> mount option:
							</p><pre class="screen"># mount -o discard <span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li><li class="listitem">
								When mounting a file system persistently, add the <code class="literal option">discard</code> option to the mount entry in the <code class="literal filename">/etc/fstab</code> file.
							</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">mount(8)</code> man page
					</li><li class="listitem">
						The <code class="literal">fstab(5)</code> man page
					</li></ul></div></section><section class="section" id="enabling-online-block-discard-using-rhel-system-roles_discarding-unused-blocks"><div class="titlepage"><div><div><h2 class="title">14.5. Enabling online block discard using RHEL System Roles</h2></div></div></div><p>
				This section describes how to enable online block discard using the <code class="literal">storage</code> role.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An Ansible playbook including the <code class="literal">storage</code> role exists.
					</li></ul></div><p>
				For information on how to apply such a playbook, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/getting-started-with-system-administration_configuring-basic-system-settings#applying-a-role_what-rhel-system-roles-are">Applying a role</a>.
			</p><section class="section" id="an-example-ansible-playbook-to-enable-online-block-discard_enabling-online-block-discard-using-rhel-system-roles"><div class="titlepage"><div><div><h3 class="title">14.5.1. Example Ansible playbook to enable online block discard</h3></div></div></div><p>
					This section provides an example Ansible playbook. This playbook applies the <code class="literal">storage</code> role to mount an XFS file system with online block discard enabled.
				</p><pre class="literallayout">---
- hosts: all
  vars:
    storage_volumes:
      - name: barefs
        type: disk
        disks:
          - sdb
        fs_type: xfs
        mount_point: /mnt/data
        mount_options: discard
  roles:
    - rhel-system-roles.storage</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This playbook also performs all the operations of the persistent mount example described in <a class="xref" href="index.html#an-example-ansible-playbook-to-persistently-mount-a-file-system_persistently-mounting-a-file-system-using-rhel-system-roles" title="12.8.3.1. Example Ansible playbook to persistently mount a file system">Section 12.8.3.1, “Example Ansible playbook to persistently mount a file system”</a>.
					</p></div></div></section><section class="section" id="additional_resources_7"><div class="titlepage"><div><div><h3 class="title">14.5.2. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about the <code class="literal">storage</code> role, see <a class="xref" href="index.html#storage-role-intro_managing-local-storage-using-rhel-system-roles" title="2.1. Introduction to the storage role">Section 2.1, “Introduction to the storage role”</a>.
						</li></ul></div></section></section><section class="section" id="enabling-periodic-block-discard_discarding-unused-blocks"><div class="titlepage"><div><div><h2 class="title">14.6. Enabling periodic block discard</h2></div></div></div><p>
				This procedure enables a <code class="literal">systemd</code> timer that regularly discards unused blocks on all supported file systems.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Enable and start the <code class="literal">systemd</code> timer:
					</p><pre class="screen"># systemctl enable --now fstrim.timer</pre></li></ul></div></section></section><section class="chapter" id="managing-layered-local-storage-with-stratis_managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 15. Managing layered local storage with Stratis</h1></div></div></div><p>
			You can easily set up and manage complex storage configurations integrated by the Stratis high-level system.
		</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
				Stratis is available as a Technology Preview. For information on Red Hat scope of support for Technology Preview features, see the <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> document.
			</p><p>
				Customers deploying Stratis are encouraged to provide feedback to Red Hat.
			</p></div></div><section class="section" id="setting-up-stratis-file-systems_managing-layered-local-storage-with-stratis"><div class="titlepage"><div><div><h2 class="title">15.1. Setting up Stratis file systems</h2></div></div></div><p>
				As a system administrator, you can enable and set up the Stratis volume-managing file system on your system to easily manage layered storage.
			</p><section class="section" id="the-purpose-and-features-of-stratis_setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.1.1. The purpose and features of Stratis</h3></div></div></div><p>
					Stratis is a local storage-management solution for Linux. It is focused on simplicity and ease of use, and gives you access to advanced storage features.
				</p><p>
					Stratis makes the following activities easier:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Initial configuration of storage
						</li><li class="listitem">
							Making changes later
						</li><li class="listitem">
							Using advanced storage features
						</li></ul></div><p>
					Stratis is a hybrid user-and-kernel local storage management system that supports advanced storage features. The central concept of Stratis is a storage <span class="emphasis"><em>pool</em></span>. This pool is created from one or more local disks or partitions, and volumes are created from the pool.
				</p><p>
					The pool enables many useful features, such as:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							File system snapshots
						</li><li class="listitem">
							Thin provisioning
						</li><li class="listitem">
							Tiering
						</li></ul></div></section><section class="section" id="components-of-a-stratis-volume_setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.1.2. Components of a Stratis volume</h3></div></div></div><p>
					Externally, Stratis presents the following volume components in the command-line interface and the API:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">blockdev</code></span></dt><dd>
								Block devices, such as a disk or a disk partition.
							</dd><dt><span class="term"><code class="literal">pool</code></span></dt><dd><p class="simpara">
								Composed of one or more block devices.
							</p><p class="simpara">
								A pool has a fixed total size, equal to the size of the block devices.
							</p><p class="simpara">
								The pool contains most Stratis layers, such as the non-volatile data cache using the <code class="literal">dm-cache</code> target.
							</p><p class="simpara">
								Stratis creates a <code class="literal filename">/stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/</code> directory for each pool. This directory contains links to devices that represent Stratis file systems in the pool.
							</p></dd></dl></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">filesystem</code></span></dt><dd><p class="simpara">
								Each pool can contain one or more file systems, which store files.
							</p><p class="simpara">
								File systems are thinly provisioned and do not have a fixed total size. The actual size of a file system grows with the data stored on it. If the size of the data approaches the virtual size of the file system, Stratis grows the thin volume and the file system automatically.
							</p><p class="simpara">
								The file systems are formatted with XFS.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									Stratis tracks information about file systems created using Stratis that XFS is not aware of, and changes made using XFS do not automatically create updates in Stratis. Users must not reformat or reconfigure XFS file systems that are managed by Stratis.
								</p></div></div><p class="simpara">
								Stratis creates links to file systems at the <code class="literal filename">/stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></code> path.
							</p></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Stratis uses many Device Mapper devices, which show up in <code class="literal">dmsetup</code> listings and the <code class="literal filename">/proc/partitions</code> file. Similarly, the <code class="literal">lsblk</code> command output reflects the internal workings and layers of Stratis.
					</p></div></div></section><section class="section" id="block-devices-usable-with-stratis_setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.1.3. Block devices usable with Stratis</h3></div></div></div><p>
					This section lists storage devices that you can use for Stratis.
				</p><h5 id="supported_devices">Supported devices</h5><p>
					Stratis pools have been tested to work on these types of block devices:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							LUKS
						</li><li class="listitem">
							LVM logical volumes
						</li><li class="listitem">
							MD RAID
						</li><li class="listitem">
							DM Multipath
						</li><li class="listitem">
							iSCSI
						</li><li class="listitem">
							HDDs and SSDs
						</li><li class="listitem">
							NVMe devices
						</li></ul></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						In the current version, Stratis does not handle failures in hard drives or other hardware. If you create a Stratis pool over multiple hardware devices, you increase the risk of data loss because multiple devices must be operational to access the data.
					</p></div></div><h5 id="unsupported_devices">Unsupported devices</h5><p>
					Because Stratis contains a thin-provisioning layer, Red Hat does not recommend placing a Stratis pool on block devices that are already thinly-provisioned.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For iSCSI and other block devices requiring network, see the <code class="literal">systemd.mount(5)</code> man page for information on the <code class="literal option">_netdev</code> mount option.
						</li></ul></div></section><section class="section" id="installing-stratis_setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.1.4. Installing Stratis</h3></div></div></div><p>
					This procedure installs all packages necessary to use Stratis.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install packages that provide the Stratis service and command-line utilities:
						</p><pre class="screen"># yum install stratisd stratis-cli</pre></li><li class="listitem"><p class="simpara">
							Make sure that the <code class="literal">stratisd</code> service is enabled:
						</p><pre class="screen"># systemctl enable --now stratisd</pre></li></ol></div></section><section class="section" id="creating-a-stratis-pool_setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.1.5. Creating a Stratis pool</h3></div></div></div><p>
					This procedure creates a Stratis pool from one or more block devices.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="15.1.4. Installing Stratis">Section 15.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							The block devices on which you are creating a Stratis pool are not in use and not mounted.
						</li><li class="listitem">
							The block devices on which you are creating a Stratis pool are at least 1 GiB in size each.
						</li><li class="listitem"><p class="simpara">
							On the IBM Z architecture, the <code class="literal">/dev/dasd*</code> block devices must to be partitioned. Use the partition in the Stratis pool.
						</p><p class="simpara">
							For information on partitioning DASD devices, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/configuring-a-linux-instance-on-ibm-z_installing-rhel">Configuring a Linux instance on IBM Z</a>.
						</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							If the selected block device contains file system, partition table, or RAID signatures, erase them:
						</p><pre class="screen"># wipefs --all <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><p class="simpara">
							Replace <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> with the path to a block device, such as <code class="literal filename">/dev/sdb</code>.
						</p></li><li class="listitem"><p class="simpara">
							To create a Stratis pool on the block device, use:
						</p><pre class="screen"># stratis pool create <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> with an arbitrary name for the pool.
								</li><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> with the path to the empty or wiped block device, such as <code class="literal filename">/dev/sdb</code>.
								</li></ul></div><p class="simpara">
							To create a pool from more than one block device, list them all on the command line:
						</p><pre class="screen"># stratis pool create <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">device-1</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">device-2</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">device-n</span></em></span></pre></li><li class="listitem"><p class="simpara">
							To verify, list all pools on your system:
						</p><pre class="screen"># stratis pool list</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create a Stratis file system on the pool. See <a class="xref" href="index.html#creating-a-stratis-file-system_setting-up-stratis-file-systems" title="15.1.6. Creating a Stratis file system">Section 15.1.6, “Creating a Stratis file system”</a>.
						</li></ul></div></section><section class="section" id="creating-a-stratis-file-system_setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.1.6. Creating a Stratis file system</h3></div></div></div><p>
					This procedure creates a Stratis file system on an existing Stratis pool.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="15.1.4. Installing Stratis">Section 15.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis pool. See <a class="xref" href="index.html#creating-a-stratis-pool_setting-up-stratis-file-systems" title="15.1.5. Creating a Stratis pool">Section 15.1.5, “Creating a Stratis pool”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To create a Stratis file system on a pool, use:
						</p><pre class="screen"># stratis fs create <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> with the name of your existing Stratis pool.
								</li><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span> with an arbitrary name for the file system.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							To verify, list file systems within the pool:
						</p><pre class="screen"># stratis fs list <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Mount the Stratis file system. See <a class="xref" href="index.html#mounting-a-stratis-file-system_setting-up-stratis-file-systems" title="15.1.7. Mounting a Stratis file system">Section 15.1.7, “Mounting a Stratis file system”</a>.
						</li></ul></div></section><section class="section" id="mounting-a-stratis-file-system_setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.1.7. Mounting a Stratis file system</h3></div></div></div><p>
					This procedure mounts an existing Stratis file system to access the content.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="15.1.4. Installing Stratis">Section 15.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis file system. See <a class="xref" href="index.html#creating-a-stratis-file-system_setting-up-stratis-file-systems" title="15.1.6. Creating a Stratis file system">Section 15.1.6, “Creating a Stratis file system”</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To mount the file system, use the entries that Stratis maintains in the <code class="literal filename">/stratis/</code> directory:
						</p><pre class="screen"># mount /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li></ul></div><p>
					The file system is now mounted on the <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span> directory and ready to use.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">mount(8)</code> man page
						</li></ul></div></section><section class="section" id="persistently-mounting-a-stratis-file-system_setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.1.8. Persistently mounting a Stratis file system</h3></div></div></div><p>
					This procedure persistently mounts a Stratis file system so that it is available automatically after booting the system.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="15.1.4. Installing Stratis">Section 15.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis file system. See <a class="xref" href="index.html#creating-a-stratis-file-system_setting-up-stratis-file-systems" title="15.1.6. Creating a Stratis file system">Section 15.1.6, “Creating a Stratis file system”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Determine the UUID attribute of the file system:
						</p><pre class="screen">$ lsblk --output=UUID /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></pre><p class="simpara">
							For example:
						</p><div class="example" id="idm140591304317680"><p class="title"><strong>Example 15.1. Viewing the UUID of Stratis file system</strong></p><div class="example-contents"><pre class="screen">$ lsblk --output=UUID /stratis/my-pool/fs1

UUID
a1f0b64a-4ebb-4d4e-9543-b1d79f600283</pre></div></div></li><li class="listitem"><p class="simpara">
							If the mount point directory does not exist, create it:
						</p><pre class="screen"># mkdir --parents <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li><li class="listitem"><p class="simpara">
							As root, edit the <code class="literal filename">/etc/fstab</code> file and add a line for the file system, identified by the UUID. Use <code class="literal">xfs</code> as the file system type and add the <code class="literal">x-systemd.requires=stratisd.service</code> option.
						</p><p class="simpara">
							For example:
						</p><div class="example" id="idm140591304310688"><p class="title"><strong>Example 15.2. The /fs1 mount point in /etc/fstab</strong></p><div class="example-contents"><pre class="screen">UUID=a1f0b64a-4ebb-4d4e-9543-b1d79f600283 /fs1 xfs defaults,x-systemd.requires=stratisd.service 0 0</pre></div></div></li><li class="listitem"><p class="simpara">
							Regenerate mount units so that your system registers the new configuration:
						</p><pre class="screen"># systemctl daemon-reload</pre></li><li class="listitem"><p class="simpara">
							Try mounting the file system to verify that the configuration works:
						</p><pre class="screen"># mount <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="index.html#assembly_persistently-mounting-file-systems_assembly_mounting-file-systems" title="12.8. Persistently mounting file systems">Section 12.8, “Persistently mounting file systems”</a>
						</li></ul></div></section><section class="section" id="related-information-setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.1.9. Related information</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="emphasis"><em>Stratis Storage</em></span> website: <a class="link" href="https://stratis-storage.github.io/">https://stratis-storage.github.io/</a>
						</li></ul></div></section></section><section class="section" id="extending-a-stratis-volume-with-additional-block-devices_managing-layered-local-storage-with-stratis"><div class="titlepage"><div><div><h2 class="title">15.2. Extending a Stratis volume with additional block devices</h2></div></div></div><p>
				You can attach additional block devices to a Stratis pool to provide more storage capacity for Stratis file systems.
			</p><section class="section" id="components-of-a-stratis-volume_extending-a-stratis-volume-with-additional-block-devices"><div class="titlepage"><div><div><h3 class="title">15.2.1. Components of a Stratis volume</h3></div></div></div><p>
					Externally, Stratis presents the following volume components in the command-line interface and the API:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">blockdev</code></span></dt><dd>
								Block devices, such as a disk or a disk partition.
							</dd><dt><span class="term"><code class="literal">pool</code></span></dt><dd><p class="simpara">
								Composed of one or more block devices.
							</p><p class="simpara">
								A pool has a fixed total size, equal to the size of the block devices.
							</p><p class="simpara">
								The pool contains most Stratis layers, such as the non-volatile data cache using the <code class="literal">dm-cache</code> target.
							</p><p class="simpara">
								Stratis creates a <code class="literal filename">/stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/</code> directory for each pool. This directory contains links to devices that represent Stratis file systems in the pool.
							</p></dd></dl></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">filesystem</code></span></dt><dd><p class="simpara">
								Each pool can contain one or more file systems, which store files.
							</p><p class="simpara">
								File systems are thinly provisioned and do not have a fixed total size. The actual size of a file system grows with the data stored on it. If the size of the data approaches the virtual size of the file system, Stratis grows the thin volume and the file system automatically.
							</p><p class="simpara">
								The file systems are formatted with XFS.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									Stratis tracks information about file systems created using Stratis that XFS is not aware of, and changes made using XFS do not automatically create updates in Stratis. Users must not reformat or reconfigure XFS file systems that are managed by Stratis.
								</p></div></div><p class="simpara">
								Stratis creates links to file systems at the <code class="literal filename">/stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></code> path.
							</p></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Stratis uses many Device Mapper devices, which show up in <code class="literal">dmsetup</code> listings and the <code class="literal filename">/proc/partitions</code> file. Similarly, the <code class="literal">lsblk</code> command output reflects the internal workings and layers of Stratis.
					</p></div></div></section><section class="section" id="adding-block-devices-to-a-stratis-pool_extending-a-stratis-volume-with-additional-block-devices"><div class="titlepage"><div><div><h3 class="title">15.2.2. Adding block devices to a Stratis pool</h3></div></div></div><p>
					This procedure adds one or more block devices to a Stratis pool to be usable by Stratis file systems.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="15.1.4. Installing Stratis">Section 15.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							The block devices that you are adding to the Stratis pool are not in use and not mounted.
						</li><li class="listitem">
							The block devices that you are adding to the Stratis pool are at least 1 GiB in size each.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To add one or more block devices to the pool, use:
						</p><pre class="screen"># stratis pool add-data <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">device-1</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">device-2</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">device-n</span></em></span></pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div></section><section class="section" id="related-information-extending-a-stratis-volume-with-additional-block-devices"><div class="titlepage"><div><div><h3 class="title">15.2.3. Related information</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="emphasis"><em>Stratis Storage</em></span> website: <a class="link" href="https://stratis-storage.github.io/">https://stratis-storage.github.io/</a>
						</li></ul></div></section></section><section class="section" id="monitoring-stratis-file-systems_managing-layered-local-storage-with-stratis"><div class="titlepage"><div><div><h2 class="title">15.3. Monitoring Stratis file systems</h2></div></div></div><p>
				As a Stratis user, you can view information about Stratis volumes on your system to monitor their state and free space.
			</p><section class="section" id="stratis-sizes-reported-by-different-utilities_monitoring-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.3.1. Stratis sizes reported by different utilities</h3></div></div></div><p>
					This section explains the difference between Stratis sizes reported by standard utilities such as <code class="literal">df</code> and the <code class="literal">stratis</code> utility.
				</p><p>
					Standard Linux utilities such as <code class="literal">df</code> report the size of the XFS file system layer on Stratis, which is 1 TiB. This is not useful information, because the actual storage usage of Stratis is less due to thin provisioning, and also because Stratis automatically grows the file system when the XFS layer is close to full.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Regularly monitor the amount of data written to your Stratis file systems, which is reported as the <span class="emphasis"><em>Total Physical Used</em></span> value. Make sure it does not exceed the <span class="emphasis"><em>Total Physical Size</em></span> value.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div></section><section class="section" id="displaying-information-about-stratis-volumes_monitoring-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.3.2. Displaying information about Stratis volumes</h3></div></div></div><p>
					This procedure lists statistics about your Stratis volumes, such as the total, used, and free size or file systems and block devices belonging to a pool.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="15.1.4. Installing Stratis">Section 15.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To display information about all <span class="strong strong"><strong>block devices</strong></span> used for Stratis on your system:
						</p><pre class="screen"># stratis blockdev

Pool Name  Device Node    Physical Size   State  Tier
<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>    <span class="emphasis"><em><span class="replaceable replaceable">/dev/sdb</span></em></span>            <span class="emphasis"><em><span class="replaceable replaceable">9.10 TiB</span></em></span>  <span class="emphasis"><em><span class="replaceable replaceable">In-use</span></em></span>  <span class="emphasis"><em><span class="replaceable replaceable">Data</span></em></span></pre></li><li class="listitem"><p class="simpara">
							To display information about all Stratis <span class="strong strong"><strong>pools</strong></span> on your system:
						</p><pre class="screen"># stratis pool

Name    Total Physical Size  Total Physical Used
<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>            <span class="emphasis"><em><span class="replaceable replaceable">9.10 TiB</span></em></span>              <span class="emphasis"><em><span class="replaceable replaceable">598 MiB</span></em></span></pre></li><li class="listitem"><p class="simpara">
							To display information about all Stratis <span class="strong strong"><strong>file systems</strong></span> on your system:
						</p><pre class="screen"># stratis filesystem

Pool Name  Name  Used     Created            Device
<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>    <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">546 MiB</span></em></span>  <span class="emphasis"><em><span class="replaceable replaceable">Nov 08 2018 08:03</span></em></span>  /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool/my-fs</span></em></span></pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div></section><section class="section" id="related-information-monitoring-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.3.3. Related information</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="emphasis"><em>Stratis Storage</em></span> website: <a class="link" href="https://stratis-storage.github.io/">https://stratis-storage.github.io/</a>
						</li></ul></div></section></section><section class="section" id="using-snapshots-on-stratis-file-systems_managing-layered-local-storage-with-stratis"><div class="titlepage"><div><div><h2 class="title">15.4. Using snapshots on Stratis file systems</h2></div></div></div><p>
				You can use snapshots on Stratis file systems to capture file system state at arbitrary times and restore it in the future.
			</p><section class="section" id="characteristics-of-stratis-snapshots_using-snapshots-on-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.4.1. Characteristics of Stratis snapshots</h3></div></div></div><p>
					This section describes the properties and limitations of file system snapshots on Stratis.
				</p><p>
					In Stratis, a snapshot is a regular Stratis file system created as a copy of another Stratis file system. The snapshot initially contains the same file content as the original file system, but can change as the snapshot is modified. Whatever changes you make to the snapshot will not be reflected in the original file system.
				</p><p>
					The current snapshot implementation in Stratis is characterized by the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							A snapshot of a file system is another file system.
						</li><li class="listitem">
							A snapshot and its origin are not linked in lifetime. A snapshotted file system can live longer than the file system it was created from.
						</li><li class="listitem">
							A file system does not have to be mounted to create a snapshot from it.
						</li><li class="listitem">
							Each snapshot uses around half a gigabyte of actual backing storage, which is needed for the XFS log.
						</li></ul></div></section><section class="section" id="creating-a-stratis-snapshot_using-snapshots-on-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.4.2. Creating a Stratis snapshot</h3></div></div></div><p>
					This procedure creates a Stratis file system as a snapshot of an existing Stratis file system.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="15.1.4. Installing Stratis">Section 15.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis file system. See <a class="xref" href="index.html#creating-a-stratis-file-system_setting-up-stratis-file-systems" title="15.1.6. Creating a Stratis file system">Section 15.1.6, “Creating a Stratis file system”</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To create a Stratis snapshot, use:
						</p><pre class="screen"># stratis fs snapshot <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs-snapshot</span></em></span></pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div></section><section class="section" id="accessing-the-content-of-a-stratis-snapshot_using-snapshots-on-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.4.3. Accessing the content of a Stratis snapshot</h3></div></div></div><p>
					This procedure mounts a snapshot of a Stratis file system to make it accessible for read and write operations.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="15.1.4. Installing Stratis">Section 15.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis snapshot. See <a class="xref" href="index.html#creating-a-stratis-snapshot_using-snapshots-on-stratis-file-systems" title="15.4.2. Creating a Stratis snapshot">Section 15.4.2, “Creating a Stratis snapshot”</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To access the snapshot, mount it as a regular file system from the <code class="literal filename">/stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/</code> directory:
						</p><pre class="screen"># mount /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs-snapshot</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="index.html#mounting-a-stratis-file-system_setting-up-stratis-file-systems" title="15.1.7. Mounting a Stratis file system">Section 15.1.7, “Mounting a Stratis file system”</a>
						</li><li class="listitem">
							The <code class="literal">mount(8)</code> man page
						</li></ul></div></section><section class="section" id="reverting-a-stratis-file-system-to-a-previous-snapshot_using-snapshots-on-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.4.4. Reverting a Stratis file system to a previous snapshot</h3></div></div></div><p>
					This procedure reverts the content of a Stratis file system to the state captured in a Stratis snapshot.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="15.1.4. Installing Stratis">Section 15.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis snapshot. See <a class="xref" href="index.html#creating-a-stratis-snapshot_using-snapshots-on-stratis-file-systems" title="15.4.2. Creating a Stratis snapshot">Section 15.4.2, “Creating a Stratis snapshot”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Optionally, back up the current state of the file system to be able to access it later:
						</p><pre class="screen"># stratis filesystem snapshot <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs-backup</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Unmount and remove the original file system:
						</p><pre class="screen"># umount /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span>
# stratis filesystem destroy <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Create a copy of the snapshot under the name of the original file system:
						</p><pre class="screen"># stratis filesystem snapshot <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs-snapshot</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Mount the snapshot, which is now accessible with the same name as the original file system:
						</p><pre class="screen"># mount /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li></ol></div><p>
					The content of the file system named <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span> is now identical to the snapshot <span class="emphasis"><em><span class="replaceable replaceable">my-fs-snapshot</span></em></span>.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div></section><section class="section" id="removing-a-stratis-snapshot_using-snapshots-on-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.4.5. Removing a Stratis snapshot</h3></div></div></div><p>
					This procedure removes a Stratis snapshot from a pool. Data on the snapshot are lost.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="15.1.4. Installing Stratis">Section 15.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis snapshot. See <a class="xref" href="index.html#creating-a-stratis-snapshot_using-snapshots-on-stratis-file-systems" title="15.4.2. Creating a Stratis snapshot">Section 15.4.2, “Creating a Stratis snapshot”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Unmount the snapshot:
						</p><pre class="screen"># umount /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs-snapshot</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Destroy the snapshot:
						</p><pre class="screen"># stratis filesystem destroy <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs-snapshot</span></em></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div></section><section class="section" id="related-information-using-snapshots-on-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.4.6. Related information</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="emphasis"><em>Stratis Storage</em></span> website: <a class="link" href="https://stratis-storage.github.io/">https://stratis-storage.github.io/</a>
						</li></ul></div></section></section><section class="section" id="removing-stratis-file-systems_managing-layered-local-storage-with-stratis"><div class="titlepage"><div><div><h2 class="title">15.5. Removing Stratis file systems</h2></div></div></div><p>
				You can remove an existing Stratis file system or a Stratis pool, destroying data on them.
			</p><section class="section" id="components-of-a-stratis-volume_removing-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.5.1. Components of a Stratis volume</h3></div></div></div><p>
					Externally, Stratis presents the following volume components in the command-line interface and the API:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">blockdev</code></span></dt><dd>
								Block devices, such as a disk or a disk partition.
							</dd><dt><span class="term"><code class="literal">pool</code></span></dt><dd><p class="simpara">
								Composed of one or more block devices.
							</p><p class="simpara">
								A pool has a fixed total size, equal to the size of the block devices.
							</p><p class="simpara">
								The pool contains most Stratis layers, such as the non-volatile data cache using the <code class="literal">dm-cache</code> target.
							</p><p class="simpara">
								Stratis creates a <code class="literal filename">/stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/</code> directory for each pool. This directory contains links to devices that represent Stratis file systems in the pool.
							</p></dd></dl></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">filesystem</code></span></dt><dd><p class="simpara">
								Each pool can contain one or more file systems, which store files.
							</p><p class="simpara">
								File systems are thinly provisioned and do not have a fixed total size. The actual size of a file system grows with the data stored on it. If the size of the data approaches the virtual size of the file system, Stratis grows the thin volume and the file system automatically.
							</p><p class="simpara">
								The file systems are formatted with XFS.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									Stratis tracks information about file systems created using Stratis that XFS is not aware of, and changes made using XFS do not automatically create updates in Stratis. Users must not reformat or reconfigure XFS file systems that are managed by Stratis.
								</p></div></div><p class="simpara">
								Stratis creates links to file systems at the <code class="literal filename">/stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></code> path.
							</p></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Stratis uses many Device Mapper devices, which show up in <code class="literal">dmsetup</code> listings and the <code class="literal filename">/proc/partitions</code> file. Similarly, the <code class="literal">lsblk</code> command output reflects the internal workings and layers of Stratis.
					</p></div></div></section><section class="section" id="removing-a-stratis-file-system_removing-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.5.2. Removing a Stratis file system</h3></div></div></div><p>
					This procedure removes an existing Stratis file system. Data stored on it are lost.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="15.1.4. Installing Stratis">Section 15.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis file system. See <a class="xref" href="index.html#creating-a-stratis-file-system_setting-up-stratis-file-systems" title="15.1.6. Creating a Stratis file system">Section 15.1.6, “Creating a Stratis file system”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Unmount the file system:
						</p><pre class="screen"># umount /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Destroy the file system:
						</p><pre class="screen"># stratis filesystem destroy <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Verify that the file system no longer exists:
						</p><pre class="screen"># stratis filesystem list <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div></section><section class="section" id="removing-a-stratis-pool_removing-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.5.3. Removing a Stratis pool</h3></div></div></div><p>
					This procedure removes an existing Stratis pool. Data stored on it are lost.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="15.1.4. Installing Stratis">Section 15.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis pool. See <a class="xref" href="index.html#creating-a-stratis-pool_setting-up-stratis-file-systems" title="15.1.5. Creating a Stratis pool">Section 15.1.5, “Creating a Stratis pool”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							List file systems on the pool:
						</p><pre class="screen"># stratis filesystem list <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Unmount all file systems on the pool:
						</p><pre class="screen"># umount /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs-1</span></em></span> \
         /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs-2</span></em></span> \
         /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs-n</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Destroy the file systems:
						</p><pre class="screen"># stratis filesystem destroy <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs-1</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs-2</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Destroy the pool:
						</p><pre class="screen"># stratis pool destroy <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Verify that the pool no longer exists:
						</p><pre class="screen"># stratis pool list</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div></section><section class="section" id="related-information-removing-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">15.5.4. Related information</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="emphasis"><em>Stratis Storage</em></span> website: <a class="link" href="https://stratis-storage.github.io/">https://stratis-storage.github.io/</a>
						</li></ul></div></section></section></section><section class="chapter" id="getting-started-with-an-ext3-file-system_managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 16. Getting started with an ext3 file system</h1></div></div></div><p>
			As a system administrator, you can create, mount, resize, backup, and restore an ext3 file system. The ext3 file system is essentially an enhanced version of the ext2 file system.
		</p><section class="section" id="features-of-an-ext3-file-system_getting-started-with-an-ext3-file-system"><div class="titlepage"><div><div><h2 class="title">16.1. Features of an ext3 file system</h2></div></div></div><p>
				Following are the features of an ext3 file system:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Availability: After an unexpected power failure or system crash, file system check is not required due to the journaling provided. The default journal size takes about a second to recover, depending on the speed of the hardware
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The only supported journaling mode in ext3 is <code class="literal">data=ordered</code> (default). For more information, see <a class="link" href="https://access.redhat.com/solutions/424073">Is the EXT journaling option "data=writeback" supported in RHEL?</a> Knowledgebase article.
						</p></div></div></li><li class="listitem">
						Data Integrity: The ext3 file system prevents loss of data integrity during an unexpected power failure or system crash.
					</li><li class="listitem">
						Speed: Despite writing some data more than once, ext3 has a higher throughput in most cases than ext2 because ext3’s journaling optimizes hard drive head motion.
					</li><li class="listitem">
						Easy Transition: It is easy to migrate from ext2 to ext3 and gain the benefits of a robust journaling file system without reformatting.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">ext3</code> man page.
					</li></ul></div></section><section class="section" id="creating-an-ext-file-system_getting-started-with-an-ext3-file-system"><div class="titlepage"><div><div><h2 class="title">16.2. Creating an ext3 file system</h2></div></div></div><p>
				As a system administrator, you can create an ext3 file system on a block device using <code class="literal">mkfs.ext3</code> command.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						A partition on your disk. For information on creating MBR or GPT partitions, see <a class="xref" href="index.html#assembly_creating-a-partition-table-on-a-disk_assembly_getting-started-with-partitions" title="9.2. Creating a partition table on a disk">Section 9.2, “Creating a partition table on a disk”</a>.
					</p><p class="simpara">
						Alternatively, use an LVM or MD volume.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To create an ext3 file system:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								For a regular-partition device, an LVM volume, an MD volume, or a similar device, use the following command:
							</p><pre class="screen"># mkfs.ext3 /dev/<span class="emphasis"><em>block_device</em></span></pre><p class="simpara">
								Replace /dev/<span class="emphasis"><em>block_device</em></span> with the path to a block device.
							</p><p class="simpara">
								For example, <code class="literal">/dev/sdb1</code>, <code class="literal">/dev/disk/by-uuid/05e99ec8-def1-4a5e-8a9d-5945339ceb2a</code>, or <code class="literal">/dev/my-volgroup/my-lv</code>. In general, the default options are optimal for most usage scenarios.
							</p></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To specify a UUID when creating a file system:
								</p><pre class="screen"># mkfs.ext3 -U <span class="emphasis"><em>UUID</em></span> /dev/<span class="emphasis"><em>block_device</em></span></pre><p class="simpara">
									Replace <span class="emphasis"><em>UUID</em></span> with the UUID you want to set: for example, <code class="literal">7cd65de3-e0be-41d9-b66d-96d749c02da7</code>.
								</p><p class="simpara">
									Replace /dev/<span class="emphasis"><em>block_device</em></span> with the path to an ext3 file system to have the UUID added to it: for example, <code class="literal">/dev/sda8</code>.
								</p></li><li class="listitem"><p class="simpara">
									To specify a label when creating a file system:
								</p><pre class="screen"># mkfs.ext3 -L <span class="emphasis"><em>label-name</em></span> /dev/<span class="emphasis"><em>block_device</em></span></pre></li></ul></div></div></div></li><li class="listitem"><p class="simpara">
						To view the created ext3 file system:
					</p><pre class="screen"># blkid</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">ext3</code> man page.
					</li><li class="listitem">
						The <code class="literal">mkfs.ext3</code> man page.
					</li></ul></div></section><section class="section" id="mounting-an-ext-file-system_getting-started-with-an-ext3-file-system"><div class="titlepage"><div><div><h2 class="title">16.3. Mounting an ext3 file system</h2></div></div></div><p>
				As a system administrator, you can mount an ext3 file system using the <code class="literal">mount</code> utility.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An ext3 file system. For information on creating an ext3 file system, see <a class="xref" href="index.html#creating-an-ext-file-system_getting-started-with-an-ext3-file-system" title="16.2. Creating an ext3 file system">Section 16.2, “Creating an ext3 file system”</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To create a mount point to mount the file system:
					</p><pre class="screen"># mkdir <span class="emphasis"><em>/mount/point</em></span></pre><p class="simpara">
						Replace <span class="emphasis"><em>/mount/point</em></span> with the directory name where mount point of the partition must be created.
					</p></li><li class="listitem"><p class="simpara">
						To mount an ext3 file system:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To mount an ext3 file system with no extra options:
							</p><pre class="screen"># mount /dev/<span class="emphasis"><em>block_device /mount/point</em></span></pre></li><li class="listitem">
								To mount the file system persistently, see <a class="xref" href="index.html#assembly_persistently-mounting-file-systems_assembly_mounting-file-systems" title="12.8. Persistently mounting file systems">Section 12.8, “Persistently mounting file systems”</a>.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						To view the mounted file system:
					</p><pre class="screen"># df -h</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">mount</code> man page.
					</li><li class="listitem">
						The <code class="literal">ext3</code> man page.
					</li><li class="listitem">
						The <code class="literal">fstab</code> man page.
					</li><li class="listitem">
						<a class="xref" href="index.html#assembly_mounting-file-systems_managing-file-systems" title="Chapter 12. Mounting file systems">Chapter 12, <em>Mounting file systems</em></a>
					</li></ul></div></section><section class="section" id="resizing-an-ext-file-system_getting-started-with-an-ext3-file-system"><div class="titlepage"><div><div><h2 class="title">16.4. Resizing an ext3 file system</h2></div></div></div><p>
				As a system administrator, you can resize an ext3 file system using the <code class="literal">resize2fs</code> utility. The <code class="literal">resize2fs</code> utility reads the size in units of file system block size, unless a suffix indicating a specific unit is used. The following suffixes indicate specific units:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						s (sectors) - <code class="literal">512</code> byte sectors
					</li><li class="listitem">
						K (kilobytes) - <code class="literal">1,024</code> bytes
					</li><li class="listitem">
						M (megabytes) - <code class="literal">1,048,576</code> bytes
					</li><li class="listitem">
						G (gigabytes) - <code class="literal">1,073,741,824</code> bytes
					</li><li class="listitem">
						T (terabytes) - <code class="literal">1,099,511,627,776</code> bytes
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An ext3 file system. For information on creating an ext3 file system, see <a class="xref" href="index.html#creating-an-ext-file-system_getting-started-with-an-ext3-file-system" title="16.2. Creating an ext3 file system">Section 16.2, “Creating an ext3 file system”</a>.
					</li><li class="listitem">
						An underlying block device of an appropriate size to hold the file system after resizing.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To resize an ext3 file system, take the following steps:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To shrink and grow the size of an unmounted ext3 file system:
							</p><pre class="screen"># umount /dev/<span class="emphasis"><em>block_device</em></span>
# e2fsck -f /dev/<span class="emphasis"><em>block_device</em></span>
# resize2fs /dev/<span class="emphasis"><em>block_device</em></span> <span class="emphasis"><em>size</em></span></pre><p class="simpara">
								Replace <span class="emphasis"><em>/dev/block_device</em></span> with the path to the block device, for example <code class="literal">/dev/sdb1</code>.
							</p><p class="simpara">
								Replace <span class="emphasis"><em>size</em></span> with the required resize value using <code class="literal">s</code>, <code class="literal">K</code>, <code class="literal">M</code>, <code class="literal">G</code>, and <code class="literal">T</code> suffixes.
							</p></li><li class="listitem"><p class="simpara">
								An ext3 file system may be grown while mounted using the <code class="literal">resize2fs</code> command:
							</p><pre class="screen"># resize2fs <span class="emphasis"><em>/mount/device size</em></span></pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									The size parameter is optional (and often redundant) when expanding. The <code class="literal">resize2fs</code> automatically expands to fill the available space of the container, usually a logical volume or partition.
								</p></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
						To view the resized file system:
					</p><pre class="screen"># df -h</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">resize2fs</code> man page.
					</li><li class="listitem">
						The <code class="literal">e2fsck</code> man page.
					</li><li class="listitem">
						The <code class="literal">ext3</code> man page.
					</li></ul></div></section><section class="section" id="creating-mounting-ext3-filesystem-using-rhel-system-roles_getting-started-with-an-ext3-file-system"><div class="titlepage"><div><div><h2 class="title">16.5. Creating and mounting ext3 file systems using RHEL System Roles</h2></div></div></div><p>
				This section describes how to create an ext3 file system with a given label on a disk, and persistently mount the file system using the <code class="literal">storage</code> role.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An Ansible playbook including the <code class="literal">storage</code> role exists.
					</li></ul></div><p>
				For information on how to apply such a playbook, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/getting-started-with-system-administration_configuring-basic-system-settings#applying-a-role_what-rhel-system-roles-are">Applying a role</a>.
			</p><section class="section" id="an-example-ansible-playbook-to-create-mount-ext3-file-system_creating-mounting-ext3-filesystem-using-rhel-system-roles"><div class="titlepage"><div><div><h3 class="title">16.5.1. Example Ansible playbook to create and mount an ext3 file system</h3></div></div></div><p>
					This section provides an example Ansible playbook. This playbook applies the <code class="literal">storage</code> role to create and mount an ext3 file system.
				</p><p>
					The playbook creates an ext3 file system with a given label defined in <code class="literal">fs_label:</code>, and persistently mounts the file system.
				</p><pre class="literallayout">---
- hosts: all
  vars:
    storage_volumes:
      - name: barefs
        type: disk
        disks:
          - sdb
        fs_type: ext3
        fs_label: label-name
        mount_point: /mnt/data
  roles:
    - rhel-system-roles.storage</pre></section><section class="section" id="additional_resources_8"><div class="titlepage"><div><div><h3 class="title">16.5.2. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about the <code class="literal">storage</code> role, see <a class="xref" href="index.html#storage-role-intro_managing-local-storage-using-rhel-system-roles" title="2.1. Introduction to the storage role">Section 2.1, “Introduction to the storage role”</a>.
						</li></ul></div></section></section></section><section class="chapter" id="getting-started-with-an-ext4-file-system_managing-file-systems"><div class="titlepage"><div><div><h1 class="title">Chapter 17. Getting started with an ext4 file system</h1></div></div></div><p>
			As a system administrator, you can create, mount, resize, backup, and restore an ext4 file system. The ext4 file system is a scalable extension of the ext3 file system. With Red Hat Enterprise Linux 8, it can support a maximum individual file size of <code class="literal">16</code> terabytes, and file system to a maximum of <code class="literal">50</code> terabytes.
		</p><section class="section" id="features-of-an-ext4-file-system_getting-started-with-an-ext4-file-system"><div class="titlepage"><div><div><h2 class="title">17.1. Features of an ext4 file system</h2></div></div></div><p>
				Following are the features of an ext4 file system:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Using extents: The ext4 file system uses extents, which improves performance when using large files and reduces metadata overhead for large files.
					</li><li class="listitem">
						Ext4 labels unallocated block groups and inode table sections accordingly, which allows the block groups and table sections to be skipped during a file system check. It leads to a quick file system check, which becomes more beneficial as the file system grows in size.
					</li><li class="listitem">
						Metadata checksum: By default, this feature is enabled in Red Hat Enterprise Linux 8.
					</li><li class="listitem"><p class="simpara">
						Allocation features of an ext4 file system:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Persistent pre-allocation
							</li><li class="listitem">
								Delayed allocation
							</li><li class="listitem">
								Multi-block allocation
							</li><li class="listitem">
								Stripe-aware allocation
							</li></ul></div></li><li class="listitem">
						Extended attributes (<code class="literal">xattr</code>): This allows the system to associate several additional name and value pairs per file.
					</li><li class="listitem"><p class="simpara">
						Quota journaling: This avoids the need for lengthy quota consistency checks after a crash.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The only supported journaling mode in ext4 is <code class="literal">data=ordered</code> (default). For more information, see <a class="link" href="https://access.redhat.com/solutions/424073">Is the EXT journaling option "data=writeback" supported in RHEL?</a> Knowledgebase article.
						</p></div></div></li><li class="listitem">
						Subsecond timestamps — This gives timestamps to the subsecond.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">ext4</code> man page.
					</li></ul></div></section><section class="section" id="creating-an-ext-file-system_getting-started-with-an-ext4-file-system"><div class="titlepage"><div><div><h2 class="title">17.2. Creating an ext4 file system</h2></div></div></div><p>
				As a system administrator, you can create an ext4 file system on a block device using <code class="literal">mkfs.ext4</code> command.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						A partition on your disk. For information on creating MBR or GPT partitions, see <a class="xref" href="index.html#assembly_creating-a-partition-table-on-a-disk_assembly_getting-started-with-partitions" title="9.2. Creating a partition table on a disk">Section 9.2, “Creating a partition table on a disk”</a>.
					</p><p class="simpara">
						Alternatively, use an LVM or MD volume.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To create an ext4 file system:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								For a regular-partition device, an LVM volume, an MD volume, or a similar device, use the following command:
							</p><pre class="screen"># mkfs.ext4 /dev/<span class="emphasis"><em>block_device</em></span></pre><p class="simpara">
								Replace /dev/<span class="emphasis"><em>block_device</em></span> with the path to a block device.
							</p><p class="simpara">
								For example, <code class="literal">/dev/sdb1</code>, <code class="literal">/dev/disk/by-uuid/05e99ec8-def1-4a5e-8a9d-5945339ceb2a</code>, or <code class="literal">/dev/my-volgroup/my-lv</code>. In general, the default options are optimal for most usage scenarios.
							</p></li><li class="listitem"><p class="simpara">
								For striped block devices (for example, RAID5 arrays), the stripe geometry can be specified at the time of file system creation. Using proper stripe geometry enhances the performance of an ext4 file system. For example, to create a file system with a 64k stride (that is, 16 x 4096) on a 4k-block file system, use the following command:
							</p><pre class="screen"># mkfs.ext4 -E stride=16,stripe-width=64 /dev/<span class="emphasis"><em>block_device</em></span></pre><p class="simpara">
								In the given example:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										stride=value: Specifies the RAID chunk size
									</li><li class="listitem">
										stripe-width=value: Specifies the number of data disks in a RAID device, or the number of stripe units in the stripe.
									</li></ul></div></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To specify a UUID when creating a file system:
								</p><pre class="screen"># mkfs.ext4 -U <span class="emphasis"><em>UUID</em></span> /dev/<span class="emphasis"><em>block_device</em></span></pre><p class="simpara">
									Replace <span class="emphasis"><em>UUID</em></span> with the UUID you want to set: for example, <code class="literal">7cd65de3-e0be-41d9-b66d-96d749c02da7</code>.
								</p><p class="simpara">
									Replace /dev/<span class="emphasis"><em>block_device</em></span> with the path to an ext4 file system to have the UUID added to it: for example, <code class="literal">/dev/sda8</code>.
								</p></li><li class="listitem"><p class="simpara">
									To specify a label when creating a file system:
								</p><pre class="screen"># mkfs.ext4 -L <span class="emphasis"><em>label-name</em></span> /dev/<span class="emphasis"><em>block_device</em></span></pre></li></ul></div></div></div></li><li class="listitem"><p class="simpara">
						To view the created ext4 file system:
					</p><pre class="screen"># blkid</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">ext4</code> man page.
					</li><li class="listitem">
						The <code class="literal">mkfs.ext4</code> man page.
					</li></ul></div></section><section class="section" id="mounting-an-ext-file-system_getting-started-with-an-ext4-file-system"><div class="titlepage"><div><div><h2 class="title">17.3. Mounting an ext4 file system</h2></div></div></div><p>
				As a system administrator, you can mount an ext4 file system using the <code class="literal">mount</code> utility.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An ext4 file system. For information on creating an ext4 file system, see <a class="xref" href="index.html#creating-an-ext-file-system_getting-started-with-an-ext4-file-system" title="17.2. Creating an ext4 file system">Section 17.2, “Creating an ext4 file system”</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To create a mount point to mount the file system:
					</p><pre class="screen"># mkdir <span class="emphasis"><em>/mount/point</em></span></pre><p class="simpara">
						Replace <span class="emphasis"><em>/mount/point</em></span> with the directory name where mount point of the partition must be created.
					</p></li><li class="listitem"><p class="simpara">
						To mount an ext4 file system:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To mount an ext4 file system with no extra options:
							</p><pre class="screen"># mount /dev/<span class="emphasis"><em>block_device /mount/point</em></span></pre></li><li class="listitem">
								To mount the file system persistently, see <a class="xref" href="index.html#assembly_persistently-mounting-file-systems_assembly_mounting-file-systems" title="12.8. Persistently mounting file systems">Section 12.8, “Persistently mounting file systems”</a>.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						To view the mounted file system:
					</p><pre class="screen"># df -h</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">mount</code> man page.
					</li><li class="listitem">
						The <code class="literal">ext4</code> man page.
					</li><li class="listitem">
						The <code class="literal">fstab</code> man page.
					</li><li class="listitem">
						<a class="xref" href="index.html#assembly_mounting-file-systems_managing-file-systems" title="Chapter 12. Mounting file systems">Chapter 12, <em>Mounting file systems</em></a>
					</li></ul></div></section><section class="section" id="resizing-an-ext-file-system_getting-started-with-an-ext4-file-system"><div class="titlepage"><div><div><h2 class="title">17.4. Resizing an ext4 file system</h2></div></div></div><p>
				As a system administrator, you can resize an ext4 file system using the <code class="literal">resize2fs</code> utility. The <code class="literal">resize2fs</code> utility reads the size in units of file system block size, unless a suffix indicating a specific unit is used. The following suffixes indicate specific units:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						s (sectors) - <code class="literal">512</code> byte sectors
					</li><li class="listitem">
						K (kilobytes) - <code class="literal">1,024</code> bytes
					</li><li class="listitem">
						M (megabytes) - <code class="literal">1,048,576</code> bytes
					</li><li class="listitem">
						G (gigabytes) - <code class="literal">1,073,741,824</code> bytes
					</li><li class="listitem">
						T (terabytes) - <code class="literal">1,099,511,627,776</code> bytes
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An ext4 file system. For information on creating an ext4 file system, see <a class="xref" href="index.html#creating-an-ext-file-system_getting-started-with-an-ext4-file-system" title="17.2. Creating an ext4 file system">Section 17.2, “Creating an ext4 file system”</a>.
					</li><li class="listitem">
						An underlying block device of an appropriate size to hold the file system after resizing.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To resize an ext4 file system, take the following steps:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To shrink and grow the size of an unmounted ext4 file system:
							</p><pre class="screen"># umount /dev/<span class="emphasis"><em>block_device</em></span>
# e2fsck -f /dev/<span class="emphasis"><em>block_device</em></span>
# resize2fs /dev/<span class="emphasis"><em>block_device</em></span> <span class="emphasis"><em>size</em></span></pre><p class="simpara">
								Replace <span class="emphasis"><em>/dev/block_device</em></span> with the path to the block device, for example <code class="literal">/dev/sdb1</code>.
							</p><p class="simpara">
								Replace <span class="emphasis"><em>size</em></span> with the required resize value using <code class="literal">s</code>, <code class="literal">K</code>, <code class="literal">M</code>, <code class="literal">G</code>, and <code class="literal">T</code> suffixes.
							</p></li><li class="listitem"><p class="simpara">
								An ext4 file system may be grown while mounted using the <code class="literal">resize2fs</code> command:
							</p><pre class="screen"># resize2fs <span class="emphasis"><em>/mount/device size</em></span></pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									The size parameter is optional (and often redundant) when expanding. The <code class="literal">resize2fs</code> automatically expands to fill the available space of the container, usually a logical volume or partition.
								</p></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
						To view the resized file system:
					</p><pre class="screen"># df -h</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">resize2fs</code> man page.
					</li><li class="listitem">
						The <code class="literal">e2fsck</code> man page.
					</li><li class="listitem">
						The <code class="literal">ext4</code> man page.
					</li></ul></div></section><section class="section" id="creating-mounting-ext4-file-system-using-rhel-system-roles_getting-started-with-an-ext4-file-system"><div class="titlepage"><div><div><h2 class="title">17.5. Creating and mounting ext4 file systems using RHEL System Roles</h2></div></div></div><p>
				This section describes how to create an ext4 file system with a given label on a disk, and persistently mount the file system using the <code class="literal">storage</code> role.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An Ansible playbook including the <code class="literal">storage</code> role exists.
					</li></ul></div><p>
				For information on how to apply such a playbook, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/getting-started-with-system-administration_configuring-basic-system-settings#applying-a-role_what-rhel-system-roles-are">Applying a role</a>.
			</p><section class="section" id="an-example-playbook-to-create-mount-an-ext4-file-system_creating-mounting-ext4-file-system-using-rhel-system-roles"><div class="titlepage"><div><div><h3 class="title">17.5.1. Example Ansible playbook to create and mount an ext4 file system</h3></div></div></div><p>
					This section provides an example Ansible playbook. This playbook applies the <code class="literal">storage</code> role to create and mount an ext4 file system.
				</p><p>
					The playbook creates an ext4 file system with a given label defined in <code class="literal">fs_label:</code>, and persistently mounts the file system.
				</p><pre class="literallayout">---
- hosts: all
  vars:
    storage_volumes:
      - name: barefs
        type: disk
        disks:
          - sdb
        fs_type: ext4
        fs_label: label-name
        mount_point: /mnt/data
  roles:
    - rhel-system-roles.storage</pre></section><section class="section" id="additional_resources_9"><div class="titlepage"><div><div><h3 class="title">17.5.2. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about the <code class="literal">storage</code> role, see <a class="xref" href="index.html#storage-role-intro_managing-local-storage-using-rhel-system-roles" title="2.1. Introduction to the storage role">Section 2.1, “Introduction to the storage role”</a>.
						</li></ul></div></section></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140591318445936"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2020 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div>
  
  </div>
  </div>
</div>
<div id="comments-footer" class="book-comments">
  </div>
<meta itemscope="" itemref="md1">

    <!-- Display: Next/Previous Nav -->
          
      </div>
</article>


  

            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto" href="index.html#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path
                      class="rh-logo-hat"
                      d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                      <path class="rh-logo-band"
                      d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                      <path
                      class="rh-logo-type"
                      d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                  </svg>
                </a>
              </div>

            <div role="navigation">
                <h3>Quick Links</h3>
                <ul>
                    <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li><a class="manage-subscriptions" href="https://access.redhat.com/management/subscriptions/#active">Subscriptions</a></li>
                    <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                    <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                    <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Help</h3>
                <ul>
                    <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                    <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                    <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Site Info</h3>
                <ul>
                  <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                  <li><a class="browser-support-policy" href="https://access.redhat.com/help/browsers/">Browser Support Policy</a></li>
                  <li><a class="accessibility" href="https://access.redhat.com/help/accessibility/">Accessibility</a></li>
                  <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                  <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Related Sites</h3>
                <ul>
                    <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                    <li><a href="https://www.openshift.com" class="openshift-com">openshift.com</a></li>
                    <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                    <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>About</h3>
                <ul>
                    <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                    <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                    <li><a href="http://jobs.redhat.com" class="about-jobs">Red Hat Jobs</a></li>
                </ul>
            </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a hidden href="https://status.redhat.com" class="status-page-widget">
                          <span class="status-description"></span>
                          <span class="status-dot shape-circle"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2020 Red Hat, Inc.</div>

                        <div role="navigation" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://access.redhat.com/help/terms/" class="terms-of-use">Customer Portal Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                      <img src="l_summit.png" alt="Red Hat Summit" />
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHatSupport" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>
                        <a href="https://www.facebook.com/RedHatSupport" class="sm-icon facebook"><span class="nicon-facebook"></span><span class="offscreen">Facebook</span></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--googleon: all-->
</div>
  
  <div id="formatHelp" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="formatTitle" aria-hidden="true"><div class="modal-dialog"><div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="formatTitle">Formatting Tips</h3>
    </div>
    <div class="modal-body">
      <p>Here are the common uses of Markdown.</p><dl class="formatting-help">
        <dt class="codeblock">Code blocks</dt><dd class="codeblock"><pre><code>~~~
Code surrounded in tildes is easier to read
~~~</code></pre></dd>
        <dt class="urls">Links/URLs</dt><dd class="urls"><code>[Red Hat Customer Portal](https://access.redhat.com)</code></dd>
       </dl>
    </div>
    <div class="modal-footer">
      <a target="_blank" href="https://access.redhat.com/help/markdown" class="btn btn-primary">Learn more</a>
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
  </div></div></div></body>
</html>
