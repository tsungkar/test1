<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/ dc: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/ og: http://ogp.me/ns# rdfs: http://www.w3.org/2000/01/rdf-schema# sioc: http://rdfs.org/sioc/ns# sioct: http://rdfs.org/sioc/types# skos: http://www.w3.org/2004/02/skos/core# xsd: http://www.w3.org/2001/XMLSchema# article: http://ogp.me/ns/article# book: http://ogp.me/ns/book# profile: http://ogp.me/ns/profile# video: http://ogp.me/ns/video#" >

<head profile="http://www.w3.org/1999/xhtml/vocab">
	  <!--[if IE]><![endif]-->
<meta charset="utf-8" />
<meta name="revision" title="e605f384-0a9b-4cef-a8e0-a058984e48e7" product="f321f43a-4a79-48fe-8aae-117b9d973ec0" revision="90762aeffbbc6102aeaf4fec17d24980432dfd71:en-us" page="2a97fa84-46fa-447a-9310-7fbaed081028" />
<meta name="generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_storage_devices/index" />
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_storage_devices/index" />
<meta property="og:site_name" content="Red Hat Customer Portal" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_storage_devices/index" />
<meta property="og:title" content="Managing storage devices Red Hat Enterprise Linux 8 | Red Hat Customer Portal" />
<meta property="og:description" content="This documentation collection provides instructions on how to effectively manage storage devices in Red Hat Enterprise Linux 8." />
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_storage_devices/index" />
<meta name="twitter:title" content="Managing storage devices Red Hat Enterprise Linux 8 | Red Hat Customer Portal" />
<meta name="twitter:description" content="This documentation collection provides instructions on how to effectively manage storage devices in Red Hat Enterprise Linux 8." />
<meta name="twitter:image:src" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
  <title>Managing storage devices Red Hat Enterprise Linux 8 | Red Hat Customer Portal</title>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="kcs06.web.prod.ext.phx2.redhat.com" />
<meta name="avalon-version" content="2070d6b" />
<meta name="cp-chrome-build-date" content="2020-03-09T20:28:54.189Z" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml" />

 

<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en",  
        version   : "2070d6b",
        builddate : "2020-03-09T20:28:54.189Z",
        fetchdate : "2020-03-11T07:53:05-0400",
        nrid      : "14615289",
        nrlk      : "2a497fa56f"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="favicon.ico" />

<link media="all" rel="stylesheet" type="text/css" href="bootstrap.css%3Fv=2070d6b.css" />
<link media="all" rel="stylesheet" type="text/css" href="main.css%3Fv=2070d6b.css" />
<link media="all" rel="stylesheet" type="text/css" href="components.css%3Fv=2070d6b.css" />
<link media="all" rel="stylesheet" type="text/css" href="pages.css%3Fv=2070d6b.css" />

<link href="chosen.css%3Fv=2070d6b.css" rel="stylesheet" type="text/css" />

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]-->

<noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>

<!-- /cssInclude -->
<script type="text/javascript" src="require.js%3Fv=2070d6b" data-main="/webassets/avalon/j/"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->
  <link type="text/css" rel="stylesheet" href="css__c2Nkkx_5vYh8rvZbfBAGB4EMzMtH5ouFJDBlDsnhSR8__-ax0_8bam15ZDJT9j7LilCfJrDyEhGGAgc0KC8HYvJg__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__Jy3BSr8TrxptaufAzQDT1skBUlX2CnL_wm6BizzYuGw__-YZvqB8yuA4kK_iKklbk5HdZCoG2qAgz1l-8Qi2NFH4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="messages.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__m76iIFREtc70Nmw5xe1ZwHbNBlwOP2Zjc3DcacNWnFQ__STEh8aY3w8E_bKzhB4Xke2WOQ9XMDQquHIP5B8SeDIY__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__4sM4s6XOQ2Nm0pdkrWRLvrgtwpTmHAFzR_LcdesKYj8__vJ0jjVEhoPh3KBeLZfkqg51T3AFxhQCuXg1reipa__k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="print" />
  <link rel="stylesheet" type="text/css" media="all" href="list.css" />
  <script src="js__1YIht1y1Jlm9D0PyxEuhS3DlWdYAlEsNpsFDOaUsfRw__ZnC7278ZsqBG-1FOUqflDl8B3Y1kLiAWXAIkoLrHbYg__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__5ysXPc5KIyMmizxqRY68ILfrEGrj0P29WBIifnPTJvQ__Cap0DACEVMsefumg1gS1APLLd8stDkdGfp6c1uswMo4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>chrometwo_require(["analytics/attributes"], function(attributes) {
attributes.set('ResourceID',       'e605f384-0a9b-4cef-a8e0-a058984e48e7');
attributes.set('ResourceTitle',    'Managing storage devices');
attributes.set('Language',         'en-us');
attributes.set('RevisionId',       '90762aeffbbc6102aeaf4fec17d24980432dfd71:en-us');
attributes.set('PublicationState', ['active','published']);
attributes.set('Product',          'Red Hat Enterprise Linux');
attributes.set('ProductVersion',   '8');
attributes.set('ProductId',        'Red Hat Enterprise Linux 8');
});</script>
<script>breadcrumbs = [ ["Products &amp; Services", "/products/"], ["Product Documentation", "/documentation/"], ["Red Hat Enterprise Linux", "/documentation/en-us/red_hat_enterprise_linux/"], ["8", "/documentation/en-us/red_hat_enterprise_linux/8/"], ["Managing storage devices", "/documentation/en-us/red_hat_enterprise_linux/8/html/managing_storage_devices/"] ];</script>
<script>window.siteMapState = "products";</script>
<script src="js__i6ieGBO-OPmIKm_f0srsb6gM7QELIWrBpKh6ub_yj8A__wjRg_duSK4rEZCRV2uwrCIPMl80Z_LJ9ew61H5hE-ZI__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__vGeEtorfXGI3aPAp71YA74N5p8wfpYVhnoIqwaJrOiQ__veGxEiPQW6fkzAPZnAFA23SFz1CyJy2dlu6x8XuHM4s__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"kcs","theme_token":"U877voecYRhSMHF7XlGsD5SzEmlMQICS7xBwHaHj7dk","js":{"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.jquery.min.js":1,"modules\/chosen\/chosen.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/prism.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/underscore.js":1,"sites\/all\/themes\/kcs\/js\/kcs_base.js":1,"sites\/all\/themes\/kcs\/js\/showdown.js":1,"sites\/all\/themes\/kcs\/js\/case_links.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"modules\/date\/date_api\/date.css":1,"modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/contrib\/user_prune\/css\/user_prune.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/contrib\/panels\/css\/panels.css":1,"sites\/all\/modules\/custom\/rate\/rate.css":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/plugins\/layouts\/docs_page\/docs_page.css":1,"https:\/\/access.redhat.com\/webassets\/avalon\/s\/messages.css":1,"sites\/all\/themes\/zen\/system.base.css":1,"sites\/all\/themes\/zen\/system.menus.css":1,"sites\/all\/themes\/zen\/system.messages.css":1,"sites\/all\/themes\/zen\/system.theme.css":1,"sites\/all\/themes\/zen\/comment.css":1,"sites\/all\/themes\/zen\/node.css":1,"sites\/all\/themes\/kcs\/css\/html-reset.css":1,"sites\/all\/themes\/kcs\/css\/wireframes.css":1,"sites\/all\/themes\/kcs\/css\/layout-fixed.css":1,"sites\/all\/themes\/kcs\/css\/page-backgrounds.css":1,"sites\/all\/themes\/kcs\/css\/tabs.css":1,"sites\/all\/themes\/kcs\/css\/pages.css":1,"sites\/all\/themes\/kcs\/css\/blocks.css":1,"sites\/all\/themes\/kcs\/css\/navigation.css":1,"sites\/all\/themes\/kcs\/css\/views-styles.css":1,"sites\/all\/themes\/kcs\/css\/nodes.css":1,"sites\/all\/themes\/kcs\/css\/comments.css":1,"sites\/all\/themes\/kcs\/css\/forms.css":1,"sites\/all\/themes\/kcs\/css\/fields.css":1,"sites\/all\/themes\/kcs\/css\/kcs.css":1,"sites\/all\/themes\/kcs\/css\/print.css":1}},"chosen":{"selector":"#edit-field-kcs-component-select-und, #edit-field-kcs-sbr-select-und, #edit-field-kcs-product-select-und, #edit-field-kcs-type-select-und, #edit-language, #edit-field-kcs-a-category-select-und, #edit-field-kcs-state-select-und, #edit-field-kcs-tags-select-und, #edit-field-kcs-state-select-value, #edit-field-vid-reference-product-und, #edit-state, #edit-product, #edit-category, #edit-field-kcs-product-select-tid, #edit-field-kcs-type-select-tid, #edit-field-kcs-a-category-select-tid, #edit-sort-bef-combine, #edit-kcs-state, #edit-field-category-tid, #edit-field-product-tid, #edit-field-tags-tid, #edit-field-category-und, #edit-field-product-und, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-category, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-product, #views-exposed-form-questions-list-questions-filter-block #edit-field-tags, #edit-field-mega-menu-tab-und, #edit-field-internal-tags-tid, #edit-tags, #edit-field-kcs-tags-select-tid, #edit-subscriptions-and-choose-field-select, #edit-subscriptions-and-type, #edit-vid-13, #edit-vid-4, #edit-vid-5, #edit-vid-53, #edit-vid-1, #edit-vid-3, #edit-group-blog, #edit-group-group, #edit-subscriptions-and-choose-field-select-two, #edit-subscriptions-and-type-two, #edit-vid-13-two, #edit-vid-4-two, #edit-vid-5-two, #edit-vid-53-two, #edit-vid-1-two, #edit-vid-3-two, #edit-group-blog-two, #edit-group-group-two, #edit-subscriptions-and-edit-choose-field-select, #edit-subscriptions-and-type-edit, #edit-subscriptions-and-edit-type-two, #edit-vid-13-edit-two, #edit-vid-4-edit-two, #edit-vid-5-edit-two, #edit-vid-53-edit-two, #edit-vid-1-edit-two, #edit-vid-3-edit-two, #edit-group-group-edit-two, #edit-subscriptions-and-edit-choose-field-select-two, #edit-vid-13-edit, #edit-vid-4-edit, #edit-vid-5-edit, #edit-vid-53-edit, #edit-vid-1-edit, #edit-vid-3-edit, #edit-group-group-edit, #edit-group-blog-edit, #edit-field-supported-languages-tid, #edit-field-geography-und, #edit-field-supported-products-und, #edit-field-supported-languages-und, #edit-field-vendor-und, #edit-field-errata-type-text-und, #edit-field-errata-severity-text-und, #edit-field-software-partner-level-und, #edit-field-scert-product-category-und, #edit-field-certifications-und-0-field-product-und, #edit-kcs-article-type, #edit-field-eco-industry-tag-select-tid, #edit-field-eco-software-catego-select-tid, #edit-field-ecosystem-tag-select-und, #edit-field-eco-industry-tag-select-und, #edit-field-eco-software-catego-select-und, #edit-field-vendor-tsanet-member-ref-und, #edit-field-og-vendor-ref-und-0-default, #edit-field-eco-products-enabled-col-und-0-field-eco-subscription-model-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-support-level-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-archite-select-und, #edit-field-eco-certifications-select-und-0-field-eco-certificati-lvl-select-und, #edit-field-eco-certifications-select-und-0-field-eco-hypervisor-str-und, #edit-field-eco-supported-language-ref-und, #edit-field-eco-region-ref-und, #edit-field-cs-product-category-str-und, #edit-field-eco-certifications-select-und-0-field-eco-format-ref-und, #edit-field-eco-group-access-ref-und, #edit-field-hw-category-tag-ref-und, #edit-field-profile-industry-und, #edit-field-profile-tech-interests-und, #edit-field-product-page-features-ref-und, #edit-field-eco-product-select-und, #edit-field-base-product-ref-und, #edit-field-eco-product-archite-select-und, #edit-field-eco-format-ref-und, #edit-field-certification-status-ref-und, #edit-field-certification-result-ref-und, #edit-field-og-certified-product-ref-und-0-default, #edit-field-eco-subscription-model-ref-und, #edit-field-eco-support-level-ref-und, #edit-field-eco-certificati-lvl-select-und, #edit-field-eco-hypervisor-str-und, #edit-field-ccp-thirdparty-cert-select-und, .use_, #edit-field-eco-cert-product-tag-und, #edit-field-documentation-location-ref-und, #edit-field-documentation-title-und, #edit-field-accelerator-products-und","minimum":"0"},"rh_doc_fetcher":{"page_type":"single"},"section":"","kcs":{"nodeType":null,"nodeId":null}});</script>
    <!--[if lt IE 9]>
  <script src="https://access.redhat.com/sites/all/themes/kcs/js/html5shiv.js"></script>
  <![endif]-->
  
      


    <!--kcs07-->
<script type="text/javascript">
  Drupal.portal = {"version":{"redhat_portal":"package drupal7-redhat_portal is not installed"}};
  Drupal.portal.currentUser = {};
  </script>

</head>

<body class="portal-page admin-bar  kcs_external" >

  
  <div id="page-wrap" class="page-wrap">
    <div class="top-page-wrap">

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <!-- Accessibility Nav & Header -->
<div class="accessibility-nav sr-only">
    <a href="https://access.redhat.com/">
        <h1>Red Hat <span>Customer </span><span>Portal</span></h1>
    </a>
    <p><a href="index.html#cp-main">Skip to main content</a></p>
    <nav aria-labelledby="accessibility-nav-heading">
        <h2 id="accessibility-nav-heading">Main Navigation</h2>
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/support/policy/update_policies/">Product Life Cycle &amp; Update Policies</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/ecosystem/">Ecosystem</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="accessibility-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="accessibility-accountUser">
                    <div class="account-name"><strong id="accessibility-userFullName"></strong></div>
                    <div class="account-org"><span id="accessibility-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="accessibility-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="accessibility-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="accessibility-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="accessibility-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="accessibility-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="accessibility-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- Mobile Header -->
<nav class="mobile-nav-bar hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <button id="menu-btn" class="menu menu-white" type="button" aria-label="Toggle Navigation">
        <span class="lines"></span>
    </button>
    <a class="logo" href="https://access.redhat.com/">
        <span class="logo-crop">
          <!-- logo -->
          <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
            <defs>
              <style>
                .rh-logo-hat {
                  fill: #e00;
                }
                .rh-logo-type {
                  fill: #fff;
                }
              </style>
            </defs>
            <title>Red Hat</title>
            <path
              class="rh-logo-hat"
              d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
              <path class="rh-logo-band"
              d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
              <path
              class="rh-logo-type"
              d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
          </svg>
        </span>
        <span class="site-title"><span>Customer </span><span>Portal</span></span>
    </a>
    <button class="btn btn-search btn-utility" data-target="#site-search">
        <span class="web-icon-search"></span>
        <span class="link-text">Search</span>
    </button>
</nav>

<!-- Mobile Menu Drawer -->
<div class="nav-drawer mobile-nav-drawer hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <nav class="nav-container">
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/support/policy/update_policies/">Product Life Cycle &amp; Update Policies</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/ecosystem/">Ecosystem</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="mobile-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="mobile-accountUser">
                    <div class="account-name"><strong id="mobile-userFullName"></strong></div>
                    <div class="account-org"><span id="mobile-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="mobile-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="mobile-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="mobile-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="mobile-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="mobile-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="mobile-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- White Utility Menu for large screens -->
<div class="utility-wrap" aria-hidden="true">
    <div class="utility-container">
        <div class="utility-bar hidden-xs">
            <div role="navigation" class="top-nav">
                <ul>
                    <li id="nav-subscription" data-portal-tour-1="1"><a class="top-nav-subscriptions" href="https://access.redhat.com/management/">Subscriptions</a></li>
                    <li id="nav-downloads" data-portal-tour-1="2"><a class="top-nav-downloads" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li id="nav-containers"><a class="top-nav-containers" href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
                    <li id="nav-support" data-portal-tour-1="3"><a class="top-nav-support-cases" href="https://access.redhat.com/support/cases/">Support Cases</a></li>
                </ul>
            </div>

            <div role="navigation" class="utility-nav">
                <ul>
                    <li id="searchABTestHide">
                        <a class="btn-search" data-target="#site-search" title="Search" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-search" aria-label="search"></span>
                            <span class="link-text">Search</span>
                        </a>
                    </li>
                    <!-- AB Test -->
                    <li id="searchABTestShow">
                        <form id="topSearchFormABTest" name="topSearchFormABTest">
                            <label for="topSearchInputABTest" class="sr-only">Search</label>
                            <input id="topSearchInputABTest" name="keyword" placeholder="Search" value="" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="form-control">
                            <button type="submit" class="btn btn-app btn-sm btn-link"><span class="web-icon-search" aria-label="search"></span></button>
                        </form>
                    </li>
                    <!-- End of AB Test -->
                    <li>
                        <a class="btn-profile" data-target="#account-info" data-portal-tour-1="4a" title="Account" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-user" aria-label="log in"></span>
                            <span class="link-text">Log In</span>
                            <span class="account-user" id="accountUserName"></span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-language" data-target="#language" data-portal-tour-1="6" title="Language" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-globe" aria-label="language"></span>
                            <span class="link-text">Language</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Utility Tray -->
        <div class="utility-tray-container">
            <div class="utility-tray">
                <div id="site-search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="https://access.redhat.com/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <div class="input-group push-bottom">

                                <input class="form-control searchField" id="topSearchInput" name="keyword" value="" placeholder="Enter your search term" type="text">
                                <span class="input-group-btn">
                                    <button type="submit" class="btn btn-primary">Search</button>
                                </span>
                            </div>
                            <div>Troubleshooting an issue? Try <a href="https://access.redhat.com/solution-engine">Solution Engine</a>&mdash;our new support tool.</div>
                        </form>
                    </div>
                </div>
                <div id="account-info" class="utility-link account-info">
                    <div class="content">

                        <!-- Account Unauthenticated -->
                        <div id="accountLinksLoggedOut" class="unauthenticated">
                            <h2 class="utility-header">Log in to Your Red Hat Account</h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border">
                                    <p><a href="https://access.redhat.com/login" id="accountLogin" class="btn btn-primary">Log In</a></p>
                                    <p>Your Red Hat account gives you access to your profile, preferences, and services, depending on your status.</p>
                                </div>
                                <div class="col-sm-6 col-border col-border-left">
                                    <p><a href="https://www.redhat.com/wapps/ugc/register.html" class="btn btn-primary">Register</a></p>
                                    <p>If you are a new customer, register now for access to product evaluations and purchasing capabilities. </p>

                                    <strong>Need access to an account?</strong><p>If your company has an existing Red Hat account, your organization administrator can grant you access.</p>

                                    <p><a href="https://access.redhat.com/support/contact/customerService/">If you have any questions, please contact customer service.</a></p>
                                </div>
                            </div>
                        </div>

                        <!-- Account Authenticated -->
                        <div id="accountLinksLoggedIn" class="authenticated">
                            <h2 class="utility-header"><span id="userFirstName"></span></h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border col-border-right">
                                    <div class="account-info" id="accountUser">
                                        <div class="avatar"><!-- placeholder--></div>
                                        <div class="account-name"><strong id="userFullName"></strong></div>
                                        <div class="account-org"><span id="userOrg"></span></div>
                                        <div class="account-number accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                                    </div>

                                    <div class="row account-settings">
                                        <div class="col-md-6" data-portal-tour-1="4">
                                            <h3>Red Hat Account</h3>
                                            <ul class="reset">
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
                                                <!-- <li><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
                                                <li><a href="https://access.redhat.com/account-team">Account Team</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6" data-portal-tour-1="5">
                                            <h3>Customer Portal</h3>
                                            <ul class="reset">
                                                <li><a href="https://access.redhat.com/user">My Profile</a></li>
                                                <li><a href="https://access.redhat.com/user" id="userNotificationsLink">Notifications</a></li>
                                                <li><a href="https://access.redhat.com/help/">Help</a></li>
                                            </ul>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-sm-6 col-border">
                                    <p>For your security, if you’re on a public computer and have finished using your Red Hat services, please be sure to log out.</p>
                                    <p><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout" id="accountLogout" class="btn btn-primary">Log Out</a></p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div id="language" class="utility-link language">
                    <div class="content">
                        <h2 class="utility-header">Select Your Language</h2>
                        <div class="row" id="localesMenu">
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=en" data-lang="en" id="en">English</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ko" data-lang="ko" id="ko">한국어</a></li>
                                </ul>
                            </div>
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ja"    data-lang="ja"    id="ja">日本語</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" data-lang="zh_CN" id="zh_CN">中文 (中国)</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="scroll-anchor"></div>

<!-- Main Menu for large screens -->
<div class="header-nav visible-sm visible-md visible-lg" aria-hidden="true">
    <div id="header-nav">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">

                    <a href="https://access.redhat.com/" class="logo">
                        <span class="logo-crop">
                          <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                            <defs>
                              <style>
                                .rh-logo-hat {
                                  fill: #e00;
                                }
                                .rh-logo-type {
                                  fill: #fff;
                                }
                              </style>
                            </defs>
                            <title>Red Hat</title>
                            <path
                              class="rh-logo-hat"
                              d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                              <path class="rh-logo-band"
                              d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                              <path
                              class="rh-logo-type"
                              d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                          </svg>
                        </span>
                        <span class="site-title"><span>Customer </span><span>Portal</span></span>
                    </a>

                    <nav class="primary-nav hidden-sm">
                        <ul>
                            <li id="nav-products"><a class="products" data-link="mega" data-target="products-menu" href="https://access.redhat.com/products/" id="products-menu">Products &amp; Services</a></li>
                            <li id="nav-tools"><a class="tools" data-link="mega" data-target="tools-menu" href="https://access.redhat.com/labs/" id="tools-menu">Tools</a></li>
                            <li id="nav-security"><a class="security" data-link="mega" data-target="security-menu" href="https://access.redhat.com/security/" id="security-menu">Security</a></li>
                            <li id="nav-community"><a class="community" data-link="mega" data-target="community-menu" href="https://access.redhat.com/community/" id="community-menu">Community</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Mega Menu for large screens -->
<div class="mega-wrap visible-sm visible-md visible-lg" aria-hidden="true">
    <nav class="mega">
        <div class="container">
            <div class="mega-menu-wrap">

                <!-- Products Menu -->
                <div aria-labelledby="products-menu" class="products-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-md-6 col-sm-8">
                            <div class="root clearfix" data-portal-tour-1="7">
                                <ul class="subnav subnav-root">
                                    <li data-target="infrastructure-menu" class="active">
                                        <h3>Infrastructure and Management</h3>
                                    </li>
                                    <li data-target="cloud-menu">
                                        <h3>Cloud Computing</h3>
                                    </li>
                                    <li data-target="storage-menu">
                                        <h3>Storage</h3>
                                    </li>
                                    <li data-target="jboss-dev-menu">
                                        <h3>Runtimes</h3>
                                    </li>
                                    <li data-target="jboss-int-menu">
                                        <h3>Integration and Automation</h3>
                                    </li>
                                </ul>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="infrastructure-menu" style="display: block;">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="cloud-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="storage-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a>
                                        </li>
                                        <li>
                                          <a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-dev-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                        </li>
                                    </ul>
                                </div> -->
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul class="border-bottom" id="portal-menu-border-bottom">
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                      </li>
                                    </ul>
                                    <ul>
                                      <li>
                                        <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Automation</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                      </li>
                                    </ul>
                                </div>
                            </div>
                            <a href="https://access.redhat.com/products" class="btn btn-primary">View All Products</a>
                        </div>

                        <div class="col-md-6 col-sm-4 pull-right" data-portal-tour-1="8">
                            <div class="row">
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/support" class="cta-link cta-link-darkbg">Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
                                        <li><a href="https://access.redhat.com/support/policy/update_policies/">Product Life Cycle &amp; Update Policies</a></li>
                                    </ul>
                                    <h4 class="nav-title">Services</h4>
                                    <ul>
                                        <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
                                        <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/documentation" class="cta-link cta-link-darkbg">Documentation</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>
                                    </ul>
                                    <ul>
                                        <li><a href="https://access.redhat.com/ecosystem/" class="cta-link cta-link-darkbg">Ecosystem</a></li>
                                        <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
                                        <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tools Menu -->
                <div aria-labelledby="tools-menu" class="tools-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row" data-portal-tour-1="9">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h3 class="nav-title">Tools</h3>
                                    <ul>
                                        <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
                                        <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
                                        <li><a href="https://access.redhat.com/errata/">Errata</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <ul class="list-flat">
                                        <li><a href="https://access.redhat.com/labs/" class="cta-link cta-link-darkbg">Customer Portal Labs</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <div class="card card-dark-grey">
                                        <h4 class="card-heading">Red Hat Insights</h4>
                                        <p class="text-white">Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                        <ul class="list-flat rh-l-grid rh-m-gutters rh-m-all-6-col-on-md">
                                          <li><a href="https://www.redhat.com/en/technologies/management/insights" class="cta-link cta-link-md cta-link-darkbg">Learn more</a></li>
                                          <li><a href="https://cloud.redhat.com/insights" class="cta-link cta-link-md cta-link-darkbg">Go to Insights</a></li>
                                        </ul>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>

                <!-- Security Menu -->
                <div aria-labelledby="security-menu" class="security-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="10">

                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Red Hat Product Security Center</h2>
                                    <p class="text-white">Engage with our Red Hat Product Security team, access security updates, and ensure your environments are not exposed to any known security vulnerabilities.</p>
                                    <p><a href="https://access.redhat.com/security/" class="btn btn-primary">Product Security Center</a></p>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Security Updates</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
                                    </ul>
                                    <p class="text-white">Keep your systems secure with Red Hat&#039;s specialized responses for high-priority security vulnerabilities.</p>
                                    <ul>
                                        <li class="more-link"><a href="https://access.redhat.com/security/vulnerability">View Responses</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Resources</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
                                        <li><a href="https://www.redhat.com/en/blog/channel/security">Security Blog</a></li>
                                        <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
                                        <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community Menu -->
                <div aria-labelledby="community-menu" class="community-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="11">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Portal Community</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
                                        <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
                                        <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
                                        <p class="push-top"><a href="https://access.redhat.com/community/" class="btn btn-primary">Community Activity</a></p>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Events</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
                                        <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Stories</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
                                        <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
                                        <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!--<a href="https://access.redhat.com/community/" class="btn btn-primary">Explore Community</a>-->
                    </div>
                </div>
            </div>
        </div>
    </nav>
</div>

            <!--[if IE 8]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
            </div>
            <![endif]-->
            <!--[if IE 9]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
            </div>
            <![endif]-->
            <div id="site-section"></div>
        </header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">
  <script type="text/javascript">
    chrometwo_require(['jquery-ui']);
  </script>


      <article class="rh_docs">
  <div class="container">
        <!-- Display: Book Page Content -->
    
  

<div class="row">
  <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
  <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
  


<a class="toc-toggle toc-show" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
  <span class="sr-only">Show Table of Contents</span>
  <span class="web-icon-mobile-menu" aria-hidden="true"></span>
</a>
<nav id="toc-main" class="toc-main collapse in">
  <div class="toc-menu affix-top">
    <a class="toc-toggle toc-hide" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
      <span class="sr-only">Hide Table of Contents</span>
      <span class="icon-remove" aria-hidden="true"></span>
    </a>
    <div class="doc-options">
      <div class="doc-language btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          English <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="https://access.redhat.com/documentation/ja-jp/red_hat_enterprise_linux/8/html/managing_storage_devices/">日本語</a></li>
                      <li><a href="index.html">English</a></li>
                  </ul>
      </div>
      <div class="doc-format btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          Single-page HTML <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_storage_devices/">Multi-page HTML</a></li>
                                <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/pdf/managing_storage_devices/Red_Hat_Enterprise_Linux-8-Managing_storage_devices-en-US.pdf">PDF</a></li>
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/epub/managing_storage_devices/Red_Hat_Enterprise_Linux-8-Managing_storage_devices-en-US.epub">ePub</a></li>
                  </ul>
      </div>
    </div>
    <ol class="menu"><li class=" leaf"><a href="index.html">Managing storage devices</a></li><li class=" leaf"><a href="index.html#proc_providing-feedback-on-red-hat-documentation_managing-storage-devices">Providing feedback on Red Hat documentation</a></li><li class=" leaf"><a href="index.html#overview-of-available-storage-options_managing-storage-devices">1. Overview of available storage options</a><ol class="menu"><li class=" leaf"><a href="index.html#local-storage-options_overview-of-available-storage-options">1.1. Local storage options</a></li><li class=" leaf"><a href="index.html#remote-storage-options_overview-of-available-storage-options">1.2. Remote storage options</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_getting-started-with-partitions_managing-storage-devices">2. Getting started with partitions</a><ol class="menu"><li class=" leaf"><a href="index.html#assembly_viewing-the-partition-table_assembly_getting-started-with-partitions">2.1. Viewing the partition table</a><ol class="menu"><li class=" leaf"><a href="index.html#proc_viewing-the-partition-table-with-parted_assembly_viewing-the-partition-table">2.1.1. Viewing the partition table with parted</a></li><li class=" leaf"><a href="index.html#ref_example-output-of-parted-print_assembly_viewing-the-partition-table">2.1.2. Example output of parted print</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_creating-a-partition-table-on-a-disk_assembly_getting-started-with-partitions">2.2. Creating a partition table on a disk</a><ol class="menu"><li class=" leaf"><a href="index.html#con_considerations-before-modifying-partitions-on-a-disk_assembly_creating-a-partition-table-on-a-disk">2.2.1. Considerations before modifying partitions on a disk</a></li><li class=" leaf"><a href="index.html#ref_comparison-of-partition-table-types_assembly_creating-a-partition-table-on-a-disk">2.2.2. Comparison of partition table types</a></li><li class=" leaf"><a href="index.html#proc_creating-a-partition-table-on-a-disk-with-parted_assembly_creating-a-partition-table-on-a-disk">2.2.3. Creating a partition table on a disk with parted</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_creating-a-partition_assembly_getting-started-with-partitions">2.3. Creating a partition</a><ol class="menu"><li class=" leaf"><a href="index.html#con_considerations-before-modifying-partitions-on-a-disk_assembly_creating-a-partition">2.3.1. Considerations before modifying partitions on a disk</a></li><li class=" leaf"><a href="index.html#con_partition-types_assembly_creating-a-partition">2.3.2. Partition types</a></li><li class=" leaf"><a href="index.html#proc_creating-a-partition-with-parted_assembly_creating-a-partition">2.3.3. Creating a partition with parted</a></li><li class=" leaf"><a href="index.html#proc_setting-a-partition-type-with-fdisk_assembly_creating-a-partition">2.3.4. Setting a partition type with fdisk</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_removing-a-partition_assembly_getting-started-with-partitions">2.4. Removing a partition</a><ol class="menu"><li class=" leaf"><a href="index.html#con_considerations-before-modifying-partitions-on-a-disk_assembly_removing-a-partition">2.4.1. Considerations before modifying partitions on a disk</a></li><li class=" leaf"><a href="index.html#proc_removing-a-partition-with-parted_assembly_removing-a-partition">2.4.2. Removing a partition with parted</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_resizing-a-partition_assembly_getting-started-with-partitions">2.5. Resizing a partition</a><ol class="menu"><li class=" leaf"><a href="index.html#con_considerations-before-modifying-partitions-on-a-disk_assembly_resizing-a-partition">2.5.1. Considerations before modifying partitions on a disk</a></li><li class=" leaf"><a href="index.html#proc_resizing-a-partition-with-parted_assembly_resizing-a-partition">2.5.2. Resizing a partition with parted</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#assembly_overview-of-persistent-naming-attributes_managing-storage-devices">3. Overview of persistent naming attributes</a><ol class="menu"><li class=" leaf"><a href="index.html#con_disadvantages-of-non-persistent-naming-attributes_assembly_overview-of-persistent-naming-attributes">3.1. Disadvantages of non-persistent naming attributes</a></li><li class=" leaf"><a href="index.html#file-system-and-device-identifiers_assembly_overview-of-persistent-naming-attributes">3.2. File system and device identifiers</a></li><li class=" leaf"><a href="index.html#con_device-names-managed-by-the-udev-mechanism-in-dev-disk-_assembly_overview-of-persistent-naming-attributes">3.3. Device names managed by the udev mechanism in /dev/disk/</a><ol class="menu"><li class=" leaf"><a href="index.html#file-system-identifiers_assembly_overview-of-persistent-naming-attributes">3.3.1. File system identifiers</a></li><li class=" leaf"><a href="index.html#device-identifiers_assembly_overview-of-persistent-naming-attributes">3.3.2. Device identifiers</a></li></ol></li><li class=" leaf"><a href="index.html#con_the-world-wide-identifier-with-dm-multipath_assembly_overview-of-persistent-naming-attributes">3.4. The World Wide Identifier with DM Multipath</a></li><li class=" leaf"><a href="index.html#con_limitations-of-the-udev-device-naming-convention_assembly_overview-of-persistent-naming-attributes">3.5. Limitations of the udev device naming convention</a></li><li class=" leaf"><a href="index.html#proc_listing-persistent-naming-attributes_assembly_overview-of-persistent-naming-attributes">3.6. Listing persistent naming attributes</a></li><li class=" leaf"><a href="index.html#proc_modifying-persistent-naming-attributes_assembly_overview-of-persistent-naming-attributes">3.7. Modifying persistent naming attributes</a></li></ol></li><li class=" leaf"><a href="index.html#using-nvdimm-persistent-memory-storage_managing-storage-devices">4. Using NVDIMM persistent memory storage</a><ol class="menu"><li class=" leaf"><a href="index.html#the-nvdimm-persistent-memory-technology_using-nvdimm-persistent-memory-storage">4.1. The NVDIMM persistent memory technology</a></li><li class=" leaf"><a href="index.html#nvdimm-interleaving-and-regions_using-nvdimm-persistent-memory-storage">4.2. NVDIMM interleaving and regions</a></li><li class=" leaf"><a href="index.html#nvdimm-namespaces_using-nvdimm-persistent-memory-storage">4.3. NVDIMM namespaces</a></li><li class=" leaf"><a href="index.html#nvdimm-access-modes_using-nvdimm-persistent-memory-storage">4.4. NVDIMM access modes</a></li><li class=" leaf"><a href="index.html#creating-a-sector-namespace-on-an-nvdimm-to-act-as-a-block-device_using-nvdimm-persistent-memory-storage">4.5. Creating a sector namespace on an NVDIMM to act as a block device</a><ol class="menu"><li class=" leaf"><a href="index.html#installing-ndctl_creating-a-sector-namespace-on-an-nvdimm-to-act-as-a-block-device">4.5.1. Installing ndctl</a></li><li class=" leaf"><a href="index.html#reconfiguring-an-existing-nvdimm-namespace-to-sector-mode_creating-a-sector-namespace-on-an-nvdimm-to-act-as-a-block-device">4.5.2. Reconfiguring an existing NVDIMM namespace to sector mode</a></li><li class=" leaf"><a href="index.html#creating-a-new-nvdimm-namespace-in-sector-mode_creating-a-sector-namespace-on-an-nvdimm-to-act-as-a-block-device">4.5.3. Creating a new NVDIMM namespace in sector mode</a></li></ol></li><li class=" leaf"><a href="index.html#creating-a-device-dax-namespace-on-an-nvdimm_using-nvdimm-persistent-memory-storage">4.6. Creating a device DAX namespace on an NVDIMM</a><ol class="menu"><li class=" leaf"><a href="index.html#nvdimm-in-device-direct-access-mode_creating-a-device-dax-namespace-on-an-nvdimm">4.6.1. NVDIMM in device direct access mode</a></li><li class=" leaf"><a href="index.html#installing-ndctl_creating-a-device-dax-namespace-on-an-nvdimm">4.6.2. Installing ndctl</a></li><li class=" leaf"><a href="index.html#reconfiguring-an-existing-nvdimm-namespace-to-device-dax-mode_creating-a-device-dax-namespace-on-an-nvdimm">4.6.3. Reconfiguring an existing NVDIMM namespace to device DAX mode</a></li><li class=" leaf"><a href="index.html#creating-a-new-nvdimm-namespace-in-device-dax-mode_creating-a-device-dax-namespace-on-an-nvdimm">4.6.4. Creating a new NVDIMM namespace in device DAX mode</a></li></ol></li><li class=" leaf"><a href="index.html#creating-a-file-system-dax-namespace-on-an-nvdimm_using-nvdimm-persistent-memory-storage">4.7. Creating a file system DAX namespace on an NVDIMM</a><ol class="menu"><li class=" leaf"><a href="index.html#nvdimm-in-file-system-direct-access-mode_creating-a-file-system-dax-namespace-on-an-nvdimm">4.7.1. NVDIMM in file system direct access mode</a></li><li class=" leaf"><a href="index.html#installing-ndctl_creating-a-file-system-dax-namespace-on-an-nvdimm">4.7.2. Installing ndctl</a></li><li class=" leaf"><a href="index.html#reconfiguring-an-existing-nvdimm-namespace-to-file-system-dax-mode_creating-a-file-system-dax-namespace-on-an-nvdimm">4.7.3. Reconfiguring an existing NVDIMM namespace to file system DAX mode</a></li><li class=" leaf"><a href="index.html#creating-a-new-nvdimm-namespace-in-file-system-dax-mode_creating-a-file-system-dax-namespace-on-an-nvdimm">4.7.4. Creating a new NVDIMM namespace in file system DAX mode</a></li><li class=" leaf"><a href="index.html#creating-a-file-system-on-a-file-system-dax-device_creating-a-file-system-dax-namespace-on-an-nvdimm">4.7.5. Creating a file system on a file system DAX device</a></li></ol></li><li class=" leaf"><a href="index.html#troubleshooting-nvdimm-persistent-memory_using-nvdimm-persistent-memory-storage">4.8. Troubleshooting NVDIMM persistent memory</a><ol class="menu"><li class=" leaf"><a href="index.html#installing-ndctl_troubleshooting-nvdimm-persistent-memory">4.8.1. Installing ndctl</a></li><li class=" leaf"><a href="index.html#monitoring-nvdimm-health-using-s-m-a-r-t-_troubleshooting-nvdimm-persistent-memory">4.8.2. Monitoring NVDIMM health using S.M.A.R.T.</a></li><li class=" leaf"><a href="index.html#detecting-and-replacing-a-broken-nvdimm-device_troubleshooting-nvdimm-persistent-memory">4.8.3. Detecting and replacing a broken NVDIMM device</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#discarding-unused-blocks_managing-storage-devices">5. Discarding unused blocks</a><ol class="menu"><li class=" leaf"><a href="index.html#block-discard-operations_discarding-unused-blocks">5.1. Block discard operations</a></li><li class=" leaf"><a href="index.html#types-of-block-discard-operations_discarding-unused-blocks">5.2. Types of block discard operations</a></li><li class=" leaf"><a href="index.html#performing-batch-block-discard_discarding-unused-blocks">5.3. Performing batch block discard</a></li><li class=" leaf"><a href="index.html#enabling-online-block-discard_discarding-unused-blocks">5.4. Enabling online block discard</a></li><li class=" leaf"><a href="index.html#enabling-online-block-discard-using-rhel-system-roles_discarding-unused-blocks">5.5. Enabling online block discard using RHEL System Roles</a><ol class="menu"><li class=" leaf"><a href="index.html#an-example-ansible-playbook-to-enable-online-block-discard_enabling-online-block-discard-using-rhel-system-roles">5.5.1. Example Ansible playbook to enable online block discard</a></li></ol></li><li class=" leaf"><a href="index.html#enabling-periodic-block-discard_discarding-unused-blocks">5.6. Enabling periodic block discard</a></li></ol></li><li class=" leaf"><a href="index.html#getting-started-with-iscsi_managing-storage-devices">6. Getting started with iSCSI</a><ol class="menu"><li class=" leaf"><a href="index.html#adding-an-iscsi-target_getting-started-with-iscsi">6.1. Adding an iSCSI target</a><ol class="menu"><li class=" leaf"><a href="index.html#installing-targetcli_adding-an-iscsi-target">6.1.1. Installing targetcli</a></li><li class=" leaf"><a href="index.html#creating-an-iscsi-target_adding-an-iscsi-target">6.1.2. Creating an iSCSI target</a></li><li class=" leaf"><a href="index.html#iscsi-backstore_adding-an-iscsi-target">6.1.3. iSCSI Backstore</a></li><li class=" leaf"><a href="index.html#creating-a-fileio-storage-object_adding-an-iscsi-target">6.1.4. Creating a fileio storage object</a></li><li class=" leaf"><a href="index.html#creating-a-block-storage-object_adding-an-iscsi-target">6.1.5. Creating a block storage object</a></li><li class=" leaf"><a href="index.html#creating-a-pscsi-storage-object_adding-an-iscsi-target">6.1.6. Creating a pscsi storage object</a></li><li class=" leaf"><a href="index.html#creating-a-memory-copy-ram-disk-storage-object_adding-an-iscsi-target">6.1.7. Creating a Memory Copy RAM disk storage object</a></li><li class=" leaf"><a href="index.html#creating-an-iscsi-portal_adding-an-iscsi-target">6.1.8. Creating an iSCSI portal</a></li><li class=" leaf"><a href="index.html#creating-an-iscsi-lun_adding-an-iscsi-target">6.1.9. Creating an iSCSI LUN</a></li><li class=" leaf"><a href="index.html#creating-a-read-only-iscsi-lun_adding-an-iscsi-target">6.1.10. Creating a read-only iSCSI LUN</a></li><li class=" leaf"><a href="index.html#creating-an-iscsi-acl_adding-an-iscsi-target">6.1.11. Creating an iSCSI ACL</a></li><li class=" leaf"><a href="index.html#creating-an-iscsi-initiator_adding-an-iscsi-target">6.1.12. Creating an iSCSI initiator</a></li><li class=" leaf"><a href="index.html#setting-up-the-challenge-handshake-authentication-protocol-for-the-target_adding-an-iscsi-target">6.1.13. Setting up the Challenge-Handshake Authentication Protocol for the target</a></li><li class=" leaf"><a href="index.html#setting-up-the-challenge-handshake-authentication-protocol-for-the-initiator_adding-an-iscsi-target">6.1.14. Setting up the Challenge-Handshake Authentication Protocol for the initiator</a></li></ol></li><li class=" leaf"><a href="index.html#monitoring-an-iscsi-session_getting-started-with-iscsi">6.2. Monitoring an iSCSI session</a><ol class="menu"><li class=" leaf"><a href="index.html#monitoring-an-iscsi-session-using-the-iscsiadm-utility_monitoring-an-iscsi-session">6.2.1. Monitoring an iSCSI session using the iscsiadm utility</a></li></ol></li><li class=" leaf"><a href="index.html#removing-an-iscsi-target_getting-started-with-iscsi">6.3. Removing an iSCSI target</a><ol class="menu"><li class=" leaf"><a href="index.html#removing-an-iscsi-object-using-targetcli-tool_removing-an-iscsi-target">6.3.1. Removing an iSCSI object using targetcli tool</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#using-fibre-channel-devices_managing-storage-devices">7. Using Fibre Channel devices</a><ol class="menu"><li class=" leaf"><a href="index.html#fibre-channel-api_using-fibre-channel-devices">7.1. Fibre Channel API</a></li><li class=" leaf"><a href="index.html#resizing-fibre-channel-logical-units_using-fibre-channel-devices">7.2. Resizing Fibre Channel Logical Units</a></li><li class=" leaf"><a href="index.html#determining-the-link-loss-behavior-of-device-using-fibre-channel_using-fibre-channel-devices">7.3. Determining the Link Loss Behavior of device using Fibre channel</a></li></ol></li><li class=" leaf"><a href="index.html#configuring-a-fibre-channel-over-ethernet-interface_managing-storage-devices">8. Configuring a Fibre Channel over an Ethernet Interface</a><ol class="menu"><li class=" leaf"><a href="index.html#configuring-an-ethernet-interface-to-use-fcoe_configuring-a-fibre-channel-over-an-ethernet-interface">8.1. Configuring an Ethernet Interface to Use FCoE</a></li><li class=" leaf"><a href="index.html#configuring-an-fcoe-interface-to-automatically-mount-at-boot_configuring-a-fibre-channel-over-an-ethernet-interface">8.2. Configuring an FCoE Interface to Automatically Mount at Boot</a></li></ol></li><li class=" leaf"><a href="index.html#configuring-maximum-time-for-storage-error-recovery-with-eh_deadline_managing-storage-devices">9. Configuring maximum time for storage error recovery with eh_deadline</a><ol class="menu"><li class=" leaf"><a href="index.html#the-eh_deadline-parameter_configuring-maximum-time-for-storage-error-recovery-with-eh_deadline">9.1. The eh_deadline parameter</a></li><li class=" leaf"><a href="index.html#setting-the-eh_deadline-parameter_configuring-maximum-time-for-storage-error-recovery-with-eh_deadline">9.2. Setting the eh_deadline parameter</a></li></ol></li><li class=" leaf"><a href="index.html#getting-started-with-swap_managing-storage-devices">10. Getting started with swap</a><ol class="menu"><li class=" leaf"><a href="index.html#swap-space_getting-started-with-swap">10.1. Swap space</a></li><li class=" leaf"><a href="index.html#recommended-system-swap-space_getting-started-with-swap">10.2. Recommended system swap space</a></li><li class=" leaf"><a href="index.html#adding-swap-space_getting-started-with-swap">10.3. Adding swap space</a><ol class="menu"><li class=" leaf"><a href="index.html#extending-swap-on-an-lvm2-logical-volume_adding-swap-space">10.3.1. Extending swap on an LVM2 logical volume</a></li><li class=" leaf"><a href="index.html#creating-an-lvm2-logical-volume-for-swap_adding-swap-space">10.3.2. Creating an LVM2 logical volume for swap</a></li><li class=" leaf"><a href="index.html#creating-a-swap-file_adding-swap-space">10.3.3. Creating a swap file</a></li></ol></li><li class=" leaf"><a href="index.html#removing-swap-space_getting-started-with-swap">10.4. Removing swap space</a><ol class="menu"><li class=" leaf"><a href="index.html#reducing-swap-on-an-lvm2-logical-volume_removing-swap-space">10.4.1. Reducing swap on an LVM2 logical volume</a></li><li class=" leaf"><a href="index.html#removing-an-lvm2-logical-volume-for-swap_removing-swap-space">10.4.2. Removing an LVM2 logical volume for swap</a></li><li class=" leaf"><a href="index.html#removing-a-swap-file_removing-swap-space">10.4.3. Removing a swap file</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#managing-system-upgrades-as-snapshots_managing-storage-devices">11. Managing system upgrades as snapshots</a><ol class="menu"><li class=" leaf"><a href="index.html#overview-of-the-boom-process_managing-system-upgrades-as-snapshots">11.1. Overview of the Boom process</a></li><li class=" leaf"><a href="index.html#upgrading-to-another-version-using-boom_managing-system-upgrades-as-snapshots">11.2. Upgrading to another version using Boom</a></li><li class=" leaf"><a href="index.html#switching-between-new-and-old-rhel-versions_managing-system-upgrades-as-snapshots">11.3. Switching between new and old Red Hat Enterprise Linux versions</a></li><li class=" leaf"><a href="index.html#deleting-the-snapshot_managing-system-upgrades-as-snapshots">11.4. Deleting the snapshot</a></li></ol></li><li class=" leaf"><a href="index.html#overview-of-nvme-over-fabric-devicesmanaging-storage-devices">12. Overview of NVMe over fabric devices</a><ol class="menu"><li class=" leaf"><a href="index.html#nvme-over-fabrics-using-rdma_overview-of-nvme-over-fabric-devices">12.1. NVMe over fabrics using RDMA</a><ol class="menu"><li class=" leaf"><a href="index.html#setting-up-nvme-rdma-target-using-configfs_nvme-over-fabrics-using-rdma">12.1.1. Setting up an NVMe/RDMA target using configfs</a></li><li class=" leaf"><a href="index.html#setting-up-nvme-rdma-target-using-nvmetcli_nvme-over-fabrics-using-rdma">12.1.2. Setting up the NVMe/RDMA target using nvmetcli</a></li><li class=" leaf"><a href="index.html#configuring-nvme-rdma-client_nvme-over-fabrics-using-rdma">12.1.3. Configuring an NVMe/RDMA client</a></li></ol></li><li class=" leaf"><a href="index.html#nvme-over-fabrics-using-fc_overview-of-nvme-over-fabric-devices">12.2. NVMe over fabrics using FC</a><ol class="menu"><li class=" leaf"><a href="index.html#configuring-the-nvme-initiator-for-broadcom-adapters_nvme-over-fabrics-using-fc">12.2.1. Configuring the NVMe initiator for Broadcom adapters</a></li><li class=" leaf"><a href="index.html#configuring-the-nvme-initiator-for-qlogic-adapters_nvme-over-fabrics-using-fc">12.2.2. Configuring the NVMe initiator for QLogic adapters</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#setting-the-disk-scheduler_managing-storage-devices">13. Setting the disk scheduler</a><ol class="menu"><li class=" leaf"><a href="index.html#disk-scheduler-changes-in-rhel-8_setting-the-disk-scheduler">13.1. Disk scheduler changes in RHEL 8</a></li><li class=" leaf"><a href="index.html#available-disk-schedulers_setting-the-disk-scheduler">13.2. Available disk schedulers</a></li><li class=" leaf"><a href="index.html#recommended-disk-schedulers-for-different-use-cases_setting-the-disk-scheduler">13.3. Recommended disk schedulers for different use cases</a></li><li class=" leaf"><a href="index.html#the-default-disk-scheduler_setting-the-disk-scheduler">13.4. The default disk scheduler</a></li><li class=" leaf"><a href="index.html#determining-the-active-disk-scheduler_setting-the-disk-scheduler">13.5. Determining the active disk scheduler</a></li><li class=" leaf"><a href="index.html#setting-the-disk-scheduler-using-tuned_setting-the-disk-scheduler">13.6. Setting the disk scheduler using Tuned</a></li><li class=" leaf"><a href="index.html#setting-the-disk-scheduler-using-udev-rules_setting-the-disk-scheduler">13.7. Setting the disk scheduler using udev rules</a></li><li class=" leaf"><a href="index.html#temporarily-setting-a-scheduler-for-a-specific-disk_setting-the-disk-scheduler">13.8. Temporarily setting a scheduler for a specific disk</a></li></ol></li><li class=" leaf"><a href="index.html#managing-layered-local-storage-with-stratis_managing-storage-devices">14. Managing layered local storage with Stratis</a><ol class="menu"><li class=" leaf"><a href="index.html#setting-up-stratis-file-systems_managing-layered-local-storage-with-stratis">14.1. Setting up Stratis file systems</a><ol class="menu"><li class=" leaf"><a href="index.html#the-purpose-and-features-of-stratis_setting-up-stratis-file-systems">14.1.1. The purpose and features of Stratis</a></li><li class=" leaf"><a href="index.html#components-of-a-stratis-volume_setting-up-stratis-file-systems">14.1.2. Components of a Stratis volume</a></li><li class=" leaf"><a href="index.html#block-devices-usable-with-stratis_setting-up-stratis-file-systems">14.1.3. Block devices usable with Stratis</a></li><li class=" leaf"><a href="index.html#installing-stratis_setting-up-stratis-file-systems">14.1.4. Installing Stratis</a></li><li class=" leaf"><a href="index.html#creating-a-stratis-pool_setting-up-stratis-file-systems">14.1.5. Creating a Stratis pool</a></li><li class=" leaf"><a href="index.html#creating-a-stratis-file-system_setting-up-stratis-file-systems">14.1.6. Creating a Stratis file system</a></li><li class=" leaf"><a href="index.html#mounting-a-stratis-file-system_setting-up-stratis-file-systems">14.1.7. Mounting a Stratis file system</a></li><li class=" leaf"><a href="index.html#persistently-mounting-a-stratis-file-system_setting-up-stratis-file-systems">14.1.8. Persistently mounting a Stratis file system</a></li><li class=" leaf"><a href="index.html#related-information-setting-up-stratis-file-systems">14.1.9. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#extending-a-stratis-volume-with-additional-block-devices_managing-layered-local-storage-with-stratis">14.2. Extending a Stratis volume with additional block devices</a><ol class="menu"><li class=" leaf"><a href="index.html#components-of-a-stratis-volume_extending-a-stratis-volume-with-additional-block-devices">14.2.1. Components of a Stratis volume</a></li><li class=" leaf"><a href="index.html#adding-block-devices-to-a-stratis-pool_extending-a-stratis-volume-with-additional-block-devices">14.2.2. Adding block devices to a Stratis pool</a></li><li class=" leaf"><a href="index.html#related-information-extending-a-stratis-volume-with-additional-block-devices">14.2.3. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#monitoring-stratis-file-systems_managing-layered-local-storage-with-stratis">14.3. Monitoring Stratis file systems</a><ol class="menu"><li class=" leaf"><a href="index.html#stratis-sizes-reported-by-different-utilities_monitoring-stratis-file-systems">14.3.1. Stratis sizes reported by different utilities</a></li><li class=" leaf"><a href="index.html#displaying-information-about-stratis-volumes_monitoring-stratis-file-systems">14.3.2. Displaying information about Stratis volumes</a></li><li class=" leaf"><a href="index.html#related-information-monitoring-stratis-file-systems">14.3.3. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#using-snapshots-on-stratis-file-systems_managing-layered-local-storage-with-stratis">14.4. Using snapshots on Stratis file systems</a><ol class="menu"><li class=" leaf"><a href="index.html#characteristics-of-stratis-snapshots_using-snapshots-on-stratis-file-systems">14.4.1. Characteristics of Stratis snapshots</a></li><li class=" leaf"><a href="index.html#creating-a-stratis-snapshot_using-snapshots-on-stratis-file-systems">14.4.2. Creating a Stratis snapshot</a></li><li class=" leaf"><a href="index.html#accessing-the-content-of-a-stratis-snapshot_using-snapshots-on-stratis-file-systems">14.4.3. Accessing the content of a Stratis snapshot</a></li><li class=" leaf"><a href="index.html#reverting-a-stratis-file-system-to-a-previous-snapshot_using-snapshots-on-stratis-file-systems">14.4.4. Reverting a Stratis file system to a previous snapshot</a></li><li class=" leaf"><a href="index.html#removing-a-stratis-snapshot_using-snapshots-on-stratis-file-systems">14.4.5. Removing a Stratis snapshot</a></li><li class=" leaf"><a href="index.html#related-information-using-snapshots-on-stratis-file-systems">14.4.6. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#removing-stratis-file-systems_managing-layered-local-storage-with-stratis">14.5. Removing Stratis file systems</a><ol class="menu"><li class=" leaf"><a href="index.html#components-of-a-stratis-volume_removing-stratis-file-systems">14.5.1. Components of a Stratis volume</a></li><li class=" leaf"><a href="index.html#removing-a-stratis-file-system_removing-stratis-file-systems">14.5.2. Removing a Stratis file system</a></li><li class=" leaf"><a href="index.html#removing-a-stratis-pool_removing-stratis-file-systems">14.5.3. Removing a Stratis pool</a></li><li class=" leaf"><a href="index.html#related-information-removing-stratis-file-systems">14.5.4. Related information</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#setting-up-a-remote-diskless-system_managing-storage-devices">15. Setting up a remote diskless system</a><ol class="menu"><li class=" leaf"><a href="index.html#preparing-an-environment-for-the-remote-diskless-system_setting-up-a-remote-diskless-system">15.1. Preparing an environment for the remote diskless system</a></li><li class=" leaf"><a href="index.html#configuring-a-tftp-service-for-diskless-client_setting-up-a-remote-diskless-system">15.2. Configuring a tftp service for diskless clients</a></li><li class=" leaf"><a href="index.html#configuring-dhcp-for-diskless-clients_setting-up-a-remote-diskless-system">15.3. Configuring DHCP server for diskless clients</a></li><li class=" leaf"><a href="index.html#configuring-an-exported-file-system-for-diskless-clients_setting-up-a-remote-diskless-system">15.4. Configuring an exported file system for diskless clients</a></li><li class=" leaf"><a href="index.html#re-configuring-a-remote-diskless-system_setting-up-a-remote-diskless-system">15.5. Re-configuring a remote diskless system</a></li><li class=" leaf"><a href="index.html#the-most-common-issues-with-loading-a-remote-diskless-system_setting-up-a-remote-diskless-system">15.6. The most common issues with loading a remote diskless system</a><ol class="menu"><li class=" leaf"><a href="index.html#the_client_does_not_get_an_ip_address">15.6.1. The client does not get an IP address</a></li><li class=" leaf"><a href="index.html#the_files_are_not_available_during_the_booting_a_remote_diskless_system">15.6.2. The files are not available during the booting a remote diskless system</a></li><li class=" leaf"><a href="index.html#system_boot_failed_after_loading_kernel_initrd">15.6.3. System boot failed after loading kernel/initrd</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#managing-raid_managing-storage-devices">16. Managing RAID</a><ol class="menu"><li class=" leaf"><a href="index.html#redundant-array-of-independent-disks-raid_managing-raid">16.1. Redundant array of independent disks (RAID)</a></li><li class=" leaf"><a href="index.html#raid-types_managing-raid">16.2. RAID types</a></li><li class=" leaf"><a href="index.html#raid-levels-and-linear-support_managing-raid">16.3. RAID levels and linear support</a></li><li class=" leaf"><a href="index.html#linux-raid-subsystems_managing-raid">16.4. Linux RAID subsystems</a><ol class="menu"><li class=" leaf"><a href="index.html#linux_hardware_raid_controller_drivers">16.4.1. Linux Hardware RAID Controller Drivers</a></li><li class=" leaf"><a href="index.html#mdraid">16.4.2. mdraid</a></li></ol></li><li class=" leaf"><a href="index.html#creating-software-raid_managing-raid">16.5. Creating software RAID</a></li><li class=" leaf"><a href="index.html#creating-software-raid-after-installation_managing-raid">16.6. Creating software RAID after installation</a></li><li class=" leaf"><a href="index.html#reconfiguring-raid_managing-raid">16.7. Reconfiguring RAID</a><ol class="menu"><li class=" leaf"><a href="index.html#reshaping-raid_reconfiguring-raid">16.7.1. Reshaping RAID</a></li><li class=" leaf"><a href="index.html#raid-takeover_reconfiguring-raid">16.7.2. RAID takeover</a></li></ol></li><li class=" leaf"><a href="index.html#converting-root-disk-to-raid1-after-installation_managing-raid">16.8. Converting a root disk to RAID1 after installation</a></li><li class=" leaf"><a href="index.html#creating-advanced-raid-devices_managing-raid">16.9. Creating advanced RAID devices</a></li><li class=" leaf"><a href="index.html#monitoring-raid_managing-raid">16.10. Monitoring RAID</a></li><li class=" leaf"><a href="index.html#maintaining-raid_managing-raid">16.11. Maintaining RAID</a><ol class="menu"><li class=" leaf"><a href="index.html#replacing-the-faulty-disk_maintaining-raid">16.11.1. Replacing a faulty disk in a RAID</a></li><li class=" leaf"><a href="index.html#replacing-the-broken-disk_maintaining-raid">16.11.2. Replacing a broken disk in array</a></li><li class=" leaf"><a href="index.html#resynchronizing-raid-disks_maintaining-raid">16.11.3. Resynchronizing RAID disks</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#idm140163630403760">Legal Notice</a></li></ol>  </div>
</nav>


  <div class="doc-wrapper">
    <div class="panel-pane pane-training-banner"  >
  
      
  
  <div class="card card-light card-md push-bottom">
  <h2 class="card-heading card-heading-red card-heading-sm card-heading-flush">Red Hat Training</h2>
  <p>A Red Hat training course is available for <a href="https://www.redhat.com/en/services/training/courses-by-curriculum?intcmp=701f2000001D4OtAAK&amp;#Red-Hat-Enterprise-Linux" class="cta-link">RHEL 8</a></p>
</div>

  
  </div>
<div class="panel-pane pane-page-title"  >
  
      
  
  <h1 class="title" itemprop="name">Managing storage devices</h1>
  
  </div>
<div class="panel-pane pane-page-body"  >
  
      
  
  <div class="body"><div xml:lang="en-US" class="book" id="idm140163619761232"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Enterprise Linux</span> <span class="productnumber">8</span></div><div><h2 class="subtitle">Deploying and configuring single-node storage in Red Hat Enterprise Linux 8</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat</span> <span class="orgdiv">Customer Content Services</span></div></div><div><a href="index.html#idm140163630403760">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				This documentation collection provides instructions on how to effectively manage storage devices in Red Hat Enterprise Linux 8.
			</div></div></div></div><hr/></div><section class="preface" id="proc_providing-feedback-on-red-hat-documentation_managing-storage-devices"><div class="titlepage"><div><div><h1 class="title">Providing feedback on Red Hat documentation</h1></div></div></div><p>
			We appreciate your input on our documentation. Please let us know how we could make it better. To do so:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					For simple comments on specific passages:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Make sure you are viewing the documentation in the <span class="emphasis"><em>Multi-page HTML</em></span> format. In addition, ensure you see the <span class="strong strong"><strong>Feedback</strong></span> button in the upper right corner of the document.
						</li><li class="listitem">
							Use your mouse cursor to highlight the part of text that you want to comment on.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Add Feedback</strong></span> pop-up that appears below the highlighted text.
						</li><li class="listitem">
							Follow the displayed instructions.
						</li></ol></div></li><li class="listitem"><p class="simpara">
					For submitting more complex feedback, create a Bugzilla ticket:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Go to the <a class="link" href="https://bugzilla.redhat.com/enter_bug.cgi?product=Red%20Hat%20Enterprise%20Linux%208">Bugzilla</a> website.
						</li><li class="listitem">
							As the Component, use <span class="strong strong"><strong>Documentation</strong></span>.
						</li><li class="listitem">
							Fill in the <span class="strong strong"><strong>Description</strong></span> field with your suggestion for improvement. Include a link to the relevant part(s) of documentation.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Submit Bug</strong></span>.
						</li></ol></div></li></ul></div></section><section class="chapter" id="overview-of-available-storage-options_managing-storage-devices"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Overview of available storage options</h1></div></div></div><p>
			This chapter describes the storage types that are available in Red Hat Enterprise Linux 8. Red Hat Enterprise Linux offers a variety of options for managing local storage, and for attaching to the remote storage. <a class="xref" href="index.html#High-Level-RHEL-Storage-Diagram_overview-of-available-storage-options" title="Figure 1.1. High Level Red Hat Enterprise Linux Storage Diagram">Figure 1.1, “High Level Red Hat Enterprise Linux Storage Diagram”</a> describes the different storage options:
		</p><div class="figure" id="High-Level-RHEL-Storage-Diagram_overview-of-available-storage-options"><p class="title"><strong>Figure 1.1. High Level Red Hat Enterprise Linux Storage Diagram</strong></p><div class="figure-contents"><div class="mediaobject"><img src="High-Level-RHEL-Storage-Diagram.png" alt="High Level RHEL Storage Diagram"/></div></div></div><section class="section" id="local-storage-options_overview-of-available-storage-options"><div class="titlepage"><div><div><h2 class="title">1.1. Local storage options</h2></div></div></div><p>
				Following are the local storage options available in Red Hat Enterprise Linux 8:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Basic Disk Administration:
					</p><p class="simpara">
						Using parted and fdisk, you can create, modify, delete, and view the partitions. Following are the partitioning layout standards:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Master Boot Record (MBR): It is used with BIOS-based computers. You can create primary, extended, and logical partitions.
							</li><li class="listitem"><p class="simpara">
								GUID Partition Table (GPT): It uses Globally Unique identifier (GUID) and provides unique disk and partition GUID.
							</p><p class="simpara">
								To encrypt the partition, you can use Linux Unified Key Setup-on-disk-format (LUKS). To encrypt the partition, select the option during the installation and the prompt displays to enter the passphrase. This passphrase unlocks the encryption key.
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						Storage Consumption Options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Non-Volatile Dual In-line Memory Modules (NVDIMM) Management: It is a combination of memory and storage. You can enable and manage various types of storage on NVDIMM devices connected to your system.
							</li><li class="listitem">
								Block Storage Management: Data is stored in the form of blocks where each block has a unique identifier.
							</li><li class="listitem">
								File Storage: Data is stored at file level on the local system. These data can be accessed locally using XFS (default) or ext4, and over a network by using NFS and SMB.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Creating and Managing Logical Volumes:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								Logical Volume Manager (LVM): It creates logical devices from physical devices. Logical volume (LV) is a combination of the physical volumes (PV) and volume groups (VG). Configuring LVM include:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
										Creating PV from the hard drives.
									</li><li class="listitem">
										Creating VG from the PV.
									</li><li class="listitem">
										Creating LV from the VG assigning mount points to the LV.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								Virtual Data Optimizer (VDO): It is used for data reduction by using deduplication, compression, and thin provisioning. Using LV below VDO helps in:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
										Extending of VDO volume
									</li><li class="listitem">
										Spanning VDO volume over multiple devices
									</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Local File System:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								XFS
							</li><li class="listitem">
								Ext4
							</li><li class="listitem">
								Stratis: It is available as a Technology Preview. Stratis is a hybrid user-and-kernel local storage management system that supports advanced storage features.
							</li></ul></div></li></ul></div></section><section class="section" id="remote-storage-options_overview-of-available-storage-options"><div class="titlepage"><div><div><h2 class="title">1.2. Remote storage options</h2></div></div></div><p>
				Following are the remote storage options available in Red Hat Enterprise Linux 8:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Storage Connectivity Options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								iSCSI: RHEL 8 uses the targetcli tool to add, remove, view, and monitor iSCSI storage interconnects.
							</li><li class="listitem"><p class="simpara">
								Fibre Channel (FC): Red Hat Enterprise Linux 8 provides the following native Fibre Channel drivers:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
										<code class="literal">lpfc</code>
									</li><li class="listitem">
										<code class="literal">qla2xxx</code>
									</li><li class="listitem">
										<code class="literal">Zfcp</code>
									</li></ul></div></li><li class="listitem"><p class="simpara">
								Non-volatile Memory Express (<code class="literal">NVMe</code>) is an interface which allows host software utility to communicate with solid state drives. Use the following types of fabric transport to configure NVMe over fabrics:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
										NVMe over fabrics using Remote Direct Memory Access (RDMA).
									</li><li class="listitem">
										NVMe over fabrics using Fibre Channel (FC)
									</li></ul></div></li><li class="listitem">
								Device mapper multipathing (DM Multipath) allows you to configure multiple I/O paths between server nodes and storage arrays into a single device. These I/O paths are physical SAN connections that can include separate cables, switches, and controllers.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Network File system:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								NFS
							</li><li class="listitem">
								SMB
							</li></ul></div></li></ul></div></section></section><section class="chapter" id="assembly_getting-started-with-partitions_managing-storage-devices"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Getting started with partitions</h1></div></div></div><p>
			As a system administrator, you can use the following procedures to create, delete, and modify various types of disk partitions.
		</p><p>
			For an overview of the advantages and disadvantages to using partitions on block devices, see the following KBase article: <a class="link" href="https://access.redhat.com/solutions/163853">https://access.redhat.com/solutions/163853</a>.
		</p><section class="section" id="assembly_viewing-the-partition-table_assembly_getting-started-with-partitions"><div class="titlepage"><div><div><h2 class="title">2.1. Viewing the partition table</h2></div></div></div><p>
				As a system administrator, you can display the partition table of a block device to see the partition layout and details about individual partitions.
			</p><section class="section" id="proc_viewing-the-partition-table-with-parted_assembly_viewing-the-partition-table"><div class="titlepage"><div><div><h3 class="title">2.1.1. Viewing the partition table with parted</h3></div></div></div><p>
					This procedure describes how to view the partition table on a block device using the <code class="literal">parted</code> utility.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start the interactive <code class="literal">parted</code> shell:
						</p><pre class="screen"># parted <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> with the path to the device you want to examine: for example, <code class="literal filename">/dev/sda</code>.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							View the partition table:
						</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">
							Optionally, use the following command to switch to another device you want to examine next:
						</p><pre class="screen">(parted) select <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">parted(8)</code> man page.
						</li></ul></div></section><section class="section" id="ref_example-output-of-parted-print_assembly_viewing-the-partition-table"><div class="titlepage"><div><div><h3 class="title">2.1.2. Example output of <code class="literal">parted print</code></h3></div></div></div><p>
					This section provides an example output of the <code class="literal">print</code> command in the <code class="literal">parted</code> shell and describes fields in the output.
				</p><div class="example" id="idm140163634395904"><p class="title"><strong>Example 2.1. Output of the <code class="literal">print</code> command</strong></p><div class="example-contents"><pre class="screen">Model: ATA SAMSUNG MZNLN256 (scsi)
Disk /dev/sda: 256GB
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags:

Number  Start   End     Size    Type      File system  Flags
 1      1049kB  269MB   268MB   primary   xfs          boot
 2      269MB   34.6GB  34.4GB  primary
 3      34.6GB  45.4GB  10.7GB  primary
 4      45.4GB  256GB   211GB   extended
 5      45.4GB  256GB   211GB   logical</pre><p>
						Following is a description of the fields:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">Model: ATA SAMSUNG MZNLN256 (scsi)</code></span></dt><dd>
									The disk type, manufacturer, model number, and interface.
								</dd><dt><span class="term"><code class="literal">Disk /dev/sda: 256GB</code></span></dt><dd>
									The file path to the block device and the storage capacity.
								</dd><dt><span class="term"><code class="literal">Partition Table: msdos</code></span></dt><dd>
									The disk label type.
								</dd><dt><span class="term"><code class="literal">Number</code></span></dt><dd>
									The partition number. For example, the partition with minor number 1 corresponds to <code class="literal filename">/dev/sda1</code>.
								</dd><dt><span class="term"><code class="literal">Start</code> and <code class="literal">End</code></span></dt><dd>
									The location on the device where the partition starts and ends.
								</dd><dt><span class="term"><code class="literal">Type</code></span></dt><dd>
									Valid types are metadata, free, primary, extended, or logical.
								</dd><dt><span class="term"><code class="literal">File system</code></span></dt><dd>
									The file system type. If the <code class="literal">File system</code> field of a device shows no value, this means that its file system type is unknown. The <code class="literal">parted</code> utility cannot recognize the file system on encrypted devices.
								</dd><dt><span class="term"><code class="literal">Flags</code></span></dt><dd>
									Lists the flags set for the partition. Available flags are <code class="literal">boot</code>, <code class="literal">root</code>, <code class="literal">swap</code>, <code class="literal">hidden</code>, <code class="literal">raid</code>, <code class="literal">lvm</code>, or <code class="literal">lba</code>.
								</dd></dl></div></div></div></section></section><section class="section" id="assembly_creating-a-partition-table-on-a-disk_assembly_getting-started-with-partitions"><div class="titlepage"><div><div><h2 class="title">2.2. Creating a partition table on a disk</h2></div></div></div><p>
				As a system administrator, you can format a block device with different types of partition tables to enable using partitions on the device.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Formatting a block device with a partition table deletes all data stored on the device.
				</p></div></div><section class="section" id="con_considerations-before-modifying-partitions-on-a-disk_assembly_creating-a-partition-table-on-a-disk"><div class="titlepage"><div><div><h3 class="title">2.2.1. Considerations before modifying partitions on a disk</h3></div></div></div><p>
					This section lists key points to consider before creating, removing, or resizing partitions.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This section does not cover the DASD partition table, which is specific to the IBM Z architecture. For information on DASD, see:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/configuring-a-linux-instance-on-ibm-z_installing-rhel">Configuring a Linux instance on IBM Z</a>
							</li><li class="listitem">
								The <a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lgdd/lgdd_c_dasd_know.html">What you should know about DASD</a> article at the IBM Knowledge Center
							</li></ul></div></div></div><h5 id="the_maximum_number_of_partitions">The maximum number of partitions</h5><p>
					The number of partitions on a device is limited by the type of the partition table:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							On a device formatted with the <span class="strong strong"><strong>Master Boot Record (MBR)</strong></span> partition table, you can have either:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Up to four primary partitions, or
								</li><li class="listitem">
									Up to three primary partitions, one extended partition, and multiple logical partitions within the extended.
								</li></ul></div></li><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>GUID Partition Table (GPT)</strong></span>, the maximum number of partitions is 128. While the GPT specification allows for more partitions by growing the area reserved for the partition table, common practice used by the <code class="literal">parted</code> utility is to limit it to enough area for 128 partitions.
						</li></ul></div><h5 id="the_maximum_size_of_a_partition">The maximum size of a partition</h5><p>
					The size of a partition on a device is limited by the type of the partition table:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>Master Boot Record (MBR)</strong></span> partition table, the maximum size is 2TiB.
						</li><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>GUID Partition Table (GPT)</strong></span>, the maximum size is 8ZiB.
						</li></ul></div><p>
					If you want to create a partition larger than 2TiB, the disk must be formatted with GPT.
				</p><h5 id="size_alignment">Size alignment</h5><p>
					The <code class="literal">parted</code> utility enables you to specify partition size using multiple different suffixes:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">MiB, GiB, or TiB</span></dt><dd><p class="simpara">
								Size expressed in powers of 2.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The starting point of the partition is aligned to the exact sector specified by size.
									</li><li class="listitem">
										The ending point is aligned to the specified size minus 1 sector.
									</li></ul></div></dd><dt><span class="term">MB, GB, or TB</span></dt><dd><p class="simpara">
								Size expressed in powers of 10.
							</p><p class="simpara">
								The starting and ending point is aligned within one half of the specified unit: for example, ±500KB when using the MB suffix.
							</p></dd></dl></div></section><section class="section" id="ref_comparison-of-partition-table-types_assembly_creating-a-partition-table-on-a-disk"><div class="titlepage"><div><div><h3 class="title">2.2.2. Comparison of partition table types</h3></div></div></div><p>
					This section compares the properties of different types of partition tables that you can create on a block device.
				</p><div class="table" id="idm140163632808528"><p class="title"><strong>Table 2.1. Partition table types</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140163631073312" scope="col">Partition table</th><th align="left" valign="top" id="idm140163631072224" scope="col">Maximum number of partitions</th><th align="left" valign="top" id="idm140163631071120" scope="col">Maximum partition size</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140163631073312"> <p>
									Master Boot Record (MBR)
								</p>
								 </td><td align="left" valign="top" headers="idm140163631072224"> <p>
									4 primary, or 3 primary and 12 logical inside an extended partition
								</p>
								 </td><td align="left" valign="top" headers="idm140163631071120"> <p>
									2TiB
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140163631073312"> <p>
									GUID Partition Table (GPT)
								</p>
								 </td><td align="left" valign="top" headers="idm140163631072224"> <p>
									128
								</p>
								 </td><td align="left" valign="top" headers="idm140163631071120"> <p>
									8ZiB
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="proc_creating-a-partition-table-on-a-disk-with-parted_assembly_creating-a-partition-table-on-a-disk"><div class="titlepage"><div><div><h3 class="title">2.2.3. Creating a partition table on a disk with parted</h3></div></div></div><p>
					This procedure describes how to format a block device with a partition table using the <code class="literal">parted</code> utility.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start the interactive <code class="literal">parted</code> shell:
						</p><pre class="screen"># parted <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> with the path to the device where you want to create a partition table: for example, <code class="literal filename">/dev/sda</code>.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Determine if there already is a partition table on the device:
						</p><pre class="screen">(parted) print</pre><p class="simpara">
							If the device already contains partitions, they will be deleted in the next steps.
						</p></li><li class="listitem"><p class="simpara">
							Create the new partition table:
						</p><pre class="screen">(parted) mklabel <span class="emphasis"><em><span class="replaceable replaceable">table-type</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">table-type</span></em></span> with with the intended partition table type:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											<code class="literal">msdos</code> for MBR
										</li><li class="listitem">
											<code class="literal">gpt</code> for GPT
										</li></ul></div></li></ul></div><div class="example" id="idm140163632404032"><p class="title"><strong>Example 2.2. Creating a GPT table</strong></p><div class="example-contents"><p>
								For example, to create a GPT table on the disk, use:
							</p><pre class="screen">(parted) mklabel gpt</pre></div></div><p class="simpara">
							The changes start taking place as soon as you enter this command, so review it before executing it.
						</p></li><li class="listitem"><p class="simpara">
							View the partition table to confirm that the partition table exists:
						</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">
							Exit the <code class="literal">parted</code> shell:
						</p><pre class="screen">(parted) quit</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">parted(8)</code> man page.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create partitions on the device. See <a class="xref" href="index.html#assembly_creating-a-partition_assembly_getting-started-with-partitions" title="2.3. Creating a partition">Section 2.3, “Creating a partition”</a> for details.
						</li></ul></div></section></section><section class="section" id="assembly_creating-a-partition_assembly_getting-started-with-partitions"><div class="titlepage"><div><div><h2 class="title">2.3. Creating a partition</h2></div></div></div><p>
				As a system administrator, you can create new partitions on a disk.
			</p><section class="section" id="con_considerations-before-modifying-partitions-on-a-disk_assembly_creating-a-partition"><div class="titlepage"><div><div><h3 class="title">2.3.1. Considerations before modifying partitions on a disk</h3></div></div></div><p>
					This section lists key points to consider before creating, removing, or resizing partitions.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This section does not cover the DASD partition table, which is specific to the IBM Z architecture. For information on DASD, see:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/configuring-a-linux-instance-on-ibm-z_installing-rhel">Configuring a Linux instance on IBM Z</a>
							</li><li class="listitem">
								The <a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lgdd/lgdd_c_dasd_know.html">What you should know about DASD</a> article at the IBM Knowledge Center
							</li></ul></div></div></div><h5 id="the_maximum_number_of_partitions_2">The maximum number of partitions</h5><p>
					The number of partitions on a device is limited by the type of the partition table:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							On a device formatted with the <span class="strong strong"><strong>Master Boot Record (MBR)</strong></span> partition table, you can have either:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Up to four primary partitions, or
								</li><li class="listitem">
									Up to three primary partitions, one extended partition, and multiple logical partitions within the extended.
								</li></ul></div></li><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>GUID Partition Table (GPT)</strong></span>, the maximum number of partitions is 128. While the GPT specification allows for more partitions by growing the area reserved for the partition table, common practice used by the <code class="literal">parted</code> utility is to limit it to enough area for 128 partitions.
						</li></ul></div><h5 id="the_maximum_size_of_a_partition_2">The maximum size of a partition</h5><p>
					The size of a partition on a device is limited by the type of the partition table:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>Master Boot Record (MBR)</strong></span> partition table, the maximum size is 2TiB.
						</li><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>GUID Partition Table (GPT)</strong></span>, the maximum size is 8ZiB.
						</li></ul></div><p>
					If you want to create a partition larger than 2TiB, the disk must be formatted with GPT.
				</p><h5 id="size_alignment_2">Size alignment</h5><p>
					The <code class="literal">parted</code> utility enables you to specify partition size using multiple different suffixes:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">MiB, GiB, or TiB</span></dt><dd><p class="simpara">
								Size expressed in powers of 2.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The starting point of the partition is aligned to the exact sector specified by size.
									</li><li class="listitem">
										The ending point is aligned to the specified size minus 1 sector.
									</li></ul></div></dd><dt><span class="term">MB, GB, or TB</span></dt><dd><p class="simpara">
								Size expressed in powers of 10.
							</p><p class="simpara">
								The starting and ending point is aligned within one half of the specified unit: for example, ±500KB when using the MB suffix.
							</p></dd></dl></div></section><section class="section" id="con_partition-types_assembly_creating-a-partition"><div class="titlepage"><div><div><h3 class="title">2.3.2. Partition types</h3></div></div></div><p>
					This section describes different attributes that specify the type of a partition.
				</p><h5 id="partition_types_or_flags">Partition types or flags</h5><p>
					The partition type, or flag, is used by a running system only rarely. However, the partition type matters to on-the-fly generators, such as <code class="literal">systemd-gpt-auto-generator</code>, which use the partition type to, for example, automatically identify and mount devices.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">parted</code> utility provides some control of partition types by mapping the partition type to <span class="emphasis"><em>flags</em></span>. The parted utility can handle only certain partition types: for example LVM, swap, or RAID.
						</li><li class="listitem">
							The <code class="literal">fdisk</code> utility supports the full range of partition types by specifying hexadecimal codes.
						</li></ul></div><h5 id="partition_file_system_type">Partition file system type</h5><p>
					The <code class="literal">parted</code> utility optionally accepts a file system type argument when creating a partition. The value is used to:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Set the partition flags on MBR, or
						</li><li class="listitem">
							Set the partition UUID type on GPT. For example, the <code class="literal">swap</code>, <code class="literal">fat</code>, or <code class="literal">hfs</code> file system types set different GUIDs. The default value is the Linux Data GUID.
						</li></ul></div><p>
					The argument does not modify the file system on the partition in any way. It only differentiates between the supported flags or GUIDs.
				</p><p>
					The following file system types are supported:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">xfs</code>
						</li><li class="listitem">
							<code class="literal">ext2</code>
						</li><li class="listitem">
							<code class="literal">ext3</code>
						</li><li class="listitem">
							<code class="literal">ext4</code>
						</li><li class="listitem">
							<code class="literal">fat16</code>
						</li><li class="listitem">
							<code class="literal">fat32</code>
						</li><li class="listitem">
							<code class="literal">hfs</code>
						</li><li class="listitem">
							<code class="literal">hfs+</code>
						</li><li class="listitem">
							<code class="literal">linux-swap</code>
						</li><li class="listitem">
							<code class="literal">ntfs</code>
						</li><li class="listitem">
							<code class="literal">reiserfs</code>
						</li></ul></div></section><section class="section" id="proc_creating-a-partition-with-parted_assembly_creating-a-partition"><div class="titlepage"><div><div><h3 class="title">2.3.3. Creating a partition with parted</h3></div></div></div><p>
					This procedure describes how to create a new partition on a block device using the <code class="literal">parted</code> utility.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							There is a partition table on the disk. For details on how to format the disk, see <a class="xref" href="index.html#assembly_creating-a-partition-table-on-a-disk_assembly_getting-started-with-partitions" title="2.2. Creating a partition table on a disk">Section 2.2, “Creating a partition table on a disk”</a>.
						</li><li class="listitem">
							If the partition you want to create is larger than 2TiB, the disk must be formatted with the GUID Partition Table (GPT).
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start the interactive <code class="literal">parted</code> shell:
						</p><pre class="screen"># parted <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> with the path to the device where you want to create a partition: for example, <code class="literal filename">/dev/sda</code>.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							View the current partition table to determine if there is enough free space:
						</p><pre class="screen">(parted) print</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									If there is not enough free space, you can resize an existing partition. For more information, see <a class="xref" href="index.html#assembly_resizing-a-partition_assembly_getting-started-with-partitions" title="2.5. Resizing a partition">Section 2.5, “Resizing a partition”</a>.
								</li><li class="listitem"><p class="simpara">
									From the partition table, determine:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											The start and end points of the new partition
										</li><li class="listitem">
											On MBR, what partition type it should be.
										</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
							Create the new partition:
						</p><pre class="screen">(parted) mkpart <span class="emphasis"><em><span class="replaceable replaceable">part-type</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">name</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">fs-type</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">start</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">end</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">part-type</span></em></span> with with <code class="literal">primary</code>, <code class="literal">logical</code>, or <code class="literal">extended</code> based on what you decided from the partition table. This applies only to the MBR partition table.
								</li><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">name</span></em></span> with an arbitrary partition name. This is required for GPT partition tables.
								</li><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">fs-type</span></em></span> with any one of <code class="literal">xfs</code>, <code class="literal">ext2</code>, <code class="literal">ext3</code>, <code class="literal">ext4</code>, <code class="literal">fat16</code>, <code class="literal">fat32</code>, <code class="literal">hfs</code>, <code class="literal">hfs+</code>, <code class="literal">linux-swap</code>, <code class="literal">ntfs</code>, or <code class="literal">reiserfs</code>. The <span class="emphasis"><em><span class="replaceable replaceable">fs-type</span></em></span> parameter is optional. Note that <code class="literal">parted</code> does not create the file system on the partition.
								</li><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">start</span></em></span> and <span class="emphasis"><em><span class="replaceable replaceable">end</span></em></span> with the sizes that determine the starting and ending points of the partition, counting from the beginning of the disk. You can use size suffixes, such as <code class="literal">512MiB</code>, <code class="literal">20GiB</code>, or <code class="literal">1.5TiB</code>. The default size megabytes.
								</li></ul></div><div class="example" id="idm140163626586592"><p class="title"><strong>Example 2.3. Creating a small primary partition</strong></p><div class="example-contents"><p>
								For example, to create a primary partition from 1024MiB until 2048MiB on an MBR table, use:
							</p><pre class="screen">(parted) mkpart primary 1024MiB 2048MiB</pre></div></div><p class="simpara">
							The changes start taking place as soon as you enter this command, so review it before executing it.
						</p></li><li class="listitem"><p class="simpara">
							View the partition table to confirm that the created partition is in the partition table with the correct partition type, file system type, and size:
						</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">
							Exit the <code class="literal">parted</code> shell:
						</p><pre class="screen">(parted) quit</pre></li><li class="listitem"><p class="simpara">
							Use the following command to wait for the system to register the new device node:
						</p><pre class="screen"># udevadm settle</pre></li><li class="listitem"><p class="simpara">
							Verify that the kernel recognizes the new partition:
						</p><pre class="screen"># cat /proc/partitions</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">parted(8)</code> man page.
						</li></ul></div></section><section class="section" id="proc_setting-a-partition-type-with-fdisk_assembly_creating-a-partition"><div class="titlepage"><div><div><h3 class="title">2.3.4. Setting a partition type with fdisk</h3></div></div></div><p>
					This procedure describes how to set a partition type, or flag, using the <code class="literal">fdisk</code> utility.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							There is a partition on the disk.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start the interactive <code class="literal">fdisk</code> shell:
						</p><pre class="screen"># fdisk <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> with the path to the device where you want to set a partition type: for example, <code class="literal filename">/dev/sda</code>.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							View the current partition table to determine the minor partition number:
						</p><pre class="screen">Command (m for help): <span class="strong strong"><strong><span class="command command">print</span></strong></span></pre><p class="simpara">
							You can see the current partition type in the <code class="literal">Type</code> column and its corresponding type ID in the <code class="literal">Id</code> column.
						</p></li><li class="listitem"><p class="simpara">
							Enter the partition type command and select a partition using its minor number:
						</p><pre class="screen">Command (m for help): <span class="strong strong"><strong><span class="command command">type</span></strong></span>
Partition number (<span class="emphasis"><em><span class="replaceable replaceable">1,2,3</span></em></span> default <span class="emphasis"><em><span class="replaceable replaceable">3</span></em></span>): <span class="emphasis"><em><span class="replaceable replaceable"><span class="strong strong"><strong>2</strong></span></span></em></span></pre></li><li class="listitem"><p class="simpara">
							Optionally, list the available hexadecimal codes:
						</p><pre class="screen">Hex code (type L to list all codes): <span class="strong strong"><strong><span class="command command">L</span></strong></span></pre></li><li class="listitem"><p class="simpara">
							Set the partition type:
						</p><pre class="screen">Hex code (type L to list all codes): <span class="emphasis"><em><span class="replaceable replaceable"><span class="strong strong"><strong>8e</strong></span></span></em></span></pre></li><li class="listitem"><p class="simpara">
							Write your changes and exit the <code class="literal">fdisk</code> shell:
						</p><pre class="screen">Command (m for help): <span class="strong strong"><strong><span class="command command">write</span></strong></span>
The partition table has been altered.
Syncing disks.</pre></li><li class="listitem"><p class="simpara">
							Verify your changes:
						</p><pre class="screen"># fdisk --list <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre></li></ol></div></section></section><section class="section" id="assembly_removing-a-partition_assembly_getting-started-with-partitions"><div class="titlepage"><div><div><h2 class="title">2.4. Removing a partition</h2></div></div></div><p>
				As a system administrator, you can remove a disk partition that is no longer used to free up disk space.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Removing a partition deletes all data stored on the partition.
				</p></div></div><section class="section" id="con_considerations-before-modifying-partitions-on-a-disk_assembly_removing-a-partition"><div class="titlepage"><div><div><h3 class="title">2.4.1. Considerations before modifying partitions on a disk</h3></div></div></div><p>
					This section lists key points to consider before creating, removing, or resizing partitions.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This section does not cover the DASD partition table, which is specific to the IBM Z architecture. For information on DASD, see:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/configuring-a-linux-instance-on-ibm-z_installing-rhel">Configuring a Linux instance on IBM Z</a>
							</li><li class="listitem">
								The <a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lgdd/lgdd_c_dasd_know.html">What you should know about DASD</a> article at the IBM Knowledge Center
							</li></ul></div></div></div><h5 id="the_maximum_number_of_partitions_3">The maximum number of partitions</h5><p>
					The number of partitions on a device is limited by the type of the partition table:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							On a device formatted with the <span class="strong strong"><strong>Master Boot Record (MBR)</strong></span> partition table, you can have either:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Up to four primary partitions, or
								</li><li class="listitem">
									Up to three primary partitions, one extended partition, and multiple logical partitions within the extended.
								</li></ul></div></li><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>GUID Partition Table (GPT)</strong></span>, the maximum number of partitions is 128. While the GPT specification allows for more partitions by growing the area reserved for the partition table, common practice used by the <code class="literal">parted</code> utility is to limit it to enough area for 128 partitions.
						</li></ul></div><h5 id="the_maximum_size_of_a_partition_3">The maximum size of a partition</h5><p>
					The size of a partition on a device is limited by the type of the partition table:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>Master Boot Record (MBR)</strong></span> partition table, the maximum size is 2TiB.
						</li><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>GUID Partition Table (GPT)</strong></span>, the maximum size is 8ZiB.
						</li></ul></div><p>
					If you want to create a partition larger than 2TiB, the disk must be formatted with GPT.
				</p><h5 id="size_alignment_3">Size alignment</h5><p>
					The <code class="literal">parted</code> utility enables you to specify partition size using multiple different suffixes:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">MiB, GiB, or TiB</span></dt><dd><p class="simpara">
								Size expressed in powers of 2.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The starting point of the partition is aligned to the exact sector specified by size.
									</li><li class="listitem">
										The ending point is aligned to the specified size minus 1 sector.
									</li></ul></div></dd><dt><span class="term">MB, GB, or TB</span></dt><dd><p class="simpara">
								Size expressed in powers of 10.
							</p><p class="simpara">
								The starting and ending point is aligned within one half of the specified unit: for example, ±500KB when using the MB suffix.
							</p></dd></dl></div></section><section class="section" id="proc_removing-a-partition-with-parted_assembly_removing-a-partition"><div class="titlepage"><div><div><h3 class="title">2.4.2. Removing a partition with parted</h3></div></div></div><p>
					This procedure describes how to remove a disk partition using the <code class="literal">parted</code> utility.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start the interactive <code class="literal">parted</code> shell:
						</p><pre class="screen"># parted <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> with the path to the device where you want to remove a partition: for example, <code class="literal filename">/dev/sda</code>.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							View the current partition table to determine the minor number of the partition to remove:
						</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">
							Remove the partition:
						</p><pre class="screen">(parted) rm <span class="emphasis"><em><span class="replaceable replaceable">minor-number</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">minor-number</span></em></span> with the minor number of the partition you want to remove: for example, <code class="literal">3</code>.
								</li></ul></div><p class="simpara">
							The changes start taking place as soon as you enter this command, so review it before executing it.
						</p></li><li class="listitem"><p class="simpara">
							Confirm that the partition is removed from the partition table:
						</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">
							Exit the <code class="literal">parted</code> shell:
						</p><pre class="screen">(parted) quit</pre></li><li class="listitem"><p class="simpara">
							Verify that the kernel knows the partition is removed:
						</p><pre class="screen"># cat /proc/partitions</pre></li><li class="listitem">
							Remove the partition from the <code class="literal filename">/etc/fstab</code> file if it is present. Find the line that declares the removed partition, and remove it from the file.
						</li><li class="listitem"><p class="simpara">
							Regenerate mount units so that your system registers the new <code class="literal filename">/etc/fstab</code> configuration:
						</p><pre class="screen"># systemctl daemon-reload</pre></li><li class="listitem"><p class="simpara">
							If you have deleted a swap partition or removed pieces of LVM, remove all references to the partition from the kernel command line in the <code class="literal filename">/etc/default/grub</code> file and regenerate GRUB configuration:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									On a BIOS-based system:
								</p><pre class="screen"># grub2-mkconfig --output=/etc/grub2.cfg</pre></li><li class="listitem"><p class="simpara">
									On a UEFI-based system:
								</p><pre class="screen"># grub2-mkconfig --output=/etc/grub2-efi.cfg</pre></li></ul></div></li><li class="listitem"><p class="simpara">
							To register the changes in the early boot system, rebuild the <code class="literal">initramfs</code> file system:
						</p><pre class="screen"># dracut --force --verbose</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">parted(8)</code> man page
						</li></ul></div></section></section><section class="section" id="assembly_resizing-a-partition_assembly_getting-started-with-partitions"><div class="titlepage"><div><div><h2 class="title">2.5. Resizing a partition</h2></div></div></div><p>
				As a system administrator, you can extend a partition to utilize unused disk space, or shrink a partition to use its capacity for different purposes.
			</p><section class="section" id="con_considerations-before-modifying-partitions-on-a-disk_assembly_resizing-a-partition"><div class="titlepage"><div><div><h3 class="title">2.5.1. Considerations before modifying partitions on a disk</h3></div></div></div><p>
					This section lists key points to consider before creating, removing, or resizing partitions.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This section does not cover the DASD partition table, which is specific to the IBM Z architecture. For information on DASD, see:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/configuring-a-linux-instance-on-ibm-z_installing-rhel">Configuring a Linux instance on IBM Z</a>
							</li><li class="listitem">
								The <a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lgdd/lgdd_c_dasd_know.html">What you should know about DASD</a> article at the IBM Knowledge Center
							</li></ul></div></div></div><h5 id="the_maximum_number_of_partitions_4">The maximum number of partitions</h5><p>
					The number of partitions on a device is limited by the type of the partition table:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							On a device formatted with the <span class="strong strong"><strong>Master Boot Record (MBR)</strong></span> partition table, you can have either:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Up to four primary partitions, or
								</li><li class="listitem">
									Up to three primary partitions, one extended partition, and multiple logical partitions within the extended.
								</li></ul></div></li><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>GUID Partition Table (GPT)</strong></span>, the maximum number of partitions is 128. While the GPT specification allows for more partitions by growing the area reserved for the partition table, common practice used by the <code class="literal">parted</code> utility is to limit it to enough area for 128 partitions.
						</li></ul></div><h5 id="the_maximum_size_of_a_partition_4">The maximum size of a partition</h5><p>
					The size of a partition on a device is limited by the type of the partition table:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>Master Boot Record (MBR)</strong></span> partition table, the maximum size is 2TiB.
						</li><li class="listitem">
							On a device formatted with the <span class="strong strong"><strong>GUID Partition Table (GPT)</strong></span>, the maximum size is 8ZiB.
						</li></ul></div><p>
					If you want to create a partition larger than 2TiB, the disk must be formatted with GPT.
				</p><h5 id="size_alignment_4">Size alignment</h5><p>
					The <code class="literal">parted</code> utility enables you to specify partition size using multiple different suffixes:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">MiB, GiB, or TiB</span></dt><dd><p class="simpara">
								Size expressed in powers of 2.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The starting point of the partition is aligned to the exact sector specified by size.
									</li><li class="listitem">
										The ending point is aligned to the specified size minus 1 sector.
									</li></ul></div></dd><dt><span class="term">MB, GB, or TB</span></dt><dd><p class="simpara">
								Size expressed in powers of 10.
							</p><p class="simpara">
								The starting and ending point is aligned within one half of the specified unit: for example, ±500KB when using the MB suffix.
							</p></dd></dl></div></section><section class="section" id="proc_resizing-a-partition-with-parted_assembly_resizing-a-partition"><div class="titlepage"><div><div><h3 class="title">2.5.2. Resizing a partition with parted</h3></div></div></div><p>
					This procedure resizes a disk partition using the <code class="literal">parted</code> utility.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If you want to shrink a partition, back up the data that are stored on it.
						</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								Shrinking a partition might result in data loss on the partition.
							</p></div></div></li><li class="listitem">
							If you want to resize a partition to be larger than 2TiB, the disk must be formatted with the GUID Partition Table (GPT). For details on how to format the disk, see <a class="xref" href="index.html#assembly_creating-a-partition-table-on-a-disk_assembly_getting-started-with-partitions" title="2.2. Creating a partition table on a disk">Section 2.2, “Creating a partition table on a disk”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							If you want to shrink the partition, shrink the file system on it first so that it is not larger than the resized partition. Note that XFS does not support shrinking.
						</li><li class="listitem"><p class="simpara">
							Start the interactive <code class="literal">parted</code> shell:
						</p><pre class="screen"># parted <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> with the path to the device where you want to resize a partition: for example, <code class="literal filename">/dev/sda</code>.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							View the current partition table:
						</p><pre class="screen">(parted) print</pre><p class="simpara">
							From the partition table, determine:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The minor number of the partition
								</li><li class="listitem">
									The location of the existing partition and its new ending point after resizing
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Resize the partition:
						</p><pre class="screen">(parted) resizepart <span class="emphasis"><em><span class="replaceable replaceable">minor-number</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">new-end</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">minor-number</span></em></span> with the minor number of the partition that you are resizing: for example, <code class="literal">3</code>.
								</li><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">new-end</span></em></span> with the size that determines the new ending point of the resized partition, counting from the beginning of the disk. You can use size suffixes, such as <code class="literal">512MiB</code>, <code class="literal">20GiB</code>, or <code class="literal">1.5TiB</code>. The default size megabytes.
								</li></ul></div><div class="example" id="idm140163631421440"><p class="title"><strong>Example 2.4. Extending a partition</strong></p><div class="example-contents"><p>
								For example, to extend a partition located at the beginning of the disk to be 2GiB in size, use:
							</p><pre class="screen">(parted) resizepart 1 2GiB</pre></div></div><p class="simpara">
							The changes start taking place as soon as you enter this command, so review it before executing it.
						</p></li><li class="listitem"><p class="simpara">
							View the partition table to confirm that the resized partition is in the partition table with the correct size:
						</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">
							Exit the <code class="literal">parted</code> shell:
						</p><pre class="screen">(parted) quit</pre></li><li class="listitem"><p class="simpara">
							Verify that the kernel recognizes the new partition:
						</p><pre class="screen"># cat /proc/partitions</pre></li><li class="listitem">
							If you extended the partition, extend the file system on it as well. See (reference) for details.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">parted(8)</code> man page.
						</li></ul></div></section></section></section><section class="chapter" id="assembly_overview-of-persistent-naming-attributes_managing-storage-devices"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Overview of persistent naming attributes</h1></div></div></div><p>
			As a system administrator, you need to refer to storage volumes using persistent naming attributes to build storage setups that are reliable over multiple system boots.
		</p><section class="section" id="con_disadvantages-of-non-persistent-naming-attributes_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h2 class="title">3.1. Disadvantages of non-persistent naming attributes</h2></div></div></div><p>
				Red Hat Enterprise Linux provides a number of ways to identify storage devices. It is important to use the correct option to identify each device when used in order to avoid inadvertently accessing the wrong device, particularly when installing to or reformatting drives.
			</p><p>
				Traditionally, non-persistent names in the form of <code class="literal">/dev/sd<span class="emphasis"><em><span class="replaceable replaceable">(major number)</span></em></span><span class="emphasis"><em><span class="replaceable replaceable">(minor number)</span></em></span></code> are used on Linux to refer to storage devices. The major and minor number range and associated <code class="literal">sd</code> names are allocated for each device when it is detected. This means that the association between the major and minor number range and associated <code class="literal">sd</code> names can change if the order of device detection changes.
			</p><p>
				Such a change in the ordering might occur in the following situations:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The parallelization of the system boot process detects storage devices in a different order with each system boot.
					</li><li class="listitem">
						A disk fails to power up or respond to the SCSI controller. This results in it not being detected by the normal device probe. The disk is not accessible to the system and subsequent devices will have their major and minor number range, including the associated <code class="literal">sd</code> names shifted down. For example, if a disk normally referred to as <code class="literal">sdb</code> is not detected, a disk that is normally referred to as <code class="literal">sdc</code> would instead appear as <code class="literal">sdb</code>.
					</li><li class="listitem">
						A SCSI controller (host bus adapter, or HBA) fails to initialize, causing all disks connected to that HBA to not be detected. Any disks connected to subsequently probed HBAs are assigned different major and minor number ranges, and different associated <code class="literal">sd</code> names.
					</li><li class="listitem">
						The order of driver initialization changes if different types of HBAs are present in the system. This causes the disks connected to those HBAs to be detected in a different order. This might also occur if HBAs are moved to different PCI slots on the system.
					</li><li class="listitem">
						Disks connected to the system with Fibre Channel, iSCSI, or FCoE adapters might be inaccessible at the time the storage devices are probed, due to a storage array or intervening switch being powered off, for example. This might occur when a system reboots after a power failure, if the storage array takes longer to come online than the system take to boot. Although some Fibre Channel drivers support a mechanism to specify a persistent SCSI target ID to WWPN mapping, this does not cause the major and minor number ranges, and the associated <code class="literal">sd</code> names to be reserved; it only provides consistent SCSI target ID numbers.
					</li></ul></div><p>
				These reasons make it undesirable to use the major and minor number range or the associated <code class="literal">sd</code> names when referring to devices, such as in the <code class="literal filename">/etc/fstab</code> file. There is the possibility that the wrong device will be mounted and data corruption might result.
			</p><p>
				Occasionally, however, it is still necessary to refer to the <code class="literal">sd</code> names even when another mechanism is used, such as when errors are reported by a device. This is because the Linux kernel uses <code class="literal">sd</code> names (and also SCSI host/channel/target/LUN tuples) in kernel messages regarding the device.
			</p></section><section class="section" id="file-system-and-device-identifiers_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h2 class="title">3.2. File system and device identifiers</h2></div></div></div><p>
				This sections explains the difference between persistent attributes identifying file systems and block devices.
			</p><h4 id="file_system_identifiers">File system identifiers</h4><p>
				File system identifiers are tied to a particular file system created on a block device. The identifier is also stored as part of the file system. If you copy the file system to a different device, it still carries the same file system identifier. On the other hand, if you rewrite the device, such as by formatting it with the <code class="literal">mkfs</code> utility, the device loses the attribute.
			</p><p>
				File system identifiers include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Unique identifier (UUID)
					</li><li class="listitem">
						Label
					</li></ul></div><h4 id="device_identifiers">Device identifiers</h4><p>
				Device identifiers are tied to a block device: for example, a disk or a partition. If you rewrite the device, such as by formatting it with the <code class="literal">mkfs</code> utility, the device keeps the attribute, because it is not stored in the file system.
			</p><p>
				Device identifiers include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						World Wide Identifier (WWID)
					</li><li class="listitem">
						Partition UUID
					</li><li class="listitem">
						Serial number
					</li></ul></div><h4 id="recommendations">Recommendations</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Some file systems, such as logical volumes, span multiple devices. Red Hat recommends accessing these file systems using file system identifiers rather than device identifiers.
					</li></ul></div></section><section class="section" id="con_device-names-managed-by-the-udev-mechanism-in-dev-disk-_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h2 class="title">3.3. Device names managed by the udev mechanism in /dev/disk/</h2></div></div></div><p>
				This section lists different kinds of persistent naming attributes that the <code class="literal">udev</code> service provides in the <code class="literal filename">/dev/disk/</code> directory.
			</p><p>
				The <code class="literal">udev</code> mechanism is used for all types of devices in Linux, not just for storage devices. In the case of storage devices, Red Hat Enterprise Linux contains <code class="literal">udev</code> rules that create symbolic links in the <code class="literal filename">/dev/disk/</code> directory. This enables you to refer to storage devices by:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Their content
					</li><li class="listitem">
						A unique identifier
					</li><li class="listitem">
						Their serial number.
					</li></ul></div><p>
				Although <code class="literal">udev</code> naming attributes are persistent, in that they do not change on their own across system reboots, some are also configurable.
			</p><section class="section" id="file-system-identifiers_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h3 class="title">3.3.1. File system identifiers</h3></div></div></div><h4 id="the_uuid_attribute_in_dev_disk_by_uuid">The UUID attribute in /dev/disk/by-uuid/</h4><p>
					Entries in this directory provide a symbolic name that refers to the storage device by a <span class="strong strong"><strong>unique identifier</strong></span> (UUID) in the content (that is, the data) stored on the device. For example:
				</p><pre class="screen">/dev/disk/by-uuid/<span class="emphasis"><em>3e6be9de-8139-11d1-9106-a43f08d823a6</em></span></pre><p>
					You can use the UUID to refer to the device in the <code class="literal filename">/etc/fstab</code> file using the following syntax:
				</p><pre class="screen">UUID=<span class="emphasis"><em>3e6be9de-8139-11d1-9106-a43f08d823a6</em></span></pre><p>
					You can configure the UUID attribute when creating a file system, and you can also change it later on.
				</p><h4 id="the_label_attribute_in_dev_disk_by_label">The Label attribute in /dev/disk/by-label/</h4><p>
					Entries in this directory provide a symbolic name that refers to the storage device by a <span class="strong strong"><strong>label</strong></span> in the content (that is, the data) stored on the device.
				</p><p>
					For example:
				</p><pre class="screen">/dev/disk/by-label/<span class="emphasis"><em>Boot</em></span></pre><p>
					You can use the label to refer to the device in the <code class="literal filename">/etc/fstab</code> file using the following syntax:
				</p><pre class="screen">LABEL=<span class="emphasis"><em>Boot</em></span></pre><p>
					You can configure the Label attribute when creating a file system, and you can also change it later on.
				</p></section><section class="section" id="device-identifiers_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h3 class="title">3.3.2. Device identifiers</h3></div></div></div><h4 id="the_wwid_attribute_in_dev_disk_by_id">The WWID attribute in /dev/disk/by-id/</h4><p>
					The World Wide Identifier (WWID) is a persistent, <span class="strong strong"><strong>system-independent identifier</strong></span> that the SCSI Standard requires from all SCSI devices. The WWID identifier is guaranteed to be unique for every storage device, and independent of the path that is used to access the device. The identifier is a property of the device but is not stored in the content (that is, the data) on the devices.
				</p><p>
					This identifier can be obtained by issuing a SCSI Inquiry to retrieve the Device Identification Vital Product Data (page <code class="literal">0x83</code>) or Unit Serial Number (page <code class="literal">0x80</code>).
				</p><p>
					Red Hat Enterprise Linux automatically maintains the proper mapping from the WWID-based device name to a current <code class="literal">/dev/sd</code> name on that system. Applications can use the <code class="literal">/dev/disk/by-id/</code> name to reference the data on the disk, even if the path to the device changes, and even when accessing the device from different systems.
				</p><div class="example" id="idm140163626765696"><p class="title"><strong>Example 3.1. WWID mappings</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 25%; " class="col_2"><!--Empty--></col><col style="width: 25%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140163630596800" scope="col">WWID symlink</th><th align="left" valign="top" id="idm140163630595712" scope="col">Non-persistent device</th><th align="left" valign="top" id="idm140163629223376" scope="col">Note</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140163630596800"> <p>
										<code class="literal filename">/dev/disk/by-id/scsi-3600508b400105e210000900000490000</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140163630595712"> <p>
										<code class="literal filename">/dev/sda</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140163629223376"> <p>
										A device with a page <code class="literal">0x83</code> identifier
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140163630596800"> <p>
										<code class="literal filename">/dev/disk/by-id/scsi-SSEAGATE_ST373453LW_3HW1RHM6</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140163630595712"> <p>
										<code class="literal filename">/dev/sdb</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140163629223376"> <p>
										A device with a page <code class="literal">0x80</code> identifier
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140163630596800"> <p>
										<code class="literal filename">/dev/disk/by-id/ata-SAMSUNG_MZNLN256HMHQ-000L7_S2WDNX0J336519-part3</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140163630595712"> <p>
										<code class="literal filename">/dev/sdc3</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140163629223376"> <p>
										A disk partition
									</p>
									 </td></tr></tbody></table></div></div></div><p>
					In addition to these persistent names provided by the system, you can also use <code class="literal">udev</code> rules to implement persistent names of your own, mapped to the WWID of the storage.
				</p><h4 id="the_partition_uuid_attribute_in_dev_disk_by_partuuid">The Partition UUID attribute in /dev/disk/by-partuuid</h4><p>
					The Partition UUID (PARTUUID) attribute identifies partitions as defined by GPT partition table.
				</p><div class="example" id="idm140163629145504"><p class="title"><strong>Example 3.2. Partition UUID mappings</strong></p><div class="example-contents"><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 60%; " class="col_1"><!--Empty--></col><col style="width: 40%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140163629140352" scope="col">PARTUUID symlink</th><th align="left" valign="top" id="idm140163629139264" scope="col">Non-persistent device</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140163629140352"> <p>
										<code class="literal filename">/dev/disk/by-partuuid/4cd1448a-01</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140163629139264"> <p>
										<code class="literal filename">/dev/sda1</code>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140163629140352"> <p>
										<code class="literal filename">/dev/disk/by-partuuid/4cd1448a-02</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140163629139264"> <p>
										<code class="literal filename">/dev/sda2</code>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140163629140352"> <p>
										<code class="literal filename">/dev/disk/by-partuuid/4cd1448a-03</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140163629139264"> <p>
										<code class="literal filename">/dev/sda3</code>
									</p>
									 </td></tr></tbody></table></div></div></div><h4 id="the_path_attribute_in_dev_disk_by_path">The Path attribute in /dev/disk/by-path/</h4><p>
					This attribute provides a symbolic name that refers to the storage device by the <span class="strong strong"><strong>hardware path</strong></span> used to access the device.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						The Path attribute is unreliable, and Red Hat does not recommend using it.
					</p></div></div></section></section><section class="section" id="con_the-world-wide-identifier-with-dm-multipath_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h2 class="title">3.4. The World Wide Identifier with DM Multipath</h2></div></div></div><p>
				This section describes the mapping between the World Wide Identifier (WWID) and non-persistent device names in a Device Mapper Multipath configuration.
			</p><p>
				If there are multiple paths from a system to a device, DM Multipath uses the WWID to detect this. DM Multipath then presents a single "pseudo-device" in the <code class="literal filename">/dev/mapper/wwid</code> directory, such as <code class="literal filename">/dev/mapper/3600508b400105df70000e00000ac0000</code>.
			</p><p>
				The command <code class="literal command">multipath -l</code> shows the mapping to the non-persistent identifiers:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal"><span class="emphasis"><em>Host</em></span>:<span class="emphasis"><em>Channel</em></span>:<span class="emphasis"><em>Target</em></span>:<span class="emphasis"><em>LUN</em></span></code>
					</li><li class="listitem">
						<code class="literal">/dev/sd</code> name
					</li><li class="listitem">
						<code class="literal"><span class="emphasis"><em>major</em></span>:<span class="emphasis"><em>minor</em></span></code> number
					</li></ul></div><div class="example" id="idm140163629300672"><p class="title"><strong>Example 3.3. WWID mappings in a multipath configuration</strong></p><div class="example-contents"><p>
					An example output of the <code class="literal command">multipath -l</code> command:
				</p><pre class="screen">3600508b400105df70000e00000ac0000 dm-2 vendor,product
[size=20G][features=1 queue_if_no_path][hwhandler=0][rw]
\_ round-robin 0 [prio=0][active]
 \_ 5:0:1:1 sdc 8:32  [active][undef]
 \_ 6:0:1:1 sdg 8:96  [active][undef]
\_ round-robin 0 [prio=0][enabled]
 \_ 5:0:0:1 sdb 8:16  [active][undef]
 \_ 6:0:0:1 sdf 8:80  [active][undef]</pre></div></div><p>
				DM Multipath automatically maintains the proper mapping of each WWID-based device name to its corresponding <code class="literal">/dev/sd</code> name on the system. These names are persistent across path changes, and they are consistent when accessing the device from different systems.
			</p><p>
				When the <code class="literal option">user_friendly_names</code> feature of DM Multipath is used, the WWID is mapped to a name of the form <code class="literal">/dev/mapper/mpath<span class="emphasis"><em>N</em></span></code>. By default, this mapping is maintained in the file <code class="literal filename">/etc/multipath/bindings</code>. These <code class="literal">mpath<span class="emphasis"><em>N</em></span></code> names are persistent as long as that file is maintained.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					If you use <code class="literal option">user_friendly_names</code>, then additional steps are required to obtain consistent names in a cluster.
				</p></div></div></section><section class="section" id="con_limitations-of-the-udev-device-naming-convention_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h2 class="title">3.5. Limitations of the udev device naming convention</h2></div></div></div><p>
				The following are some limitations of the <code class="literal">udev</code> naming convention:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						It is possible that the device might not be accessible at the time the query is performed because the <code class="literal">udev</code> mechanism might rely on the ability to query the storage device when the <code class="literal">udev</code> rules are processed for a <code class="literal">udev</code> event. This is more likely to occur with Fibre Channel, iSCSI or FCoE storage devices when the device is not located in the server chassis.
					</li><li class="listitem">
						The kernel might send <code class="literal">udev</code> events at any time, causing the rules to be processed and possibly causing the <code class="literal filename">/dev/disk/by-*/</code> links to be removed if the device is not accessible.
					</li><li class="listitem">
						There might be a delay between when the <code class="literal">udev</code> event is generated and when it is processed, such as when a large number of devices are detected and the user-space <code class="literal">udevd</code> service takes some amount of time to process the rules for each one. This might cause a delay between when the kernel detects the device and when the <code class="literal filename">/dev/disk/by-*/</code> names are available.
					</li><li class="listitem">
						External programs such as <code class="literal">blkid</code> invoked by the rules might open the device for a brief period of time, making the device inaccessible for other uses.
					</li></ul></div></section><section class="section" id="proc_listing-persistent-naming-attributes_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h2 class="title">3.6. Listing persistent naming attributes</h2></div></div></div><p>
				This procedure describes how to find out the persistent naming attributes of non-persistent storage devices.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To list the UUID and Label attributes, use the <code class="literal">lsblk</code> utility:
					</p><pre class="screen">$ lsblk --fs <span class="emphasis"><em><span class="replaceable replaceable">storage-device</span></em></span></pre><p class="simpara">
						For example:
					</p><div class="example" id="idm140163630038480"><p class="title"><strong>Example 3.4. Viewing the UUID and Label of a file system</strong></p><div class="example-contents"><pre class="screen">$ lsblk --fs /dev/sda1

NAME FSTYPE <span class="strong strong"><strong>LABEL</strong></span> <span class="strong strong"><strong>UUID</strong></span>                                 MOUNTPOINT
sda1 xfs    <span class="strong strong"><strong>Boot</strong></span>  <span class="strong strong"><strong>afa5d5e3-9050-48c3-acc1-bb30095f3dc4</strong></span> /boot</pre></div></div></li><li class="listitem"><p class="simpara">
						To list the PARTUUID attribute, use the <code class="literal">lsblk</code> utility with the <code class="literal option">--output +PARTUUID</code> option:
					</p><pre class="screen">$ lsblk --output +PARTUUID</pre><p class="simpara">
						For example:
					</p><div class="example" id="idm140163629752352"><p class="title"><strong>Example 3.5. Viewing the PARTUUID attribute of a partition</strong></p><div class="example-contents"><pre class="screen">$ lsblk --output +PARTUUID /dev/sda1

NAME MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT <span class="strong strong"><strong>PARTUUID</strong></span>
sda1   8:1    0  512M  0 part /boot      <span class="strong strong"><strong>4cd1448a-01</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
						To list the WWID attribute, examine the targets of symbolic links in the <code class="literal filename">/dev/disk/by-id/</code> directory. For example:
					</p><div class="example" id="idm140163628922560"><p class="title"><strong>Example 3.6. Viewing the WWID of all storage devices on the system</strong></p><div class="example-contents"><pre class="screen">$ file /dev/disk/by-id/*

/dev/disk/by-id/ata-QEMU_HARDDISK_QM00001
symbolic link to ../../sda
/dev/disk/by-id/ata-QEMU_HARDDISK_QM00001-part1
symbolic link to ../../sda1
/dev/disk/by-id/ata-QEMU_HARDDISK_QM00001-part2
symbolic link to ../../sda2
/dev/disk/by-id/dm-name-rhel_rhel8-root
symbolic link to ../../dm-0
/dev/disk/by-id/dm-name-rhel_rhel8-swap
symbolic link to ../../dm-1
/dev/disk/by-id/dm-uuid-LVM-QIWtEHtXGobe5bewlIUDivKOz5ofkgFhP0RMFsNyySVihqEl2cWWbR7MjXJolD6g
symbolic link to ../../dm-1
/dev/disk/by-id/dm-uuid-LVM-QIWtEHtXGobe5bewlIUDivKOz5ofkgFhXqH2M45hD2H9nAf2qfWSrlRLhzfMyOKd
symbolic link to ../../dm-0
/dev/disk/by-id/lvm-pv-uuid-atlr2Y-vuMo-ueoH-CpMG-4JuH-AhEF-wu4QQm
symbolic link to ../../sda2</pre></div></div></li></ul></div></section><section class="section" id="proc_modifying-persistent-naming-attributes_assembly_overview-of-persistent-naming-attributes"><div class="titlepage"><div><div><h2 class="title">3.7. Modifying persistent naming attributes</h2></div></div></div><p>
				This procedure describes how to change the UUID or Label persistent naming attribute of a file system.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Changing <code class="literal">udev</code> attributes happens in the background and might take a long time. The <code class="literal command">udevadm settle</code> command waits until the change is fully registered, which ensures that your next command will be able to utilize the new attribute correctly.
				</p></div></div><p>
				In the following commands:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Replace <span class="emphasis"><em><span class="replaceable replaceable">new-uuid</span></em></span> with the UUID you want to set; for example, <code class="literal">1cdfbc07-1c90-4984-b5ec-f61943f5ea50</code>. You can generate a UUID using the <code class="literal command">uuidgen</code> command.
					</li><li class="listitem">
						Replace <span class="emphasis"><em><span class="replaceable replaceable">new-label</span></em></span> with a label; for example, <code class="literal">backup_data</code>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If you are modifying the attributes of an XFS file system, unmount it first.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To change the UUID or Label attributes of an <span class="strong strong"><strong>XFS</strong></span> file system, use the <code class="literal">xfs_admin</code> utility:
					</p><pre class="screen"># xfs_admin -U <span class="emphasis"><em><span class="replaceable replaceable">new-uuid</span></em></span> -L <span class="emphasis"><em><span class="replaceable replaceable">new-label</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">storage-device</span></em></span>
# udevadm settle</pre></li><li class="listitem"><p class="simpara">
						To change the UUID or Label attributes of an <span class="strong strong"><strong>ext4</strong></span>, <span class="strong strong"><strong>ext3</strong></span>, or <span class="strong strong"><strong>ext2</strong></span> file system, use the <code class="literal">tune2fs</code> utility:
					</p><pre class="screen"># tune2fs -U <span class="emphasis"><em><span class="replaceable replaceable">new-uuid</span></em></span> -L <span class="emphasis"><em><span class="replaceable replaceable">new-label</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">storage-device</span></em></span>
# udevadm settle</pre></li><li class="listitem"><p class="simpara">
						To change the UUID or Label attributes of a swap volume, use the <code class="literal">swaplabel</code> utility:
					</p><pre class="screen"># swaplabel --uuid <span class="emphasis"><em><span class="replaceable replaceable">new-uuid</span></em></span> --label <span class="emphasis"><em><span class="replaceable replaceable">new-label</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">swap-device</span></em></span>
# udevadm settle</pre></li></ul></div></section></section><section class="chapter" id="using-nvdimm-persistent-memory-storage_managing-storage-devices"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Using NVDIMM persistent memory storage</h1></div></div></div><p>
			As a system administrator, you can enable and manage various types of storage on Non-Volatile Dual In-line Memory Modules (NVDIMM) devices connected to your system.
		</p><p>
			For installing Red Hat Enterprise Linux 8 on NVDIMM storage, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/graphical-installation_graphical-installation#installing-to-a-nvdimm-device_storage-devices">Installing to an NVDIMM device</a> instead.
		</p><section class="section" id="the-nvdimm-persistent-memory-technology_using-nvdimm-persistent-memory-storage"><div class="titlepage"><div><div><h2 class="title">4.1. The NVDIMM persistent memory technology</h2></div></div></div><p>
				NVDIMM persistent memory, also called storage class memory or <code class="literal">pmem</code>, is a combination of memory and storage.
			</p><p>
				NVDIMM combines the durability of storage with the low access latency and the high bandwidth of dynamic RAM (DRAM):
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						NVDIMM storage is byte-addressable, so it can be accessed by using the CPU load and store instructions. In addition to the <code class="literal">read()</code> and <code class="literal">write()</code> system calls, which are required for accessing traditional block-based storage, NVDIMM also supports direct load and store programming model.
					</li><li class="listitem">
						The performance characteristics of NVDIMM are similar to DRAM with very low access latency, typically in the tens to hundreds of nanoseconds.
					</li><li class="listitem">
						Data stored on NVDIMM are preserved when the power is off, like with storage.
					</li><li class="listitem">
						The direct access (DAX) technology enables applications to memory map storage directly, without going through the system page cache. This frees up DRAM for other purposes.
					</li></ul></div><p>
				NVDIMM is beneficial in use cases such as:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Databases</span></dt><dd>
							The reduced storage access latency on NVDIMM can dramatically improve database performance.
						</dd><dt><span class="term">Rapid restart</span></dt><dd><p class="simpara">
							Rapid restart is also called the warm cache effect. For example, a file server has none of the file contents in memory after starting. As clients connect and read or write data, that data is cached in the page cache. Eventually, the cache contains mostly hot data. After a reboot, the system must start the process again on traditional storage.
						</p><p class="simpara">
							NVDIMM enables an application to keep the warm cache across reboots if the application is designed properly. In this example, there would be no page cache involved: the application would cache data directly in the persistent memory.
						</p></dd><dt><span class="term">Fast write-cache</span></dt><dd>
							File servers often do not acknowledge a client’s write request until the data is on durable media. Using NVDIMM as a fast write cache enables a file server to acknowledge the write request quickly thanks to the low latency.
						</dd></dl></div></section><section class="section" id="nvdimm-interleaving-and-regions_using-nvdimm-persistent-memory-storage"><div class="titlepage"><div><div><h2 class="title">4.2. NVDIMM interleaving and regions</h2></div></div></div><p>
				NVDIMM devices support grouping into interleaved regions.
			</p><p>
				NVDIMM devices can be grouped into interleave sets in the same way as regular DRAM. An interleave set is similar to a RAID 0 level (stripe) configuration across multiple DIMMs. An Interleave set is also called a <span class="emphasis"><em>region</em></span>.
			</p><p>
				Interleaving has the following advantages:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						NVDIMM devices benefit from increased performance when they are configured into interleave sets.
					</li><li class="listitem">
						Interleaving can combine multiple smaller NVDIMM devices into a larger logical device.
					</li></ul></div><p>
				NVDIMM interleave sets are configured in the system BIOS or UEFI firmware.
			</p><p>
				Red Hat Enterprise Linux creates one region device for each interleave set.
			</p></section><section class="section" id="nvdimm-namespaces_using-nvdimm-persistent-memory-storage"><div class="titlepage"><div><div><h2 class="title">4.3. NVDIMM namespaces</h2></div></div></div><p>
				NVDIMM regions are divided into one or more namespaces. Namespaces enable you to access the device using different methods, based on the type of the namespace.
			</p><p>
				Some NVDIMM devices do not support multiple namespaces on a region:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						If your ⁠NVDIMM device supports labels, you can subdivide the region into namespaces.
					</li><li class="listitem">
						If your NVDIMM device does not support labels, the region can only contain a single namespace. In that case, Red Hat Enterprise Linux creates a default namespace that covers the entire region.
					</li></ul></div></section><section class="section" id="nvdimm-access-modes_using-nvdimm-persistent-memory-storage"><div class="titlepage"><div><div><h2 class="title">4.4. NVDIMM access modes</h2></div></div></div><p>
				You can configure NVDIMM namespaces to use either of the following modes:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">sector</code></span></dt><dd><p class="simpara">
							Presents the storage as a fast block device. This mode is useful for legacy applications that have not been modified to use NVDIMM storage, or for applications that make use of the full I/O stack, including Device Mapper.
						</p><p class="simpara">
							A <code class="literal">sector</code> device can be used in the same way as any other block device on the system. You can create partitions or file systems on it, configure it as part of a software RAID set, or use it as the cache device for <code class="literal">dm-cache</code>.
						</p><p class="simpara">
							Devices in this mode are available at <code class="literal filename">/dev/pmem<span class="emphasis"><em>N</em></span>s</code>. See the <code class="literal">blockdev</code> value listed after creating the namespace.
						</p></dd><dt><span class="term"><code class="literal">devdax</code>, or device direct access (DAX)</span></dt><dd><p class="simpara">
							Enables NVDIMM devices to support direct access programming as described in the Storage Networking Industry Association (SNIA) Non-Volatile Memory (NVM) Programming Model specification. In this mode, I/O bypasses the storage stack of the kernel. Therefore, no Device Mapper drivers can be used.
						</p><p class="simpara">
							Device DAX provides raw access to NVDIMM storage by using a DAX character device node. Data on a <code class="literal">devdax</code> device can be made durable using CPU cache flushing and fencing instructions. Certain databases and virtual machine hypervisors might benefit from this mode. File systems cannot be created on <code class="literal">devdax</code> devices.
						</p><p class="simpara">
							Devices in this mode are available at <code class="literal filename">/dev/dax<span class="emphasis"><em>N</em></span>.<span class="emphasis"><em>M</em></span></code>. See the <code class="literal">chardev</code> value listed after creating the namespace.
						</p></dd><dt><span class="term"><code class="literal">fsdax</code>, or file system direct access (DAX)</span></dt><dd><p class="simpara">
							Enables NVDIMM devices to support direct access programming as described in the Storage Networking Industry Association (SNIA) Non-Volatile Memory (NVM) Programming Model specification. In this mode, I/O bypasses the storage stack of the kernel, and many Device Mapper drivers therefore cannot be used.
						</p><p class="simpara">
							You can create file systems on file system DAX devices.
						</p><p class="simpara">
							Devices in this mode are available at <code class="literal filename">/dev/pmem<span class="emphasis"><em>N</em></span></code>. See the <code class="literal">blockdev</code> value listed after creating the namespace.
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								The file system DAX technology is provided only as a Technology Preview, and is not supported by Red Hat.
							</p></div></div></dd><dt><span class="term"><code class="literal">raw</code></span></dt><dd><p class="simpara">
							Presents a memory disk that does not support DAX. In this mode, namespaces have several limitations and should not be used.
						</p><p class="simpara">
							Devices in this mode are available at <code class="literal filename">/dev/pmem<span class="emphasis"><em>N</em></span></code>. See the <code class="literal">blockdev</code> value listed after creating the namespace.
						</p></dd></dl></div></section><section class="section" id="creating-a-sector-namespace-on-an-nvdimm-to-act-as-a-block-device_using-nvdimm-persistent-memory-storage"><div class="titlepage"><div><div><h2 class="title">4.5. Creating a sector namespace on an NVDIMM to act as a block device</h2></div></div></div><p>
				You can configure an NVDIMM device in sector mode, which is also called <span class="emphasis"><em>legacy mode</em></span>, to support traditional, block-based storage.
			</p><p>
				You can either:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						reconfigure an existing namespace to sector mode, or
					</li><li class="listitem">
						create a new sector namespace if there is available space.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An NVDIMM device is attached to your system.
					</li></ul></div><section class="section" id="installing-ndctl_creating-a-sector-namespace-on-an-nvdimm-to-act-as-a-block-device"><div class="titlepage"><div><div><h3 class="title">4.5.1. Installing ndctl</h3></div></div></div><p>
					This procedure installs the <code class="literal">ndctl</code> utility, which is used to configure and monitor NVDIMM devices.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To install the <code class="literal">ndctl</code> utility, use the following command:
						</p><pre class="screen"># yum install ndctl</pre></li></ul></div></section><section class="section" id="reconfiguring-an-existing-nvdimm-namespace-to-sector-mode_creating-a-sector-namespace-on-an-nvdimm-to-act-as-a-block-device"><div class="titlepage"><div><div><h3 class="title">4.5.2. Reconfiguring an existing NVDIMM namespace to sector mode</h3></div></div></div><p>
					This procedure reconfigures an NVDIMM namespace to sector mode for use as a fast block device.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Reconfiguring a namespace deletes all data previously stored on the namespace.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">ndctl</code> utility is installed. See <a class="xref" href="index.html#installing-ndctl_creating-a-sector-namespace-on-an-nvdimm-to-act-as-a-block-device" title="4.5.1. Installing ndctl">Section 4.5.1, “Installing ndctl”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Reconfigure the selected namespace to sector mode:
						</p><pre class="screen"># ndctl create-namespace \
        --force \
        --reconfig=<span class="emphasis"><em><span class="replaceable replaceable">namespace-ID</span></em></span> \
        --mode=sector</pre><div class="example" id="idm140163629760688"><p class="title"><strong>Example 4.1. Reconfiguring namespace1.0 in sector mode</strong></p><div class="example-contents"><p>
								To reconfigure the <code class="literal">namespace1.0</code> namespace to use <code class="literal">sector</code> mode:
							</p><pre class="screen"># ndctl create-namespace \
        --force \
        --reconfig=namespace1.0 \
        --mode=sector

{
  "dev":"namespace1.0",
  "mode":"sector",
  "size":"11.99 GiB (12.87 GB)",
  "uuid":"5805480e-90e6-407e-96a4-23e1cde2ed78",
  "raw_uuid":"879d9e9f-fd43-4ed5-b64f-3bcd0781391a",
  "sector_size":4096,
  "blockdev":"pmem1s",
  "numa_node":1
}</pre></div></div></li><li class="listitem">
							The reconfigured namespace is now available under the <code class="literal filename">/dev</code> directory as <code class="literal filename">/dev/pmem<span class="emphasis"><em>N</em></span>s</code>.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">ndctl-create-namespace(1)</code> man page
						</li></ul></div></section><section class="section" id="creating-a-new-nvdimm-namespace-in-sector-mode_creating-a-sector-namespace-on-an-nvdimm-to-act-as-a-block-device"><div class="titlepage"><div><div><h3 class="title">4.5.3. Creating a new NVDIMM namespace in sector mode</h3></div></div></div><p>
					This procedure creates a new sector namespace on an NVDIMM device, enabling you to use it as a traditional block device.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">ndctl</code> utility is installed. See <a class="xref" href="index.html#installing-ndctl_creating-a-sector-namespace-on-an-nvdimm-to-act-as-a-block-device" title="4.5.1. Installing ndctl">Section 4.5.1, “Installing ndctl”</a>.
						</li><li class="listitem">
							The NVDIMM device supports labels.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							List the <code class="literal">pmem</code> regions on your system that have available space. In the following example, space is available in the <code class="literal">region5</code> and <code class="literal">region4</code> regions:
						</p><pre class="screen"># ndctl list --regions

[
  {
    "dev":"<span class="strong strong"><strong>region5</strong></span>",
    "size":270582939648,
    "available_size":270582939648,
    "type":"pmem",
    "iset_id":-7337419320239190016
  },
  {
    "dev":"<span class="strong strong"><strong>region4</strong></span>",
    "size":270582939648,
    "available_size":270582939648,
    "type":"pmem",
    "iset_id":-137289417188962304
  }
]</pre></li><li class="listitem"><p class="simpara">
							On any of the available regions, allocate one or more namespaces:
						</p><pre class="screen"># ndctl create-namespace \
        --mode=sector \
        --region=<span class="emphasis"><em><span class="replaceable replaceable">regionN</span></em></span> \
        --size=<span class="emphasis"><em><span class="replaceable replaceable">namespace-size</span></em></span></pre><div class="example" id="idm140163630535616"><p class="title"><strong>Example 4.2. Creating a namespace on a region</strong></p><div class="example-contents"><p>
								The following command creates a 36-GiB sector namespace on <code class="literal">region4</code>:
							</p><pre class="screen"># ndctl create-namespace \
        --mode=sector \
        --region=region4 \
        --size=36G</pre></div></div></li><li class="listitem">
							The new namespace is now available under the <code class="literal filename">/dev</code> directory as <code class="literal filename">/dev/pmem<span class="emphasis"><em>N</em></span>s</code>.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">ndctl-create-namespace(1)</code> man page
						</li></ul></div></section></section><section class="section" id="creating-a-device-dax-namespace-on-an-nvdimm_using-nvdimm-persistent-memory-storage"><div class="titlepage"><div><div><h2 class="title">4.6. Creating a device DAX namespace on an NVDIMM</h2></div></div></div><p>
				You can configure an NVDIMM device in device DAX mode to support character storage with direct access capabilities.
			</p><p>
				You can either:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						reconfigure an existing namespace to device DAX mode, or
					</li><li class="listitem">
						create a new device DAX namespace if there is available space.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An NVDIMM device is attached to your system.
					</li></ul></div><section class="section" id="nvdimm-in-device-direct-access-mode_creating-a-device-dax-namespace-on-an-nvdimm"><div class="titlepage"><div><div><h3 class="title">4.6.1. NVDIMM in device direct access mode</h3></div></div></div><p>
					Device direct access (device DAX, <code class="literal">devdax</code>) provides a means for applications to directly access storage, without the involvement of a file system. The benefit of device DAX is that it provides a guaranteed fault granularity, which can be configured using the <code class="literal option">--align</code> option of the <code class="literal">ndctl</code> utility
				</p><p>
					For the Intel 64 and AMD64 architecture, the following fault granularities are supported:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							4 KiB
						</li><li class="listitem">
							2 MiB
						</li><li class="listitem">
							1 GiB
						</li></ul></div><p>
					Device DAX nodes support only the following system calls:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">open()</code>
						</li><li class="listitem">
							<code class="literal">close()</code>
						</li><li class="listitem">
							<code class="literal">mmap()</code>
						</li></ul></div><p>
					The <code class="literal">read()</code> and <code class="literal">write()</code> variants are not supported because the device DAX use case is tied to persistent memory programming.
				</p></section><section class="section" id="installing-ndctl_creating-a-device-dax-namespace-on-an-nvdimm"><div class="titlepage"><div><div><h3 class="title">4.6.2. Installing ndctl</h3></div></div></div><p>
					This procedure installs the <code class="literal">ndctl</code> utility, which is used to configure and monitor NVDIMM devices.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To install the <code class="literal">ndctl</code> utility, use the following command:
						</p><pre class="screen"># yum install ndctl</pre></li></ul></div></section><section class="section" id="reconfiguring-an-existing-nvdimm-namespace-to-device-dax-mode_creating-a-device-dax-namespace-on-an-nvdimm"><div class="titlepage"><div><div><h3 class="title">4.6.3. Reconfiguring an existing NVDIMM namespace to device DAX mode</h3></div></div></div><p>
					This procedure reconfigures a namespace on an NVDIMM device to device DAX mode, and enables you to store data on the namespace.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Reconfiguring a namespace deletes all data previously stored on the namespace.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">ndctl</code> utility is installed. See <a class="xref" href="index.html#installing-ndctl_creating-a-device-dax-namespace-on-an-nvdimm" title="4.6.2. Installing ndctl">Section 4.6.2, “Installing ndctl”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							List all namespaces on your system:
						</p><pre class="screen"># ndctl list --namespaces --idle

[
  {
    "dev":"<span class="strong strong"><strong>namespace1.0</strong></span>",
    "mode":"raw",
    "size":34359738368,
    "state":"disabled",
    "numa_node":1
  },
  {
    "dev":"<span class="strong strong"><strong>namespace0.0</strong></span>",
    "mode":"raw",
    "size":34359738368,
    "state":"disabled",
    "numa_node":0
  }
]</pre></li><li class="listitem"><p class="simpara">
							Reconfigure any namespace:
						</p><pre class="screen"># ndctl create-namespace \
        --force \
        --mode=devdax \
        --reconfig=<span class="emphasis"><em><span class="replaceable replaceable">namespace-ID</span></em></span></pre><div class="example" id="idm140163628731936"><p class="title"><strong>Example 4.3. Reconfiguring a namespace as device DAX</strong></p><div class="example-contents"><p>
								The following command reconfigures <code class="literal">namespace0.0</code> for data storage that supports DAX. It is aligned to a 2-MiB fault granularity to ensure that the operating system faults in 2-MiB pages at a time:
							</p><pre class="screen"># ndctl create-namespace \
        --force \
        --mode=devdax \
        --align=2M \
        --reconfig=namespace0.0</pre></div></div></li><li class="listitem">
							The namespace is now available at the <code class="literal filename">/dev/dax<span class="emphasis"><em>N</em></span>.<span class="emphasis"><em>M</em></span></code> path.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">ndctl-create-namespace(1)</code> man page
						</li></ul></div></section><section class="section" id="creating-a-new-nvdimm-namespace-in-device-dax-mode_creating-a-device-dax-namespace-on-an-nvdimm"><div class="titlepage"><div><div><h3 class="title">4.6.4. Creating a new NVDIMM namespace in device DAX mode</h3></div></div></div><p>
					This procedure creates a new device DAX namespace on an NVDIMM device, enabling you to store data on the namespace.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">ndctl</code> utility is installed. See <a class="xref" href="index.html#installing-ndctl_creating-a-device-dax-namespace-on-an-nvdimm" title="4.6.2. Installing ndctl">Section 4.6.2, “Installing ndctl”</a>.
						</li><li class="listitem">
							The NVDIMM device supports labels.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							List the <code class="literal">pmem</code> regions on your system that have available space. In the following example, space is available in the <code class="literal">region5</code> and <code class="literal">region4</code> regions:
						</p><pre class="screen"># ndctl list --regions

[
  {
    "dev":"<span class="strong strong"><strong>region5</strong></span>",
    "size":270582939648,
    "available_size":270582939648,
    "type":"pmem",
    "iset_id":-7337419320239190016
  },
  {
    "dev":"<span class="strong strong"><strong>region4</strong></span>",
    "size":270582939648,
    "available_size":270582939648,
    "type":"pmem",
    "iset_id":-137289417188962304
  }
]</pre></li><li class="listitem"><p class="simpara">
							On any of the available regions, allocate one or more namespaces:
						</p><pre class="screen"># ndctl create-namespace \
        --mode=devdax \
        --region=<span class="emphasis"><em><span class="replaceable replaceable">regionN</span></em></span> \
        --size=<span class="emphasis"><em><span class="replaceable replaceable">namespace-size</span></em></span></pre><div class="example" id="idm140163629599952"><p class="title"><strong>Example 4.4. Creating a namespace on a region</strong></p><div class="example-contents"><p>
								The following command creates a 36-GiB device DAX namespace on <code class="literal">region4</code>. It is aligned to a 2-MiB fault granularity to ensure that the operating system faults in 2-MiB pages at a time:
							</p><pre class="screen"># ndctl create-namespace \
        --mode=devdax \
        --region=region4 \
        --align=2M \
        --size=36G

{
  "dev":"namespace1.2",
  "mode":"devdax",
  "map":"dev",
  "size":"35.44 GiB (38.05 GB)",
  "uuid":"5ae01b9c-1ebf-4fb6-bc0c-6085f73d31ee",
  "raw_uuid":"4c8be2b0-0842-4bcb-8a26-4bbd3b44add2",
  "daxregion":{
    "id":1,
    "size":"35.44 GiB (38.05 GB)",
    "align":2097152,
    "devices":[
      {
        "chardev":"dax1.2",
        "size":"35.44 GiB (38.05 GB)"
      }
    ]
  },
  "numa_node":1
}</pre></div></div></li><li class="listitem">
							The namespace is now available at the <code class="literal filename">/dev/dax<span class="emphasis"><em>N</em></span>.<span class="emphasis"><em>M</em></span></code> path.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">ndctl-create-namespace(1)</code> man page
						</li></ul></div></section></section><section class="section" id="creating-a-file-system-dax-namespace-on-an-nvdimm_using-nvdimm-persistent-memory-storage"><div class="titlepage"><div><div><h2 class="title">4.7. Creating a file system DAX namespace on an NVDIMM</h2></div></div></div><p>
				You can configure an NVDIMM device in file system DAX mode to support a file system with direct access capabilities.
			</p><p>
				You can either:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						reconfigure an existing namespace to file system DAX mode, or
					</li><li class="listitem">
						create a new file system DAX namespace if there is available space.
					</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					The file system DAX technology is provided only as a Technology Preview, and is not supported by Red Hat.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An NVDIMM device is attached to your system.
					</li></ul></div><section class="section" id="nvdimm-in-file-system-direct-access-mode_creating-a-file-system-dax-namespace-on-an-nvdimm"><div class="titlepage"><div><div><h3 class="title">4.7.1. NVDIMM in file system direct access mode</h3></div></div></div><p>
					When an NVDIMM device is configured in file system direct access (file system DAX, <code class="literal">fsdax</code>) mode, a file system can be created on top of it.
				</p><p>
					Any application that performs an <code class="literal">mmap()</code> operation on a file on this file system gets direct access to its storage. This enables the direct access programming model on NVDIMM. The file system must be mounted with the <code class="literal option">-o dax</code> option in order for direct mapping to happen.
				</p><h5 id="per_page_metadata_allocation">Per-page metadata allocation</h5><p>
					This mode requires allocating per-page metadata in the system DRAM or on the NVDIMM device itself. The overhead of this data structure is 64 bytes per each 4-KiB page:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							On small devices, the amount of overhead is small enough to fit in DRAM with no problems. For example, a 16-GiB namespace only requires 256 MiB for page structures. Because NVDIMM devices are usually small and expensive, storing the page tracking data structures in DRAM is preferable.
						</li><li class="listitem">
							On NVDIMM devices that are be terabytes in size or larger, the amount of memory required to store the page tracking data structures might exceed the amount of DRAM in the system. One TiB of NVDIMM requires 16 GiB just for page structures. As a result, storing the data structures on the NVDIMM itself is preferable in such cases.
						</li></ul></div><p>
					You can configure where per-page metadata are stored using the <code class="literal option">--map</code> option when configuring a namespace:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							To allocate in the system RAM, use <code class="literal option">--map=mem</code>.
						</li><li class="listitem">
							To allocate on the NVDIMM, use <code class="literal option">--map=dev</code>.
						</li></ul></div><h5 id="partitions_and_file_systems_on_fsdax">Partitions and file systems on fsdax</h5><p>
					When creating partitions on an <code class="literal">fsdax</code> device, partitions must be aligned on page boundaries. On the Intel 64 and AMD64 architecture, at least 4 KiB alignment is required for the start and end of the partition. 2 MiB is the preferred alignment.
				</p><p>
					On Red Hat Enterprise Linux 8, both the XFS and ext4 file system can be created on NVDIMM as a Technology Preview.
				</p></section><section class="section" id="installing-ndctl_creating-a-file-system-dax-namespace-on-an-nvdimm"><div class="titlepage"><div><div><h3 class="title">4.7.2. Installing ndctl</h3></div></div></div><p>
					This procedure installs the <code class="literal">ndctl</code> utility, which is used to configure and monitor NVDIMM devices.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To install the <code class="literal">ndctl</code> utility, use the following command:
						</p><pre class="screen"># yum install ndctl</pre></li></ul></div></section><section class="section" id="reconfiguring-an-existing-nvdimm-namespace-to-file-system-dax-mode_creating-a-file-system-dax-namespace-on-an-nvdimm"><div class="titlepage"><div><div><h3 class="title">4.7.3. Reconfiguring an existing NVDIMM namespace to file system DAX mode</h3></div></div></div><p>
					This procedure reconfigures a namespace on an NVDIMM device to file system DAX mode, and enables you to store files on the namespace.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Reconfiguring a namespace deletes all data previously stored on the namespace.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">ndctl</code> utility is installed. See <a class="xref" href="index.html#installing-ndctl_creating-a-file-system-dax-namespace-on-an-nvdimm" title="4.7.2. Installing ndctl">Section 4.7.2, “Installing ndctl”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							List all namespaces on your system:
						</p><pre class="screen"># ndctl list --namespaces --idle

[
  {
    "dev":"<span class="strong strong"><strong>namespace1.0</strong></span>",
    "mode":"raw",
    "size":34359738368,
    "state":"disabled",
    "numa_node":1
  },
  {
    "dev":"<span class="strong strong"><strong>namespace0.0</strong></span>",
    "mode":"raw",
    "size":34359738368,
    "state":"disabled",
    "numa_node":0
  }
]</pre></li><li class="listitem"><p class="simpara">
							Reconfigure any namespace:
						</p><pre class="screen"># ndctl create-namespace \
        --force \
        --mode=fsdax \
        --reconfig=<span class="emphasis"><em><span class="replaceable replaceable">namespace-ID</span></em></span></pre><div class="example" id="idm140163630147552"><p class="title"><strong>Example 4.5. Reconfiguring a namespace as file system DAX</strong></p><div class="example-contents"><p>
								To use <code class="literal">namespace0.0</code> for a file system that supports DAX, use the following command:
							</p><pre class="screen"># ndctl create-namespace \
        --force \
        --mode=fsdax \
        --reconfig=namespace0.0

{
  "dev":"namespace0.0",
  "mode":"fsdax",
  "size":"32.00 GiB (34.36 GB)",
  "uuid":"ab91cc8f-4c3e-482e-a86f-78d177ac655d",
  "blockdev":"pmem0",
  "numa_node":0
}</pre></div></div></li><li class="listitem">
							The namespace is now available at the <code class="literal filename">/dev/pmem<span class="emphasis"><em>N</em></span></code> path.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">ndctl-create-namespace(1)</code> man page
						</li></ul></div></section><section class="section" id="creating-a-new-nvdimm-namespace-in-file-system-dax-mode_creating-a-file-system-dax-namespace-on-an-nvdimm"><div class="titlepage"><div><div><h3 class="title">4.7.4. Creating a new NVDIMM namespace in file system DAX mode</h3></div></div></div><p>
					This procedure creates a new file system DAX namespace on an NVDIMM device, enabling you to store files on the namespace.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">ndctl</code> utility is installed. See <a class="xref" href="index.html#installing-ndctl_creating-a-file-system-dax-namespace-on-an-nvdimm" title="4.7.2. Installing ndctl">Section 4.7.2, “Installing ndctl”</a>.
						</li><li class="listitem">
							The NVDIMM device supports labels.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							List the <code class="literal">pmem</code> regions on your system that have available space. In the following example, space is available in the <code class="literal">region5</code> and <code class="literal">region4</code> regions:
						</p><pre class="screen"># ndctl list --regions

[
  {
    "dev":"<span class="strong strong"><strong>region5</strong></span>",
    "size":270582939648,
    "available_size":270582939648,
    "type":"pmem",
    "iset_id":-7337419320239190016
  },
  {
    "dev":"<span class="strong strong"><strong>region4</strong></span>",
    "size":270582939648,
    "available_size":270582939648,
    "type":"pmem",
    "iset_id":-137289417188962304
  }
]</pre></li><li class="listitem"><p class="simpara">
							On any of the available regions, allocate one or more namespaces:
						</p><pre class="screen"># ndctl create-namespace \
        --mode=fsdax \
        --region=<span class="emphasis"><em><span class="replaceable replaceable">regionN</span></em></span> \
        --size=<span class="emphasis"><em><span class="replaceable replaceable">namespace-size</span></em></span></pre><div class="example" id="idm140163628525456"><p class="title"><strong>Example 4.6. Creating a namespace on a region</strong></p><div class="example-contents"><p>
								The following command creates a 36-GiB file system DAX namespace on <code class="literal">region4</code>:
							</p><pre class="screen"># ndctl create-namespace \
        --mode=fsdax \
        --region=region4 \
        --size=36G

{
  "dev":"namespace4.0",
  "mode":"fsdax",
  "size":"35.44 GiB (38.05 GB)",
  "uuid":"9c5330b5-dc90-4f7a-bccd-5b558fa881fe",
  "blockdev":"<span class="strong strong"><strong>pmem4</strong></span>",
  "numa_node":0
}</pre></div></div></li><li class="listitem">
							The namespace is now available at the <code class="literal filename">/dev/pmem<span class="emphasis"><em>N</em></span></code> path.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">ndctl-create-namespace(1)</code> man page
						</li></ul></div></section><section class="section" id="creating-a-file-system-on-a-file-system-dax-device_creating-a-file-system-dax-namespace-on-an-nvdimm"><div class="titlepage"><div><div><h3 class="title">4.7.5. Creating a file system on a file system DAX device</h3></div></div></div><p>
					This procedure creates a file system on a file system DAX device and mounts the file system.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Optionally, create a partition on the file system DAX device. See <a class="xref" href="index.html#assembly_creating-a-partition_assembly_getting-started-with-partitions" title="2.3. Creating a partition">Section 2.3, “Creating a partition”</a>.
						</p><p class="simpara">
							By default, the <code class="literal">parted</code> tool aligns partitions on 1 MiB boundaries. For the first partition, specify 2 MiB as the start of the partition. If the size of the partition is a multiple of 2 MiB, all other partitions are also aligned.
						</p></li><li class="listitem"><p class="simpara">
							Create an XFS or ext4 file system on the partition or the NVDIMM device.
						</p><p class="simpara">
							For XFS, disable shared copy-on-write data extents when creating the file system:
						</p><pre class="screen"># mkfs.xfs -m reflink=0 <span class="emphasis"><em><span class="replaceable replaceable">fsdax-partition-or-device</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Mount the file system with the <code class="literal option">-o fsdax</code> mount option:
						</p><pre class="screen"># mount -o fsdax <span class="emphasis"><em><span class="replaceable replaceable">fsdax-partition-or-device</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li><li class="listitem">
							Applications can now use persistent memory and create files in the <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span> directory, open the files, and use the <code class="literal">mmap</code> operation to map the files for direct access.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">mkfs.xfs(8)</code> man page
						</li></ul></div></section></section><section class="section" id="troubleshooting-nvdimm-persistent-memory_using-nvdimm-persistent-memory-storage"><div class="titlepage"><div><div><h2 class="title">4.8. Troubleshooting NVDIMM persistent memory</h2></div></div></div><p>
				You can detect and fix different kinds of errors on NVDIMM devices.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An NVDIMM device is connected to your system and configured.
					</li></ul></div><section class="section" id="installing-ndctl_troubleshooting-nvdimm-persistent-memory"><div class="titlepage"><div><div><h3 class="title">4.8.1. Installing ndctl</h3></div></div></div><p>
					This procedure installs the <code class="literal">ndctl</code> utility, which is used to configure and monitor NVDIMM devices.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To install the <code class="literal">ndctl</code> utility, use the following command:
						</p><pre class="screen"># yum install ndctl</pre></li></ul></div></section><section class="section" id="monitoring-nvdimm-health-using-s-m-a-r-t-_troubleshooting-nvdimm-persistent-memory"><div class="titlepage"><div><div><h3 class="title">4.8.2. Monitoring NVDIMM health using S.M.A.R.T.</h3></div></div></div><p>
					Some NVDIMM devices support Self-Monitoring, Analysis and Reporting Technology (S.M.A.R.T.) interfaces for retrieving health information.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Monitor NVDIMM health regularly to prevent data loss. If S.M.A.R.T. reports problems with the health status of an NVDIMM device, replace it as described in <a class="xref" href="index.html#detecting-and-replacing-a-broken-nvdimm-device_troubleshooting-nvdimm-persistent-memory" title="4.8.3. Detecting and replacing a broken NVDIMM device">Section 4.8.3, “Detecting and replacing a broken NVDIMM device”</a>.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							On some systems, the <code class="literal">acpi_ipmi</code> driver must be loaded to retrieve health information using the following command:
						</p><pre class="screen"># modprobe acpi_ipmi</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To access the health information, use the following command:
						</p><pre class="screen"># ndctl list --dimms --health

...
    {
      "dev":"nmem0",
      "id":"802c-01-1513-b3009166",
      "handle":1,
      "phys_id":22,
      "health":
      {
        "health_state":"ok",
        "temperature_celsius":25.000000,
        "spares_percentage":99,
        "alarm_temperature":false,
        "alarm_spares":false,
        "temperature_threshold":50.000000,
        "spares_threshold":20,
        "life_used_percentage":1,
        "shutdown_state":"clean"
      }
     }
...</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">ndctl-list(1)</code> man page
						</li></ul></div></section><section class="section" id="detecting-and-replacing-a-broken-nvdimm-device_troubleshooting-nvdimm-persistent-memory"><div class="titlepage"><div><div><h3 class="title">4.8.3. Detecting and replacing a broken NVDIMM device</h3></div></div></div><p>
					If you find error messages related to NVDIMM reported in your system log or by S.M.A.R.T., it might mean an NVDIMM device is failing. In that case, it is necessary to:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Detect which NVDIMM device is failing
						</li><li class="listitem">
							Back up data stored on it
						</li><li class="listitem">
							Physically replace the device
						</li></ol></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To detect the broken device, use the following command:
						</p><pre class="screen"># ndctl list --dimms --regions --health --media-errors --human</pre><p class="simpara">
							The <code class="literal">badblocks</code> field shows which NVDIMM is broken. Note its name in the <code class="literal">dev</code> field.
						</p><div class="example" id="idm140163629741200"><p class="title"><strong>Example 4.7. Health status of NVDIMM devices</strong></p><div class="example-contents"><p>
								In the following example, the NVDIMM named <code class="literal">nmem0</code> is broken:
							</p><pre class="screen"># ndctl list --dimms --regions --health --media-errors --human

...
  "regions":[
    {
      "dev":"region0",
      "size":"250.00 GiB (268.44 GB)",
      "available_size":0,
      "type":"pmem",
      "numa_node":0,
      "iset_id":"0xXXXXXXXXXXXXXXXX",
      "mappings":[
        {
          "dimm":"nmem1",
          "offset":"0x10000000",
          "length":"0x1f40000000",
          "position":1
        },
        {
          "dimm":"nmem0",
          "offset":"0x10000000",
          "length":"0x1f40000000",
          "position":0
        }
      ],
      "badblock_count":1,
      "badblocks":[
        {
          "offset":65536,
          "length":1,
          "dimms":[
            "nmem0"
          ]
        }
      ],
      "persistence_domain":"memory_controller"
    }
  ]
}</pre></div></div></li><li class="listitem"><p class="simpara">
							Use the following command to find the <code class="literal">phys_id</code> attribute of the broken NVDIMM:
						</p><pre class="screen"># ndctl list --dimms --human</pre><p class="simpara">
							From the previous example, you know that <code class="literal">nmem0</code> is the broken NVDIMM. Therefore, find the <code class="literal">phys_id</code> attribute of <code class="literal">nmem0</code>.
						</p><div class="example" id="idm140163630431072"><p class="title"><strong>Example 4.8. The phys_id attributes of NVDIMMs</strong></p><div class="example-contents"><p>
								In the following example, the <code class="literal">phys_id</code> is <code class="literal">0x10</code>:
							</p><pre class="screen"># ndctl list --dimms --human

[
  {
    "dev":"nmem1",
    "id":"XXXX-XX-XXXX-XXXXXXXX",
    "handle":"0x120",
    "phys_id":"0x1c"
  },
  {
    "dev":"nmem0",
    "id":"XXXX-XX-XXXX-XXXXXXXX",
    "handle":"0x20",
    "phys_id":"0x10",
    "flag_failed_flush":true,
    "flag_smart_event":true
  }
]</pre></div></div></li><li class="listitem"><p class="simpara">
							Use the following command to find the memory slot of the broken NVDIMM:
						</p><pre class="screen"># dmidecode</pre><p class="simpara">
							In the output, find the entry where the <code class="literal">Handle</code> identifier matches the <code class="literal">phys_id</code> attribute of the broken NVDIMM. The <code class="literal">Locator</code> field lists the memory slot used by the broken NVDIMM.
						</p><div class="example" id="idm140163629786624"><p class="title"><strong>Example 4.9. NVDIMM Memory Slot Listing</strong></p><div class="example-contents"><p>
								In the following example, the <code class="literal">nmem0</code> device matches the <code class="literal">0x0010</code> identifier and uses the <code class="literal">DIMM-XXX-YYYY</code> memory slot:
							</p><pre class="screen"># dmidecode

...
Handle 0x0010, DMI type 17, 40 bytes
Memory Device
        Array Handle: 0x0004
        Error Information Handle: Not Provided
        Total Width: 72 bits
        Data Width: 64 bits
        Size: 125 GB
        Form Factor: DIMM
        Set: 1
        Locator: DIMM-XXX-YYYY
        Bank Locator: Bank0
        Type: Other
        Type Detail: Non-Volatile Registered (Buffered)
...</pre></div></div></li><li class="listitem"><p class="simpara">
							Back up all data in the namespaces on the NVDIMM. If you do not back up the data before replacing the NVDIMM, the data will be lost when you remove the NVDIMM from your system.
						</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								In some cases, such as when the NVDIMM is completely broken, the backup might fail.
							</p><p>
								To prevent this, regularly monitor your NVDIMM devices using S.M.A.R.T. as described in <a class="xref" href="index.html#monitoring-nvdimm-health-using-s-m-a-r-t-_troubleshooting-nvdimm-persistent-memory" title="4.8.2. Monitoring NVDIMM health using S.M.A.R.T.">Section 4.8.2, “Monitoring NVDIMM health using S.M.A.R.T.”</a> and replace failing NVDIMMs before they break.
							</p></div></div><p class="simpara">
							Use the following command to list the namespaces on the NVDIMM:
						</p><pre class="screen"># ndctl list --namespaces --dimm=<span class="emphasis"><em><span class="replaceable replaceable">DIMM-ID-number</span></em></span></pre><div class="example" id="idm140163620286736"><p class="title"><strong>Example 4.10. NVDIMM namespaces listing</strong></p><div class="example-contents"><p>
								In the following example, the <code class="literal">nmem0</code> device contains the <code class="literal">namespace0.0</code> and <code class="literal">namespace0.2</code> namespaces, which you need to back up:
							</p><pre class="screen"># ndctl list --namespaces --dimm=0

[
  {
    "dev":"namespace0.2",
    "mode":"sector",
    "size":67042312192,
    "uuid":"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",
    "raw_uuid":"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",
    "sector_size":4096,
    "blockdev":"pmem0.2s",
    "numa_node":0
  },
  {
    "dev":"namespace0.0",
    "mode":"sector",
    "size":67042312192,
    "uuid":"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",
    "raw_uuid":"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",
    "sector_size":4096,
    "blockdev":"pmem0s",
    "numa_node":0
  }
]</pre></div></div></li><li class="listitem">
							Replace the broken NVDIMM physically.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">ndctl-list(1)</code> man page
						</li><li class="listitem">
							The <code class="literal">dmidecode(8)</code> man page
						</li></ul></div></section></section></section><section class="chapter" id="discarding-unused-blocks_managing-storage-devices"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Discarding unused blocks</h1></div></div></div><p>
			You can perform or schedule discard operations on block devices that support them.
		</p><section class="section" id="block-discard-operations_discarding-unused-blocks"><div class="titlepage"><div><div><h2 class="title">5.1. Block discard operations</h2></div></div></div><p>
				Block discard operations discard blocks that are no longer in use by a mounted file system. They are useful on:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Solid-state drives (SSDs)
					</li><li class="listitem">
						Thinly-provisioned storage
					</li></ul></div><h4 id="requirements">Requirements</h4><p>
				The block device underlying the file system must support physical discard operations.
			</p><p>
				Physical discard operations are supported if the value in the <code class="literal filename">/sys/block/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span>/queue/discard_max_bytes</code> file is not zero.
			</p></section><section class="section" id="types-of-block-discard-operations_discarding-unused-blocks"><div class="titlepage"><div><div><h2 class="title">5.2. Types of block discard operations</h2></div></div></div><p>
				You can run discard operations using different methods:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Batch discard</span></dt><dd>
							Are run explicitly by the user. They discard all unused blocks in the selected file systems.
						</dd><dt><span class="term">Online discard</span></dt><dd>
							Are specified at mount time. They run in real time without user intervention. Online discard operations discard only the blocks that are transitioning from used to free.
						</dd><dt><span class="term">Periodic discard</span></dt><dd>
							Are batch operations that are run regularly by a <code class="literal">systemd</code> service.
						</dd></dl></div><p>
				All types are supported by the XFS and ext4 file systems and by VDO.
			</p><h4 id="recommendations_2">Recommendations</h4><p>
				Red Hat recommends that you use batch or periodic discard.
			</p><p>
				Use online discard only if:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						the system’s workload is such that batch discard is not feasible, or
					</li><li class="listitem">
						online discard operations are necessary to maintain performance.
					</li></ul></div></section><section class="section" id="performing-batch-block-discard_discarding-unused-blocks"><div class="titlepage"><div><div><h2 class="title">5.3. Performing batch block discard</h2></div></div></div><p>
				This procedure performs a batch block discard operation to discard unused blocks on a mounted file system.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The file system is mounted.
					</li><li class="listitem">
						The block device underlying the file system supports physical discard operations.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the <code class="literal">fstrim</code> utility:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								To perform discard only on a selected file system, use:
							</p><pre class="screen"># fstrim <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li><li class="listitem"><p class="simpara">
								To perform discard on all mounted file systems, use:
							</p><pre class="screen"># fstrim --all</pre></li></ul></div></li></ul></div><p>
				If you execute the <code class="literal">fstrim</code> command on:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						a device that does not support discard operations, or
					</li><li class="listitem">
						a logical device (LVM or MD) composed of multiple devices, where any one of the device does not support discard operations,
					</li></ul></div><p>
				the following message displays:
			</p><pre class="screen"># fstrim <span class="emphasis"><em><span class="replaceable replaceable">/mnt/non_discard</span></em></span>

fstrim: <span class="emphasis"><em><span class="replaceable replaceable">/mnt/non_discard</span></em></span>: the discard operation is not supported</pre><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">fstrim(8)</code> man page
					</li></ul></div></section><section class="section" id="enabling-online-block-discard_discarding-unused-blocks"><div class="titlepage"><div><div><h2 class="title">5.4. Enabling online block discard</h2></div></div></div><p>
				This procedure enables online block discard operations that automatically discard unused blocks on all supported file systems.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Enable online discard at mount time:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								When mounting a file system manually, add the <code class="literal option">-o discard</code> mount option:
							</p><pre class="screen"># mount -o discard <span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li><li class="listitem">
								When mounting a file system persistently, add the <code class="literal option">discard</code> option to the mount entry in the <code class="literal filename">/etc/fstab</code> file.
							</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">mount(8)</code> man page
					</li><li class="listitem">
						The <code class="literal">fstab(5)</code> man page
					</li></ul></div></section><section class="section" id="enabling-online-block-discard-using-rhel-system-roles_discarding-unused-blocks"><div class="titlepage"><div><div><h2 class="title">5.5. Enabling online block discard using RHEL System Roles</h2></div></div></div><p>
				This section describes how to enable online block discard using the <code class="literal">storage</code> role.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An Ansible playbook including the <code class="literal">storage</code> role exists.
					</li></ul></div><p>
				For information on how to apply such a playbook, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/getting-started-with-system-administration_configuring-basic-system-settings#applying-a-role_what-rhel-system-roles-are">Applying a role</a>.
			</p><section class="section" id="an-example-ansible-playbook-to-enable-online-block-discard_enabling-online-block-discard-using-rhel-system-roles"><div class="titlepage"><div><div><h3 class="title">5.5.1. Example Ansible playbook to enable online block discard</h3></div></div></div><p>
					This section provides an example Ansible playbook. This playbook applies the <code class="literal">storage</code> role to mount an XFS file system with online block discard enabled.
				</p><pre class="literallayout">---
- hosts: all
  vars:
    storage_volumes:
      - name: barefs
        type: disk
        disks:
          - sdb
        fs_type: xfs
        mount_point: /mnt/data
        mount_options: discard
  roles:
    - rhel-system-roles.storage</pre></section></section><section class="section" id="enabling-periodic-block-discard_discarding-unused-blocks"><div class="titlepage"><div><div><h2 class="title">5.6. Enabling periodic block discard</h2></div></div></div><p>
				This procedure enables a <code class="literal">systemd</code> timer that regularly discards unused blocks on all supported file systems.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Enable and start the <code class="literal">systemd</code> timer:
					</p><pre class="screen"># systemctl enable --now fstrim.timer</pre></li></ul></div></section></section><section class="chapter" id="getting-started-with-iscsi_managing-storage-devices"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Getting started with iSCSI</h1></div></div></div><p>
			Red Hat Enterprise Linux 8 uses the <code class="literal">targetcli</code> shell as a command-line interface to perform the following operations:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Add, remove, view, and monitor iSCSI storage interconnects to utilize iSCSI hardware.
				</li><li class="listitem">
					Export local storage resources that are backed by either files, volumes, local SCSI devices, or by RAM disks to remote systems.
				</li></ul></div><p>
			The <code class="literal">targetcli</code> tool has a tree-based layout including built-in tab completion, auto-complete support, and inline documentation.
		</p><section class="section" id="adding-an-iscsi-target_getting-started-with-iscsi"><div class="titlepage"><div><div><h2 class="title">6.1. Adding an iSCSI target</h2></div></div></div><p>
				As a system administrator, you can add an iSCSI targets using the <code class="literal">targetcli</code> tool.
			</p><section class="section" id="installing-targetcli_adding-an-iscsi-target"><div class="titlepage"><div><div><h3 class="title">6.1.1. Installing targetcli</h3></div></div></div><p>
					Install the <code class="literal">targetcli</code> tool to add, monitor, and remove iSCSI storage interconnects .
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install <code class="literal">targetcli</code>:
						</p><pre class="screen"># yum install targetcli</pre></li><li class="listitem"><p class="simpara">
							Start the target service:
						</p><pre class="screen"># systemctl start target</pre></li><li class="listitem"><p class="simpara">
							Configure target to start at boot time:
						</p><pre class="screen"># systemctl enable target</pre></li><li class="listitem"><p class="simpara">
							Open port <code class="literal">3260</code> in the firewall and reload the firewall configuration:
						</p><pre class="screen"># firewall-cmd --permanent --add-port=3260/tcp
Success

# firewall-cmd --reload
Success</pre></li><li class="listitem"><p class="simpara">
							View the <code class="literal">targetcli</code> layout:
						</p><pre class="screen"># targetcli
/&gt; ls
o- /........................................[...]
  o- backstores.............................[...]
  | o- block.................[Storage Objects: 0]
  | o- fileio................[Storage Objects: 0]
  | o- pscsi.................[Storage Objects: 0]
  | o- ramdisk...............[Storage Objects: 0]
  o- iscsi...........................[Targets: 0]
  o- loopback........................[Targets: 0]</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">targetcli</code> man page.
						</li></ul></div></section><section class="section" id="creating-an-iscsi-target_adding-an-iscsi-target"><div class="titlepage"><div><div><h3 class="title">6.1.2. Creating an iSCSI target</h3></div></div></div><p>
					Creating an iSCSI target enables the iSCSI initiator of the client to access the storage devices on the server. Both targets and initiators have unique identifying names.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Installed and running <code class="literal">targetcli</code>. For more information, see <a class="xref" href="index.html#installing-targetcli_adding-an-iscsi-target" title="6.1.1. Installing targetcli">Section 6.1.1, “Installing targetcli”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Navigate to the iSCSI directory:
						</p><pre class="screen">/&gt; iscsi/</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The <code class="literal">cd</code> command is used to change directories as well as to list the path to move into.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Use one of the following options to create an iSCSI target:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Creating an iSCSI target using a default target name:
								</p><pre class="screen">/iscsi&gt; create

Created target
iqn.2003-01.org.linux-iscsi.hostname.x8664:sn.78b473f296ff
Created TPG1</pre></li><li class="listitem"><p class="simpara">
									Creating an iSCSI target using a specific name:
								</p><pre class="screen">/iscsi&gt; create <span class="emphasis"><em>iqn.2006-04.com.example:444</em></span>

Created target iqn.2006-04.com.example:444
Created TPG1
Here <code class="literal">iqn.2006-04.com.example:444</code> is target_iqn_name</pre><p class="simpara">
									Replace <span class="emphasis"><em>iqn.2006-04.com.example:444</em></span> with the specific target name.
								</p></li></ol></div></li><li class="listitem"><p class="simpara">
							Verify the newly created target:
						</p><pre class="screen">/iscsi&gt; ls

o- iscsi.......................................[1 Target]
    o- iqn.2006-04.com.example:444................[1 TPG]
        o- tpg1...........................[enabled, auth]
           o- acls...............................[0 ACL]
            o- luns...............................[0 LUN]
           o- portals.........................[0 Portal]</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">targetcli</code> man page.
						</li></ul></div></section><section class="section" id="iscsi-backstore_adding-an-iscsi-target"><div class="titlepage"><div><div><h3 class="title">6.1.3. iSCSI Backstore</h3></div></div></div><p>
					An iSCSI backstore enables support for different methods of storing an exported LUN’s data on the local machine. Creating a storage object defines the resources that the backstore uses. An administrator can choose any of the following backstore devices that Linux-IO (LIO) supports:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">fileio</code> backstore: Create a <code class="literal">fileio</code> storage object if you are using regular files on the local file system as disk images. For creating a <code class="literal">fileio</code> backstore, see <a class="xref" href="index.html#creating-a-fileio-storage-object_adding-an-iscsi-target" title="6.1.4. Creating a fileio storage object">Section 6.1.4, “Creating a fileio storage object”</a>.
						</li><li class="listitem">
							<code class="literal">block</code> backstore: Create a <code class="literal">block</code> storage object if you are using any local block device and logical device. For creating a <code class="literal">block</code> backstore, see <a class="xref" href="index.html#creating-a-block-storage-object_adding-an-iscsi-target" title="6.1.5. Creating a block storage object">Section 6.1.5, “Creating a block storage object”</a>.
						</li><li class="listitem">
							<code class="literal">pscsi</code> backstore: Create a <code class="literal">pscsi</code> storage object if your storage object supports direct pass-through of SCSI commands. For creating a <code class="literal">pscsi</code> backstore, see <a class="xref" href="index.html#creating-a-pscsi-storage-object_adding-an-iscsi-target" title="6.1.6. Creating a pscsi storage object">Section 6.1.6, “Creating a pscsi storage object”</a>
						</li><li class="listitem">
							<code class="literal">ramdisk</code> backstore: Create a <code class="literal">ramdisk</code> storage object if you want to create a temporary RAM backed device. For creating a <code class="literal">ramdisk</code> backstore, see <a class="xref" href="index.html#creating-a-memory-copy-ram-disk-storage-object_adding-an-iscsi-target" title="6.1.7. Creating a Memory Copy RAM disk storage object">Section 6.1.7, “Creating a Memory Copy RAM disk storage object”</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">targetcli</code> man page.
						</li></ul></div></section><section class="section" id="creating-a-fileio-storage-object_adding-an-iscsi-target"><div class="titlepage"><div><div><h3 class="title">6.1.4. Creating a fileio storage object</h3></div></div></div><p>
					<code class="literal">fileio</code> storage objects can support either the <code class="literal">write_back</code> or <code class="literal">write_thru</code> operations. The <code class="literal">write_back</code> operation enables the local file system cache. This improves performance but increases the risk of data loss. It is recommended to use <code class="literal">write_back=false</code> to disable the <code class="literal">write_back</code> operation in favor of the <code class="literal">write_thru</code> operation.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Installed and running <code class="literal">targetcli</code>. For more information, see <a class="xref" href="index.html#installing-targetcli_adding-an-iscsi-target" title="6.1.1. Installing targetcli">Section 6.1.1, “Installing targetcli”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Navigate to the backstores directory:
						</p><pre class="screen">/&gt; backstores/</pre></li><li class="listitem"><p class="simpara">
							Create a <code class="literal">fileio</code> storage object:
						</p><pre class="screen">/&gt; backstores/fileio create <span class="emphasis"><em>file1 /tmp/disk1</em></span>.img <span class="emphasis"><em>200M</em></span> write_back=false

Created fileio file1 with size 209715200</pre></li><li class="listitem"><p class="simpara">
							Verify the created <code class="literal">fileio</code> storage object:
						</p><pre class="screen">/backstores&gt; ls</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">targetcli</code> man page.
						</li></ul></div></section><section class="section" id="creating-a-block-storage-object_adding-an-iscsi-target"><div class="titlepage"><div><div><h3 class="title">6.1.5. Creating a block storage object</h3></div></div></div><p>
					The block driver allows the use of any block device that appears in the <code class="literal">/sys/block/</code> directory to be used with Linux-IO (LIO). This includes physical devices (for example, HDDs, SSDs, CDs, DVDs) and logical devices (for example, software or hardware RAID volumes, or LVM volumes).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Installed and running <code class="literal">targetcli</code>. For more information, see <a class="xref" href="index.html#installing-targetcli_adding-an-iscsi-target" title="6.1.1. Installing targetcli">Section 6.1.1, “Installing targetcli”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Navigate to the backstores directory:
						</p><pre class="screen">/&gt; backstores/</pre></li><li class="listitem"><p class="simpara">
							Create a <code class="literal">block</code> backstore:
						</p><pre class="screen">/&gt; backstores/block create name=<span class="emphasis"><em>block_backend</em></span> dev=/dev/<span class="emphasis"><em>sdb</em></span>

Generating a wwn serial.
Created block storage object block_backend using /dev/vdb.</pre></li><li class="listitem"><p class="simpara">
							Verify the created <code class="literal">block</code> storage object:
						</p><pre class="screen">/backstores&gt; ls</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You can also create a block backstore on a logical volume.
							</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">targetcli</code> man page.
						</li></ul></div></section><section class="section" id="creating-a-pscsi-storage-object_adding-an-iscsi-target"><div class="titlepage"><div><div><h3 class="title">6.1.6. Creating a pscsi storage object</h3></div></div></div><p>
					You can configure, as a backstore, any storage object that supports direct pass-through of SCSI commands without SCSI emulation, and with an underlying SCSI device that appears with <code class="literal">lsscsi</code> in the <code class="literal">/proc/scsi/scsi</code> (such as a SAS hard drive) . SCSI-3 and higher is supported with this subsystem.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						<code class="literal">pscsi</code> should only be used by advanced users. Advanced SCSI commands such as for Asymmetric Logical Unit Assignment (ALUAs) or Persistent Reservations (for example, those used by VMware ESX, and vSphere) are usually not implemented in the device firmware and can cause malfunctions or crashes. When in doubt, use <code class="literal">block</code> backstore for production setups instead.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Installed and running <code class="literal">targetcli</code>. For more information, see <a class="xref" href="index.html#installing-targetcli_adding-an-iscsi-target" title="6.1.1. Installing targetcli">Section 6.1.1, “Installing targetcli”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Navigate to the backstores directory:
						</p><pre class="screen">/&gt; backstores/</pre></li><li class="listitem"><p class="simpara">
							Create a <code class="literal">pscsi</code> backstore for a physical SCSI device, a TYPE_ROM device using <code class="literal">/dev/sr0</code> in this example:
						</p><pre class="screen">/&gt; backstores/pscsi/ create name=<span class="emphasis"><em>pscsi_backend</em></span> dev=/dev/sr0

Generating a wwn serial.
Created pscsi storage object pscsi_backend using /dev/sr0</pre></li><li class="listitem"><p class="simpara">
							Verify the created <code class="literal">pscsi</code> storage object:
						</p><pre class="screen">/backstores&gt; ls</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">targetcli</code> man page.
						</li></ul></div></section><section class="section" id="creating-a-memory-copy-ram-disk-storage-object_adding-an-iscsi-target"><div class="titlepage"><div><div><h3 class="title">6.1.7. Creating a Memory Copy RAM disk storage object</h3></div></div></div><p>
					Memory Copy RAM disks (<code class="literal">ramdisk</code>) provide RAM disks with full SCSI emulation and separate memory mappings using memory copy for initiators. This provides capability for multi-sessions and is particularly useful for fast and volatile mass storage for production purposes.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Installed and running <code class="literal">targetcli</code>. For more information, see <a class="xref" href="index.html#installing-targetcli_adding-an-iscsi-target" title="6.1.1. Installing targetcli">Section 6.1.1, “Installing targetcli”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Navigate to the backstores directory:
						</p><pre class="screen">/&gt; backstores/</pre></li><li class="listitem"><p class="simpara">
							Create a 1GB RAM disk backstore:
						</p><pre class="screen">/&gt; backstores/ramdisk/ create name=<span class="emphasis"><em>rd_backend</em></span> size=<span class="emphasis"><em>1GB</em></span>

Generating a wwn serial.
Created rd_mcp ramdisk rd_backend with size 1GB.</pre></li><li class="listitem"><p class="simpara">
							Verify the created <code class="literal">ramdisk</code> storage object:
						</p><pre class="screen">/backstores&gt; ls</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">targetcli</code> man page.
						</li></ul></div></section><section class="section" id="creating-an-iscsi-portal_adding-an-iscsi-target"><div class="titlepage"><div><div><h3 class="title">6.1.8. Creating an iSCSI portal</h3></div></div></div><p>
					Creating an iSCSI portal adds an IP address and a port to the target that keeps the target enabled.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Installed and running <code class="literal">targetcli</code>. For more information, see <a class="xref" href="index.html#installing-targetcli_adding-an-iscsi-target" title="6.1.1. Installing targetcli">Section 6.1.1, “Installing targetcli”</a>.
						</li><li class="listitem">
							An iSCSI target associated with a Target Portal Groups (TPG). For more information, see <a class="xref" href="index.html#creating-an-iscsi-target_adding-an-iscsi-target" title="6.1.2. Creating an iSCSI target">Section 6.1.2, “Creating an iSCSI target”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Navigate to the TPG directory:
						</p><pre class="screen">/iscsi&gt; iqn.2006-04.example:444/tpg1/</pre></li><li class="listitem"><p class="simpara">
							Use one of the following options to create an iSCSI portal:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Creating a default portal uses the default iSCSI port <code class="literal">3260</code> and allows the target to listen to all IP addresses on that port:
								</p><pre class="screen">/iscsi/iqn.20...mple:444/tpg1&gt; portals/ create

Using default IP port 3260
Binding to INADDR_Any (0.0.0.0)
Created network portal 0.0.0.0:3260</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										When an iSCSI target is created, a default portal is also created. This portal is set to listen to all IP addresses with the default port number that is: <code class="literal">0.0.0.0:3260</code>.
									</p><p>
										To remove the default portal:
									</p><p>
										<code class="literal">/iscsi/iqn-name/tpg1/portals delete ip_address=0.0.0.0 ip_port=3260</code>
									</p></div></div></li><li class="listitem"><p class="simpara">
									Creating a portal using a specific IP address:
								</p><pre class="screen">/iscsi/iqn.20...mple:444/tpg1&gt; portals/ create <span class="emphasis"><em>192.168.122.137</em></span>

Using default IP port 3260
Created network portal 192.168.122.137:3260</pre></li></ol></div></li><li class="listitem"><p class="simpara">
							Verify the newly created portal:
						</p><pre class="screen">/iscsi/iqn.20...mple:444/tpg1&gt; ls

o- tpg.................................. [enambled, auth]
    o- acls ......................................[0 ACL]
    o- luns ......................................[0 LUN]
    o- portals ................................[1 Portal]
       o- 192.168.122.137:3260......................[OK]</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">targetcli</code> man page.
						</li></ul></div></section><section class="section" id="creating-an-iscsi-lun_adding-an-iscsi-target"><div class="titlepage"><div><div><h3 class="title">6.1.9. Creating an iSCSI LUN</h3></div></div></div><p>
					Logical unit number (LUN) is a physical device that is backed by the iSCSI backstore. Each LUN has a unique number.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Installed and running <code class="literal">targetcli</code>. For more information, see <a class="xref" href="index.html#installing-targetcli_adding-an-iscsi-target" title="6.1.1. Installing targetcli">Section 6.1.1, “Installing targetcli”</a>.
						</li><li class="listitem">
							An iSCSI target associated with a Target Portal Groups (TPG). For more information, see <a class="xref" href="index.html#creating-an-iscsi-target_adding-an-iscsi-target" title="6.1.2. Creating an iSCSI target">Section 6.1.2, “Creating an iSCSI target”</a>.
						</li><li class="listitem">
							Created storage objects. For more information, see <a class="xref" href="index.html#iscsi-backstore_adding-an-iscsi-target" title="6.1.3. iSCSI Backstore">Section 6.1.3, “iSCSI Backstore”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create LUNs of already created storage objects:
						</p><pre class="screen">/iscsi/iqn.20...mple:444/tpg1&gt; luns/ create /backstores/ramdisk/rd_backend
Created LUN 0.

/iscsi/iqn.20...mple:444/tpg1&gt; luns/ create /backstores/block/block_backend
Created LUN 1.

/iscsi/iqn.20...mple:444/tpg1&gt; luns/ create /backstores/fileio/file1
Created LUN 2.</pre></li><li class="listitem"><p class="simpara">
							Verify the created LUNs:
						</p><pre class="screen">/iscsi/iqn.20...mple:444/tpg1&gt; ls

o- tpg.................................. [enambled, auth]
    o- acls ......................................[0 ACL]
    o- luns .....................................[3 LUNs]
    |  o- lun0.........................[ramdisk/ramdisk1]
    |  o- lun1.................[block/block1 (/dev/vdb1)]
    |  o- lun2...................[fileio/file1 (/foo.img)]
    o- portals ................................[1 Portal]
        o- 192.168.122.137:3260......................[OK]</pre><p class="simpara">
							Default LUN name starts at <code class="literal">0</code>.
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								By default, LUNs are created with read-write permissions. If a new LUN is added after ACLs are created, LUN automatically maps to all available ACLs and can cause a security risk. To create a LUN with read-only permissions, see <a class="xref" href="index.html#creating-a-read-only-iscsi-lun_adding-an-iscsi-target" title="6.1.10. Creating a read-only iSCSI LUN">Section 6.1.10, “Creating a read-only iSCSI LUN”</a>.
							</p></div></div></li><li class="listitem">
							Configure ACLs. For more information, see <a class="xref" href="index.html#creating-an-iscsi-acl_adding-an-iscsi-target" title="6.1.11. Creating an iSCSI ACL">Section 6.1.11, “Creating an iSCSI ACL”</a>.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">targetcli</code> man page.
						</li></ul></div></section><section class="section" id="creating-a-read-only-iscsi-lun_adding-an-iscsi-target"><div class="titlepage"><div><div><h3 class="title">6.1.10. Creating a read-only iSCSI LUN</h3></div></div></div><p>
					By default, LUNs are created with read-write permissions. This procedure describes how to create a read-only LUN.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Installed and running <code class="literal">targetcli</code>. For more information, see <a class="xref" href="index.html#installing-targetcli_adding-an-iscsi-target" title="6.1.1. Installing targetcli">Section 6.1.1, “Installing targetcli”</a>.
						</li><li class="listitem">
							An iSCSI target associated with a Target Portal Groups (TPG). For more information, see <a class="xref" href="index.html#creating-an-iscsi-target_adding-an-iscsi-target" title="6.1.2. Creating an iSCSI target">Section 6.1.2, “Creating an iSCSI target”</a>.
						</li><li class="listitem">
							Created storage objects. For more information, see <a class="xref" href="index.html#iscsi-backstore_adding-an-iscsi-target" title="6.1.3. iSCSI Backstore">Section 6.1.3, “iSCSI Backstore”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set read-only permissions:
						</p><pre class="screen">/&gt; set global auto_add_mapped_luns=false

Parameter auto_add_mapped_luns is now 'false'.</pre><p class="simpara">
							This prevents the auto mapping of LUNs to existing ACLs allowing the manual mapping of LUNs.
						</p></li><li class="listitem"><p class="simpara">
							Create the LUN:
						</p><pre class="screen">/&gt; iscsi/target_iqn_name/tpg1/acls/initiator_iqn_name/ create mapped_lun=next_sequential_LUN_number tpg_lun_or_backstore=backstore write_protect=1</pre><p class="simpara">
							Example:
						</p><pre class="screen">/&gt; iscsi/iqn.2006-04.example:444/tpg1/acls/2006-04.com.example.foo:888/ create mapped_lun=1 tpg_lun_or_backstore=/backstores/block/block2 write_protect=1

Created LUN 1.
Created Mapped LUN 1.</pre></li><li class="listitem"><p class="simpara">
							Verify the created LUN:
						</p><pre class="screen">/&gt; ls

o- / ...................................................... [...]
  o- backstores ........................................... [...]
  &lt;snip&gt;
  o- iscsi ......................................... [Targets: 1]
  | o- iqn.2006-04.example:444 .................. [TPGs: 1]
  |   o- tpg1 ............................ [no-gen-acls, no-auth]
  |     o- acls ....................................... [ACLs: 2]
  |     | o- 2006-04.com.example.foo:888 .. [Mapped LUNs: 2]
  |     | | o- mapped_lun0 .............. [lun0 block/disk1 (rw)]
  |     | | o- mapped_lun1 .............. [lun1 block/disk2 (ro)]
  |     o- luns ....................................... [LUNs: 2]
  |     | o- lun0 ...................... [block/disk1 (/dev/vdb)]
  |     | o- lun1 ...................... [block/disk2 (/dev/vdc)]
  &lt;snip&gt;</pre><p class="simpara">
							The mapped_lun1 line now has (<code class="literal">ro</code>) at the end (unlike mapped_lun0’s (<code class="literal">rw</code>)) stating that it is read-only.
						</p></li><li class="listitem">
							Configure ACLs. For more information, see <a class="xref" href="index.html#creating-an-iscsi-acl_adding-an-iscsi-target" title="6.1.11. Creating an iSCSI ACL">Section 6.1.11, “Creating an iSCSI ACL”</a>.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">targetcli</code> man page.
						</li></ul></div></section><section class="section" id="creating-an-iscsi-acl_adding-an-iscsi-target"><div class="titlepage"><div><div><h3 class="title">6.1.11. Creating an iSCSI ACL</h3></div></div></div><p>
					In <code class="literal">targetcli</code>, Access Control Lists (ACLs) are used to define access rules and each initiator has exclusive access to a LUN. Both targets and initiators have unique identifying names. You must know the unique name of the initiator to configure ACLs. The iSCSI initiators can be found in the <code class="literal">/etc/iscsi/initiatorname.iscsi</code> file.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Installed and running <code class="literal">targetcli</code>. For more information, see <a class="xref" href="index.html#installing-targetcli_adding-an-iscsi-target" title="6.1.1. Installing targetcli">Section 6.1.1, “Installing targetcli”</a>.
						</li><li class="listitem">
							An iSCSI target associated with a Target Portal Groups (TPG). For more information, see <a class="xref" href="index.html#creating-an-iscsi-target_adding-an-iscsi-target" title="6.1.2. Creating an iSCSI target">Section 6.1.2, “Creating an iSCSI target”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Navigate to the acls directory
						</p><pre class="screen">/iscsi/iqn.20...mple:444/tpg1&gt; acls/</pre></li><li class="listitem"><p class="simpara">
							Use one of the following options to create an ACL :
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Using the initiator name from <code class="literal">/etc/iscsi/initiatorname.iscsi</code> file on the initiator.
								</li><li class="listitem"><p class="simpara">
									Using a name that is easier to remember, see section <a class="xref" href="index.html#creating-an-iscsi-initiator_adding-an-iscsi-target" title="6.1.12. Creating an iSCSI initiator">Section 6.1.12, “Creating an iSCSI initiator”</a> to ensure ACL matches the initiator.
								</p><pre class="screen">/iscsi/iqn.20...444/tpg1/acls&gt; create iqn.2006-04.com.example.foo:888

Created Node ACL for iqn.2006-04.com.example.foo:888
Created mapped LUN 2.
Created mapped LUN 1.
Created mapped LUN 0.</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The global setting <code class="literal">auto_add_mapped_luns</code> used in the preceding example, automatically maps LUNs to any created ACL.
									</p></div></div><p class="simpara">
									You can set user-created ACLs within the TPG node on the target server:
								</p><pre class="screen">/iscsi/iqn.20...scsi:444/tpg1&gt; set attribute generate_node_acls=1</pre></li></ol></div></li><li class="listitem"><p class="simpara">
							Verify the created ACL:
						</p><pre class="screen">/iscsi/iqn.20...444/tpg1/acls&gt; ls

o- acls .................................................[1 ACL]
    o- iqn.2006-04.com.example.foo:888 ....[3 Mapped LUNs, auth]
        o- mapped_lun0 .............[lun0 ramdisk/ramdisk1 (rw)]
        o- mapped_lun1 .................[lun1 block/block1 (rw)]
        o- mapped_lun2 .................[lun2 fileio/file1 (rw)]</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">targetcli</code> man page.
						</li></ul></div></section><section class="section" id="creating-an-iscsi-initiator_adding-an-iscsi-target"><div class="titlepage"><div><div><h3 class="title">6.1.12. Creating an iSCSI initiator</h3></div></div></div><p>
					An iSCSI initiator forms a session to connect to the iSCSI target. For more information on iSCSI target, see <a class="xref" href="index.html#creating-an-iscsi-target_adding-an-iscsi-target" title="6.1.2. Creating an iSCSI target">Section 6.1.2, “Creating an iSCSI target”</a>. By default, an iSCSI service is <code class="literal">lazily</code> started and the service starts after running the <code class="literal">iscsiadm</code> command. If root is not on an iSCSI device or there are no nodes marked with <code class="literal">node.startup = automatic</code> then the iSCSI service will not start until an <code class="literal">iscsiadm</code> command is executed that requires <code class="literal">iscsid</code> or the <code class="literal">iscsi</code> kernel modules to be started.
				</p><p>
					To force the <code class="literal">iscsid</code> daemon to run and iSCSI kernel modules to load:
				</p><pre class="screen"># systemctl start iscsid.service</pre><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Installed and running <code class="literal">targetcli</code> on a server machine. For more information, see <a class="xref" href="index.html#installing-targetcli_adding-an-iscsi-target" title="6.1.1. Installing targetcli">Section 6.1.1, “Installing targetcli”</a>.
						</li><li class="listitem">
							An iSCSI target associated with a Target Portal Groups (TPG) on a server machine. For more information, see <a class="xref" href="index.html#creating-an-iscsi-target_adding-an-iscsi-target" title="6.1.2. Creating an iSCSI target">Section 6.1.2, “Creating an iSCSI target”</a>.
						</li><li class="listitem">
							Created iSCSI ACL. For more information, see <a class="xref" href="index.html#creating-an-iscsi-acl_adding-an-iscsi-target" title="6.1.11. Creating an iSCSI ACL">Section 6.1.11, “Creating an iSCSI ACL”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install <code class="literal">iscsi-initiator-utils</code> on client machine:
						</p><pre class="screen"># yum install iscsi-initiator-utils</pre></li><li class="listitem"><p class="simpara">
							Check the initiator name:
						</p><pre class="screen"># cat /etc/iscsi/initiatorname.iscsi

InitiatorName=2006-04.com.example.foo:888</pre></li><li class="listitem"><p class="simpara">
							If the ACL was given a custom name in <a class="xref" href="index.html#creating-an-iscsi-acl_adding-an-iscsi-target" title="6.1.11. Creating an iSCSI ACL">Section 6.1.11, “Creating an iSCSI ACL”</a>, modify the <code class="literal">/etc/iscsi/initiatorname.iscsi</code> file accordingly.
						</p><pre class="screen"># vi /etc/iscsi/initiatorname.iscsi</pre></li><li class="listitem"><p class="simpara">
							Discover the target and log in to the target with the displayed target IQN:
						</p><pre class="screen"># iscsiadm -m discovery -t st -p <span class="emphasis"><em>10.64.24.179</em></span>
    10.64.24.179:3260,1 iqn.2006-04.example:444

# iscsiadm -m node -T <span class="emphasis"><em>iqn.2006-04.example:444</em></span> -l
    Logging in to [iface: default, target: iqn.2006-04.example:444, portal: 10.64.24.179,3260] (multiple)
    Login to [iface: default, target: iqn.2006-04.example:444, portal: 10.64.24.179,3260] successful.</pre><p class="simpara">
							Replace <span class="emphasis"><em>10.64.24.179</em></span> with the target-ip-address.
						</p><p class="simpara">
							You can use this procedure for any number of initiators connected to the same target if their respective initiator names are added to the ACL as described in the <a class="xref" href="index.html#creating-an-iscsi-acl_adding-an-iscsi-target" title="6.1.11. Creating an iSCSI ACL">Section 6.1.11, “Creating an iSCSI ACL”</a>.
						</p></li><li class="listitem"><p class="simpara">
							Find the iSCSI disk name and create a file system on this iSCSI disk:
						</p><pre class="screen"># grep "Attached SCSI" /var/log/messages

# mkfs.ext4 /dev/<span class="emphasis"><em>disk_name</em></span></pre><p class="simpara">
							Replace <span class="emphasis"><em>disk_name</em></span> with the iSCSI disk name displayed in the <code class="literal">/var/log/messages</code> file.
						</p></li><li class="listitem"><p class="simpara">
							Mount the file system:
						</p><pre class="screen"># mkdir <span class="emphasis"><em>/mount/point</em></span>

# mount /dev/<span class="emphasis"><em>disk_name /mount/point</em></span></pre><p class="simpara">
							Replace <span class="emphasis"><em>/mount/point</em></span> with the mount point of the partition.
						</p></li><li class="listitem"><p class="simpara">
							Edit the <code class="literal">/etc/fstab</code> file to mount the file system automatically when the system boots:
						</p><pre class="screen"># vi /etc/fstab

/dev/<span class="emphasis"><em>disk_name /mount/point</em></span> ext4 _netdev 0 0</pre><p class="simpara">
							Replace <span class="emphasis"><em>disk_name</em></span> with the iSCSI disk name and <span class="emphasis"><em>/mount/point</em></span> with the mount point of the partition.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">targetcli</code> man page.
						</li><li class="listitem">
							The <code class="literal">iscsiadm</code> man page.
						</li></ul></div></section><section class="section" id="setting-up-the-challenge-handshake-authentication-protocol-for-the-target_adding-an-iscsi-target"><div class="titlepage"><div><div><h3 class="title">6.1.13. Setting up the Challenge-Handshake Authentication Protocol for the target</h3></div></div></div><p>
					The <code class="literal">Challenge-Handshake Authentication Protocol (CHAP)</code> allows the user to protect the target with a password. The initiator must be aware of this password to be able to connect to the target.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Created iSCSI ACL. For more information, see <a class="xref" href="index.html#creating-an-iscsi-acl_adding-an-iscsi-target" title="6.1.11. Creating an iSCSI ACL">Section 6.1.11, “Creating an iSCSI ACL”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set attribute authentication:
						</p><pre class="screen">/iscsi/iqn.20...mple:444/tpg1&gt; set attribute authentication=1

Parameter authentication is now '1'.</pre></li><li class="listitem"><p class="simpara">
							Set <code class="literal">userid</code> and <code class="literal">password</code>:
						</p><pre class="screen">/tpg1&gt; set auth userid=<span class="emphasis"><em>redhat</em></span>
Parameter userid is now '<span class="emphasis"><em>redhat</em></span>'.

/iscsi/iqn.20...689dcbb3/tpg1&gt; set auth password=<span class="emphasis"><em>redhat_passwd</em></span>
Parameter password is now '<span class="emphasis"><em>redhat_passwd</em></span>'.</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">targetcli</code> man page.
						</li></ul></div></section><section class="section" id="setting-up-the-challenge-handshake-authentication-protocol-for-the-initiator_adding-an-iscsi-target"><div class="titlepage"><div><div><h3 class="title">6.1.14. Setting up the Challenge-Handshake Authentication Protocol for the initiator</h3></div></div></div><p>
					The <code class="literal">Challenge-Handshake Authentication Protocol (CHAP)</code> allows the user to protect the target with a password. The initiator must be aware of this password to be able to connect to the target.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Created iSCSI initiator. For more information, see <a class="xref" href="index.html#creating-an-iscsi-initiator_adding-an-iscsi-target" title="6.1.12. Creating an iSCSI initiator">Section 6.1.12, “Creating an iSCSI initiator”</a>.
						</li><li class="listitem">
							Set the <code class="literal">CHAP</code> for the target. For more information, see <a class="xref" href="index.html#setting-up-the-challenge-handshake-authentication-protocol-for-the-target_adding-an-iscsi-target" title="6.1.13. Setting up the Challenge-Handshake Authentication Protocol for the target">Section 6.1.13, “Setting up the Challenge-Handshake Authentication Protocol for the target”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Enable CHAP authentication in the <code class="literal">iscsid.conf</code> file:
						</p><pre class="screen"># vi /etc/iscsi/iscsid.conf

node.session.auth.authmethod = CHAP</pre><p class="simpara">
							By default, the <code class="literal">node.session.auth.authmethod</code> is set to <code class="literal">None</code>
						</p></li><li class="listitem"><p class="simpara">
							Add target <code class="literal">username</code> and <code class="literal">password</code> in the <code class="literal">iscsid.conf</code> file:
						</p><pre class="screen">node.session.auth.username = <span class="emphasis"><em>redhat</em></span>
node.session.auth.password = <span class="emphasis"><em>redhat_passwd</em></span></pre></li><li class="listitem"><p class="simpara">
							Start the <code class="literal">iscsid</code> daemon:
						</p><pre class="screen"># systemctl start iscsid.service</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">iscsiadm</code> man page
						</li></ul></div></section></section><section class="section" id="monitoring-an-iscsi-session_getting-started-with-iscsi"><div class="titlepage"><div><div><h2 class="title">6.2. Monitoring an iSCSI session</h2></div></div></div><p>
				As a system administrator, you can monitor the iSCSI session using the <code class="literal">iscsiadm</code> utility.
			</p><section class="section" id="monitoring-an-iscsi-session-using-the-iscsiadm-utility_monitoring-an-iscsi-session"><div class="titlepage"><div><div><h3 class="title">6.2.1. Monitoring an iSCSI session using the iscsiadm utility</h3></div></div></div><p>
					This procedure describes how to monitor the iscsi session using the <code class="literal">iscsiadm</code> utility.
				</p><p>
					By default, an iSCSI service is <code class="literal">lazily</code> started and the service starts after running the <code class="literal">iscsiadm</code> command. If root is not on an iSCSI device or there are no nodes marked with <code class="literal">node.startup = automatic</code> then the iSCSI service will not start until an <code class="literal">iscsiadm</code> command is executed that requires <code class="literal">iscsid</code> or the <code class="literal">iscsi</code> kernel modules to be started.
				</p><p>
					To force the <code class="literal">iscsid</code> daemon to run and iSCSI kernel modules to load:
				</p><pre class="screen"># systemctl start iscsid.service</pre><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Installed iscsi-initiator-utils on client machine:
						</p><pre class="screen">yum install iscsi-initiator-utils</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Find information about the running sessions:
						</p><pre class="screen"># iscsiadm -m session -P 3</pre><p class="simpara">
							This command displays the session or device state, session ID (sid), some negotiated parameters, and the SCSI devices accessible through the session.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									For shorter output, for example, to display only the <code class="literal">sid-to-node</code> mapping, run:
								</p><pre class="screen"># iscsiadm -m session -P 0
        or
# iscsiadm -m session

tcp [2] 10.15.84.19:3260,2 iqn.1992-08.com.netapp:sn.33615311
tcp [3] 10.15.85.19:3260,3 iqn.1992-08.com.netapp:sn.33615311</pre><p class="simpara">
									These commands print the list of running sessions in the following format: <code class="literal">driver [sid] target_ip:port,target_portal_group_tag proper_target_name</code>.
								</p></li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">/usr/share/doc/iscsi-initiator-utils-version/README</code> file.
						</li><li class="listitem">
							The <code class="literal">iscsiadm</code> man page.
						</li></ul></div></section></section><section class="section" id="removing-an-iscsi-target_getting-started-with-iscsi"><div class="titlepage"><div><div><h2 class="title">6.3. Removing an iSCSI target</h2></div></div></div><p>
				As a system administrator, you can remove the iSCSI target.
			</p><section class="section" id="removing-an-iscsi-object-using-targetcli-tool_removing-an-iscsi-target"><div class="titlepage"><div><div><h3 class="title">6.3.1. Removing an iSCSI object using targetcli tool</h3></div></div></div><p>
					This procedure describes how to remove the iSCSI objects using the <code class="literal">targetcli</code> tool.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log off from the target:
						</p><pre class="screen"># iscsiadm -m node -T <span class="emphasis"><em>iqn.2006-04.example:444</em></span> -u</pre><p class="simpara">
							For more information on how to log in to the target, see <a class="xref" href="index.html#creating-an-iscsi-initiator_adding-an-iscsi-target" title="6.1.12. Creating an iSCSI initiator">Section 6.1.12, “Creating an iSCSI initiator”</a>.
						</p></li><li class="listitem"><p class="simpara">
							Remove the entire target, including all ACLs, LUNs, and portals:
						</p><pre class="screen">/&gt; iscsi/ delete <span class="emphasis"><em>iqn.2006-04.com.example:444</em></span></pre><p class="simpara">
							Replace <span class="emphasis"><em>iqn.2006-04.com.example:444</em></span> with the target_iqn_name.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To remove an iSCSI backstore:
								</p><pre class="screen">/&gt; backstores/<span class="emphasis"><em>backstore-type</em></span>/ delete <span class="emphasis"><em>block_backend</em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											Replace <span class="emphasis"><em>backstore-type</em></span> with either <code class="literal">fileio</code>, <code class="literal">block</code>, <code class="literal">pscsi</code>, or <code class="literal">ramdisk</code>.
										</li><li class="listitem">
											Replace <span class="emphasis"><em>block_backend</em></span> with the <span class="emphasis"><em>backstore-name</em></span> you want to delete.
										</li></ul></div></li><li class="listitem"><p class="simpara">
									To remove parts of an iSCSI target, such as an ACL:
								</p><pre class="screen">/&gt; /iscsi/iqn-name/tpg/acls/ delete <span class="emphasis"><em>iqn.2006-04.com.example:444</em></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
							View the changes:
						</p><pre class="screen">/&gt; iscsi/ ls</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">targetcli</code> man page.
						</li></ul></div></section></section></section><section class="chapter" id="using-fibre-channel-devices_managing-storage-devices"><div class="titlepage"><div><div><h1 class="title">Chapter 7. Using Fibre Channel devices</h1></div></div></div><p>
			Red Hat Enterprise Linux 8 ships with the following native Fibre Channel drivers:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					lpfc
				</li><li class="listitem">
					qla2xxx
				</li><li class="listitem">
					zfcp
				</li></ul></div><section class="section" id="fibre-channel-api_using-fibre-channel-devices"><div class="titlepage"><div><div><h2 class="title">7.1. Fibre Channel API</h2></div></div></div><p>
				Following is the list of <code class="literal">/sys/class/</code> directories that contain files used to provide the userspace API. In each item, host numbers are designated by <code class="literal">H</code>, bus numbers are <code class="literal">B</code>, targets are <code class="literal">T</code>, logical unit numbers (LUNs) are <code class="literal">L</code>, and remote port numbers are <code class="literal">R</code>.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					If your system is using multipath software, Red Hat} recommends that you consult your hardware vendor before changing any of the values described in this section.
				</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Transport: <code class="literal">/sys/class/fc_transport/targetH:B:T/</code>
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<code class="literal">port_id</code>: 24-bit port ID/address
							</li><li class="listitem">
								<code class="literal">node_name</code>: 64-bit node name
							</li><li class="listitem">
								<code class="literal">port_name</code>: 64-bit port name
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Remote Port: <code class="literal">/sys/class/fc_remote_ports/rport-H:B-R/</code>
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<code class="literal">port_id</code>
							</li><li class="listitem">
								<code class="literal">node_name</code>
							</li><li class="listitem">
								<code class="literal">port_name</code>
							</li><li class="listitem"><p class="simpara">
								<code class="literal">dev_loss_tmo</code>: controls when the scsi device gets removed from the system. After <code class="literal">dev_loss_tmo</code> triggers, the scsi device is removed. In the <code class="literal">multipath.conf</code> file , you can set <code class="literal">dev_loss_tmo</code> to <code class="literal">infinity</code>.
							</p><p class="simpara">
								In Red Hat Enterprise Linux 8, if you do not set the <code class="literal">fast_io_fail_tmo</code> option, <code class="literal">dev_loss_tmo</code> is capped to <code class="literal">600</code> seconds. By default, <code class="literal">fast_io_fail_tmo</code> is set to <code class="literal">5</code> seconds in Red Hat Enterprise Linux 8 if the <code class="literal">multipathd</code> service is running; otherwise, it is set to <code class="literal">off</code>.
							</p></li><li class="listitem"><p class="simpara">
								<code class="literal">fast_io_fail_tmo</code>: specifies the number of seconds to wait before it marks a link as "bad". Once a link is marked bad, existing running I/O or any new I/O on its corresponding path fails.
							</p><p class="simpara">
								If I/O is in a blocked queue, it will not be failed until <code class="literal">dev_loss_tmo</code> expires and the queue is unblocked.
							</p><p class="simpara">
								If <code class="literal">fast_io_fail_tmo</code> is set to any value except off, <code class="literal">dev_loss_tmo</code> is uncapped. If <code class="literal">fast_io_fail_tmo</code> is set to off, no I/O fails until the device is removed from the system. If <code class="literal">fast_io_fail_tmo</code> is set to a number, I/O fails immediately when the <code class="literal">fast_io_fail_tmo</code> timeout triggers.
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						Host: <code class="literal">/sys/class/fc_host/hostH/</code>
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<code class="literal">port_id</code>
							</li><li class="listitem">
								<code class="literal">node_name</code>
							</li><li class="listitem">
								<code class="literal">port_name</code>
							</li><li class="listitem">
								<code class="literal">issue_lip</code>: instructs the driver to rediscover remote ports.
							</li></ul></div></li></ul></div></section><section class="section" id="resizing-fibre-channel-logical-units_using-fibre-channel-devices"><div class="titlepage"><div><div><h2 class="title">7.2. Resizing Fibre Channel Logical Units</h2></div></div></div><p>
				As a system administrator, you can resize Fibre Channel logical units.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To determine which devices are paths for a <code class="literal">multipath</code> logical unit:
					</p><pre class="screen">multipath -ll</pre></li><li class="listitem"><p class="simpara">
						To re-scan Fibre Channel logical units on a system that uses multipathing:
					</p><pre class="screen">$ echo 1 &gt; /sys/block/<span class="emphasis"><em>sdX</em></span>/device/rescan</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">multipath</code> man page.
					</li></ul></div></section><section class="section" id="determining-the-link-loss-behavior-of-device-using-fibre-channel_using-fibre-channel-devices"><div class="titlepage"><div><div><h2 class="title">7.3. Determining the Link Loss Behavior of device using Fibre channel</h2></div></div></div><p>
				If a driver implements the Transport <code class="literal">dev_loss_tmo</code> callback, access attempts to a device through a link will be blocked when a transport problem is detected.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To determine the state of a remote port:
					</p><pre class="screen">$ cat /sys/class/fc_remote_port/rport-H:B:R/port_state</pre><p class="simpara">
						This command will return any one of the following output:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">Blocked</code> when the remote port along with devices accessed through it are blocked.
							</li><li class="listitem"><p class="simpara">
								<code class="literal">Online</code> if the remote port is operating normally
							</p><p class="simpara">
								If the problem is not resolved within <code class="literal">dev_loss_tmo</code> seconds, the <code class="literal">rport</code> and devices will be unblocked. All I/O running on that device along with any new I/O sent to that device will fail.
							</p></li></ul></div></li></ol></div><p>
				When a link loss exceeds <code class="literal">dev_loss_tmo</code>, the <code class="literal">scsi_device</code> and <code class="literal">sdN</code> devices are removed. Typically, the Fibre Channel class will leave the device as is; i.e. <code class="literal">/dev/<span class="emphasis"><em>sdx</em></span></code> will remain <code class="literal">/dev/<span class="emphasis"><em>sdx</em></span></code>. This is because the target binding is saved by the Fibre Channel driver and when the target port returns, the SCSI addresses are recreated faithfully. However, this cannot be guaranteed; the <span class="emphasis"><em>sdx</em></span> will be restored only if no additional change on in-storage box configuration of LUNs is made.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Using <code class="literal">multipath</code>, you can modify the link loss behavior of device. For more information, see <a class="link" href="https://access.redhat.com/solutions/3234351">How to set dev_loss_tmo and fast_io_fail_tmo persistently, using a udev rule</a> and <a class="link" href="https://access.redhat.com/solutions/3182081">Recommended tuning at scsi,multipath and at application layer while configuring Oracle RAC cluster</a> Knowledgebase article.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">multipath.conf</code> man page
					</li></ul></div></section></section><section class="chapter" id="configuring-a-fibre-channel-over-ethernet-interface_managing-storage-devices"><div class="titlepage"><div><div><h1 class="title">Chapter 8. Configuring a Fibre Channel over an Ethernet Interface</h1></div></div></div><p>
			Red Hat Enterprise Linux 8 ships with the following native FCoE drivers:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<code class="literal">bnx2fc</code>
				</li><li class="listitem">
					<code class="literal">fnic</code>
				</li><li class="listitem">
					<code class="literal">qedf</code>
				</li><li class="listitem">
					<code class="literal">lpfc</code>
				</li></ul></div><section class="section" id="configuring-an-ethernet-interface-to-use-fcoe_configuring-a-fibre-channel-over-an-ethernet-interface"><div class="titlepage"><div><div><h2 class="title">8.1. Configuring an Ethernet Interface to Use FCoE</h2></div></div></div><p>
				As a system administrator, you can configure FCoE for <code class="literal">bnx2fc</code> driver.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Setting up and deploying a FCoE interface requires the <code class="literal">fcoe-utils</code> package:
					</p><pre class="screen"># yum install fcoe-utils</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To configure a new virtual LAN (VLAN), create a copy of an existing network script:
					</p><pre class="screen"># cp <span class="emphasis"><em>/etc/fcoe/cfg-ethx /etc/fcoe/cfg-ethX</em></span></pre><p class="simpara">
						Replace <code class="literal"><span class="emphasis"><em>/etc/fcoe/cfg-ethx</em></span></code> with a network script and <code class="literal"><span class="emphasis"><em>/etc/fcoe/cfg-ethX</em></span></code> with an Ethernet device that supports FCoE.
					</p><p class="simpara">
						Modify the contents of the <code class="literal">cfg-<span class="emphasis"><em>ethX</em></span></code> file as required.
					</p></li><li class="listitem"><p class="simpara">
						If you want the device to automatically load during boot time, set the following parameter in the <span class="emphasis"><em>ifcfg-ethX</em></span> file.
					</p><pre class="screen"># vi /etc/sysconfig/network-scripts/ifcfg-<span class="emphasis"><em>ethX</em></span>

ONBOOT=yes</pre><p class="simpara">
						For example, if the FCoE device is <span class="emphasis"><em>eth2</em></span>, edit the <code class="literal">/etc/sysconfig/network-scripts/ifcfg-<span class="emphasis"><em>eth2</em></span></code> file accordingly.
					</p></li><li class="listitem"><p class="simpara">
						To load the FCoE device:
					</p><pre class="screen"># ip link set dev <span class="emphasis"><em>ethX</em></span> up</pre></li><li class="listitem"><p class="simpara">
						To start the FCoE:
					</p><pre class="screen"># systemctl start fcoe</pre><p class="simpara">
						The FCoE device displays if all other settings on the fabric are correct.
					</p></li><li class="listitem"><p class="simpara">
						To view configured FCoE devices:
					</p><pre class="screen"># fcoeadm -i</pre></li><li class="listitem"><p class="simpara">
						After correctly configuring the Ethernet interface to use FCoE, Red Hat recommends that you set FCoE service to run at startup.
					</p><pre class="screen"># systemctl enable fcoe</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					To stop the daemon:
				</p><pre class="screen"># systemctl stop fcoe</pre><p>
					Stopping the daemon does not reset the configuration of FCoE interfaces. To reset the configuration:
				</p><pre class="screen"># systemctl -s SIGHUP kill fcoe</pre></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">fcoe</code> man page
					</li><li class="listitem">
						The <code class="literal">fcoeadm</code> man page
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/considerations_in_adopting_rhel_8/hardware-enablement_considerations-in-adopting-RHEL-8#fcoe-sw-removal_hardware-enablement">FCoE software removal</a>
					</li></ul></div></section><section class="section" id="configuring-an-fcoe-interface-to-automatically-mount-at-boot_configuring-a-fibre-channel-over-an-ethernet-interface"><div class="titlepage"><div><div><h2 class="title">8.2. Configuring an FCoE Interface to Automatically Mount at Boot</h2></div></div></div><p>
				You can mount newly discovered disks via <code class="literal">udev</code> rules, <code class="literal">autofs</code>, and other similar methods. If a service requires the FCoE disk be mounted at boot-time, the FCoE disk should be mounted as soon as the fcoe service runs and before the initiation of any service that requires the FCoE disk. The FCoE mounting codes may differ depending on the system configuration, for example, a simple formatted FCoE disk, LVM, or a multipathed device node.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To configure an FCoE disk to automatically mount at boot, add appropriate FCoE mounting code to the startup script for the <code class="literal">fcoe</code> service. The fcoe startup script is in the <code class="literal">/lib/systemd/system/fcoe.service</code> file.
					</p><div class="formalpara"><p class="title"><strong>Example: FCoE Mounting Code</strong></p><p>
							The following is a sample FCoE mounting code for mounting file systems specified via wild cards in the <code class="literal">/etc/fstab</code> file:
						</p></div><pre class="screen">mount_fcoe_disks_from_fstab()
{
  local timeout=20
	local done=1
	local fcoe_disks=($(egrep 'by-path\/fc-.*_netdev' /etc/fstab | cut -d ' ' -f1))

	test -z $fcoe_disks &amp;&amp; return 0

	echo -n "Waiting for fcoe disks . "
  while [ $timeout -gt 0 ]; do
	 for disk in ${fcoe_disks[*]}; do
    if ! test -b $disk; then
		  done=0
			break
    fi
	done

	test $done -eq 1 &amp;&amp; break;
	sleep 1
	echo -n ". "
	done=1
	let timeout--
	done

	if test $timeout -eq 0; then
	 echo "timeout!"
	else
	 echo "done!"
	fi

	# mount any newly discovered disk
	mount -a 2&gt;/dev/null
	}</pre></li><li class="listitem"><p class="simpara">
						To start the FCoE:
					</p><pre class="screen"># systemctl start fcoe</pre><p class="simpara">
						The <code class="literal">mount_fcoe_disks_from_fstab</code> function should be invoked after the <code class="literal">fcoe</code> service script starts the <code class="literal">fcoemond</code> daemon. This will mount FCoE disks specified by the following paths in the <code class="literal">/etc/fstab</code> file:
					</p><pre class="screen">/dev/<span class="emphasis"><em>disk/by-path</em></span>/fc-0xXX:0xXX /mnt/fcoe-disk1 <span class="emphasis"><em>ext4</em></span>  defaults,_netdev    0 0</pre><pre class="screen">/dev/<span class="emphasis"><em>disk/by-path</em></span>/fc-0xYY:0xYY /mnt/fcoe-disk2 <span class="emphasis"><em>ext3</em></span>  defaults,_netdev    0 0</pre><p class="simpara">
						Entries with <code class="literal">fc-</code> and <code class="literal">_netdev</code> sub-strings enable the <code class="literal">mount_fcoe_disks_from_fstab</code> function to identify FCoE disk mount entries.
					</p></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The <code class="literal">fcoe</code> service does not implement a timeout for FCoE disk discovery. The FCoE mounting code should implement its own timeout period.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">fcoe</code> man page
					</li><li class="listitem">
						The <code class="literal">fstab</code> man page.
					</li><li class="listitem">
						The <code class="literal">/usr/share/doc/fcoe-utils-version/README</code> file.
					</li></ul></div></section></section><section class="chapter" id="configuring-maximum-time-for-storage-error-recovery-with-eh_deadline_managing-storage-devices"><div class="titlepage"><div><div><h1 class="title">Chapter 9. Configuring maximum time for storage error recovery with eh_deadline</h1></div></div></div><p>
			You can configure the maximum allowed time to recover failed SCSI devices. This configuration guarantees an I/O response time even when storage hardware becomes unresponsive due to a failure.
		</p><section class="section" id="the-eh_deadline-parameter_configuring-maximum-time-for-storage-error-recovery-with-eh_deadline"><div class="titlepage"><div><div><h2 class="title">9.1. The eh_deadline parameter</h2></div></div></div><p>
				The SCSI error handling (EH) mechanism attempts to perform error recovery on failed SCSI devices. The SCSI host object <code class="literal">eh_deadline</code> parameter enables you to configure the maximum amount of time for the recovery. After the configured time expires, SCSI EH stops and resets the entire host bus adapter (HBA).
			</p><p>
				Using <code class="literal">eh_deadline</code> can reduce the time:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						to shut off a failed path,
					</li><li class="listitem">
						to switch a path, or
					</li><li class="listitem">
						to disable a RAID slice.
					</li></ul></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					When <code class="literal">eh_deadline</code> expires, SCSI EH resets the HBA, which affects all target paths on that HBA, not only the failing one. If some of the redundant paths are not available for other reasons, I/O errors might occur. Enable <code class="literal">eh_deadline</code> only if you have a fully redundant multipath configuration on all targets.
				</p></div></div><h4 id="scenarios_when_eh_deadline_is_useful">Scenarios when eh_deadline is useful</h4><p>
				In most scenarios, you do not need to enable <code class="literal">eh_deadline</code>. Using <code class="literal">eh_deadline</code> can be useful in certain specific scenarios, for example if a link loss occurs between a Fibre Channel (FC) switch and a target port, and the HBA does not receive Registered State Change Notifications (RSCNs). In such a case, I/O requests and error recovery commands all time out rather than encounter an error. Setting <code class="literal">eh_deadline</code> in this environment puts an upper limit on the recovery time. That enables the failed I/O to be retried on another available path by DM Multipath.
			</p><p>
				Under the following conditions, the <code class="literal">eh_deadline</code> functionality provides no additional benefit, because the I/O and error recovery commands fail immediately, which allows DM Multipath to retry:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						If RSCNs are enabled
					</li><li class="listitem">
						If the HBA does not register the link becoming unavailable
					</li></ul></div><h4 id="possible_values">Possible values</h4><p>
				The value of the <code class="literal">eh_deadline</code> is specified in seconds.
			</p><p>
				The default setting is <code class="literal">off</code>, which disables the time limit and allows all of the error recovery to take place.
			</p></section><section class="section" id="setting-the-eh_deadline-parameter_configuring-maximum-time-for-storage-error-recovery-with-eh_deadline"><div class="titlepage"><div><div><h2 class="title">9.2. Setting the eh_deadline parameter</h2></div></div></div><p>
				This procedure configures the value of the <code class="literal">eh_deadline</code> parameter to limit the maximum SCSI recovery time.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You can configure <code class="literal">eh_deadline</code> using either of the following methods:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">sysfs</code></span></dt><dd>
									Write the number of seconds into the <code class="literal filename">/sys/class/scsi_host/host*/eh_deadline</code> files.
								</dd><dt><span class="term">Kernel parameter</span></dt><dd>
									Set a default value for all SCSI HBAs using the <code class="literal">scsi_mod.eh_deadline</code> kernel parameter.
								</dd></dl></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/3209481">How to set eh_deadline and eh_timeout persistently, using a udev rule</a>
					</li></ul></div></section></section><section class="chapter" id="getting-started-with-swap_managing-storage-devices"><div class="titlepage"><div><div><h1 class="title">Chapter 10. Getting started with swap</h1></div></div></div><p>
			This section describes swap space and how to use it.
		</p><section class="section" id="swap-space_getting-started-with-swap"><div class="titlepage"><div><div><h2 class="title">10.1. Swap space</h2></div></div></div><p>
				<span class="emphasis"><em>Swap space</em></span> in Linux is used when the amount of physical memory (RAM) is full. If the system needs more memory resources and the RAM is full, inactive pages in memory are moved to the swap space. While swap space can help machines with a small amount of RAM, it should not be considered a replacement for more RAM. Swap space is located on hard drives, which have a slower access time than physical memory. Swap space can be a dedicated swap partition (recommended), a swap file, or a combination of swap partitions and swap files.
			</p><p>
				In years past, the recommended amount of swap space increased linearly with the amount of RAM in the system. However, modern systems often include hundreds of gigabytes of RAM. As a consequence, recommended swap space is considered a function of system memory workload, not system memory.
			</p><p>
				<a class="xref" href="index.html#recommended-system-swap-space_getting-started-with-swap" title="10.2. Recommended system swap space">Section 10.2, “Recommended system swap space”</a> illustrates the recommended size of a swap partition depending on the amount of RAM in your system and whether you want sufficient memory for your system to hibernate. The recommended swap partition size is established automatically during installation. To allow for hibernation, however, you need to edit the swap space in the custom partitioning stage.
			</p><p>
				Recommendations in <a class="xref" href="index.html#recommended-system-swap-space_getting-started-with-swap" title="10.2. Recommended system swap space">Section 10.2, “Recommended system swap space”</a> are especially important on systems with low memory (1 GB and less). Failure to allocate sufficient swap space on these systems can cause issues such as instability or even render the installed system unbootable.
			</p></section><section class="section" id="recommended-system-swap-space_getting-started-with-swap"><div class="titlepage"><div><div><h2 class="title">10.2. Recommended system swap space</h2></div></div></div><p>
				This section gives recommendation about swap space.
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140163619516480" scope="col">Amount of RAM in the system</th><th align="left" valign="top" id="idm140163619515376" scope="col">Recommended swap space</th><th align="left" valign="top" id="idm140163619514288" scope="col">Recommended swap space if allowing for hibernation</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140163619516480"> <p>
								⩽ 2 GB
							</p>
							 </td><td align="left" valign="top" headers="idm140163619515376"> <p>
								2 times the amount of RAM
							</p>
							 </td><td align="left" valign="top" headers="idm140163619514288"> <p>
								3 times the amount of RAM
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140163619516480"> <p>
								&gt; 2 GB – 8 GB
							</p>
							 </td><td align="left" valign="top" headers="idm140163619515376"> <p>
								Equal to the amount of RAM
							</p>
							 </td><td align="left" valign="top" headers="idm140163619514288"> <p>
								2 times the amount of RAM
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140163619516480"> <p>
								&gt; 8 GB – 64 GB
							</p>
							 </td><td align="left" valign="top" headers="idm140163619515376"> <p>
								At least 4 GB
							</p>
							 </td><td align="left" valign="top" headers="idm140163619514288"> <p>
								1.5 times the amount of RAM
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140163619516480"> <p>
								&gt; 64 GB
							</p>
							 </td><td align="left" valign="top" headers="idm140163619515376"> <p>
								At least 4 GB
							</p>
							 </td><td align="left" valign="top" headers="idm140163619514288"> <p>
								Hibernation not recommended
							</p>
							 </td></tr></tbody></table></div><p>
				At the border between each range listed in the table above, for example a system with 2 GB, 8 GB, or 64 GB of system RAM, discretion can be exercised with regard to chosen swap space and hibernation support. If your system resources allow for it, increasing the swap space may lead to better performance. A swap space of at least 100 GB is recommended for systems with over 140 logical processors or over 3 TB of RAM.
			</p><p>
				Note that distributing swap space over multiple storage devices also improves swap space performance, particularly on systems with fast drives, controllers, and interfaces.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					File systems and LVM2 volumes assigned as swap space <span class="emphasis"><em>should not</em></span> be in use when being modified. Any attempts to modify swap fail if a system process or the kernel is using swap space. Use the <code class="literal command">free</code> and <code class="literal command">cat /proc/swaps</code> commands to verify how much and where swap is in use.
				</p><p>
					You should modify swap space while the system is booted in <code class="literal">rescue</code> mode, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/performing_an_advanced_rhel_installation/index#debug-boot-options_kickstart-and-advanced-boot-options">Debug boot options</a> in the <span class="emphasis"><em><span class="citetitle citetitle">Performing an advanced RHEL installation</span></em></span>. When prompted to mount the file system, select <span class="guibutton">Skip</span>.
				</p></div></div></section><section class="section" id="adding-swap-space_getting-started-with-swap"><div class="titlepage"><div><div><h2 class="title">10.3. Adding swap space</h2></div></div></div><p>
				This section describes how to add more swap space after installation. For example, you may upgrade the amount of RAM in your system from 1 GB to 2 GB, but there is only 2 GB of swap space. It might be advantageous to increase the amount of swap space to 4 GB if you perform memory-intense operations or run applications that require a large amount of memory.
			</p><p>
				There are three options: create a new swap partition, create a new swap file, or extend swap on an existing LVM2 logical volume. It is recommended that you extend an existing logical volume.
			</p><section class="section" id="extending-swap-on-an-lvm2-logical-volume_adding-swap-space"><div class="titlepage"><div><div><h3 class="title">10.3.1. Extending swap on an LVM2 logical volume</h3></div></div></div><p>
					This procedure describes how to extend swap space on an existing LVM2 logical volume. Assuming <code class="literal">/dev/VolGroup00/LogVol01</code> is the volume you want to extend by 2 GB.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Enough disk space.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Disable swapping for the associated logical volume:
						</p><pre class="literallayout"># swapoff -v /dev/VolGroup00/LogVol01</pre></li><li class="listitem"><p class="simpara">
							Resize the LVM2 logical volume by 2 GB:
						</p><pre class="literallayout"># lvresize /dev/VolGroup00/LogVol01 -L +2G</pre></li><li class="listitem"><p class="simpara">
							Format the new swap space:
						</p><pre class="literallayout"># mkswap /dev/VolGroup00/LogVol01</pre></li><li class="listitem"><p class="simpara">
							Enable the extended logical volume:
						</p><pre class="literallayout"># swapon -v /dev/VolGroup00/LogVol01</pre></li><li class="listitem"><p class="simpara">
							To test if the swap logical volume was successfully extended and activated, inspect active swap space:
						</p><pre class="literallayout">$ cat /proc/swaps
$ free -h</pre></li></ol></div></section><section class="section" id="creating-an-lvm2-logical-volume-for-swap_adding-swap-space"><div class="titlepage"><div><div><h3 class="title">10.3.2. Creating an LVM2 logical volume for swap</h3></div></div></div><p>
					This procedure describes how to create an LVM2 logical volume for swap. Assuming <code class="literal">/dev/VolGroup00/LogVol02</code> is the swap volume you want to add.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Enough disk space.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the LVM2 logical volume of size 2 GB:
						</p><pre class="literallayout"># lvcreate VolGroup00 -n LogVol02 -L 2G</pre></li><li class="listitem"><p class="simpara">
							Format the new swap space:
						</p><pre class="literallayout"># mkswap /dev/VolGroup00/LogVol02</pre></li><li class="listitem"><p class="simpara">
							Add the following entry to the <code class="literal">/etc/fstab</code> file:
						</p><pre class="literallayout">/dev/VolGroup00/LogVol02 swap swap defaults 0 0</pre></li><li class="listitem"><p class="simpara">
							Regenerate mount units so that your system registers the new configuration:
						</p><pre class="literallayout"># systemctl daemon-reload</pre></li><li class="listitem"><p class="simpara">
							Activate swap on the logical volume:
						</p><pre class="literallayout"># swapon -v /dev/VolGroup00/LogVol02</pre></li><li class="listitem"><p class="simpara">
							To test if the swap logical volume was successfully created and activated, inspect active swap space:
						</p><pre class="literallayout">$ cat /proc/swaps
$ free -h</pre></li></ol></div></section><section class="section" id="creating-a-swap-file_adding-swap-space"><div class="titlepage"><div><div><h3 class="title">10.3.3. Creating a swap file</h3></div></div></div><p>
					This procedure describes how to create a swap file.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Enough disk space.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Determine the size of the new swap file in megabytes and multiply by 1024 to determine the number of blocks. For example, the block size of a 64 MB swap file is 65536.
						</li><li class="listitem"><p class="simpara">
							Create an empty file:
						</p><pre class="literallayout"># dd if=/dev/zero of=/swapfile bs=1024 count=65536</pre><p class="simpara">
							Replace <span class="emphasis"><em>count</em></span> with the value equal to the desired block size.
						</p></li><li class="listitem"><p class="simpara">
							Set up the swap file with the command:
						</p><pre class="literallayout"># mkswap /swapfile</pre></li><li class="listitem"><p class="simpara">
							Change the security of the swap file so it is not world readable.
						</p><pre class="literallayout"># chmod 0600 /swapfile</pre></li><li class="listitem"><p class="simpara">
							To enable the swap file at boot time, edit <code class="literal">/etc/fstab</code> as root to include the following entry:
						</p><pre class="literallayout">/swapfile swap swap defaults 0 0</pre><p class="simpara">
							The next time the system boots, it activates the new swap file.
						</p></li><li class="listitem"><p class="simpara">
							Regenerate mount units so that your system registers the new <code class="literal">/etc/fstab</code> configuration:
						</p><pre class="literallayout"># systemctl daemon-reload</pre></li><li class="listitem"><p class="simpara">
							To activate the swap file immediately:
						</p><pre class="literallayout"># swapon /swapfile</pre></li><li class="listitem"><p class="simpara">
							To test if the new swap file was successfully created and activated, inspect active swap space:
						</p><pre class="literallayout">$ cat /proc/swaps
$ free -h</pre></li></ol></div></section></section><section class="section" id="removing-swap-space_getting-started-with-swap"><div class="titlepage"><div><div><h2 class="title">10.4. Removing swap space</h2></div></div></div><p>
				This section describes how to reduce swap space after installation. For example, you have downgraded the amount of RAM in your system from 1 GB to 512 MB, but there is 2 GB of swap space still assigned. It might be advantageous to reduce the amount of swap space to 1 GB, since the larger 2 GB could be wasting disk space.
			</p><p>
				Depending on what you need, you may choose one of three options: reduce swap space on an existing LVM2 logical volume, remove an entire LVM2 logical volume used for swap, or remove a swap file.
			</p><section class="section" id="reducing-swap-on-an-lvm2-logical-volume_removing-swap-space"><div class="titlepage"><div><div><h3 class="title">10.4.1. Reducing swap on an LVM2 logical volume</h3></div></div></div><p>
					This procedure describes how to reduce swap on an LVM2 logical volume. Assuming <code class="literal">/dev/VolGroup00/LogVol01</code> is the volume you want to reduce.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Disable swapping for the associated logical volume:
						</p><pre class="literallayout"># swapoff -v /dev/VolGroup00/LogVol01</pre></li><li class="listitem"><p class="simpara">
							Reduce the LVM2 logical volume by 512 MB:
						</p><pre class="literallayout"># lvreduce /dev/VolGroup00/LogVol01 -L -512M</pre></li><li class="listitem"><p class="simpara">
							Format the new swap space:
						</p><pre class="literallayout"># mkswap /dev/VolGroup00/LogVol01</pre></li><li class="listitem"><p class="simpara">
							Activate swap on the logical volume:
						</p><pre class="literallayout"># swapon -v /dev/VolGroup00/LogVol01</pre></li><li class="listitem"><p class="simpara">
							To test if the swap logical volume was successfully reduced, inspect active swap space:
						</p><pre class="literallayout">$ cat /proc/swaps
$ free -h</pre></li></ol></div></section><section class="section" id="removing-an-lvm2-logical-volume-for-swap_removing-swap-space"><div class="titlepage"><div><div><h3 class="title">10.4.2. Removing an LVM2 logical volume for swap</h3></div></div></div><p>
					This procedure describes how to remove an LVM2 logical volume for swap. Assuming <code class="literal">/dev/VolGroup00/LogVol02</code> is the swap volume you want to remove.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Disable swapping for the associated logical volume:
						</p><pre class="literallayout"># swapoff -v /dev/VolGroup00/LogVol02</pre></li><li class="listitem"><p class="simpara">
							Remove the LVM2 logical volume:
						</p><pre class="literallayout"># lvremove /dev/VolGroup00/LogVol02</pre></li><li class="listitem"><p class="simpara">
							Remove the following associated entry from the <code class="literal">/etc/fstab</code> file:
						</p><pre class="literallayout">/dev/VolGroup00/LogVol02 swap swap defaults 0 0</pre></li><li class="listitem"><p class="simpara">
							Regenerate mount units so that your system registers the new configuration:
						</p><pre class="literallayout"># systemctl daemon-reload</pre></li><li class="listitem"><p class="simpara">
							To test if the logical volume was successfully removed, inspect active swap space:
						</p><pre class="literallayout">$ cat /proc/swaps
$ free -h</pre></li></ol></div></section><section class="section" id="removing-a-swap-file_removing-swap-space"><div class="titlepage"><div><div><h3 class="title">10.4.3. Removing a swap file</h3></div></div></div><p>
					This procedure describes how to remove a swap file.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							At a shell prompt, execute the following command to disable the swap file (where <code class="literal">/swapfile</code> is the swap file):
						</p><pre class="literallayout"># swapoff -v /swapfile</pre></li><li class="listitem">
							Remove its entry from the <code class="literal">/etc/fstab</code> file accordingly.
						</li><li class="listitem"><p class="simpara">
							Regenerate mount units so that your system registers the new configuration:
						</p><pre class="literallayout"># systemctl daemon-reload</pre></li><li class="listitem"><p class="simpara">
							Remove the actual file:
						</p><pre class="literallayout"># rm /swapfile</pre></li></ol></div></section></section></section><section class="chapter" id="managing-system-upgrades-as-snapshots_managing-storage-devices"><div class="titlepage"><div><div><h1 class="title">Chapter 11. Managing system upgrades as snapshots</h1></div></div></div><p>
			As a system administrator, use <span class="strong strong"><strong>Boom</strong></span> to create boot entries for alternative copies of the system state. <span class="strong strong"><strong>Boom</strong></span> simplifies the management of system updates.
		</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
				The procedures mentioned in this chapter does not work on multiple file systems in your system tree.
			</p></div></div><section class="section" id="overview-of-the-boom-process_managing-system-upgrades-as-snapshots"><div class="titlepage"><div><div><h2 class="title">11.1. Overview of the Boom process</h2></div></div></div><p>
				<span class="strong strong"><strong>Boom</strong></span> allows to create boot entries, which can then be accessed and selected from the GRUB 2 boot loader menu. By creating boot entries, the process of preparing for a rollback capable upgrade is now simplified.
			</p><p>
				Rollback-capable upgrades are done using the following process without editing any configuration files:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Create a snapshot or copy of the root file system.
					</li><li class="listitem">
						Use <span class="strong strong"><strong>Boom</strong></span> to create a boot entry for the current (older) environment.
					</li><li class="listitem">
						Upgrade your Red Hat Enterprise Linux system.
					</li><li class="listitem">
						Reboot the system, and select the version that you want to use.
					</li></ol></div><p>
				Using <span class="strong strong"><strong>Boom</strong></span> reduces the risks associated with upgrading a system and also helps to reduce hardware downtime.
			</p><p>
				For example, you can upgrade a Red Hat Enterprise Linux 7 system to Red Hat Enterprise Linux 8, while retaining the original Red Hat Enterprise Linux 7 environment. After the upgrade is complete, you can switch between the old Red Hat Enterprise Linux 7 and new Red Hat Enterprise Linux 8 environments, as needed.
			</p><p>
				This ability to switch between environments allows you to:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Quickly compare both environments in a side-by-side fashion and switch between them with minimal overhead.
					</li><li class="listitem">
						Recover the older file system’s content.
					</li><li class="listitem">
						Continue accessing the old system while the upgraded host is running.
					</li><li class="listitem">
						Halt and revert the update process at any time, even while the update itself is running.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">boom</code> man page.
					</li></ul></div></section><section class="section" id="upgrading-to-another-version-using-boom_managing-system-upgrades-as-snapshots"><div class="titlepage"><div><div><h2 class="title">11.2. Upgrading to another version using Boom</h2></div></div></div><p>
				In addition to <span class="strong strong"><strong>Boom</strong></span>, the following Red Hat Enterprise Linux components are used in this upgrade process:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						LVM
					</li><li class="listitem">
						GRUB 2 boot loader
					</li><li class="listitem">
						Leapp upgrade tool
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Install the <code class="literal">boom</code> package:
					</p><pre class="screen"># yum install lvm2-python-boom</pre></li><li class="listitem"><p class="simpara">
						Sufficient space allocated to the snapshot. Use the following commands to find the free space on the volume groups and logical volumes:
					</p><pre class="screen"># vgs
VG  #PV  #LV  #SN  Attr  VSize    VFree
<span class="emphasis"><em>rhel 4 2 0 wz--n- 103.89g 29.99g</em></span>

# lvs
LV     VG    Attr     LSize  Pool Origin Data% Meta% Move Log Cpy%Sync Convert
<span class="emphasis"><em>root rhel -wi-ao--- 68.88g</em></span>
<span class="emphasis"><em>swap rhel -wi-ao--- 5.98g</em></span></pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a snapshot of your <span class="emphasis"><em>root</em></span> logical volume:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If your root file system uses thin provisioning, create a thin snapshot:
							</p><p class="simpara">
								While creating a thin snapshot, do not define the snapshot size. Snapshot is also allocated from the thin pool.
							</p><pre class="screen"># lvcreate -s -k n rhel/root -n <span class="emphasis"><em>root_snapshot_before_changes</em></span></pre><p class="simpara">
								Here:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">-s</code> is used to create the snapshot
									</li><li class="listitem">
										<code class="literal">rhel/root</code> is the file system being copied in the logical volume
									</li><li class="listitem">
										<code class="literal">-n</code> <span class="emphasis"><em>root_snapshot_before_changes</em></span> is the name of the snapshot
									</li><li class="listitem">
										<code class="literal">-k n</code> is used to not skip the activation because thin snapshots are not activated by default
									</li></ul></div></li><li class="listitem"><p class="simpara">
								If your root file system uses thick provisioning, create a thick snapshot:
							</p><p class="simpara">
								While creating a thick snapshot, define the snapshot size that is able to hold all the changes during the upgrade.
							</p><pre class="screen"># lvcreate -s  rhel/root -n <span class="emphasis"><em>root_snapshot_before_changes</em></span> -L <span class="emphasis"><em>25g</em></span></pre><p class="simpara">
								Here:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">-s</code> is used to create the snapshot
									</li><li class="listitem">
										<code class="literal">rhel/root</code> is the file system being copied
									</li><li class="listitem">
										<code class="literal">-n</code> <span class="emphasis"><em>root_snapshot_before_changes</em></span> is the name of the snapshot
									</li><li class="listitem"><p class="simpara">
										<code class="literal">-L</code> <span class="emphasis"><em>25g</em></span> is the snapshot size that is able to hold all the changes during the upgrade
									</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
											After creating the snapshot, any additional system changes are not included.
										</p></div></div></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Create the profile:
					</p><pre class="screen"># boom profile create --from-host --uname-pattern el8</pre></li><li class="listitem"><p class="simpara">
						Create a new boot entry:
					</p><pre class="screen"># boom create --title <span class="emphasis"><em>"Root LV snapshot before changes"</em></span> --rootlv rhel/<span class="emphasis"><em>root_snapshot_before_changes</em></span></pre><p class="simpara">
						Here:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">--title</code> <span class="emphasis"><em>Root LV snapshot before changes</em></span> is the name of the boot entry, which displays in the list during system startup
							</li><li class="listitem"><p class="simpara">
								<code class="literal">--rootlv</code> is the root logical volume that corresponds to the new boot entry
							</p><p class="simpara">
								If you execute the <code class="literal">boom create</code> command for the first time, the following message displays:
							</p><pre class="screen">WARNING - Boom configuration not found in grub.cfg

WARNING - Run 'grub2-mkconfig &gt; /boot/grub2/grub.cfg' to enable</pre><p class="simpara">
								To enable Boom in GRUB 2:
							</p><pre class="screen"># grub2-mkconfig &gt; /boot/grub2/grub.cfg</pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Upgrade using Leapp:
					</p><pre class="screen"># leapp upgrade --reboot</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The reboot argument initiates an automatic system restart after the upgrade process.
						</p></div></div><p class="simpara">
						During reboot, the GRUB 2 screen is displayed:
					</p><div class="informalfigure"><div class="mediaobject"><img src="GRUB2_display.png" alt="GRUB2 display"/></div></div></li><li class="listitem"><p class="simpara">
						Select the <span class="strong strong"><strong>RHEL Upgrade Initramfs</strong></span> entry and press ENTER. The upgrade continues and new Red Hat Enterprise Linux 8 RPM packages are installed. After the upgrade is complete, the system automatically reboots and the GRUB 2 screen displays the upgraded and the older version of the available system. The upgraded system version is the default selection.
					</p><div class="informalfigure"><div class="mediaobject"><img src="switching_between_new_and_old_versions.png" alt="switching between new and old versions"/></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">boom</code> man page.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/3750001">What is BOOM and how to install it?</a> Knowledgebase article.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/3772101">How to create a BOOM boot entry</a> Knowledgebase article.
					</li></ul></div></section><section class="section" id="switching-between-new-and-old-rhel-versions_managing-system-upgrades-as-snapshots"><div class="titlepage"><div><div><h2 class="title">11.3. Switching between new and old Red Hat Enterprise Linux versions</h2></div></div></div><p>
				This procedure describes steps to switch between the new and the old Red Hat Enterprise Linux versions after the upgrade is complete.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Upgraded Red Hat Enterprise Linux version. For more information, see <a class="xref" href="index.html#upgrading-to-another-version-using-boom_managing-system-upgrades-as-snapshots" title="11.2. Upgrading to another version using Boom">Section 11.2, “Upgrading to another version using Boom”</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Reboot the system:
					</p><pre class="screen"># reboot</pre></li><li class="listitem"><p class="simpara">
						Select the desired boot entry from the GRUB 2 boot loader screen.
					</p><div class="informalfigure"><div class="mediaobject"><img src="switching_between_new_and_old_versions.png" alt="switching between new and old versions"/></div></div></li><li class="listitem"><p class="simpara">
						Verify that the selected boot volume is displayed:
					</p><pre class="screen"># boom list</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">boom</code> man page.
					</li></ul></div></section><section class="section" id="deleting-the-snapshot_managing-system-upgrades-as-snapshots"><div class="titlepage"><div><div><h2 class="title">11.4. Deleting the snapshot</h2></div></div></div><p>
				This procedure describes steps to delete the snapshot.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Upgraded to new version. For more information, see <a class="xref" href="index.html#upgrading-to-another-version-using-boom_managing-system-upgrades-as-snapshots" title="11.2. Upgrading to another version using Boom">Section 11.2, “Upgrading to another version using Boom”</a>
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Boot into Red Hat Enterprise Linux 8 from the GRUB 2 entry. The following output confirms that the new snapshot is selected:
					</p><pre class="screen"># boom list
BootID  Version                    Name                            RootDevice
<span class="emphasis"><em>6d2ec72</em></span> 3.10.0-957.21.3.el7.x86_64 Red Hat Enterprise Linux Server /dev/rhel/<span class="emphasis"><em>root_snapshot_before_changes</em></span></pre></li><li class="listitem"><p class="simpara">
						Delete the <span class="strong strong"><strong>Boom</strong></span> snapshot entry using the <code class="literal">BootID</code> value:
					</p><pre class="screen"># boom delete --boot-id <span class="emphasis"><em>6d2ec72</em></span></pre><p class="simpara">
						This deletes the entry from the GRUB 2 menu.
					</p></li><li class="listitem"><p class="simpara">
						Remove the LV snapshot:
					</p><pre class="screen"># lvremove rhel/<span class="emphasis"><em>root_snapshot_before_changes</em></span>
Do you really want to remove active logical volume <span class="emphasis"><em>rhel/root_snapshot_before_changes</em></span>? [y/n]: y
      Logical volume "<span class="emphasis"><em>root_snapshot_before_changes</em></span>" successfully removed</pre><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The <code class="literal">boom</code> man page.
							</li></ul></div></li></ol></div></section></section><section class="chapter" id="overview-of-nvme-over-fabric-devicesmanaging-storage-devices"><div class="titlepage"><div><div><h1 class="title">Chapter 12. Overview of NVMe over fabric devices</h1></div></div></div><p>
			<code class="literal">Non-volatile Memory Express (NVMe)</code> is an interface that allows host software utility to communicate with solid state drives.
		</p><p>
			Use the following types of fabric transport to configure <code class="literal">NVMe</code> over fabric devices:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<code class="literal">NVMe</code> over fabrics using <code class="literal">Remote Direct Memory Access (RDMA)</code>. For information on how to configure NVMe/RDMA, see <a class="xref" href="index.html#nvme-over-fabrics-using-rdma_overview-of-nvme-over-fabric-devices" title="12.1. NVMe over fabrics using RDMA">Section 12.1, “NVMe over fabrics using RDMA”</a>.
				</li><li class="listitem">
					<code class="literal">NVMe</code> over fabrics using <code class="literal">Fibre Channel (FC)</code>. For information on how to configure <code class="literal">FC-NVMe</code>, see <a class="xref" href="index.html#nvme-over-fabrics-using-fc_overview-of-nvme-over-fabric-devices" title="12.2. NVMe over fabrics using FC">Section 12.2, “NVMe over fabrics using FC”</a>.
				</li></ul></div><p>
			When using FC and RDMA, the solid-state drive does not have to be local to your system; it can be configured remotely through a FC or RDMA controller.
		</p><section class="section" id="nvme-over-fabrics-using-rdma_overview-of-nvme-over-fabric-devices"><div class="titlepage"><div><div><h2 class="title">12.1. NVMe over fabrics using RDMA</h2></div></div></div><p>
				In <code class="literal">NVMe/RDMA</code> setup, <code class="literal">NVMe</code> target and <code class="literal">NVMe</code> initiator is configured.
			</p><p>
				As a system administrator, complete the tasks in the following sections to deploy the <code class="literal">NVMe</code> over fabrics using <code class="literal">RDMA</code> (<code class="literal">NVMe/RDMA</code>):
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="xref" href="index.html#setting-up-nvme-rdma-target-using-configfs_nvme-over-fabrics-using-rdma" title="12.1.1. Setting up an NVMe/RDMA target using configfs">Section 12.1.1, “Setting up an NVMe/RDMA target using configfs”</a>
					</li><li class="listitem">
						<a class="xref" href="index.html#setting-up-nvme-rdma-target-using-nvmetcli_nvme-over-fabrics-using-rdma" title="12.1.2. Setting up the NVMe/RDMA target using nvmetcli">Section 12.1.2, “Setting up the NVMe/RDMA target using nvmetcli”</a>
					</li><li class="listitem">
						<a class="xref" href="index.html#configuring-nvme-rdma-client_nvme-over-fabrics-using-rdma" title="12.1.3. Configuring an NVMe/RDMA client">Section 12.1.3, “Configuring an NVMe/RDMA client”</a>
					</li></ul></div><section class="section" id="setting-up-nvme-rdma-target-using-configfs_nvme-over-fabrics-using-rdma"><div class="titlepage"><div><div><h3 class="title">12.1.1. Setting up an NVMe/RDMA target using configfs</h3></div></div></div><p>
					Use this procedure to configure an <code class="literal">NVMe/RDMA</code> target using <code class="literal">configfs</code>.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Verify that you have a block device to assign to the <code class="literal">nvmet</code> subsystem.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the <code class="literal">nvmet-rdma</code> subsystem:
						</p><pre class="screen"># modprobe nvmet-rdma

# mkdir /sys/kernel/config/nvmet/subsystems/<span class="emphasis"><em>testnqn</em></span>

# cd /sys/kernel/config/nvmet/subsystems/<span class="emphasis"><em>testnqn</em></span></pre><p class="simpara">
							Replace <span class="emphasis"><em>testnqn</em></span> with the subsystem name.
						</p></li><li class="listitem"><p class="simpara">
							Allow any host to connect to this target:
						</p><pre class="screen"># echo 1 &gt; attr_allow_any_host</pre></li><li class="listitem"><p class="simpara">
							Configure a <code class="literal">namespace</code>:
						</p><pre class="screen"># mkdir namespaces/<span class="emphasis"><em>10</em></span>

# cd namespaces/<span class="emphasis"><em>10</em></span></pre><p class="simpara">
							Replace <span class="emphasis"><em>10</em></span> with the namespace number
						</p></li><li class="listitem"><p class="simpara">
							Set a path to the <code class="literal">NVMe</code> device:
						</p><pre class="screen">#echo -n /dev/<span class="emphasis"><em>nvme0n1</em></span> &gt; device_path</pre></li><li class="listitem"><p class="simpara">
							Enable the namespace:
						</p><pre class="screen"># echo 1 &gt; enable</pre></li><li class="listitem"><p class="simpara">
							Create a directory with an <code class="literal">NVMe</code> port:
						</p><pre class="screen"># mkdir /sys/kernel/config/nvmet/ports/<span class="emphasis"><em>1</em></span>

# cd /sys/kernel/config/nvmet/ports/<span class="emphasis"><em>1</em></span></pre></li><li class="listitem"><p class="simpara">
							Display the IP address of <span class="emphasis"><em>mlx5_ib0</em></span>:
						</p><pre class="screen"># ip addr show mlx5_ib0

8: mlx5_ib0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 4092 qdisc mq state UP group default qlen 256
    link/infiniband 00:00:06:2f:fe:80:00:00:00:00:00:00:e4:1d:2d:03:00:e7:0f:f6 brd 00:ff:ff:ff:ff:12:40:1b:ff:ff:00:00:00:00:00:00:ff:ff:ff:ff
    inet 172.31.0.202/24 brd 172.31.0.255 scope global noprefixroute mlx5_ib0
       valid_lft forever preferred_lft forever
    inet6 fe80::e61d:2d03:e7:ff6/64 scope link noprefixroute
       valid_lft forever preferred_lft forever</pre></li><li class="listitem"><p class="simpara">
							Set the transport address for the target:
						</p><pre class="screen"># echo -n 172.31.0.202 &gt; addr_traddr</pre></li><li class="listitem"><p class="simpara">
							Set <code class="literal">RDMA</code> as the transport type:
						</p><pre class="screen"># echo rdma &gt; addr_trtype

# echo 4420 &gt; addr_trsvcid</pre></li><li class="listitem"><p class="simpara">
							Set the address family for the port:
						</p><pre class="screen"># echo ipv4 &gt; addr_adrfam</pre></li><li class="listitem"><p class="simpara">
							Create a soft link:
						</p><pre class="screen"># ln -s /sys/kernel/config/nvmet/subsystems/<span class="emphasis"><em>testnqn</em></span>   /sys/kernel/config/nvmet/ports/1/subsystems/<span class="emphasis"><em>testnqn</em></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Verify that the <code class="literal">NVMe</code> target is listening on the given port and ready for connection requests:
						</p><pre class="screen"># dmesg | grep "enabling port"
[ 1091.413648] nvmet_rdma: enabling port 1 (172.31.0.202:4420)</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">nvme</code> man page.
						</li></ul></div></section><section class="section" id="setting-up-nvme-rdma-target-using-nvmetcli_nvme-over-fabrics-using-rdma"><div class="titlepage"><div><div><h3 class="title">12.1.2. Setting up the NVMe/RDMA target using nvmetcli</h3></div></div></div><p>
					Use the <span class="strong strong"><strong>nvmetcli</strong></span> to edit, view, and start <code class="literal">NVMe</code> target. The <code class="literal">nvmetcli</code> provides a command line and an interactive shell option. Use this procedure to configure the <code class="literal">NVMe/RDMA</code> target by <code class="literal">nvmetcli</code>.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Verify that you have a block device to assign to the <code class="literal">nvmet</code> subsystem.
						</li><li class="listitem">
							Execute the <code class="literal">nvmetcli</code> operations as a root user.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install the <code class="literal">nvmetcli</code> package:
						</p><pre class="screen"># yum install nvmetcli</pre></li><li class="listitem"><p class="simpara">
							Download the <code class="literal">rdma.json</code> file
						</p><pre class="screen"># wget http://git.infradead.org/users/hch/nvmetcli.git/blob_plain/0a6b088db2dc2e5de11e6f23f1e890e4b54fee64:/rdma.json</pre></li><li class="listitem">
							Edit the <code class="literal">rdma.json</code> file and change the <code class="literal">traddr</code> value to <span class="emphasis"><em>172.31.0.202</em></span>.
						</li><li class="listitem"><p class="simpara">
							Setup the target by loading the NVMe target configuration file:
						</p><pre class="screen"># nvmetcli restore rdma.json</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If the NVMe target configuration file name is not specified, the <code class="literal">nvmetcli</code> uses the <code class="literal">/etc/nvmet/config.json</code> file.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Verify that the <code class="literal">NVMe</code> target is listening on the given port and ready for connection requests:
						</p><pre class="screen">#dmesg | tail -1
[ 4797.132647] nvmet_rdma: enabling port 2 (172.31.0.202:4420)</pre></li><li class="listitem"><p class="simpara">
							(Optional) Clear the current NVMe target:
						</p><pre class="screen"># nvmetcli clear</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">nvmetcli</code> man page.
						</li><li class="listitem">
							The <code class="literal">nvme</code> man page.
						</li></ul></div></section><section class="section" id="configuring-nvme-rdma-client_nvme-over-fabrics-using-rdma"><div class="titlepage"><div><div><h3 class="title">12.1.3. Configuring an NVMe/RDMA client</h3></div></div></div><p>
					Use this procedure to configure an <code class="literal">NVMe/RDMA</code> client using the NVMe management command line interface (<code class="literal">nvme-cli</code>) tool.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install the <code class="literal">nvme-cli</code> tool:
						</p><pre class="screen"># yum install nvme-cli</pre></li><li class="listitem"><p class="simpara">
							Load the <code class="literal">nvme-rdma</code> module if its not loaded:
						</p><pre class="screen"># modprobe nvme-rdma</pre></li><li class="listitem"><p class="simpara">
							Discover available subsystems on the <code class="literal">NVMe</code> target:
						</p><pre class="screen"># nvme discover -t rdma -a <span class="emphasis"><em>172.31.0.202</em></span> -s 4420

Discovery Log Number of Records 1, Generation counter 2
=====Discovery Log Entry 0======
trtype:  rdma
adrfam:  ipv4
subtype: nvme subsystem
treq:    not specified, sq flow control disable supported
portid:  1
trsvcid: 4420
subnqn:  testnqn
traddr:  <span class="emphasis"><em>172.31.0.202</em></span>
rdma_prtype: not specified
rdma_qptype: connected
rdma_cms:    rdma-cm
rdma_pkey: 0x0000</pre></li><li class="listitem"><p class="simpara">
							Connect to the discovered subsystems:
						</p><pre class="screen"># nvme connect -t rdma -n <span class="emphasis"><em>testnqn</em></span> -a <span class="emphasis"><em>172.31.0.202</em></span> -s <span class="emphasis"><em>4420</em></span>

# lsblk
NAME                         MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda                            8:0    0 465.8G  0 disk
├─sda1                         8:1    0     1G  0 part /boot
└─sda2                         8:2    0 464.8G  0 part
  ├─rhel_rdma--virt--03-root 253:0    0    50G  0 lvm  /
  ├─rhel_rdma--virt--03-swap 253:1    0     4G  0 lvm  [SWAP]
  └─rhel_rdma--virt--03-home 253:2    0 410.8G  0 lvm  /home
nvme0n1

#cat /sys/class/nvme/nvme0/transport
rdma</pre><p class="simpara">
							Replace <span class="emphasis"><em>testnqn</em></span> with the <code class="literal">NVMe</code> subsystem name.
						</p><p class="simpara">
							Replace <span class="emphasis"><em>172.31.0.202</em></span> with the target IP address.
						</p><p class="simpara">
							Replace <span class="emphasis"><em>4420</em></span> with the port number.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							List the NVMe devices that are currently connected:
						</p><pre class="screen"># nvme list</pre></li><li class="listitem"><p class="simpara">
							(Optional) Disconnect from the target:
						</p><pre class="screen"># nvme disconnect -n <span class="emphasis"><em>testnqn</em></span>
NQN:testnqn disconnected 1 controller(s)

# lsblk
NAME                         MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda                            8:0    0 465.8G  0 disk
├─sda1                         8:1    0     1G  0 part /boot
└─sda2                         8:2    0 464.8G  0 part
  ├─rhel_rdma--virt--03-root 253:0    0    50G  0 lvm  /
  ├─rhel_rdma--virt--03-swap 253:1    0     4G  0 lvm  [SWAP]
  └─rhel_rdma--virt--03-home 253:2    0 410.8G  0 lvm  /home</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">nvme</code> man page.
						</li><li class="listitem">
							<a class="link" href="https://github.com/linux-nvme/nvme-cli"> <span class="strong strong"><strong>Nvme-cli</strong></span> Github repository</a>
						</li></ul></div></section></section><section class="section" id="nvme-over-fabrics-using-fc_overview-of-nvme-over-fabric-devices"><div class="titlepage"><div><div><h2 class="title">12.2. NVMe over fabrics using FC</h2></div></div></div><p>
				The <code class="literal">NVMe</code> over Fibre Channel (<code class="literal">FC-NVMe</code>) is fully supported in initiator mode when used with certain Broadcom Emulex and Marvell Qlogic Fibre Channel adapters. As a system administrator, complete the tasks in the following sections to deploy the <code class="literal">FC-NVMe</code>:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="xref" href="index.html#configuring-the-nvme-initiator-for-broadcom-adapters_nvme-over-fabrics-using-fc" title="12.2.1. Configuring the NVMe initiator for Broadcom adapters">Section 12.2.1, “Configuring the NVMe initiator for Broadcom adapters”</a>.
					</li><li class="listitem">
						<a class="xref" href="index.html#configuring-the-nvme-initiator-for-qlogic-adapters_nvme-over-fabrics-using-fc" title="12.2.2. Configuring the NVMe initiator for QLogic adapters">Section 12.2.2, “Configuring the NVMe initiator for QLogic adapters”</a>.
					</li></ul></div><section class="section" id="configuring-the-nvme-initiator-for-broadcom-adapters_nvme-over-fabrics-using-fc"><div class="titlepage"><div><div><h3 class="title">12.2.1. Configuring the NVMe initiator for Broadcom adapters</h3></div></div></div><p>
					Use this procedure to configure the <code class="literal">NVMe</code> initiator for <code class="literal">Broadcom</code> adapters client using the NVMe management command line interface (<code class="literal">nvme-cli</code>) tool.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install the <code class="literal">nvme-cli</code> tool:
						</p><pre class="screen"># yum install nvme-cli</pre><p class="simpara">
							This creates the <code class="literal">hostnqn</code> file in the <code class="literal">/etc/nvme/</code> directory. The <code class="literal">hostnqn</code> file identifies the <code class="literal">NVMe</code> host.
						</p><p class="simpara">
							To generate a new <code class="literal">hostnqn</code>:
						</p><pre class="screen">#nvme gen-hostnqn</pre></li><li class="listitem"><p class="simpara">
							Find the <code class="literal">WWNN</code> and <code class="literal">WWPN</code> of the local and remote ports and use the output to find the subsystem <code class="literal">NQN</code>:
						</p><pre class="screen"># cat /sys/class/scsi_host/host*/nvme_info

NVME Initiator Enabled
XRI Dist lpfc0 Total 6144 IO 5894 ELS 250
NVME LPORT lpfc0 WWPN x10000090fae0b5f5 WWNN x20000090fae0b5f5 DID x010f00 ONLINE
NVME RPORT       WWPN x204700a098cbcac6 WWNN x204600a098cbcac6 DID x01050e TARGET DISCSRVC ONLINE

NVME Statistics
LS: Xmt 000000000e Cmpl 000000000e Abort 00000000
LS XMIT: Err 00000000  CMPL: xb 00000000 Err 00000000
Total FCP Cmpl 00000000000008ea Issue 00000000000008ec OutIO 0000000000000002
    abort 00000000 noxri 00000000 nondlp 00000000 qdepth 00000000 wqerr 00000000 err 00000000
FCP CMPL: xb 00000000 Err 00000000</pre><pre class="screen"># nvme discover --transport fc --traddr <span class="emphasis"><em>nn-0x204600a098cbcac6:pn-0x204700a098cbcac6</em></span> --host-traddr <span class="emphasis"><em>nn-0x20000090fae0b5f5:pn-0x10000090fae0b5f5</em></span>

Discovery Log Number of Records 2, Generation counter 49530
=====Discovery Log Entry 0======
trtype:  fc
adrfam:  fibre-channel
subtype: nvme subsystem
treq:    not specified
portid:  0
trsvcid: none
subnqn:  nqn.1992-08.com.netapp:sn.e18bfca87d5e11e98c0800a098cbcac6:subsystem.st14_nvme_ss_1_1
traddr:  nn-0x204600a098cbcac6:pn-0x204700a098cbcac6</pre><p class="simpara">
							Replace <span class="emphasis"><em>nn-0x204600a098cbcac6:pn-0x204700a098cbcac6</em></span> with the <code class="literal">traddr</code>.
						</p><p class="simpara">
							Replace <span class="emphasis"><em>nn-0x20000090fae0b5f5:pn-0x10000090fae0b5f5</em></span> with the <code class="literal">host_traddr</code>.
						</p></li><li class="listitem"><p class="simpara">
							Connect to the NVMe target using the <code class="literal">nvme-cli</code>:
						</p><pre class="screen"># nvme connect --transport fc --traddr <span class="emphasis"><em>nn-0x204600a098cbcac6:pn-0x204700a098cbcac6</em></span> --host-traddr <span class="emphasis"><em>nn-0x20000090fae0b5f5:pn-0x10000090fae0b5f5</em></span> -n <span class="emphasis"><em>nqn.1992-08.com.netapp:sn.e18bfca87d5e11e98c0800a098cbcac6:subsystem.st14_nvme_ss_1_1</em></span></pre><p class="simpara">
							Replace <span class="emphasis"><em>nn-0x204600a098cbcac6:pn-0x204700a098cbcac6</em></span> with the <code class="literal">traddr</code>.
						</p><p class="simpara">
							Replace <span class="emphasis"><em>nn-0x20000090fae0b5f5:pn-0x10000090fae0b5f5</em></span> with the <code class="literal">host_traddr</code>.
						</p><p class="simpara">
							Replace <span class="emphasis"><em>nqn.1992-08.com.netapp:sn.e18bfca87d5e11e98c0800a098cbcac6:subsystem.st14_nvme_ss_1_1</em></span> with the <code class="literal"><span class="emphasis"><em>subnqn</em></span></code>.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							List the NVMe devices that are currently connected:
						</p><pre class="screen"># nvme list
Node             SN                   Model                                    Namespace Usage                      Format           FW Rev
---------------- -------------------- ---------------------------------------- --------- -------------------------- ---------------- --------
/dev/nvme0n1     80BgLFM7xMJbAAAAAAAC NetApp ONTAP Controller                  1         107.37  GB / 107.37  GB      4 KiB +  0 B   FFFFFFFF</pre><pre class="screen"># lsblk |grep nvme
nvme0n1                     259:0    0   100G  0 disk</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">nvme</code> man page.
						</li><li class="listitem">
							<a class="link" href="https://github.com/linux-nvme/nvme-cli"> <span class="strong strong"><strong>Nvme-cli</strong></span> Github repository</a>
						</li></ul></div></section><section class="section" id="configuring-the-nvme-initiator-for-qlogic-adapters_nvme-over-fabrics-using-fc"><div class="titlepage"><div><div><h3 class="title">12.2.2. Configuring the NVMe initiator for QLogic adapters</h3></div></div></div><p>
					Use this procedure to configure <code class="literal">NVMe</code> initiator for <code class="literal">Qlogic</code> adapters client using the NVMe management command line interface (<code class="literal">nvme-cli</code>) tool.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install the <code class="literal">nvme-cli</code> tool:
						</p><pre class="screen"># yum install nvme-cli</pre><p class="simpara">
							This creates the <code class="literal">hostnqn</code> file in the <code class="literal">/etc/nvme/</code> directory. The <code class="literal">hostnqn</code> file identifies the <code class="literal">NVMe</code> host.
						</p><p class="simpara">
							To generate a new <code class="literal">hostnqn</code>:
						</p><pre class="screen">#nvme gen-hostnqn</pre></li><li class="listitem"><p class="simpara">
							Remove and reload the <code class="literal">qla2xxx</code> module:
						</p><pre class="screen"># rmmod qla2xxx
# modprobe qla2xxx</pre></li><li class="listitem"><p class="simpara">
							Find the <code class="literal">WWNN</code> and <code class="literal">WWPN</code> of the local and remote ports:
						</p><pre class="screen"># dmesg |grep traddr

[    6.139862] qla2xxx [0000:04:00.0]-ffff:0: register_localport: host-traddr=nn-0x20000024ff19bb62:pn-0x21000024ff19bb62 on portID:10700
[    6.241762] qla2xxx [0000:04:00.0]-2102:0: qla_nvme_register_remote: traddr=nn-0x203b00a098cbcac6:pn-0x203d00a098cbcac6 PortID:01050d</pre><p class="simpara">
							Using this <code class="literal">host-traddr</code> and <code class="literal">traddr</code>, find the subsystem <code class="literal">NQN</code>:
						</p><pre class="screen">nvme discover --transport fc --traddr <span class="emphasis"><em>nn-0x203b00a098cbcac6:pn-0x203d00a098cbcac6</em></span> --host-traddr <span class="emphasis"><em>nn-0x20000024ff19bb62:pn-0x21000024ff19bb62</em></span>

Discovery Log Number of Records 2, Generation counter 49530
=====Discovery Log Entry 0======
trtype:  fc
adrfam:  fibre-channel
subtype: nvme subsystem
treq:    not specified
portid:  0
trsvcid: none
subnqn:  nqn.1992-08.com.netapp:sn.c9ecc9187b1111e98c0800a098cbcac6:subsystem.vs_nvme_multipath_1_subsystem_468
traddr:  nn-0x203b00a098cbcac6:pn-0x203d00a098cbcac6</pre><p class="simpara">
							Replace <span class="emphasis"><em>nn-0x203b00a098cbcac6:pn-0x203d00a098cbcac6</em></span> with the <code class="literal">traddr</code>.
						</p><p class="simpara">
							Replace <span class="emphasis"><em>nn-0x20000024ff19bb62:pn-0x21000024ff19bb62</em></span> with the <code class="literal">host_traddr</code>.
						</p></li><li class="listitem"><p class="simpara">
							Connect to the NVMe target using the <code class="literal">nvme-cli</code> tool:
						</p><pre class="screen"># nvme connect  --transport fc --traddr <span class="emphasis"><em>nn-0x203b00a098cbcac6:pn-0x203d00a098cbcac6</em></span> --host_traddr <span class="emphasis"><em>nn-0x20000024ff19bb62:pn-0x21000024ff19bb62</em></span> -n <span class="emphasis"><em>nqn.1992-08.com.netapp:sn.c9ecc9187b1111e98c0800a098cbcac6:subsystem.vs_nvme_multipath_1_subsystem_468</em></span></pre><p class="simpara">
							Replace <span class="emphasis"><em>nn-0x203b00a098cbcac6:pn-0x203d00a098cbcac6</em></span> with the <code class="literal">traddr</code>.
						</p><p class="simpara">
							Replace <span class="emphasis"><em>nn-0x20000024ff19bb62:pn-0x21000024ff19bb62</em></span> with the <code class="literal">host_traddr</code>.
						</p><p class="simpara">
							Replace <span class="emphasis"><em>nqn.1992-08.com.netapp:sn.c9ecc9187b1111e98c0800a098cbcac6:subsystem.vs_nvme_multipath_1_subsystem_468</em></span> with the <code class="literal"><span class="emphasis"><em>subnqn</em></span></code>.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							List the NVMe devices that are currently connected:
						</p><pre class="screen"># nvme list
Node             SN                   Model                                    Namespace Usage                      Format           FW Rev
---------------- -------------------- ---------------------------------------- --------- -------------------------- ---------------- --------
/dev/nvme0n1     80BgLFM7xMJbAAAAAAAC NetApp ONTAP Controller                  1         107.37  GB / 107.37  GB      4 KiB +  0 B   FFFFFFFF

# lsblk |grep nvme
nvme0n1                     259:0    0   100G  0 disk</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">nvme</code> man page.
						</li><li class="listitem">
							<a class="link" href="https://github.com/linux-nvme/nvme-cli"> <span class="strong strong"><strong>Nvme-cli</strong></span> Github repository</a>
						</li></ul></div></section></section></section><section class="chapter" id="setting-the-disk-scheduler_managing-storage-devices"><div class="titlepage"><div><div><h1 class="title">Chapter 13. Setting the disk scheduler</h1></div></div></div><p>
			The disk scheduler is responsible for ordering the I/O requests submitted to a storage device.
		</p><p>
			You can configure the scheduler in several different ways:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Set the scheduler using <span class="strong strong"><strong>Tuned</strong></span>, as described in <a class="xref" href="index.html#setting-the-disk-scheduler-using-tuned_setting-the-disk-scheduler" title="13.6. Setting the disk scheduler using Tuned">Section 13.6, “Setting the disk scheduler using Tuned”</a>
				</li><li class="listitem">
					Set the scheduler using <code class="literal">udev</code>, as described in <a class="xref" href="index.html#setting-the-disk-scheduler-using-udev-rules_setting-the-disk-scheduler" title="13.7. Setting the disk scheduler using udev rules">Section 13.7, “Setting the disk scheduler using udev rules”</a>
				</li><li class="listitem">
					Temporarily change the scheduler on a running system, as described in <a class="xref" href="index.html#temporarily-setting-a-scheduler-for-a-specific-disk_setting-the-disk-scheduler" title="13.8. Temporarily setting a scheduler for a specific disk">Section 13.8, “Temporarily setting a scheduler for a specific disk”</a>
				</li></ul></div><section class="section" id="disk-scheduler-changes-in-rhel-8_setting-the-disk-scheduler"><div class="titlepage"><div><div><h2 class="title">13.1. Disk scheduler changes in RHEL 8</h2></div></div></div><p>
				In RHEL 8, block devices support only multi-queue scheduling. This enables the block layer performance to scale well with fast solid-state drives (SSDs) and multi-core systems.
			</p><p>
				The traditional, single-queue schedulers, which were available in RHEL 7 and earlier versions, have been removed.
			</p></section><section class="section" id="available-disk-schedulers_setting-the-disk-scheduler"><div class="titlepage"><div><div><h2 class="title">13.2. Available disk schedulers</h2></div></div></div><p>
				The following multi-queue disk schedulers are supported in RHEL 8:
			</p><div class="variablelist"><p class="title"><strong>Disk schedulers</strong></p><dl class="variablelist"><dt><span class="term"><code class="literal">none</code></span></dt><dd>
							Implements a first-in first-out (FIFO) scheduling algorithm. It merges requests at the generic block layer through a simple last-hit cache.
						</dd><dt><span class="term"><code class="literal">mq-deadline</code></span></dt><dd><p class="simpara">
							Attempts to provide a guaranteed latency for requests from the point at which requests reach the scheduler.
						</p><p class="simpara">
							The <code class="literal">mq-deadline</code> scheduler sorts queued I/O requests into a read or write batch and then schedules them for execution in increasing logical block addressing (LBA) order. By default, read batches take precedence over write batches, because applications are more likely to block on read I/O operations. After <code class="literal">mq-deadline</code> processes a batch, it checks how long write operations have been starved of processor time and schedules the next read or write batch as appropriate.
						</p><p class="simpara">
							This scheduler is suitable for most use cases, but particularly those in which read operations occur more often than write operations.
						</p></dd><dt><span class="term"><code class="literal">bfq</code></span></dt><dd><p class="simpara">
							Targets desktop systems and interactive tasks.
						</p><p class="simpara">
							The <code class="literal">bfq</code> scheduler ensures that a single application is never using all of the bandwidth. In effect, the storage device is always as responsive as if it was idle. The system does not become unresponsive when copying large files. In its default configuration, <code class="literal">bfq</code> focuses on delivering the lowest latency rather than achieving the maximum throughput.
						</p><p class="simpara">
							<code class="literal">bfq</code> is based on <code class="literal">cfq</code> code. It does not grant the disk to each process for a fixed time slice but assigns a <span class="emphasis"><em>budget</em></span> measured in number of sectors to the process.
						</p></dd><dt><span class="term"><code class="literal">kyber</code></span></dt><dd>
							Is intended for fast devices. The scheduler tunes itself to achieve a latency goal. You can configure the target latencies for read and synchronous write requests.
						</dd></dl></div></section><section class="section" id="recommended-disk-schedulers-for-different-use-cases_setting-the-disk-scheduler"><div class="titlepage"><div><div><h2 class="title">13.3. Recommended disk schedulers for different use cases</h2></div></div></div><p>
				Depending on the task that your system performs, Red Hat recommends the following disk schedulers:
			</p><div class="table" id="idm140163623399920"><p class="title"><strong>Table 13.1. Recommendations</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140163623395088" scope="col">Use case</th><th align="left" valign="top" id="idm140163623394000" scope="col">Disk scheduler recommendation</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140163623395088"> <p>
								Traditional HDD with a SCSI interface
							</p>
							 </td><td align="left" valign="top" headers="idm140163623394000"> <p>
								Use <code class="literal">mq-deadline</code> or <code class="literal">bfq</code>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140163623395088"> <p>
								High-performance SSD or a CPU-bound system with fast storage
							</p>
							 </td><td align="left" valign="top" headers="idm140163623394000"> <p>
								Use <code class="literal">none</code>, especially when running enterprise applications. Alternatively, use <code class="literal">kyber</code>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140163623395088"> <p>
								Desktop or interactive tasks
							</p>
							 </td><td align="left" valign="top" headers="idm140163623394000"> <p>
								Use <code class="literal">bfq</code>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140163623395088"> <p>
								Virtual guest
							</p>
							 </td><td align="left" valign="top" headers="idm140163623394000"> <p>
								Use <code class="literal">mq-deadline</code>. With a multi-queue host bus adapter (HBA), use <code class="literal">none</code>.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="the-default-disk-scheduler_setting-the-disk-scheduler"><div class="titlepage"><div><div><h2 class="title">13.4. The default disk scheduler</h2></div></div></div><p>
				Block devices use the default disk scheduler unless you specify another scheduler.
			</p><p>
				The kernel selects a default disk scheduler based on the type of device. The automatically selected scheduler is typically the optimal setting. If you require a different scheduler, Red Hat recommends to use <code class="literal">udev</code> rules or the <span class="strong strong"><strong>Tuned</strong></span> application to configure it. Match the selected devices and switch the scheduler only for those devices.
			</p></section><section class="section" id="determining-the-active-disk-scheduler_setting-the-disk-scheduler"><div class="titlepage"><div><div><h2 class="title">13.5. Determining the active disk scheduler</h2></div></div></div><p>
				This procedure determines which disk scheduler is currently active on a given block device.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Read the content of the <code class="literal filename">/sys/block/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span>/queue/scheduler</code> file:
					</p><pre class="screen"># cat /sys/block/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span>/queue/scheduler

[mq-deadline] kyber bfq none</pre><p class="simpara">
						In the file name, replace <span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> with the block device name, for example <code class="literal">sdc</code>.
					</p><p class="simpara">
						The active scheduler is listed in square brackets (<code class="literal">[ ]</code>).
					</p></li></ul></div></section><section class="section" id="setting-the-disk-scheduler-using-tuned_setting-the-disk-scheduler"><div class="titlepage"><div><div><h2 class="title">13.6. Setting the disk scheduler using Tuned</h2></div></div></div><p>
				This procedure creates and enables a <span class="strong strong"><strong>Tuned</strong></span> profile that sets a given disk scheduler for selected block devices. The setting persists across system reboots.
			</p><p>
				In the following commands and configuration, replace:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> with the name of the block device, for example <code class="literal">sdf</code>
					</li><li class="listitem">
						<span class="emphasis"><em><span class="replaceable replaceable">selected-scheduler</span></em></span> with the disk scheduler that you want to set for the device, for example <code class="literal">bfq</code>
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The <code class="literal">tuned</code> service is installed and enabled.
					</p><p class="simpara">
						For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/getting-started-with-tuned_monitoring-and-managing-system-status-and-performance#installing-and-enabling-tuned_getting-started-with-tuned">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/getting-started-with-tuned_monitoring-and-managing-system-status-and-performance#installing-and-enabling-tuned_getting-started-with-tuned</a>.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Select an existing <span class="strong strong"><strong>Tuned</strong></span> profile on which your profile will be based. For a list of available profiles, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/getting-started-with-tuned_monitoring-and-managing-system-status-and-performance#tuned-profiles-distributed-with-rhel_getting-started-with-tuned">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/getting-started-with-tuned_monitoring-and-managing-system-status-and-performance#tuned-profiles-distributed-with-rhel_getting-started-with-tuned</a>.
					</p><p class="simpara">
						To see which profile is currently active, use:
					</p><pre class="screen">$ tuned-adm active</pre></li><li class="listitem"><p class="simpara">
						Create a new directory to hold your <span class="strong strong"><strong>Tuned</strong></span> profile:
					</p><pre class="screen"># mkdir /etc/tuned/<span class="emphasis"><em><span class="replaceable replaceable">my-profile</span></em></span></pre></li><li class="listitem"><p class="simpara">
						Find the World Wide Name (WWN) identifier of the selected block device:
					</p><pre class="screen">$ udevadm info --query=property --name=/dev/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> | grep WWN=

ID_WWN=<span class="emphasis"><em><span class="replaceable replaceable">0x5002538d00000000</span></em></span></pre></li><li class="listitem"><p class="simpara">
						Create the <code class="literal filename">/etc/tuned/<span class="emphasis"><em><span class="replaceable replaceable">my-profile</span></em></span>/tuned.conf</code> configuration file. In the file, set the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Optional: Include an existing profile:
							</p><pre class="screen">[main]
include=<span class="emphasis"><em><span class="replaceable replaceable">existing-profile</span></em></span></pre></li><li class="listitem"><p class="simpara">
								Set the selected disk scheduler for the device that matches the WWN identifier:
							</p><pre class="screen">[disk]
devices_udev_regex=ID_WWN=<span class="emphasis"><em><span class="replaceable replaceable">0x5002538d00000000</span></em></span>
elevator=<span class="emphasis"><em><span class="replaceable replaceable">selected-scheduler</span></em></span></pre><p class="simpara">
								To match multiple devices in the <code class="literal option">devices_udev_regex</code> option, separate the identifiers with commas:
							</p><pre class="screen">devices_udev_regex=ID_WWN=<span class="emphasis"><em><span class="replaceable replaceable">0x5002538d00000000</span></em></span>, ID_WWN=<span class="emphasis"><em><span class="replaceable replaceable">0x1234567800000000</span></em></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Enable your profile:
					</p><pre class="screen"># tuned-adm profile <span class="emphasis"><em><span class="replaceable replaceable">my-profile</span></em></span></pre></li><li class="listitem"><p class="simpara">
						Verify that the Tuned profile is active and applied:
					</p><pre class="screen">$ tuned-adm active

Current active profile: <span class="emphasis"><em><span class="replaceable replaceable">my-profile</span></em></span></pre><pre class="screen">$ tuned-adm verify

Verification succeeded, current system settings match the preset profile.
See tuned log file ('/var/log/tuned/tuned.log') for details.</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information on creating a <span class="strong strong"><strong>Tuned</strong></span> profile, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/customizing-tuned-profiles_monitoring-and-managing-system-status-and-performance">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/customizing-tuned-profiles_monitoring-and-managing-system-status-and-performance</a>.
					</li></ul></div></section><section class="section" id="setting-the-disk-scheduler-using-udev-rules_setting-the-disk-scheduler"><div class="titlepage"><div><div><h2 class="title">13.7. Setting the disk scheduler using udev rules</h2></div></div></div><p>
				This procedure sets a given disk scheduler for specific block devices using <code class="literal">udev</code> rules. The setting persists across system reboots.
			</p><p>
				In the following commands and configuration, replace:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> with the name of the block device, for example <code class="literal">sdf</code>
					</li><li class="listitem">
						<span class="emphasis"><em><span class="replaceable replaceable">selected-scheduler</span></em></span> with the disk scheduler that you want to set for the device, for example <code class="literal">bfq</code>
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Find the World Wide Identifier (WWID) of the block device:
					</p><pre class="screen">$ udevadm info --attribute-walk --name=/dev/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> | grep wwid

    ATTRS{wwid}=="<span class="emphasis"><em><span class="replaceable replaceable">device WWID</span></em></span>"</pre><p class="simpara">
						An example value of <span class="emphasis"><em><span class="replaceable replaceable">device WWID</span></em></span> is:
					</p><pre class="screen">t10.ATA     SAMSUNG MZNLN256HMHQ-000L7              S2WDNX0J336519</pre></li><li class="listitem"><p class="simpara">
						Configure the <code class="literal">udev</code> rule. Create the <code class="literal filename">/etc/udev/rules.d/99-scheduler.rules</code> file with the following content:
					</p><pre class="screen">ACTION=="add|change", SUBSYSTEM=="block", ATTRS{wwid}=="<span class="emphasis"><em><span class="replaceable replaceable">device WWID</span></em></span>", ATTR{queue/scheduler}="<span class="emphasis"><em><span class="replaceable replaceable">selected-scheduler</span></em></span>"</pre><p class="simpara">
						Replace <span class="emphasis"><em><span class="replaceable replaceable">device WWID</span></em></span> with the WWID value that you found in the previous steps.
					</p></li><li class="listitem"><p class="simpara">
						Reload <code class="literal">udev</code> rules:
					</p><pre class="screen"># udevadm control --reload-rules</pre></li><li class="listitem"><p class="simpara">
						Apply the scheduler configuration:
					</p><pre class="screen"># udevadm trigger --type=devices --action=change</pre></li><li class="listitem"><p class="simpara">
						Verify the active scheduler:
					</p><pre class="screen"># cat /sys/block/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span>/queue/scheduler</pre></li></ol></div></section><section class="section" id="temporarily-setting-a-scheduler-for-a-specific-disk_setting-the-disk-scheduler"><div class="titlepage"><div><div><h2 class="title">13.8. Temporarily setting a scheduler for a specific disk</h2></div></div></div><p>
				This procedure sets a given disk scheduler for specific block devices. The setting does not persist across system reboots.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Write the name of the selected scheduler to the <code class="literal filename">/sys/block/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span>/queue/scheduler</code> file:
					</p><pre class="screen"># echo <span class="emphasis"><em><span class="replaceable replaceable">selected-scheduler</span></em></span> &gt; /sys/block/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span>/queue/scheduler</pre><p class="simpara">
						In the file name, replace <span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> with the block device name, for example <code class="literal">sdc</code>.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the scheduler is active on the device:
					</p><pre class="screen"># cat /sys/block/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span>/queue/scheduler</pre></li></ul></div></section></section><section class="chapter" id="managing-layered-local-storage-with-stratis_managing-storage-devices"><div class="titlepage"><div><div><h1 class="title">Chapter 14. Managing layered local storage with Stratis</h1></div></div></div><p>
			You can easily set up and manage complex storage configurations integrated by the Stratis high-level system.
		</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
				Stratis is available as a Technology Preview. For information on Red Hat scope of support for Technology Preview features, see the <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> document.
			</p><p>
				Customers deploying Stratis are encouraged to provide feedback to Red Hat.
			</p></div></div><section class="section" id="setting-up-stratis-file-systems_managing-layered-local-storage-with-stratis"><div class="titlepage"><div><div><h2 class="title">14.1. Setting up Stratis file systems</h2></div></div></div><p>
				As a system administrator, you can enable and set up the Stratis volume-managing file system on your system to easily manage layered storage.
			</p><section class="section" id="the-purpose-and-features-of-stratis_setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.1.1. The purpose and features of Stratis</h3></div></div></div><p>
					Stratis is a local storage-management solution for Linux. It is focused on simplicity and ease of use, and gives you access to advanced storage features.
				</p><p>
					Stratis makes the following activities easier:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Initial configuration of storage
						</li><li class="listitem">
							Making changes later
						</li><li class="listitem">
							Using advanced storage features
						</li></ul></div><p>
					Stratis is a hybrid user-and-kernel local storage management system that supports advanced storage features. The central concept of Stratis is a storage <span class="emphasis"><em>pool</em></span>. This pool is created from one or more local disks or partitions, and volumes are created from the pool.
				</p><p>
					The pool enables many useful features, such as:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							File system snapshots
						</li><li class="listitem">
							Thin provisioning
						</li><li class="listitem">
							Tiering
						</li></ul></div></section><section class="section" id="components-of-a-stratis-volume_setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.1.2. Components of a Stratis volume</h3></div></div></div><p>
					Externally, Stratis presents the following volume components in the command-line interface and the API:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">blockdev</code></span></dt><dd>
								Block devices, such as a disk or a disk partition.
							</dd><dt><span class="term"><code class="literal">pool</code></span></dt><dd><p class="simpara">
								Composed of one or more block devices.
							</p><p class="simpara">
								A pool has a fixed total size, equal to the size of the block devices.
							</p><p class="simpara">
								The pool contains most Stratis layers, such as the non-volatile data cache using the <code class="literal">dm-cache</code> target.
							</p><p class="simpara">
								Stratis creates a <code class="literal filename">/stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/</code> directory for each pool. This directory contains links to devices that represent Stratis file systems in the pool.
							</p></dd></dl></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">filesystem</code></span></dt><dd><p class="simpara">
								Each pool can contain one or more file systems, which store files.
							</p><p class="simpara">
								File systems are thinly provisioned and do not have a fixed total size. The actual size of a file system grows with the data stored on it. If the size of the data approaches the virtual size of the file system, Stratis grows the thin volume and the file system automatically.
							</p><p class="simpara">
								The file systems are formatted with XFS.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									Stratis tracks information about file systems created using Stratis that XFS is not aware of, and changes made using XFS do not automatically create updates in Stratis. Users must not reformat or reconfigure XFS file systems that are managed by Stratis.
								</p></div></div><p class="simpara">
								Stratis creates links to file systems at the <code class="literal filename">/stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></code> path.
							</p></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Stratis uses many Device Mapper devices, which show up in <code class="literal">dmsetup</code> listings and the <code class="literal filename">/proc/partitions</code> file. Similarly, the <code class="literal">lsblk</code> command output reflects the internal workings and layers of Stratis.
					</p></div></div></section><section class="section" id="block-devices-usable-with-stratis_setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.1.3. Block devices usable with Stratis</h3></div></div></div><p>
					This section lists storage devices that you can use for Stratis.
				</p><h5 id="supported_devices">Supported devices</h5><p>
					Stratis pools have been tested to work on these types of block devices:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							LUKS
						</li><li class="listitem">
							LVM logical volumes
						</li><li class="listitem">
							MD RAID
						</li><li class="listitem">
							DM Multipath
						</li><li class="listitem">
							iSCSI
						</li><li class="listitem">
							HDDs and SSDs
						</li><li class="listitem">
							NVMe devices
						</li></ul></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						In the current version, Stratis does not handle failures in hard drives or other hardware. If you create a Stratis pool over multiple hardware devices, you increase the risk of data loss because multiple devices must be operational to access the data.
					</p></div></div><h5 id="unsupported_devices">Unsupported devices</h5><p>
					Because Stratis contains a thin-provisioning layer, Red Hat does not recommend placing a Stratis pool on block devices that are already thinly-provisioned.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For iSCSI and other block devices requiring network, see the <code class="literal">systemd.mount(5)</code> man page for information on the <code class="literal option">_netdev</code> mount option.
						</li></ul></div></section><section class="section" id="installing-stratis_setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.1.4. Installing Stratis</h3></div></div></div><p>
					This procedure installs all packages necessary to use Stratis.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install packages that provide the Stratis service and command-line utilities:
						</p><pre class="screen"># yum install stratisd stratis-cli</pre></li><li class="listitem"><p class="simpara">
							Make sure that the <code class="literal">stratisd</code> service is enabled:
						</p><pre class="screen"># systemctl enable --now stratisd</pre></li></ol></div></section><section class="section" id="creating-a-stratis-pool_setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.1.5. Creating a Stratis pool</h3></div></div></div><p>
					This procedure creates a Stratis pool from one or more block devices.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="14.1.4. Installing Stratis">Section 14.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							The block devices on which you are creating a Stratis pool are not in use and not mounted.
						</li><li class="listitem">
							The block devices on which you are creating a Stratis pool are at least 1 GiB in size each.
						</li><li class="listitem"><p class="simpara">
							On the IBM Z architecture, the <code class="literal">/dev/dasd*</code> block devices must to be partitioned. Use the partition in the Stratis pool.
						</p><p class="simpara">
							For information on partitioning DASD devices, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/configuring-a-linux-instance-on-ibm-z_installing-rhel">Configuring a Linux instance on IBM Z</a>.
						</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							If the selected block device contains file system, partition table, or RAID signatures, erase them:
						</p><pre class="screen"># wipefs --all <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><p class="simpara">
							Replace <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> with the path to a block device, such as <code class="literal filename">/dev/sdb</code>.
						</p></li><li class="listitem"><p class="simpara">
							To create a Stratis pool on the block device, use:
						</p><pre class="screen"># stratis pool create <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> with an arbitrary name for the pool.
								</li><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">block-device</span></em></span> with the path to the empty or wiped block device, such as <code class="literal filename">/dev/sdb</code>.
								</li></ul></div><p class="simpara">
							To create a pool from more than one block device, list them all on the command line:
						</p><pre class="screen"># stratis pool create <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">device-1</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">device-2</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">device-n</span></em></span></pre></li><li class="listitem"><p class="simpara">
							To verify, list all pools on your system:
						</p><pre class="screen"># stratis pool list</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create a Stratis file system on the pool. See <a class="xref" href="index.html#creating-a-stratis-file-system_setting-up-stratis-file-systems" title="14.1.6. Creating a Stratis file system">Section 14.1.6, “Creating a Stratis file system”</a>.
						</li></ul></div></section><section class="section" id="creating-a-stratis-file-system_setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.1.6. Creating a Stratis file system</h3></div></div></div><p>
					This procedure creates a Stratis file system on an existing Stratis pool.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="14.1.4. Installing Stratis">Section 14.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis pool. See <a class="xref" href="index.html#creating-a-stratis-pool_setting-up-stratis-file-systems" title="14.1.5. Creating a Stratis pool">Section 14.1.5, “Creating a Stratis pool”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To create a Stratis file system on a pool, use:
						</p><pre class="screen"># stratis fs create <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> with the name of your existing Stratis pool.
								</li><li class="listitem">
									Replace <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span> with an arbitrary name for the file system.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							To verify, list file systems within the pool:
						</p><pre class="screen"># stratis fs list <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Mount the Stratis file system. See <a class="xref" href="index.html#mounting-a-stratis-file-system_setting-up-stratis-file-systems" title="14.1.7. Mounting a Stratis file system">Section 14.1.7, “Mounting a Stratis file system”</a>.
						</li></ul></div></section><section class="section" id="mounting-a-stratis-file-system_setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.1.7. Mounting a Stratis file system</h3></div></div></div><p>
					This procedure mounts an existing Stratis file system to access the content.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="14.1.4. Installing Stratis">Section 14.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis file system. See <a class="xref" href="index.html#creating-a-stratis-file-system_setting-up-stratis-file-systems" title="14.1.6. Creating a Stratis file system">Section 14.1.6, “Creating a Stratis file system”</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To mount the file system, use the entries that Stratis maintains in the <code class="literal filename">/stratis/</code> directory:
						</p><pre class="screen"># mount /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li></ul></div><p>
					The file system is now mounted on the <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span> directory and ready to use.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">mount(8)</code> man page
						</li></ul></div></section><section class="section" id="persistently-mounting-a-stratis-file-system_setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.1.8. Persistently mounting a Stratis file system</h3></div></div></div><p>
					This procedure persistently mounts a Stratis file system so that it is available automatically after booting the system.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="14.1.4. Installing Stratis">Section 14.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis file system. See <a class="xref" href="index.html#creating-a-stratis-file-system_setting-up-stratis-file-systems" title="14.1.6. Creating a Stratis file system">Section 14.1.6, “Creating a Stratis file system”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Determine the UUID attribute of the file system:
						</p><pre class="screen">$ lsblk --output=UUID /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></pre><p class="simpara">
							For example:
						</p><div class="example" id="idm140163620532912"><p class="title"><strong>Example 14.1. Viewing the UUID of Stratis file system</strong></p><div class="example-contents"><pre class="screen">$ lsblk --output=UUID /stratis/my-pool/fs1

UUID
a1f0b64a-4ebb-4d4e-9543-b1d79f600283</pre></div></div></li><li class="listitem"><p class="simpara">
							If the mount point directory does not exist, create it:
						</p><pre class="screen"># mkdir --parents <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li><li class="listitem"><p class="simpara">
							As root, edit the <code class="literal filename">/etc/fstab</code> file and add a line for the file system, identified by the UUID. Use <code class="literal">xfs</code> as the file system type and add the <code class="literal">x-systemd.requires=stratisd.service</code> option.
						</p><p class="simpara">
							For example:
						</p><div class="example" id="idm140163620525920"><p class="title"><strong>Example 14.2. The /fs1 mount point in /etc/fstab</strong></p><div class="example-contents"><pre class="screen">UUID=a1f0b64a-4ebb-4d4e-9543-b1d79f600283 /fs1 xfs defaults,x-systemd.requires=stratisd.service 0 0</pre></div></div></li><li class="listitem"><p class="simpara">
							Regenerate mount units so that your system registers the new configuration:
						</p><pre class="screen"># systemctl daemon-reload</pre></li><li class="listitem"><p class="simpara">
							Try mounting the file system to verify that the configuration works:
						</p><pre class="screen"># mount <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_file_systems/assembly_mounting-file-systems_managing-file-systems#assembly_persistently-mounting-file-systems_assembly_mounting-file-systems">Persistently mounting file systems</a>
						</li></ul></div></section><section class="section" id="related-information-setting-up-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.1.9. Related information</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="emphasis"><em>Stratis Storage</em></span> website: <a class="link" href="https://stratis-storage.github.io/">https://stratis-storage.github.io/</a>
						</li></ul></div></section></section><section class="section" id="extending-a-stratis-volume-with-additional-block-devices_managing-layered-local-storage-with-stratis"><div class="titlepage"><div><div><h2 class="title">14.2. Extending a Stratis volume with additional block devices</h2></div></div></div><p>
				You can attach additional block devices to a Stratis pool to provide more storage capacity for Stratis file systems.
			</p><section class="section" id="components-of-a-stratis-volume_extending-a-stratis-volume-with-additional-block-devices"><div class="titlepage"><div><div><h3 class="title">14.2.1. Components of a Stratis volume</h3></div></div></div><p>
					Externally, Stratis presents the following volume components in the command-line interface and the API:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">blockdev</code></span></dt><dd>
								Block devices, such as a disk or a disk partition.
							</dd><dt><span class="term"><code class="literal">pool</code></span></dt><dd><p class="simpara">
								Composed of one or more block devices.
							</p><p class="simpara">
								A pool has a fixed total size, equal to the size of the block devices.
							</p><p class="simpara">
								The pool contains most Stratis layers, such as the non-volatile data cache using the <code class="literal">dm-cache</code> target.
							</p><p class="simpara">
								Stratis creates a <code class="literal filename">/stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/</code> directory for each pool. This directory contains links to devices that represent Stratis file systems in the pool.
							</p></dd></dl></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">filesystem</code></span></dt><dd><p class="simpara">
								Each pool can contain one or more file systems, which store files.
							</p><p class="simpara">
								File systems are thinly provisioned and do not have a fixed total size. The actual size of a file system grows with the data stored on it. If the size of the data approaches the virtual size of the file system, Stratis grows the thin volume and the file system automatically.
							</p><p class="simpara">
								The file systems are formatted with XFS.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									Stratis tracks information about file systems created using Stratis that XFS is not aware of, and changes made using XFS do not automatically create updates in Stratis. Users must not reformat or reconfigure XFS file systems that are managed by Stratis.
								</p></div></div><p class="simpara">
								Stratis creates links to file systems at the <code class="literal filename">/stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></code> path.
							</p></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Stratis uses many Device Mapper devices, which show up in <code class="literal">dmsetup</code> listings and the <code class="literal filename">/proc/partitions</code> file. Similarly, the <code class="literal">lsblk</code> command output reflects the internal workings and layers of Stratis.
					</p></div></div></section><section class="section" id="adding-block-devices-to-a-stratis-pool_extending-a-stratis-volume-with-additional-block-devices"><div class="titlepage"><div><div><h3 class="title">14.2.2. Adding block devices to a Stratis pool</h3></div></div></div><p>
					This procedure adds one or more block devices to a Stratis pool to be usable by Stratis file systems.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="14.1.4. Installing Stratis">Section 14.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							The block devices that you are adding to the Stratis pool are not in use and not mounted.
						</li><li class="listitem">
							The block devices that you are adding to the Stratis pool are at least 1 GiB in size each.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To add one or more block devices to the pool, use:
						</p><pre class="screen"># stratis pool add-data <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">device-1</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">device-2</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">device-n</span></em></span></pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div></section><section class="section" id="related-information-extending-a-stratis-volume-with-additional-block-devices"><div class="titlepage"><div><div><h3 class="title">14.2.3. Related information</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="emphasis"><em>Stratis Storage</em></span> website: <a class="link" href="https://stratis-storage.github.io/">https://stratis-storage.github.io/</a>
						</li></ul></div></section></section><section class="section" id="monitoring-stratis-file-systems_managing-layered-local-storage-with-stratis"><div class="titlepage"><div><div><h2 class="title">14.3. Monitoring Stratis file systems</h2></div></div></div><p>
				As a Stratis user, you can view information about Stratis volumes on your system to monitor their state and free space.
			</p><section class="section" id="stratis-sizes-reported-by-different-utilities_monitoring-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.3.1. Stratis sizes reported by different utilities</h3></div></div></div><p>
					This section explains the difference between Stratis sizes reported by standard utilities such as <code class="literal">df</code> and the <code class="literal">stratis</code> utility.
				</p><p>
					Standard Linux utilities such as <code class="literal">df</code> report the size of the XFS file system layer on Stratis, which is 1 TiB. This is not useful information, because the actual storage usage of Stratis is less due to thin provisioning, and also because Stratis automatically grows the file system when the XFS layer is close to full.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Regularly monitor the amount of data written to your Stratis file systems, which is reported as the <span class="emphasis"><em>Total Physical Used</em></span> value. Make sure it does not exceed the <span class="emphasis"><em>Total Physical Size</em></span> value.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div></section><section class="section" id="displaying-information-about-stratis-volumes_monitoring-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.3.2. Displaying information about Stratis volumes</h3></div></div></div><p>
					This procedure lists statistics about your Stratis volumes, such as the total, used, and free size or file systems and block devices belonging to a pool.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="14.1.4. Installing Stratis">Section 14.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To display information about all <span class="strong strong"><strong>block devices</strong></span> used for Stratis on your system:
						</p><pre class="screen"># stratis blockdev

Pool Name  Device Node    Physical Size   State  Tier
<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>    <span class="emphasis"><em><span class="replaceable replaceable">/dev/sdb</span></em></span>            <span class="emphasis"><em><span class="replaceable replaceable">9.10 TiB</span></em></span>  <span class="emphasis"><em><span class="replaceable replaceable">In-use</span></em></span>  <span class="emphasis"><em><span class="replaceable replaceable">Data</span></em></span></pre></li><li class="listitem"><p class="simpara">
							To display information about all Stratis <span class="strong strong"><strong>pools</strong></span> on your system:
						</p><pre class="screen"># stratis pool

Name    Total Physical Size  Total Physical Used
<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>            <span class="emphasis"><em><span class="replaceable replaceable">9.10 TiB</span></em></span>              <span class="emphasis"><em><span class="replaceable replaceable">598 MiB</span></em></span></pre></li><li class="listitem"><p class="simpara">
							To display information about all Stratis <span class="strong strong"><strong>file systems</strong></span> on your system:
						</p><pre class="screen"># stratis filesystem

Pool Name  Name  Used     Created            Device
<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>    <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">546 MiB</span></em></span>  <span class="emphasis"><em><span class="replaceable replaceable">Nov 08 2018 08:03</span></em></span>  /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool/my-fs</span></em></span></pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div></section><section class="section" id="related-information-monitoring-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.3.3. Related information</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="emphasis"><em>Stratis Storage</em></span> website: <a class="link" href="https://stratis-storage.github.io/">https://stratis-storage.github.io/</a>
						</li></ul></div></section></section><section class="section" id="using-snapshots-on-stratis-file-systems_managing-layered-local-storage-with-stratis"><div class="titlepage"><div><div><h2 class="title">14.4. Using snapshots on Stratis file systems</h2></div></div></div><p>
				You can use snapshots on Stratis file systems to capture file system state at arbitrary times and restore it in the future.
			</p><section class="section" id="characteristics-of-stratis-snapshots_using-snapshots-on-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.4.1. Characteristics of Stratis snapshots</h3></div></div></div><p>
					This section describes the properties and limitations of file system snapshots on Stratis.
				</p><p>
					In Stratis, a snapshot is a regular Stratis file system created as a copy of another Stratis file system. The snapshot initially contains the same file content as the original file system, but can change as the snapshot is modified. Whatever changes you make to the snapshot will not be reflected in the original file system.
				</p><p>
					The current snapshot implementation in Stratis is characterized by the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							A snapshot of a file system is another file system.
						</li><li class="listitem">
							A snapshot and its origin are not linked in lifetime. A snapshotted file system can live longer than the file system it was created from.
						</li><li class="listitem">
							A file system does not have to be mounted to create a snapshot from it.
						</li><li class="listitem">
							Each snapshot uses around half a gigabyte of actual backing storage, which is needed for the XFS log.
						</li></ul></div></section><section class="section" id="creating-a-stratis-snapshot_using-snapshots-on-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.4.2. Creating a Stratis snapshot</h3></div></div></div><p>
					This procedure creates a Stratis file system as a snapshot of an existing Stratis file system.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="14.1.4. Installing Stratis">Section 14.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis file system. See <a class="xref" href="index.html#creating-a-stratis-file-system_setting-up-stratis-file-systems" title="14.1.6. Creating a Stratis file system">Section 14.1.6, “Creating a Stratis file system”</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To create a Stratis snapshot, use:
						</p><pre class="screen"># stratis fs snapshot <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs-snapshot</span></em></span></pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div></section><section class="section" id="accessing-the-content-of-a-stratis-snapshot_using-snapshots-on-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.4.3. Accessing the content of a Stratis snapshot</h3></div></div></div><p>
					This procedure mounts a snapshot of a Stratis file system to make it accessible for read and write operations.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="14.1.4. Installing Stratis">Section 14.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis snapshot. See <a class="xref" href="index.html#creating-a-stratis-snapshot_using-snapshots-on-stratis-file-systems" title="14.4.2. Creating a Stratis snapshot">Section 14.4.2, “Creating a Stratis snapshot”</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To access the snapshot, mount it as a regular file system from the <code class="literal filename">/stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/</code> directory:
						</p><pre class="screen"># mount /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs-snapshot</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="index.html#mounting-a-stratis-file-system_setting-up-stratis-file-systems" title="14.1.7. Mounting a Stratis file system">Section 14.1.7, “Mounting a Stratis file system”</a>
						</li><li class="listitem">
							The <code class="literal">mount(8)</code> man page
						</li></ul></div></section><section class="section" id="reverting-a-stratis-file-system-to-a-previous-snapshot_using-snapshots-on-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.4.4. Reverting a Stratis file system to a previous snapshot</h3></div></div></div><p>
					This procedure reverts the content of a Stratis file system to the state captured in a Stratis snapshot.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="14.1.4. Installing Stratis">Section 14.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis snapshot. See <a class="xref" href="index.html#creating-a-stratis-snapshot_using-snapshots-on-stratis-file-systems" title="14.4.2. Creating a Stratis snapshot">Section 14.4.2, “Creating a Stratis snapshot”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Optionally, back up the current state of the file system to be able to access it later:
						</p><pre class="screen"># stratis filesystem snapshot <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs-backup</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Unmount and remove the original file system:
						</p><pre class="screen"># umount /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span>
# stratis filesystem destroy <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Create a copy of the snapshot under the name of the original file system:
						</p><pre class="screen"># stratis filesystem snapshot <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs-snapshot</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Mount the snapshot, which is now accessible with the same name as the original file system:
						</p><pre class="screen"># mount /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">mount-point</span></em></span></pre></li></ol></div><p>
					The content of the file system named <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span> is now identical to the snapshot <span class="emphasis"><em><span class="replaceable replaceable">my-fs-snapshot</span></em></span>.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div></section><section class="section" id="removing-a-stratis-snapshot_using-snapshots-on-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.4.5. Removing a Stratis snapshot</h3></div></div></div><p>
					This procedure removes a Stratis snapshot from a pool. Data on the snapshot are lost.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="14.1.4. Installing Stratis">Section 14.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis snapshot. See <a class="xref" href="index.html#creating-a-stratis-snapshot_using-snapshots-on-stratis-file-systems" title="14.4.2. Creating a Stratis snapshot">Section 14.4.2, “Creating a Stratis snapshot”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Unmount the snapshot:
						</p><pre class="screen"># umount /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs-snapshot</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Destroy the snapshot:
						</p><pre class="screen"># stratis filesystem destroy <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs-snapshot</span></em></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div></section><section class="section" id="related-information-using-snapshots-on-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.4.6. Related information</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="emphasis"><em>Stratis Storage</em></span> website: <a class="link" href="https://stratis-storage.github.io/">https://stratis-storage.github.io/</a>
						</li></ul></div></section></section><section class="section" id="removing-stratis-file-systems_managing-layered-local-storage-with-stratis"><div class="titlepage"><div><div><h2 class="title">14.5. Removing Stratis file systems</h2></div></div></div><p>
				You can remove an existing Stratis file system or a Stratis pool, destroying data on them.
			</p><section class="section" id="components-of-a-stratis-volume_removing-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.5.1. Components of a Stratis volume</h3></div></div></div><p>
					Externally, Stratis presents the following volume components in the command-line interface and the API:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">blockdev</code></span></dt><dd>
								Block devices, such as a disk or a disk partition.
							</dd><dt><span class="term"><code class="literal">pool</code></span></dt><dd><p class="simpara">
								Composed of one or more block devices.
							</p><p class="simpara">
								A pool has a fixed total size, equal to the size of the block devices.
							</p><p class="simpara">
								The pool contains most Stratis layers, such as the non-volatile data cache using the <code class="literal">dm-cache</code> target.
							</p><p class="simpara">
								Stratis creates a <code class="literal filename">/stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/</code> directory for each pool. This directory contains links to devices that represent Stratis file systems in the pool.
							</p></dd></dl></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">filesystem</code></span></dt><dd><p class="simpara">
								Each pool can contain one or more file systems, which store files.
							</p><p class="simpara">
								File systems are thinly provisioned and do not have a fixed total size. The actual size of a file system grows with the data stored on it. If the size of the data approaches the virtual size of the file system, Stratis grows the thin volume and the file system automatically.
							</p><p class="simpara">
								The file systems are formatted with XFS.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									Stratis tracks information about file systems created using Stratis that XFS is not aware of, and changes made using XFS do not automatically create updates in Stratis. Users must not reformat or reconfigure XFS file systems that are managed by Stratis.
								</p></div></div><p class="simpara">
								Stratis creates links to file systems at the <code class="literal filename">/stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></code> path.
							</p></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Stratis uses many Device Mapper devices, which show up in <code class="literal">dmsetup</code> listings and the <code class="literal filename">/proc/partitions</code> file. Similarly, the <code class="literal">lsblk</code> command output reflects the internal workings and layers of Stratis.
					</p></div></div></section><section class="section" id="removing-a-stratis-file-system_removing-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.5.2. Removing a Stratis file system</h3></div></div></div><p>
					This procedure removes an existing Stratis file system. Data stored on it are lost.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="14.1.4. Installing Stratis">Section 14.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis file system. See <a class="xref" href="index.html#creating-a-stratis-file-system_setting-up-stratis-file-systems" title="14.1.6. Creating a Stratis file system">Section 14.1.6, “Creating a Stratis file system”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Unmount the file system:
						</p><pre class="screen"># umount /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Destroy the file system:
						</p><pre class="screen"># stratis filesystem destroy <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Verify that the file system no longer exists:
						</p><pre class="screen"># stratis filesystem list <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div></section><section class="section" id="removing-a-stratis-pool_removing-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.5.3. Removing a Stratis pool</h3></div></div></div><p>
					This procedure removes an existing Stratis pool. Data stored on it are lost.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Stratis is installed. See <a class="xref" href="index.html#installing-stratis_setting-up-stratis-file-systems" title="14.1.4. Installing Stratis">Section 14.1.4, “Installing Stratis”</a>.
						</li><li class="listitem">
							The <code class="literal">stratisd</code> service is running.
						</li><li class="listitem">
							You have created a Stratis pool. See <a class="xref" href="index.html#creating-a-stratis-pool_setting-up-stratis-file-systems" title="14.1.5. Creating a Stratis pool">Section 14.1.5, “Creating a Stratis pool”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							List file systems on the pool:
						</p><pre class="screen"># stratis filesystem list <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Unmount all file systems on the pool:
						</p><pre class="screen"># umount /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs-1</span></em></span> \
         /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs-2</span></em></span> \
         /stratis/<span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span>/<span class="emphasis"><em><span class="replaceable replaceable">my-fs-n</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Destroy the file systems:
						</p><pre class="screen"># stratis filesystem destroy <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs-1</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">my-fs-2</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Destroy the pool:
						</p><pre class="screen"># stratis pool destroy <span class="emphasis"><em><span class="replaceable replaceable">my-pool</span></em></span></pre></li><li class="listitem"><p class="simpara">
							Verify that the pool no longer exists:
						</p><pre class="screen"># stratis pool list</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">stratis(8)</code> man page
						</li></ul></div></section><section class="section" id="related-information-removing-stratis-file-systems"><div class="titlepage"><div><div><h3 class="title">14.5.4. Related information</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="emphasis"><em>Stratis Storage</em></span> website: <a class="link" href="https://stratis-storage.github.io/">https://stratis-storage.github.io/</a>
						</li></ul></div></section></section></section><section class="chapter" id="setting-up-a-remote-diskless-system_managing-storage-devices"><div class="titlepage"><div><div><h1 class="title">Chapter 15. Setting up a remote diskless system</h1></div></div></div><p>
			The following sections outline the necessary procedures for deploying remote diskless systems in a network environment. It is useful to implement this solution when you require multiple clients with identical configuration. Also, that will save the cost for hard drives for the number of the clients. Assuming, the server has Red Hat Enterprise Linux 8 operating system installed.
		</p><div class="figure" id="remote-diskless-system"><p class="title"><strong>Figure 15.1. Remote diskless system settings diagram</strong></p><div class="figure-contents"><div class="mediaobject"><img src="remote-diskless-system-schema.png" alt="Remote diskless system settings diagram"/></div></div></div><p>
			Note, that gateway might be configured on a separate server.
		</p><section class="section" id="preparing-an-environment-for-the-remote-diskless-system_setting-up-a-remote-diskless-system"><div class="titlepage"><div><div><h2 class="title">15.1. Preparing an environment for the remote diskless system</h2></div></div></div><p>
				This procedure describes the preparation of the environment for the remote diskless system.
			</p><p>
				Remote diskless system booting requires both a <code class="literal command">tftp</code> service (provided by <code class="literal">tftp-server</code>) and a DHCP service (provided by <code class="literal">dhcp</code>). The <code class="literal command">tftp</code> service is used to retrieve kernel image and <code class="literal">initrd</code> over the network via the PXE loader.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Install the following packages:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<code class="literal">tftp-server</code>
							</li><li class="listitem">
								<code class="literal">xinetd</code>
							</li><li class="listitem">
								<code class="literal">dhcp-server</code>
							</li><li class="listitem">
								<code class="literal">syslinux</code>
							</li></ul></div></li><li class="listitem">
						Set up the network connection.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal">dracut-network</code> package:
					</p><pre class="literallayout"># yum install dracut-network</pre></li><li class="listitem"><p class="simpara">
						After installing the <code class="literal">dracut-network</code> package, add the following line to <code class="literal">/etc/dracut.conf</code>:
					</p><pre class="literallayout">add_dracutmodules+="nfs"</pre></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Some RPM packages have started using file capabilities (such as <code class="literal command">setcap</code> and <code class="literal command">getcap</code>). However, NFS does not currently support these so attempting to install or update any packages that use file capabilities will fail.
				</p></div></div><p>
				At this point you have the server ready to continue with remote diskless system implementation.
			</p></section><section class="section" id="configuring-a-tftp-service-for-diskless-client_setting-up-a-remote-diskless-system"><div class="titlepage"><div><div><h2 class="title">15.2. Configuring a tftp service for diskless clients</h2></div></div></div><p>
				This procedure describes how to configure a tftp service for a diskless client.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Install the necessary packages. See prerequisites in <a class="xref" href="index.html#preparing-an-environment-for-the-remote-diskless-system_setting-up-a-remote-diskless-system" title="15.1. Preparing an environment for the remote diskless system">Section 15.1, “Preparing an environment for the remote diskless system”</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>To Configure <code class="literal command">tftp</code></strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable PXE booting over the network:
					</p><pre class="literallayout"><code class="literal">#</code> systemctl enable --now tftp</pre></li><li class="listitem"><p class="simpara">
						The <code class="literal command">tftp</code> root directory (<code class="literal command">chroot</code>) is located in <code class="literal">/var/lib/tftpboot</code>. Copy <code class="literal">/usr/share/syslinux/pxelinux.0</code> to <code class="literal">/var/lib/tftpboot/</code>:
					</p><pre class="literallayout"><code class="literal">#</code> cp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/</pre></li><li class="listitem"><p class="simpara">
						Create a <code class="literal">pxelinux.cfg</code> directory inside the <code class="literal command">tftp</code> root directory:
					</p><pre class="literallayout"><code class="literal">#</code> mkdir -p /var/lib/tftpboot/pxelinux.cfg/</pre></li><li class="listitem">
						After configuring <code class="literal command">tftp</code> for diskless clients, configure DHCP, NFS, and the exported file system accordingly.
					</li></ol></div></section><section class="section" id="configuring-dhcp-for-diskless-clients_setting-up-a-remote-diskless-system"><div class="titlepage"><div><div><h2 class="title">15.3. Configuring DHCP server for diskless clients</h2></div></div></div><p>
				This procedure describes how to configure DHCP for a diskless system.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Install the necessary packages. See prerequisites in <a class="xref" href="index.html#preparing-an-environment-for-the-remote-diskless-system_setting-up-a-remote-diskless-system" title="15.1. Preparing an environment for the remote diskless system">Section 15.1, “Preparing an environment for the remote diskless system”</a>.
					</li><li class="listitem">
						Configure <code class="literal command">tftp</code>. See <a class="xref" href="index.html#configuring-a-tftp-service-for-diskless-client_setting-up-a-remote-diskless-system" title="15.2. Configuring a tftp service for diskless clients">Section 15.2, “Configuring a tftp service for diskless clients”</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Set up a DHCP server and enable PXE booting by adding the following configuration to <code class="literal">/etc/dhcp/dhcpd.conf</code>:
					</p><pre class="literallayout">allow booting;
allow bootp;
subnet 192.168.205.0 netmask 255.255.255.0 {
  pool
  {
    range 192.168.205.10 192.168.205.25;
  }

  option subnet-mask 255.255.255.0;
  option routers 192.168.205.1;
}
class "pxeclients" {
   match if substring(option vendor-class-identifier, 0, 9) = "PXEClient";
   next-server server-ip;
   filename "pxelinux.0";
}</pre><p class="simpara">
						This configuration will not boot over UEFI. To perform installation for UEFI, follow the procedure from this documentation: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/performing_an_advanced_rhel_installation/index#configuring-a-tftp-server-for-uefi-based-clients_preparing-for-a-network-install">Configuring a TFTP server for UEFI-based clients</a>. Also, note that the <code class="literal">/etc/dhcp/dhcpd.conf</code> is an example file.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When <code class="literal command">libvirt</code> virtual machines are used as a diskless client, <code class="literal command">libvirt</code> provides the DHCP service and the stand alone DHCP server is not used. In this situation, network booting must be enabled with the <code class="literal command">bootp file='<span class="emphasis"><em>filename</em></span>'</code> option in the <code class="literal command">libvirt</code> network configuration, <code class="literal command">virsh net-edit</code>.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Enable <code class="literal command">dhcpd.service</code> by entering the following command:
					</p><pre class="literallayout"># systemctl enable --now dhcpd.service</pre></li></ol></div></section><section class="section" id="configuring-an-exported-file-system-for-diskless-clients_setting-up-a-remote-diskless-system"><div class="titlepage"><div><div><h2 class="title">15.4. Configuring an exported file system for diskless clients</h2></div></div></div><p>
				This procedure describes how to configure an exported file system for diskless client.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Install the necessary packages. See prerequisites in <a class="xref" href="index.html#preparing-an-environment-for-the-remote-diskless-system_setting-up-a-remote-diskless-system" title="15.1. Preparing an environment for the remote diskless system">Section 15.1, “Preparing an environment for the remote diskless system”</a>.
					</li><li class="listitem">
						Configure <code class="literal command">tftp</code>. See <a class="xref" href="index.html#configuring-a-tftp-service-for-diskless-client_setting-up-a-remote-diskless-system" title="15.2. Configuring a tftp service for diskless clients">Section 15.2, “Configuring a tftp service for diskless clients”</a>.
					</li><li class="listitem">
						Configure DHCP. See <a class="xref" href="index.html#configuring-dhcp-for-diskless-clients_setting-up-a-remote-diskless-system" title="15.3. Configuring DHCP server for diskless clients">Section 15.3, “Configuring DHCP server for diskless clients”</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Configure the NFS server to export the root directory by adding it to <code class="literal">/etc/exports</code>. For the instructions see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_file_systems/exporting-nfs-shares_managing-file-systems#nfs-server-configuration_exporting-nfs-shares">NFS server configuration</a>.
					</li><li class="listitem"><p class="simpara">
						To accommodate completely diskless clients, the root directory should contain a complete Red Hat Enterprise Linux installation. You can either install a new base system or clone an existing installation:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To install Red Hat Enterprise Linux to the exported location, use the <code class="literal">yum</code> utility with the <code class="literal option">--installroot</code> option:
							</p><pre class="literallayout"><code class="literal">#</code> yum install @Base kernel dracut-network nfs-utils \
      --installroot=<span class="emphasis"><em>exported-root-directory</em></span> --releasever=/</pre></li><li class="listitem"><p class="simpara">
								To synchronize with a running system, use the <code class="literal">rsync</code> utility:
							</p><pre class="literallayout"><code class="literal">#</code> rsync -a -e ssh --exclude='/proc/' --exclude='/sys/' \
       <span class="emphasis"><em>example.com</em></span>:/<span class="emphasis"><em>exported-root-directory</em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										Replace <span class="emphasis"><em>hostname.com</em></span> with the hostname of the running system with which to synchronize via <code class="literal">rsync</code>.
									</li><li class="listitem"><p class="simpara">
										Replace <span class="emphasis"><em>exported-root-directory</em></span> with the path to the exported file system.
									</p><p class="simpara">
										Note, that for this option you must have a separate existing running system, which you will clone to the server by the command above.
									</p></li></ul></div></li></ul></div></li></ol></div><p>
				The file system to be exported still needs to be configured further before it can be used by diskless clients. To do this, perform the following procedure:
			</p><div class="orderedlist"><p class="title"><strong>Configure File System</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Select the kernel that diskless clients should use (<code class="literal">vmlinuz-<span class="emphasis"><em>kernel-version</em></span></code>) and copy it to the <code class="literal command">tftp</code> boot directory:
					</p><pre class="literallayout"><code class="literal">#</code> cp /<span class="emphasis"><em>exported-root-directory</em></span>/boot/vmlinuz-kernel-version /var/lib/tftpboot/</pre></li><li class="listitem"><p class="simpara">
						Create the <code class="literal">initrd</code> (that is, <code class="literal">initramfs-<span class="emphasis"><em>kernel-version</em></span>.img</code>) with NFS support:
					</p><pre class="literallayout"><code class="literal">#</code> dracut --add nfs initramfs-kernel-version.img kernel-version</pre></li><li class="listitem"><p class="simpara">
						Change file permissions for <code class="literal">initrd</code> to 644 using the following command:
					</p><pre class="literallayout"><code class="literal">#</code> chmod 644 /<span class="emphasis"><em>exported-root-directory</em></span>/boot/initramfs-&lt;kernel-version&gt;.img</pre><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							If you do not change the initrd’s file permissions, the <code class="literal command">pxelinux.0</code> boot loader will fail with a "file not found" error.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Copy the resulting <code class="literal">initramfs-<span class="emphasis"><em>kernel-version</em></span>.img</code> into the <code class="literal command">tftp</code> boot directory:
					</p><pre class="literallayout"><code class="literal">#</code> cp /<span class="emphasis"><em>exported-root-directory</em></span>/boot/initramfs-kernel-version.img /var/lib/tftpboot/</pre></li><li class="listitem"><p class="simpara">
						Edit the default boot configuration to use the <code class="literal">initrd</code> and kernel in the <code class="literal">/var/lib/tftpboot/</code> directory. This configuration should instruct the diskless client’s root to mount the exported file system (<code class="literal"><span class="emphasis"><em>/exported-root-directory</em></span></code>) as read-write. Add the following configuration in the <code class="literal">/var/lib/tftpboot/pxelinux.cfg/default</code> file:
					</p><pre class="literallayout">default rhel8

label rhel8
  kernel vmlinuz-<span class="emphasis"><em>kernel-version</em></span>
  append initrd=initramfs-<span class="emphasis"><em>kernel-version</em></span>.img root=nfs:<span class="emphasis"><em>server-ip</em></span>:/<span class="emphasis"><em>exported-root-directory</em></span> rw</pre><p class="simpara">
						Replace <code class="literal"><span class="emphasis"><em>server-ip</em></span></code> with the IP address of the host machine on which the <code class="literal command">tftp</code> and DHCP services reside.
					</p></li><li class="listitem">
						Reboot the NFS server.
					</li></ol></div><p>
				The NFS share is now ready for exporting to diskless clients. These clients can boot over the network via PXE.
			</p></section><section class="section" id="re-configuring-a-remote-diskless-system_setting-up-a-remote-diskless-system"><div class="titlepage"><div><div><h2 class="title">15.5. Re-configuring a remote diskless system</h2></div></div></div><p>
				You need to re-configure the system in some cases. The steps below show how to change the password for a user, how to install software on a system and describe how to split system into a <span class="strong strong"><strong>/usr</strong></span> that is in read-only mode and a <span class="strong strong"><strong>/var</strong></span> that is in read-write mode.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal option">no_root_squash</code> option is enabled in the exported file system.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To change the user password, follow the steps below:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Change the command line to <span class="emphasis"><em>/exported/root/directory</em></span>:
							</p><pre class="literallayout"># chroot <span class="emphasis"><em>/exported/root/directory</em></span> /bin/bash</pre></li><li class="listitem"><p class="simpara">
								Change the password for the user you want:
							</p><pre class="literallayout"># passwd <span class="emphasis"><em>&lt;username&gt;</em></span></pre><p class="simpara">
								Replace the <span class="emphasis"><em>&lt;username&gt;</em></span> with a real user to whom you want to change the password.
							</p></li><li class="listitem"><p class="simpara">
								Exit the command line:
							</p><pre class="literallayout"># exit</pre></li></ul></div></li><li class="listitem"><p class="simpara">
						To install software to a remote diskless system, use the following command:
					</p><pre class="literallayout"># yum install <span class="emphasis"><em>&lt;package&gt;</em></span> --installroot=/exported/root/directory --releasever=/ --config /etc/dnf/dnf.conf --setopt=reposdir=/etc/yum.repos.d/</pre><p class="simpara">
						Replace <span class="emphasis"><em>&lt;package&gt;</em></span> with the actual package you want to install.
					</p></li><li class="listitem">
						To split a remote diskless system into a <span class="strong strong"><strong>/usr</strong></span> and a <span class="strong strong"><strong>/var</strong></span> you must configure two separate exports. Read <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_file_systems/exporting-nfs-shares_managing-file-systems#nfs-server-configuration_exporting-nfs-shares">NFS server configuration</a> documentation for details.
					</li></ol></div></section><section class="section" id="the-most-common-issues-with-loading-a-remote-diskless-system_setting-up-a-remote-diskless-system"><div class="titlepage"><div><div><h2 class="title">15.6. The most common issues with loading a remote diskless system</h2></div></div></div><p>
				The following section describes the issues during loading the remote diskless system on a diskless client and shows the possible solution for them.
			</p><section class="section" id="the_client_does_not_get_an_ip_address"><div class="titlepage"><div><div><h3 class="title">15.6.1. The client does not get an IP address</h3></div></div></div><p>
					To troubleshoot that problem:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Check if the DHCP service is enabled on the server.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Check if the <code class="literal">dhcp.service</code> is running:
								</p><pre class="literallayout"># systemctl status dhcpd.service</pre></li><li class="listitem"><p class="simpara">
									If the <code class="literal">dhcp.service</code> is inactive, you must enable and start it:
								</p><pre class="literallayout"># systemctl enable dhcpd.service
# systemctl start dhcpd.service</pre><p class="simpara">
									Reboot the diskless client.
								</p></li></ul></div></li><li class="listitem">
							If the problem remains, check the DHCP configurational file <span class="emphasis"><em>/etc/dhcp/dhcpd.conf</em></span> on a server. For more information, see <a class="xref" href="index.html#configuring-dhcp-for-diskless-clients_setting-up-a-remote-diskless-system" title="15.3. Configuring DHCP server for diskless clients">Section 15.3, “Configuring DHCP server for diskless clients”</a>.
						</li><li class="listitem"><p class="simpara">
							Check if the Firewall ports are opened.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Check if the <code class="literal">tftp.service</code> is listed in active services:
								</p><pre class="literallayout"># firewall-cmd --get-active-zones
# firewall-cmd --info-zone=public</pre></li><li class="listitem"><p class="simpara">
									If the <code class="literal">tftp.service</code> is not listed in active services, add it to the list:
								</p><pre class="literallayout"># firewall-cmd --add-service=tftp</pre></li><li class="listitem"><p class="simpara">
									Check if the <code class="literal">nfs.service</code> is listed in active services:
								</p><pre class="literallayout"># firewall-cmd --get-active-zones
# firewall-cmd --info-zone=public</pre></li><li class="listitem"><p class="simpara">
									If the <code class="literal">nfs.service</code> is not listed in active services, add it to the list:
								</p><pre class="literallayout"># firewall-cmd --add-service=nfs</pre></li></ul></div></li></ol></div></section><section class="section" id="the_files_are_not_available_during_the_booting_a_remote_diskless_system"><div class="titlepage"><div><div><h3 class="title">15.6.2. The files are not available during the booting a remote diskless system</h3></div></div></div><p>
					To troubleshoot this problem:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Check if the file is in place. The location on a server <span class="emphasis"><em>/var/lib/tftpboot/</em></span>.
						</li><li class="listitem"><p class="simpara">
							If the file is in place, check its permissions:
						</p><pre class="literallayout"># chmod 644 pxelinux.0</pre></li><li class="listitem">
							Check if the Firewall ports are opened.
						</li></ol></div></section><section class="section" id="system_boot_failed_after_loading_kernel_initrd"><div class="titlepage"><div><div><h3 class="title">15.6.3. System boot failed after loading kernel/initrd</h3></div></div></div><p>
					To troubleshoot this problem:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Check if NFS service is enabled on a server.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Check if <code class="literal">nfs.service</code> is running:
								</p><pre class="literallayout"># systemctl status nfs.service</pre></li><li class="listitem"><p class="simpara">
									If the <code class="literal">nfs.service</code> is inactive, you must enable and start it:
								</p><pre class="literallayout"># systemctl enable nfs.service
# systemctl start nfs.service</pre></li></ul></div></li><li class="listitem">
							Check if the parameters are correct in <span class="emphasis"><em>pxelinux.cfg</em></span>. For more details, see <a class="xref" href="index.html#configuring-an-exported-file-system-for-diskless-clients_setting-up-a-remote-diskless-system" title="15.4. Configuring an exported file system for diskless clients">Section 15.4, “Configuring an exported file system for diskless clients”</a>.
						</li><li class="listitem">
							Check if the Firewall ports are opened.
						</li></ol></div></section></section></section><section class="chapter" id="managing-raid_managing-storage-devices"><div class="titlepage"><div><div><h1 class="title">Chapter 16. Managing RAID</h1></div></div></div><p>
			This chapter describes Redundant Array of Independent Disks (RAID). User can use RAID to store data across multiple drives. It also helps to avoid data loss if a drive has failed.
		</p><section class="section" id="redundant-array-of-independent-disks-raid_managing-raid"><div class="titlepage"><div><div><h2 class="title">16.1. Redundant array of independent disks (RAID)</h2></div></div></div><p>
				The basic idea behind RAID is to combine multiple devices, such as <span class="strong strong"><strong>HDD</strong></span>, <span class="strong strong"><strong>SSD</strong></span> or <span class="strong strong"><strong>NVMe</strong></span>, into an array to accomplish performance or redundancy goals not attainable with one large and expensive drive. This array of devices appears to the computer as a single logical storage unit or drive.
			</p><p>
				RAID allows information to be spread across several devices. RAID uses techniques such as <span class="emphasis"><em>disk striping</em></span> (RAID Level 0), <span class="emphasis"><em>disk mirroring</em></span> (RAID Level 1), and <span class="emphasis"><em>disk striping with parity</em></span> (RAID Levels 4, 5 and 6) to achieve redundancy, lower latency, increased bandwidth, and maximized ability to recover from hard disk crashes.
			</p><p>
				RAID distributes data across each device in the array by breaking it down into consistently-sized chunks (commonly 256K or 512k, although other values are acceptable). Each chunk is then written to a hard drive in the RAID array according to the RAID level employed. When the data is read, the process is reversed, giving the illusion that the multiple devices in the array are actually one large drive.
			</p><p>
				System Administrators and others who manage large amounts of data would benefit from using RAID technology. Primary reasons to deploy RAID include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Enhances speed
					</li><li class="listitem">
						Increases storage capacity using a single virtual disk
					</li><li class="listitem">
						Minimizes data loss from disk failure
					</li><li class="listitem">
						RAID layout and level online conversion
					</li></ul></div></section><section class="section" id="raid-types_managing-raid"><div class="titlepage"><div><div><h2 class="title">16.2. RAID types</h2></div></div></div><p>
				There are three possible RAID approaches: Firmware RAID, Hardware RAID, and Software RAID.
			</p><p>
				Firmware RAID
			</p><p>
				<span class="emphasis"><em>Firmware RAID</em></span>, also known as ATARAID, is a type of software RAID where the RAID sets can be configured using a firmware-based menu. The firmware used by this type of RAID also hooks into the BIOS, allowing you to boot from its RAID sets. Different vendors use different on-disk metadata formats to mark the RAID set members. The Intel Matrix RAID is a good example of a firmware RAID system.
			</p><p>
				Hardware RAID
			</p><p>
				The hardware-based array manages the RAID subsystem independently from the host. It may present multiple devices per RAID array to the host.
			</p><p>
				Hardware RAID devices may be internal or external to the system. Internal devices commonly consisting of a specialized controller card that handles the RAID tasks transparently to the operating system. External devices commonly connect to the system via SCSI, Fibre Channel, iSCSI, InfiniBand, or other high speed network interconnect and present volumes such as logical units to the system.
			</p><p>
				RAID controller cards function like a SCSI controller to the operating system, and handle all the actual drive communications. The user plugs the drives into the RAID controller (just like a normal SCSI controller) and then adds them to the RAID controller’s configuration. The operating system will not be able to tell the difference.
			</p><p>
				Software RAID
			</p><p>
				Software RAID implements the various RAID levels in the kernel block device code. It offers the cheapest possible solution, as expensive disk controller cards or hot-swap chassis <a href="index.html#ftn.idm140163622001712" class="footnote"><sup class="footnote" id="idm140163622001712">[1]</sup></a> are not required. Software RAID also works with any block storage which are supported by the Linux kernel, such as <span class="strong strong"><strong>SATA</strong></span>, <span class="strong strong"><strong>SCSI</strong></span>, and <span class="strong strong"><strong>NVMe</strong></span>. With today’s faster CPUs, Software RAID also generally outperforms Hardware RAID, unless you use high-end storage devices.
			</p><p>
				The Linux kernel contains a <span class="emphasis"><em>multiple device</em></span> (MD) driver that allows the RAID solution to be completely hardware independent. The performance of a software-based array depends on the server CPU performance and load.
			</p><p>
				Key features of the Linux software RAID stack:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Multithreaded design
					</li><li class="listitem">
						Portability of arrays between Linux machines without reconstruction
					</li><li class="listitem">
						Backgrounded array reconstruction using idle system resources
					</li><li class="listitem">
						Hot-swappable drive support
					</li><li class="listitem">
						Automatic CPU detection to take advantage of certain CPU features such as streaming Single Instruction Multiple Data (SIMD) support
					</li><li class="listitem">
						Automatic correction of bad sectors on disks in an array
					</li><li class="listitem">
						Regular consistency checks of RAID data to ensure the health of the array
					</li><li class="listitem">
						Proactive monitoring of arrays with email alerts sent to a designated email address on important events
					</li><li class="listitem"><p class="simpara">
						Write-intent bitmaps which drastically increase the speed of resync events by allowing the kernel to know precisely which portions of a disk need to be resynced instead of having to resync the entire array after a system crash
					</p><p class="simpara">
						Note, that <span class="emphasis"><em>resync</em></span> is a process to synchronize the data over the devices in the existing RAID to achieve redundancy
					</p></li><li class="listitem">
						Resync checkpointing so that if you reboot your computer during a resync, at startup the resync will pick up where it left off and not start all over again
					</li><li class="listitem">
						The ability to change parameters of the array after installation, which is called <span class="emphasis"><em>reshaping</em></span>. For example, you can grow a 4-disk RAID5 array to a 5-disk RAID5 array when you have a new device to add. This grow operation is done live and does not require you to reinstall on the new array
					</li><li class="listitem">
						Reshaping supports changing the number of devices, the RAID algorithm or size of the RAID array type, such as RAID4, RAID5, RAID6 or RAID10
					</li><li class="listitem">
						Takeover supports RAID level converting, such as RAID0 to RAID6
					</li></ul></div><div class="footnotes"><br/><hr width="100" align="left"/><div id="ftn.idm140163622001712" class="footnote"><div class="para"><a href="index.html#idm140163622001712" class="simpara"><sup class="simpara">[1] </sup></a>
					A hot-swap chassis allows you to remove a hard drive without having to power-down your system.
				</div></div></div></section><section class="section" id="raid-levels-and-linear-support_managing-raid"><div class="titlepage"><div><div><h2 class="title">16.3. RAID levels and linear support</h2></div></div></div><p>
				RAID supports various configurations, including levels 0, 1, 4, 5, 6, 10, and linear. These RAID types are defined as follows:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Level 0</span></dt><dd><p class="simpara">
							RAID level 0, often called "striping," is a performance-oriented striped data mapping technique. This means the data being written to the array is broken down into stripes and written across the member disks of the array, allowing high I/O performance at low inherent cost but provides no redundancy.
						</p><p class="simpara">
							Many RAID level 0 implementations will only stripe the data across the member devices up to the size of the smallest device in the array. This means that if you have multiple devices with slightly different sizes, each device will get treated as though it is the same size as the smallest drive. Therefore, the common storage capacity of a level 0 array is equal to the capacity of the smallest member disk in a Hardware RAID or the capacity of smallest member partition in a Software RAID multiplied by the number of disks or partitions in the array.
						</p></dd><dt><span class="term">Level 1</span></dt><dd><p class="simpara">
							RAID level 1, or "mirroring," has been used longer than any other form of RAID. Level 1 provides redundancy by writing identical data to each member disk of the array, leaving a "mirrored" copy on each disk. Mirroring remains popular due to its simplicity and high level of data availability. Level 1 operates with two or more disks, and provides very good data reliability and improves performance for read-intensive applications but at a relatively high cost. <a href="index.html#ftn.idm140163619811424" class="footnote"><sup class="footnote" id="idm140163619811424">[2]</sup></a>
						</p><p class="simpara">
							The storage capacity of the level 1 array is equal to the capacity of the smallest mirrored hard disk in a Hardware RAID or the smallest mirrored partition in a Software RAID. Level 1 redundancy is the highest possible among all RAID types, with the array being able to operate with only a single disk present.
						</p></dd><dt><span class="term">Level 4</span></dt><dd><p class="simpara">
							Level 4 uses parity <a href="index.html#ftn.idm140163630419840" class="footnote"><sup class="footnote" id="idm140163630419840">[3]</sup></a> concentrated on a single disk drive to protect data. Because the dedicated parity disk represents an inherent bottleneck on all write transactions to the RAID array, level 4 is seldom used without accompanying technologies such as write-back caching, or in specific circumstances where the system administrator is intentionally designing the software RAID device with this bottleneck in mind (such as an array that will have little to no write transactions once the array is populated with data). RAID level 4 is so rarely used that it is not available as an option in Anaconda. However, it could be created manually by the user if truly needed.
						</p><p class="simpara">
							The storage capacity of Hardware RAID level 4 is equal to the capacity of the smallest member partition multiplied by the number of partitions <span class="emphasis"><em>minus one</em></span>. Performance of a RAID level 4 array will always be asymmetrical, meaning reads will outperform writes. This is because writes consume extra CPU and main memory bandwidth when generating parity, and then also consume extra bus bandwidth when writing the actual data to disks because you are writing not only the data, but also the parity. Reads need only read the data and not the parity unless the array is in a degraded state. As a result, reads generate less traffic to the drives and across the buses of the computer for the same amount of data transfer under normal operating conditions.
						</p></dd><dt><span class="term">Level 5</span></dt><dd><p class="simpara">
							This is the most common type of RAID. By distributing parity across all of an array’s member disk drives, RAID level 5 eliminates the write bottleneck inherent in level 4. The only performance bottleneck is the parity calculation process itself. With modern CPUs and Software RAID, that is usually not a bottleneck at all since modern CPUs can generate parity very fast. However, if you have a sufficiently large number of member devices in a software RAID5 array such that the combined aggregate data transfer speed across all devices is high enough, then this bottleneck can start to come into play.
						</p><p class="simpara">
							As with level 4, level 5 has asymmetrical performance, which reads substantially outperforming writes. The storage capacity of RAID level 5 is calculated the same way as with level 4.
						</p></dd><dt><span class="term">Level 6</span></dt><dd><p class="simpara">
							This is a common level of RAID when data redundancy and preservation, and not performance, are the paramount concerns, but where the space inefficiency of level 1 is not acceptable. Level 6 uses a complex parity scheme to be able to recover from the loss of any two drives in the array. This complex parity scheme creates a significantly higher CPU burden on software RAID devices and also imposes an increased burden during write transactions. As such, level 6 is considerably more asymmetrical in performance than levels 4 and 5.
						</p><p class="simpara">
							The total capacity of a RAID level 6 array is calculated similarly to RAID level 5 and 4, except that you must subtract 2 devices (instead of 1) from the device count for the extra parity storage space.
						</p></dd><dt><span class="term">Level 10</span></dt><dd><p class="simpara">
							This RAID level attempts to combine the performance advantages of level 0 with the redundancy of level 1. It also helps to alleviate some of the space wasted in level 1 arrays with more than 2 devices. With level 10, it is possible for instance to create a 3-drive array configured to store only 2 copies of each piece of data, which then allows the overall array size to be 1.5 times the size of the smallest devices instead of only equal to the smallest device (like it would be with a 3-device, level 1 array). This avoids CPU process usage to calculate parity like with RAID level 6, but it is less space efficient.
						</p><p class="simpara">
							The creation of RAID level 10 is not supported during installation. It is possible to create one manually using the command line <code class="literal command">mdadm</code> tool. For more information on the options and their respective performance trade-offs, see <code class="literal command">man md</code>.
						</p></dd><dt><span class="term">Linear RAID</span></dt><dd>
							Linear RAID is a grouping of drives to create a larger virtual drive. In linear RAID, the chunks are allocated sequentially from one member drive, going to the next drive only when the first is completely filled. This grouping provides no performance benefit, as it is unlikely that any I/O operations split between member drives. Linear RAID also offers no redundancy and decreases reliability; if any one member drive fails, the entire array cannot be used. The capacity is the total of all member disks.
						</dd></dl></div><div class="footnotes"><br/><hr width="100" align="left"/><div id="ftn.idm140163619811424" class="footnote"><div class="para"><a href="index.html#idm140163619811424" class="simpara"><sup class="simpara">[2] </sup></a>
								RAID level 1 comes at a high cost because you write the same information to all of the disks in the array, provides data reliability, but in a much less space-efficient manner than parity based RAID levels such as level 5. However, this space inefficiency comes with a performance benefit: parity-based RAID levels consume considerably more CPU power in order to generate the parity while RAID level 1 simply writes the same data more than once to the multiple RAID members with very little CPU overhead. As such, RAID level 1 can outperform the parity-based RAID levels on machines where software RAID is employed and CPU resources on the machine are consistently taxed with operations other than RAID activities.
							</div></div><div id="ftn.idm140163630419840" class="footnote"><div class="para"><a href="index.html#idm140163630419840" class="simpara"><sup class="simpara">[3] </sup></a>
								Parity information is calculated based on the contents of the rest of the member disks in the array. This information can then be used to reconstruct data when one disk in the array fails. The reconstructed data can then be used to satisfy I/O requests to the failed disk before it is replaced and to repopulate the failed disk after it has been replaced.
							</div></div></div></section><section class="section" id="linux-raid-subsystems_managing-raid"><div class="titlepage"><div><div><h2 class="title">16.4. Linux RAID subsystems</h2></div></div></div><p>
				The following subsystems compose RAID in Linux:
			</p><section class="section" id="linux_hardware_raid_controller_drivers"><div class="titlepage"><div><div><h3 class="title">16.4.1. Linux Hardware RAID Controller Drivers</h3></div></div></div><p>
					Hardware RAID controllers have no specific RAID subsystem in Linux. Because they use special RAID chipsets, hardware RAID controllers come with their own drivers; these drivers allow the system to detect the RAID sets as regular disks.
				</p></section><section class="section" id="mdraid"><div class="titlepage"><div><div><h3 class="title">16.4.2. mdraid</h3></div></div></div><p>
					The <code class="literal command">mdraid</code> subsystem was designed as a software RAID solution for Linux; it is also the preferred solution for software RAID under Linux. This subsystem uses its own metadata format, generally referred to as native MD metadata.
				</p><p>
					<code class="literal command">mdraid</code> also supports other metadata formats, known as external metadata. Red Hat Enterprise Linux 8 uses <code class="literal command">mdraid</code> with external metadata to access ISW / IMSM (Intel firmware RAID) sets and SNIA DDF. <code class="literal command">mdraid</code> sets are configured and controlled through the <code class="literal command">mdadm</code> utility.
				</p></section></section><section class="section" id="creating-software-raid_managing-raid"><div class="titlepage"><div><div><h2 class="title">16.5. Creating software RAID</h2></div></div></div><p>
				Follow the steps in this procedure to create a Redundant Arrays of Independent Disks (RAID) device. RAID devices are constructed from multiple storage devices that are arranged to provide increased performance and, in some configurations, greater fault tolerance.
			</p><p>
				A RAID device is created in one step and disks are added or removed as necessary. You can configure one RAID partition for each physical disk in your system, so the number of disks available to the installation program determines the levels of RAID device available. For example, if your system has two hard drives, you cannot create a RAID 10 device, as it requires a minimum of three separate disks.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					On IBM Z, the storage subsystem uses RAID transparently. You do not have to configure software RAID manually.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have selected two or more disks for installation before RAID configuration options are visible. At least two disks are required to create a RAID device.
					</li><li class="listitem">
						You have created a mount point. By configuring a mount point, you configure the RAID device.
					</li><li class="listitem">
						You have selected the <code class="literal GUI">Custom</code> radio button on the <code class="literal GUI">Installation Destination</code> window.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						From the left pane of the <span class="strong strong"><strong>Manual Partitioning</strong></span> window, select the required partition.
					</li><li class="listitem">
						Under the <span class="strong strong"><strong>Device(s)</strong></span> section, click <span class="strong strong"><strong>Modify</strong></span>. The <span class="strong strong"><strong>Configure Mount Point</strong></span> dialog box opens.
					</li><li class="listitem">
						Select the disks that you want to include in the RAID device and click <span class="strong strong"><strong>Select</strong></span>.
					</li><li class="listitem">
						Click the <span class="strong strong"><strong>Device Type</strong></span> drop-down menu and select <span class="strong strong"><strong>RAID</strong></span>.
					</li><li class="listitem">
						Click the <span class="strong strong"><strong>File System</strong></span> drop-down menu and select your preferred file system type.
					</li><li class="listitem">
						Click the <span class="strong strong"><strong>RAID Level</strong></span> drop-down menu and select your preferred level of RAID.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Update Settings</strong></span> to save your changes.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Done</strong></span> to apply the settings and return to the <span class="strong strong"><strong>Installation Summary</strong></span> window.
					</li></ol></div><p>
				A message is displayed at the bottom of the window if the specified RAID level requires more disks.
			</p></section><section class="section" id="creating-software-raid-after-installation_managing-raid"><div class="titlepage"><div><div><h2 class="title">16.6. Creating software RAID after installation</h2></div></div></div><p>
				This procedure describes how to create a software Redundant Array of Independent Disks (RAID) on an existing system using <code class="literal command">mdadm</code> utility.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal package">mdadm</code> package installed.
					</li><li class="listitem">
						Two or more partitions exist on your system. For detailed instruction, see <a class="xref" href="index.html#assembly_creating-a-partition_assembly_getting-started-with-partitions" title="2.3. Creating a partition">Section 2.3, “Creating a partition”</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To create RAID of two block devices with names <span class="strong strong"><strong>/dev/sda1</strong></span> and <span class="strong strong"><strong>/dev/sdc1</strong></span>, use the following command:
					</p><pre class="literallayout"># mdadm --create /dev/md0 --level=<span class="emphasis"><em>&lt;level_value&gt;</em></span> --raid-devices=2 /dev/sda1 /dev/sdc1</pre><p class="simpara">
						Replace <span class="emphasis"><em>&lt;level_value&gt;</em></span> to a RAID level option. For more information, see <code class="literal command">mdadm(8)</code> man page.
					</p></li><li class="listitem"><p class="simpara">
						Optionally, to check the status of RAID, use the following command:
					</p><pre class="literallayout"># mdadm --detail /dev/md0</pre></li><li class="listitem"><p class="simpara">
						Optionally, to observe the detailed information about each RAID device, use the following command:
					</p><pre class="literallayout"># mdadm --examine /dev/sda1 /dev/sdc1</pre></li><li class="listitem"><p class="simpara">
						To create a file system on a RAID drive, use the following command:
					</p><pre class="literallayout"># mkfs -t <span class="emphasis"><em>&lt;file-system-name&gt;</em></span> /dev/md0</pre><p class="simpara">
						where <span class="emphasis"><em>&lt;file-system-name&gt;</em></span> is a specific file system that you chose to format the drive with. For more information, see <code class="literal command">mkfs</code> man page.
					</p></li><li class="listitem"><p class="simpara">
						To create a mount point for RAID drive and mount it, use the following commands:
					</p><pre class="literallayout"># mkdir /mnt/raid1
# mount /dev/md0 /mnt/raid1</pre></li></ol></div><p>
				After you finish the steps above, the RAID is ready to be used.
			</p></section><section class="section" id="reconfiguring-raid_managing-raid"><div class="titlepage"><div><div><h2 class="title">16.7. Reconfiguring RAID</h2></div></div></div><p>
				The section below describes how to modify an existing RAID. To do so, choose one of the methods:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Changing RAID attributes (also known as RAID <span class="emphasis"><em>reshape</em></span>).
					</li><li class="listitem">
						Converting RAID level (also known as RAID <span class="emphasis"><em>takeover</em></span>).
					</li></ul></div><section class="section" id="reshaping-raid_reconfiguring-raid"><div class="titlepage"><div><div><h3 class="title">16.7.1. Reshaping RAID</h3></div></div></div><p>
					This chapter below describes how to reshape RAID. You can choose one of the methods of resizing RAID:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Enlarging (extending) RAID.
						</li><li class="listitem">
							Shrinking RAID.
						</li></ul></div><section class="section" id="resizing-raid-enlarging_reshaping-raid"><div class="titlepage"><div><div><h4 class="title">16.7.1.1. Resizing RAID (extending)</h4></div></div></div><p>
						This procedure describes how to enlarge RAID. Assuming <span class="strong strong"><strong>/dev/md0</strong></span> is RAID you want to enlarge.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Enough disk space.
							</li><li class="listitem">
								The package <code class="literal package">parted</code> is installed.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Extend RAID partitions. To do so, follow the instruction in <a class="link" href="index.html#assembly_resizing-a-partition_assembly_getting-started-with-partitions">Resizing a partition</a> documentation.
							</li><li class="listitem"><p class="simpara">
								To extend RAID to the maximum of the partition capacity, use this command:
							</p><pre class="literallayout"># mdadm --grow --size=max /dev/md0</pre><p class="simpara">
								Note that to determine a specific size, you must write the <span class="emphasis"><em>--size</em></span> parameter in kB (for example <span class="emphasis"><em>--size=524228</em></span>).
							</p></li><li class="listitem">
								Increase the size of file system. For more information, check the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_file_systems/index">Managing file systems</a> documentation.
							</li></ol></div></section><section class="section" id="resizing-raid-shrinking_reshaping-raid"><div class="titlepage"><div><div><h4 class="title">16.7.1.2. Resizing RAID (shrinking)</h4></div></div></div><p>
						This procedure describes how to shrink RAID. Assuming <span class="strong strong"><strong>/dev/md0</strong></span> is the RAID you want to shrink to 512 MB.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The package <code class="literal package">parted</code> is installed.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Shrink the file system. To do so, check the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_file_systems/index">Managing file systems</a> documentation.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									The <span class="emphasis"><em>XFS</em></span> file system does not support shrinking.
								</p></div></div></li><li class="listitem"><p class="simpara">
								To decrease the RAID to the size of 512 MB, use this command:
							</p><pre class="literallayout"># mdadm --grow --size=524228 /dev/md0</pre><p class="simpara">
								Note, you must write the <span class="emphasis"><em>--size</em></span> parameter in kB.
							</p></li><li class="listitem">
								Shrink the partition to the size you need. To do so, follow the instruction in the <a class="link" href="index.html#assembly_resizing-a-partition_assembly_getting-started-with-partitions">Resizing a partition</a> documentation.
							</li></ol></div></section></section><section class="section" id="raid-takeover_reconfiguring-raid"><div class="titlepage"><div><div><h3 class="title">16.7.2. RAID takeover</h3></div></div></div><p>
					This chapter describes supported conversions in RAID and contains procedures to accomplish those conversions.
				</p><section class="section" id="supported-raid-conversions_raid-takeover"><div class="titlepage"><div><div><h4 class="title">16.7.2.1. Supported RAID conversions</h4></div></div></div><p>
						It is possible to convert from one RAID level to another. This section provides a table that lists supported RAID conversions.
					</p><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 14%; " class="col_1"><!--Empty--></col><col style="width: 14%; " class="col_2"><!--Empty--></col><col style="width: 14%; " class="col_3"><!--Empty--></col><col style="width: 14%; " class="col_4"><!--Empty--></col><col style="width: 14%; " class="col_5"><!--Empty--></col><col style="width: 14%; " class="col_6"><!--Empty--></col><col style="width: 14%; " class="col_7"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140163621634000" scope="col"> </th><th align="left" valign="top" id="idm140163621633072" scope="col">RAID0</th><th align="left" valign="top" id="idm140163621631984" scope="col">RAID1</th><th align="left" valign="top" id="idm140163621630896" scope="col">RAID4</th><th align="left" valign="top" id="idm140163621629808" scope="col">RAID5</th><th align="left" valign="top" id="idm140163621628720" scope="col">RAID6</th><th align="left" valign="top" id="idm140163621627632" scope="col">RAID10</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140163621634000"> <p>
										RAID0
									</p>
									 </td><td align="left" valign="top" headers="idm140163621633072"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621631984"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621630896"> <p>
										✓
									</p>
									 </td><td align="left" valign="top" headers="idm140163621629808"> <p>
										✓
									</p>
									 </td><td align="left" valign="top" headers="idm140163621628720"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621627632"> <p>
										✓
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140163621634000"> <p>
										RAID1
									</p>
									 </td><td align="left" valign="top" headers="idm140163621633072"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621631984"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621630896"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621629808"> <p>
										✓
									</p>
									 </td><td align="left" valign="top" headers="idm140163621628720"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621627632"> <p>
										✗
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140163621634000"> <p>
										RAID4
									</p>
									 </td><td align="left" valign="top" headers="idm140163621633072"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621631984"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621630896"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621629808"> <p>
										✓
									</p>
									 </td><td align="left" valign="top" headers="idm140163621628720"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621627632"> <p>
										✗
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140163621634000"> <p>
										RAID5
									</p>
									 </td><td align="left" valign="top" headers="idm140163621633072"> <p>
										✓
									</p>
									 </td><td align="left" valign="top" headers="idm140163621631984"> <p>
										✓
									</p>
									 </td><td align="left" valign="top" headers="idm140163621630896"> <p>
										✓
									</p>
									 </td><td align="left" valign="top" headers="idm140163621629808"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621628720"> <p>
										✓
									</p>
									 </td><td align="left" valign="top" headers="idm140163621627632"> <p>
										✓
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140163621634000"> <p>
										RAID6
									</p>
									 </td><td align="left" valign="top" headers="idm140163621633072"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621631984"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621630896"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621629808"> <p>
										✓
									</p>
									 </td><td align="left" valign="top" headers="idm140163621628720"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621627632"> <p>
										✗
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140163621634000"> <p>
										RAID10
									</p>
									 </td><td align="left" valign="top" headers="idm140163621633072"> <p>
										✓
									</p>
									 </td><td align="left" valign="top" headers="idm140163621631984"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621630896"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621629808"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621628720"> <p>
										✗
									</p>
									 </td><td align="left" valign="top" headers="idm140163621627632"> <p>
										✗
									</p>
									 </td></tr></tbody></table></div><p>
						For example, you can convert RAID level 0 to RAID level 4, RAID level 5 and RAID level 10
					</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								For more information about RAID level conversion, read <code class="literal">mdadm</code> man page.
							</li></ul></div></section><section class="section" id="converting-raid-level_raid-takeover"><div class="titlepage"><div><div><h4 class="title">16.7.2.2. Converting RAID level</h4></div></div></div><p>
						This procedure describes how to convert RAID to a different RAID level. Assuming, you want to convert RAID <code class="literal">/dev/md0</code> level 0 to RAID level 5 and add one more disk <code class="literal">/dev/sdd</code> to the array.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Enough disks for conversion.
							</li><li class="listitem">
								The package <code class="literal package">mdadm</code> is installed.
							</li><li class="listitem">
								Ensure the intended conversion is supported. To check if that is the case, see the table in <a class="xref" href="index.html#supported-raid-conversions_raid-takeover" title="16.7.2.1. Supported RAID conversions">Section 16.7.2.1, “Supported RAID conversions”</a>.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								To convert the RAID <code class="literal">/dev/md0</code> to RAID level 5, use the following command:
							</p><pre class="literallayout"># mdadm --grow --level=5 -n 3 /dev/md0 --force</pre></li><li class="listitem"><p class="simpara">
								To add a new disk to the array, use the following command:
							</p><pre class="literallayout"># mdadm --manage /dev/md0 --add /dev/sdd</pre></li><li class="listitem"><p class="simpara">
								To check new details of the converted array, use the following command:
							</p><pre class="literallayout"># mdadm --detail /dev/md0</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								For more information about RAID level conversion, read <code class="literal">mdadm</code> man page.
							</li></ul></div></section></section></section><section class="section" id="converting-root-disk-to-raid1-after-installation_managing-raid"><div class="titlepage"><div><div><h2 class="title">16.8. Converting a root disk to RAID1 after installation</h2></div></div></div><p>
				This section describes how to convert a non-RAID root disk to a RAID1 mirror after installing Red Hat Enterprise Linux 8.
			</p><p>
				On the PowerPC (PPC) architecture, take the following additional steps:
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The instructions in the following Red Hat Knowledgebase article are completed: <a class="link" href="https://access.redhat.com/solutions/2390831">How do I convert my root disk to RAID1 after installation of Red Hat Enterprise Linux 7?</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Copy the contents of the PowerPC Reference Platform (PReP) boot partition from <code class="literal">/dev/sda1</code> to <code class="literal">/dev/sdb1</code>:
					</p><pre class="literallayout"><code class="literal">#</code> dd if=/dev/sda1 of=/dev/sdb1</pre></li><li class="listitem"><p class="simpara">
						Update the Prep and boot flag on the first partition on both disks:
					</p><pre class="literallayout"><code class="literal">$</code> <code class="literal command">parted /dev/sda set 1 prep on</code>
<code class="literal">$</code> <code class="literal command">parted /dev/sda set 1 boot on</code>

<code class="literal">$</code> <code class="literal command">parted /dev/sdb set 1 prep on</code>
<code class="literal">$</code> <code class="literal command">parted /dev/sdb set 1 boot on</code></pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Running the <code class="literal command">grub2-install /dev/sda</code> command does not work on a PowerPC machine and returns an error, but the system boots as expected.
				</p></div></div></section><section class="section" id="creating-advanced-raid-devices_managing-raid"><div class="titlepage"><div><div><h2 class="title">16.9. Creating advanced RAID devices</h2></div></div></div><p>
				In some cases, you may wish to install the operating system on an array that can not be created after the installation completes. Usually, this means setting up the <code class="literal">/boot</code> or root file system arrays on a complex RAID device; in such cases, you may need to use array options that are not supported by <span class="strong strong"><strong><span class="application application">Anaconda</span></strong></span> installer. To work around this, perform the following procedure:
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Insert the install disk.
					</li><li class="listitem">
						During the initial boot up, select <code class="literal">Rescue Mode</code> instead of <code class="literal">Install</code> or <code class="literal">Upgrade</code>. When the system fully boots into <span class="emphasis"><em>Rescue mode</em></span>, the user will be presented with a command line terminal.
					</li><li class="listitem">
						From this terminal, use <code class="literal command">parted</code> to create RAID partitions on the target hard drives. Then, use <code class="literal command">mdadm</code> to manually create raid arrays from those partitions using any and all settings and options available. For more information on how to do these, see <code class="literal command">man parted</code> and <code class="literal command">man mdadm</code>.
					</li><li class="listitem">
						Once the arrays are created, you can optionally create file systems on the arrays as well.
					</li><li class="listitem">
						Reboot the computer and select <code class="literal">Install</code> or <code class="literal">Upgrade</code> to install as normal. As <span class="strong strong"><strong><span class="application application">Anaconda</span></strong></span> installer searches the disks in the system, it will find the pre-existing RAID devices.
					</li><li class="listitem">
						When asked about how to use the disks in the system, select <code class="literal">Custom Layout</code> and click <span class="guibutton">Next</span>. In the device listing, the pre-existing MD RAID devices will be listed.
					</li><li class="listitem">
						Select a RAID device, click <span class="guibutton">Edit</span> and configure its mount point and (optionally) the type of file system it should use (if you did not create one earlier) then click <span class="guibutton">Done</span>. <span class="strong strong"><strong><span class="application application">Anaconda</span></strong></span> will perform the install to this pre-existing RAID device, preserving the custom options you selected when you created it in <span class="emphasis"><em>Rescue Mode</em></span>.
					</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The limited <span class="emphasis"><em>Rescue Mode</em></span> of the installer does not include <code class="literal command">man</code> pages. Both the <code class="literal command">man mdadm</code> and <code class="literal command">man md</code> contain useful information for creating custom RAID arrays, and may be needed throughout the workaround. As such, it can be helpful to either have access to a machine with these <code class="literal command">man</code> pages present, or to print them out prior to booting into <span class="emphasis"><em>Rescue Mode</em></span> and creating your custom arrays.
				</p></div></div></section><section class="section" id="monitoring-raid_managing-raid"><div class="titlepage"><div><div><h2 class="title">16.10. Monitoring RAID</h2></div></div></div><p>
				This module describes how to set up the RAID monitoring option with <code class="literal command">mdadm</code> tool.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The package <code class="literal package">mdadm</code> is installed
					</li><li class="listitem">
						The mail service is set up.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To create a configuration file for monitoring array you must scan the details and forward the result to <code class="literal">/etc/mdadm.conf</code> file. To do so, use the following command:
					</p><pre class="literallayout"># mdadm --detail --scan &gt;&gt; /etc/mdadm.conf</pre><p class="simpara">
						Note, that <span class="emphasis"><em>ARRAY</em></span> and <span class="emphasis"><em>MAILADDR</em></span> are mandatory variables.
					</p></li><li class="listitem">
						Open the configuration file <code class="literal">/etc/mdadm.conf</code> with a text editor of your choice.
					</li><li class="listitem"><p class="simpara">
						Add the <span class="emphasis"><em>MAILADDR</em></span> variable with the mail address for the notification. For example, add new line:
					</p><pre class="literallayout">MAILADDR &lt;example@example.com&gt;</pre><p class="simpara">
						where <span class="emphasis"><em>example@example.com</em></span> is an email address to which you want to receive the alerts from the array monitoring.
					</p></li><li class="listitem">
						Save changes in the <code class="literal">/etc/mdadm.conf</code> file and close it.
					</li></ol></div><p>
				After you complete the steps above, the monitoring system will send the alerts to the email address.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information, read the <code class="literal">mdadm.conf 5</code> man page.
					</li></ul></div></section><section class="section" id="maintaining-raid_managing-raid"><div class="titlepage"><div><div><h2 class="title">16.11. Maintaining RAID</h2></div></div></div><p>
				This section provides various procedures for RAID maintenance.
			</p><section class="section" id="replacing-the-faulty-disk_maintaining-raid"><div class="titlepage"><div><div><h3 class="title">16.11.1. Replacing a faulty disk in a RAID</h3></div></div></div><p>
					This procedure describes how to replace the faulty disk in a redundant array of independent disks (RAID). Assuming, you have <span class="strong strong"><strong>/dev/md0</strong></span> RAID level 10. In this scenario, the <span class="strong strong"><strong>/dev/sdg</strong></span> disk is faulty and you need to replace it with new disk <span class="strong strong"><strong>/dev/sdh</strong></span>.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Additional spare disk.
						</li><li class="listitem">
							The <code class="literal package">mdadm</code> package is installed.
						</li><li class="listitem">
							A notification about a faulty disk in an array. To set up the array monitoring, see <a class="xref" href="index.html#monitoring-raid_managing-raid" title="16.10. Monitoring RAID">Section 16.10, “Monitoring RAID”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Ensure which disk is failing. To do so, enter the following command:
						</p><pre class="literallayout"># journalctl -k -f</pre><p class="simpara">
							You will find a message showing you which disk has failed:
						</p><pre class="literallayout">md/raid:md0: Disk failure on sdg, disabling device.
md/raid:md0: Operation continuing on 5 devices.</pre></li><li class="listitem">
							Press <code class="literal button">Ctrl+C</code> on your keyboard to exit the <code class="literal command">journalctl</code> program.
						</li><li class="listitem"><p class="simpara">
							Add a new disk to the array. To do so, enter the following command:
						</p><pre class="literallayout"># mdadm --manage /dev/md0 --add /dev/sdh</pre></li><li class="listitem"><p class="simpara">
							Mark the failed disk as faulty. To do so, enter the following command:
						</p><pre class="literallayout"># mdadm --manage /dev/md0 --fail /dev/sdg</pre></li><li class="listitem"><p class="simpara">
							Check if the faulty disk was masked correctly by using the following command:
						</p><pre class="literallayout"># mdadm --detail /dev/md0</pre><p class="simpara">
							At the end of the last command output you will see information about RAID disks similar to this where disk <span class="strong strong"><strong>/dev/sdg</strong></span> has a <span class="strong strong"><strong>faulty</strong></span> status:
						</p><pre class="literallayout">    Number   Major   Minor   RaidDevice State
       0       8       16        0      active sync   /dev/sdb
       1       8       32        1      active sync   /dev/sdc
       2       8       48        2      active sync   /dev/sdd
       3       8       64        3      active sync   /dev/sde
       4       8       80        4      active sync   /dev/sdf
       6       8      112        5      active sync   /dev/sdh

       5       8       96        -      faulty   /dev/sdg</pre></li><li class="listitem"><p class="simpara">
							Finally, remove the faulty disk from the array. To do so, enter the following command:
						</p><pre class="literallayout"># mdadm --manage /dev/md0 --remove /dev/sdg</pre></li><li class="listitem"><p class="simpara">
							Check RAID details by using following command:
						</p><pre class="literallayout"># mdadm --detail /dev/md0</pre><p class="simpara">
							At the end of the last command output you will see information about RAID disks similar to this:
						</p><pre class="literallayout">    Number   Major   Minor   RaidDevice State
       0       8       16        0      active sync   /dev/sdb
       1       8       32        1      active sync   /dev/sdc
       2       8       48        2      active sync   /dev/sdd
       3       8       64        3      active sync   /dev/sde
       4       8       80        4      active sync   /dev/sdf
       6       8      112        5      active sync   /dev/sdh</pre></li></ol></div><p>
					After completing the steps above you will have RAID <span class="strong strong"><strong>/dev/md0</strong></span> with a new disk <span class="strong strong"><strong>/dev/sdh</strong></span>.
				</p></section><section class="section" id="replacing-the-broken-disk_maintaining-raid"><div class="titlepage"><div><div><h3 class="title">16.11.2. Replacing a broken disk in array</h3></div></div></div><p>
					This procedure describes how to replace the broken disk in a redundant array of independent disks (RAID). Assuming, you have <span class="strong strong"><strong>/dev/md0</strong></span> RAID level 6. In this scenario, the <span class="strong strong"><strong>/dev/sdb</strong></span> disk has hardware issue and could not be used any longer. You need to replace it with the new disk <span class="strong strong"><strong>/dev/sdi</strong></span>.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							New disk for replacement.
						</li><li class="listitem">
							The <code class="literal package">mdadm</code> package is installed.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Check the log message by using the following command:
						</p><pre class="literallayout"># journalctl -k -f</pre><p class="simpara">
							You will find a message showing you which disk has failed:
						</p><pre class="literallayout">md/raid:md0: Disk failure on sdb, disabling device.
md/raid:md0: Operation continuing on 5 devices.</pre></li><li class="listitem">
							Press <code class="literal button">Ctrl+C</code> on your keyboard to exit the <code class="literal command">journalctl</code> program.
						</li><li class="listitem"><p class="simpara">
							Add the new disk to the array as a spare one. To do so, enter the following command:
						</p><pre class="literallayout"># mdadm --manage /dev/md0 --add /dev/sdi</pre></li><li class="listitem"><p class="simpara">
							Mark the broken disk as <span class="strong strong"><strong>faulty</strong></span>. To do so, enter the following command:
						</p><pre class="literallayout"># mdadm --manage /dev/md0 --fail /dev/sdb</pre></li><li class="listitem"><p class="simpara">
							Remove the faulty disk from the array. To do so, enter the following command:
						</p><pre class="literallayout"># mdadm --manage /dev/md0 --remove /dev/sdb</pre></li><li class="listitem"><p class="simpara">
							Check the status of the array by using the following command:
						</p><pre class="literallayout"># mdadm --detail /dev/md0</pre><p class="simpara">
							At the end of the last command output you will see information about RAID disks similar to this:
						</p><pre class="literallayout">    Number   Major   Minor   RaidDevice State
       7       8      128        0      active sync   /dev/sdi
       1       8       32        1      active sync   /dev/sdc
       2       8       48        2      active sync   /dev/sdd
       3       8       64        3      active sync   /dev/sde
       4       8       80        4      active sync   /dev/sdf
       6       8      112        5      active sync   /dev/sdh</pre></li></ol></div><p>
					After completing the steps above you will have RAID <span class="strong strong"><strong>/dev/md0</strong></span> with a new disk <span class="strong strong"><strong>/dev/sdi</strong></span>.
				</p></section><section class="section" id="resynchronizing-raid-disks_maintaining-raid"><div class="titlepage"><div><div><h3 class="title">16.11.3. Resynchronizing RAID disks</h3></div></div></div><p>
					This procedure describes how to resynchronize disks in a RAID array. Assuming, you have <span class="strong strong"><strong>/dev/md0</strong></span> RAID.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Package <code class="literal package">mdadm</code> is installed.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To check the array for the failed disks behavior, enter the following command:
						</p><pre class="literallayout"># echo check &gt; /sys/block/md0/md/sync_action</pre><p class="simpara">
							That action will check the array and write the result into the <code class="literal">/sys/block/md0/md/sync_action</code> file.
						</p></li><li class="listitem">
							Open file <code class="literal">/sys/block/md0/md/sync_action</code> with the text editor of your choice and see if there is any message about disk synchronization failures.
						</li><li class="listitem"><p class="simpara">
							To resynchronize the disks in the array, enter the following command:
						</p><pre class="literallayout"># echo repair &gt; /sys/block/md0/md/sync_action</pre><p class="simpara">
							This action will resynchronize the disks in the array and write the result into the <code class="literal">/sys/block/md0/md/sync_action</code> file.
						</p></li><li class="listitem"><p class="simpara">
							To view the synchronization progress, enter the following command:
						</p><pre class="literallayout"># cat /proc/mdstat</pre></li></ol></div></section></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140163630403760"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2020 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div>
  
  </div>
  </div>
</div>
<div id="comments-footer" class="book-comments">
  </div>
<meta itemscope="" itemref="md1">

    <!-- Display: Next/Previous Nav -->
          
      </div>
</article>


  

            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto" href="index.html#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path
                      class="rh-logo-hat"
                      d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                      <path class="rh-logo-band"
                      d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                      <path
                      class="rh-logo-type"
                      d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                  </svg>
                </a>
              </div>

            <div role="navigation">
                <h3>Quick Links</h3>
                <ul>
                    <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li><a class="manage-subscriptions" href="https://access.redhat.com/management/subscriptions/#active">Subscriptions</a></li>
                    <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                    <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                    <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Help</h3>
                <ul>
                    <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                    <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                    <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Site Info</h3>
                <ul>
                  <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                  <li><a class="browser-support-policy" href="https://access.redhat.com/help/browsers/">Browser Support Policy</a></li>
                  <li><a class="accessibility" href="https://access.redhat.com/help/accessibility/">Accessibility</a></li>
                  <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                  <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Related Sites</h3>
                <ul>
                    <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                    <li><a href="https://www.openshift.com" class="openshift-com">openshift.com</a></li>
                    <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                    <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>About</h3>
                <ul>
                    <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                    <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                    <li><a href="http://jobs.redhat.com" class="about-jobs">Red Hat Jobs</a></li>
                </ul>
            </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a hidden href="https://status.redhat.com" class="status-page-widget">
                          <span class="status-description"></span>
                          <span class="status-dot shape-circle"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2020 Red Hat, Inc.</div>

                        <div role="navigation" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://access.redhat.com/help/terms/" class="terms-of-use">Customer Portal Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                      <img src="l_summit.png" alt="Red Hat Summit" />
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHatSupport" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>
                        <a href="https://www.facebook.com/RedHatSupport" class="sm-icon facebook"><span class="nicon-facebook"></span><span class="offscreen">Facebook</span></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--googleon: all-->
</div>
  
  <div id="formatHelp" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="formatTitle" aria-hidden="true"><div class="modal-dialog"><div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="formatTitle">Formatting Tips</h3>
    </div>
    <div class="modal-body">
      <p>Here are the common uses of Markdown.</p><dl class="formatting-help">
        <dt class="codeblock">Code blocks</dt><dd class="codeblock"><pre><code>~~~
Code surrounded in tildes is easier to read
~~~</code></pre></dd>
        <dt class="urls">Links/URLs</dt><dd class="urls"><code>[Red Hat Customer Portal](https://access.redhat.com)</code></dd>
       </dl>
    </div>
    <div class="modal-footer">
      <a target="_blank" href="https://access.redhat.com/help/markdown" class="btn btn-primary">Learn more</a>
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
  </div></div></div></body>
</html>
