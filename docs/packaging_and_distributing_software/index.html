<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/ dc: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/ og: http://ogp.me/ns# rdfs: http://www.w3.org/2000/01/rdf-schema# sioc: http://rdfs.org/sioc/ns# sioct: http://rdfs.org/sioc/types# skos: http://www.w3.org/2004/02/skos/core# xsd: http://www.w3.org/2001/XMLSchema# article: http://ogp.me/ns/article# book: http://ogp.me/ns/book# profile: http://ogp.me/ns/profile# video: http://ogp.me/ns/video#" >

<head profile="http://www.w3.org/1999/xhtml/vocab">
	  <!--[if IE]><![endif]-->
<meta charset="utf-8" />
<meta name="revision" title="00739ab3-b3fc-475c-9d3c-058d83b2a75a" product="f321f43a-4a79-48fe-8aae-117b9d973ec0" revision="1f9c3986c6bad5b3caeb32ac5d18615e83c1d922:en-us" page="3e057b80-82d4-49cd-8615-5f57ed43c51f" />
<meta name="generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/packaging_and_distributing_software/index" />
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/packaging_and_distributing_software/index" />
<meta property="og:site_name" content="Red Hat Customer Portal" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/packaging_and_distributing_software/index" />
<meta property="og:title" content="Packaging and distributing software Red Hat Enterprise Linux 8 | Red Hat Customer Portal" />
<meta property="og:description" content="This document describes how to package software into an RPM. It also shows how to prepare source code for packaging, and explains selected advanced packaging scenarios, such as packaging Python projects or RubyGems into RPM." />
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/packaging_and_distributing_software/index" />
<meta name="twitter:title" content="Packaging and distributing software Red Hat Enterprise Linux 8 | Red Hat Customer Portal" />
<meta name="twitter:description" content="This document describes how to package software into an RPM. It also shows how to prepare source code for packaging, and explains selected advanced packaging scenarios, such as packaging Python projects or RubyGems into RPM." />
<meta name="twitter:image:src" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
  <title>Packaging and distributing software Red Hat Enterprise Linux 8 | Red Hat Customer Portal</title>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="kcs05.web.prod.ext.phx2.redhat.com" />
<meta name="avalon-version" content="2070d6b" />
<meta name="cp-chrome-build-date" content="2020-03-09T20:28:54.189Z" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml" />

 

<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en",  
        version   : "2070d6b",
        builddate : "2020-03-09T20:28:54.189Z",
        fetchdate : "2020-03-11T07:54:05-0400",
        nrid      : "14615289",
        nrlk      : "2a497fa56f"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="favicon.ico" />

<link media="all" rel="stylesheet" type="text/css" href="bootstrap.css%3Fv=2070d6b.css" />
<link media="all" rel="stylesheet" type="text/css" href="main.css%3Fv=2070d6b.css" />
<link media="all" rel="stylesheet" type="text/css" href="components.css%3Fv=2070d6b.css" />
<link media="all" rel="stylesheet" type="text/css" href="pages.css%3Fv=2070d6b.css" />

<link href="chosen.css%3Fv=2070d6b.css" rel="stylesheet" type="text/css" />

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]-->

<noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>

<!-- /cssInclude -->
<script type="text/javascript" src="require.js%3Fv=2070d6b" data-main="/webassets/avalon/j/"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->
  <link type="text/css" rel="stylesheet" href="css__c2Nkkx_5vYh8rvZbfBAGB4EMzMtH5ouFJDBlDsnhSR8__-ax0_8bam15ZDJT9j7LilCfJrDyEhGGAgc0KC8HYvJg__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__Jy3BSr8TrxptaufAzQDT1skBUlX2CnL_wm6BizzYuGw__-YZvqB8yuA4kK_iKklbk5HdZCoG2qAgz1l-8Qi2NFH4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="messages.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__m76iIFREtc70Nmw5xe1ZwHbNBlwOP2Zjc3DcacNWnFQ__STEh8aY3w8E_bKzhB4Xke2WOQ9XMDQquHIP5B8SeDIY__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__4sM4s6XOQ2Nm0pdkrWRLvrgtwpTmHAFzR_LcdesKYj8__vJ0jjVEhoPh3KBeLZfkqg51T3AFxhQCuXg1reipa__k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="print" />
  <link rel="stylesheet" type="text/css" media="all" href="list.css" />
  <script src="js__1YIht1y1Jlm9D0PyxEuhS3DlWdYAlEsNpsFDOaUsfRw__ZnC7278ZsqBG-1FOUqflDl8B3Y1kLiAWXAIkoLrHbYg__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__5ysXPc5KIyMmizxqRY68ILfrEGrj0P29WBIifnPTJvQ__Cap0DACEVMsefumg1gS1APLLd8stDkdGfp6c1uswMo4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>chrometwo_require(["analytics/attributes"], function(attributes) {
attributes.set('ResourceID',       '00739ab3-b3fc-475c-9d3c-058d83b2a75a');
attributes.set('ResourceTitle',    'Packaging and distributing software');
attributes.set('Language',         'en-us');
attributes.set('RevisionId',       '1f9c3986c6bad5b3caeb32ac5d18615e83c1d922:en-us');
attributes.set('PublicationState', ['active','published']);
attributes.set('Product',          'Red Hat Enterprise Linux');
attributes.set('ProductVersion',   '8');
attributes.set('ProductId',        'Red Hat Enterprise Linux 8');
});</script>
<script>breadcrumbs = [ ["Products &amp; Services", "/products/"], ["Product Documentation", "/documentation/"], ["Red Hat Enterprise Linux", "/documentation/en-us/red_hat_enterprise_linux/"], ["8", "/documentation/en-us/red_hat_enterprise_linux/8/"], ["Packaging and distributing software", "/documentation/en-us/red_hat_enterprise_linux/8/html/packaging_and_distributing_software/"] ];</script>
<script>window.siteMapState = "products";</script>
<script src="js__i6ieGBO-OPmIKm_f0srsb6gM7QELIWrBpKh6ub_yj8A__wjRg_duSK4rEZCRV2uwrCIPMl80Z_LJ9ew61H5hE-ZI__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__vGeEtorfXGI3aPAp71YA74N5p8wfpYVhnoIqwaJrOiQ__veGxEiPQW6fkzAPZnAFA23SFz1CyJy2dlu6x8XuHM4s__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"kcs","theme_token":"l5pW4j3roKDYfoukBVW-pdW5E-errg5E1W7hfzEYi3o","js":{"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.jquery.min.js":1,"modules\/chosen\/chosen.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/prism.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/underscore.js":1,"sites\/all\/themes\/kcs\/js\/kcs_base.js":1,"sites\/all\/themes\/kcs\/js\/showdown.js":1,"sites\/all\/themes\/kcs\/js\/case_links.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"modules\/date\/date_api\/date.css":1,"modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/contrib\/user_prune\/css\/user_prune.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/contrib\/panels\/css\/panels.css":1,"sites\/all\/modules\/custom\/rate\/rate.css":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/plugins\/layouts\/docs_page\/docs_page.css":1,"https:\/\/access.redhat.com\/webassets\/avalon\/s\/messages.css":1,"sites\/all\/themes\/zen\/system.base.css":1,"sites\/all\/themes\/zen\/system.menus.css":1,"sites\/all\/themes\/zen\/system.messages.css":1,"sites\/all\/themes\/zen\/system.theme.css":1,"sites\/all\/themes\/zen\/comment.css":1,"sites\/all\/themes\/zen\/node.css":1,"sites\/all\/themes\/kcs\/css\/html-reset.css":1,"sites\/all\/themes\/kcs\/css\/wireframes.css":1,"sites\/all\/themes\/kcs\/css\/layout-fixed.css":1,"sites\/all\/themes\/kcs\/css\/page-backgrounds.css":1,"sites\/all\/themes\/kcs\/css\/tabs.css":1,"sites\/all\/themes\/kcs\/css\/pages.css":1,"sites\/all\/themes\/kcs\/css\/blocks.css":1,"sites\/all\/themes\/kcs\/css\/navigation.css":1,"sites\/all\/themes\/kcs\/css\/views-styles.css":1,"sites\/all\/themes\/kcs\/css\/nodes.css":1,"sites\/all\/themes\/kcs\/css\/comments.css":1,"sites\/all\/themes\/kcs\/css\/forms.css":1,"sites\/all\/themes\/kcs\/css\/fields.css":1,"sites\/all\/themes\/kcs\/css\/kcs.css":1,"sites\/all\/themes\/kcs\/css\/print.css":1}},"chosen":{"selector":"#edit-field-kcs-component-select-und, #edit-field-kcs-sbr-select-und, #edit-field-kcs-product-select-und, #edit-field-kcs-type-select-und, #edit-language, #edit-field-kcs-a-category-select-und, #edit-field-kcs-state-select-und, #edit-field-kcs-tags-select-und, #edit-field-kcs-state-select-value, #edit-field-vid-reference-product-und, #edit-state, #edit-product, #edit-category, #edit-field-kcs-product-select-tid, #edit-field-kcs-type-select-tid, #edit-field-kcs-a-category-select-tid, #edit-sort-bef-combine, #edit-kcs-state, #edit-field-category-tid, #edit-field-product-tid, #edit-field-tags-tid, #edit-field-category-und, #edit-field-product-und, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-category, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-product, #views-exposed-form-questions-list-questions-filter-block #edit-field-tags, #edit-field-mega-menu-tab-und, #edit-field-internal-tags-tid, #edit-tags, #edit-field-kcs-tags-select-tid, #edit-subscriptions-and-choose-field-select, #edit-subscriptions-and-type, #edit-vid-13, #edit-vid-4, #edit-vid-5, #edit-vid-53, #edit-vid-1, #edit-vid-3, #edit-group-blog, #edit-group-group, #edit-subscriptions-and-choose-field-select-two, #edit-subscriptions-and-type-two, #edit-vid-13-two, #edit-vid-4-two, #edit-vid-5-two, #edit-vid-53-two, #edit-vid-1-two, #edit-vid-3-two, #edit-group-blog-two, #edit-group-group-two, #edit-subscriptions-and-edit-choose-field-select, #edit-subscriptions-and-type-edit, #edit-subscriptions-and-edit-type-two, #edit-vid-13-edit-two, #edit-vid-4-edit-two, #edit-vid-5-edit-two, #edit-vid-53-edit-two, #edit-vid-1-edit-two, #edit-vid-3-edit-two, #edit-group-group-edit-two, #edit-subscriptions-and-edit-choose-field-select-two, #edit-vid-13-edit, #edit-vid-4-edit, #edit-vid-5-edit, #edit-vid-53-edit, #edit-vid-1-edit, #edit-vid-3-edit, #edit-group-group-edit, #edit-group-blog-edit, #edit-field-supported-languages-tid, #edit-field-geography-und, #edit-field-supported-products-und, #edit-field-supported-languages-und, #edit-field-vendor-und, #edit-field-errata-type-text-und, #edit-field-errata-severity-text-und, #edit-field-software-partner-level-und, #edit-field-scert-product-category-und, #edit-field-certifications-und-0-field-product-und, #edit-kcs-article-type, #edit-field-eco-industry-tag-select-tid, #edit-field-eco-software-catego-select-tid, #edit-field-ecosystem-tag-select-und, #edit-field-eco-industry-tag-select-und, #edit-field-eco-software-catego-select-und, #edit-field-vendor-tsanet-member-ref-und, #edit-field-og-vendor-ref-und-0-default, #edit-field-eco-products-enabled-col-und-0-field-eco-subscription-model-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-support-level-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-archite-select-und, #edit-field-eco-certifications-select-und-0-field-eco-certificati-lvl-select-und, #edit-field-eco-certifications-select-und-0-field-eco-hypervisor-str-und, #edit-field-eco-supported-language-ref-und, #edit-field-eco-region-ref-und, #edit-field-cs-product-category-str-und, #edit-field-eco-certifications-select-und-0-field-eco-format-ref-und, #edit-field-eco-group-access-ref-und, #edit-field-hw-category-tag-ref-und, #edit-field-profile-industry-und, #edit-field-profile-tech-interests-und, #edit-field-product-page-features-ref-und, #edit-field-eco-product-select-und, #edit-field-base-product-ref-und, #edit-field-eco-product-archite-select-und, #edit-field-eco-format-ref-und, #edit-field-certification-status-ref-und, #edit-field-certification-result-ref-und, #edit-field-og-certified-product-ref-und-0-default, #edit-field-eco-subscription-model-ref-und, #edit-field-eco-support-level-ref-und, #edit-field-eco-certificati-lvl-select-und, #edit-field-eco-hypervisor-str-und, #edit-field-ccp-thirdparty-cert-select-und, .use_, #edit-field-eco-cert-product-tag-und, #edit-field-documentation-location-ref-und, #edit-field-documentation-title-und, #edit-field-accelerator-products-und","minimum":"0"},"rh_doc_fetcher":{"page_type":"single"},"section":"","kcs":{"nodeType":null,"nodeId":null}});</script>
    <!--[if lt IE 9]>
  <script src="https://access.redhat.com/sites/all/themes/kcs/js/html5shiv.js"></script>
  <![endif]-->
  
      


    <!--kcs07-->
<script type="text/javascript">
  Drupal.portal = {"version":{"redhat_portal":"package drupal7-redhat_portal is not installed"}};
  Drupal.portal.currentUser = {};
  </script>

</head>

<body class="portal-page admin-bar  kcs_external" >

  
  <div id="page-wrap" class="page-wrap">
    <div class="top-page-wrap">

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <!-- Accessibility Nav & Header -->
<div class="accessibility-nav sr-only">
    <a href="https://access.redhat.com/">
        <h1>Red Hat <span>Customer </span><span>Portal</span></h1>
    </a>
    <p><a href="index.html#cp-main">Skip to main content</a></p>
    <nav aria-labelledby="accessibility-nav-heading">
        <h2 id="accessibility-nav-heading">Main Navigation</h2>
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/support/policy/update_policies/">Product Life Cycle &amp; Update Policies</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/ecosystem/">Ecosystem</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="accessibility-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="accessibility-accountUser">
                    <div class="account-name"><strong id="accessibility-userFullName"></strong></div>
                    <div class="account-org"><span id="accessibility-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="accessibility-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="accessibility-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="accessibility-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="accessibility-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="accessibility-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="accessibility-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- Mobile Header -->
<nav class="mobile-nav-bar hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <button id="menu-btn" class="menu menu-white" type="button" aria-label="Toggle Navigation">
        <span class="lines"></span>
    </button>
    <a class="logo" href="https://access.redhat.com/">
        <span class="logo-crop">
          <!-- logo -->
          <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
            <defs>
              <style>
                .rh-logo-hat {
                  fill: #e00;
                }
                .rh-logo-type {
                  fill: #fff;
                }
              </style>
            </defs>
            <title>Red Hat</title>
            <path
              class="rh-logo-hat"
              d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
              <path class="rh-logo-band"
              d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
              <path
              class="rh-logo-type"
              d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
          </svg>
        </span>
        <span class="site-title"><span>Customer </span><span>Portal</span></span>
    </a>
    <button class="btn btn-search btn-utility" data-target="#site-search">
        <span class="web-icon-search"></span>
        <span class="link-text">Search</span>
    </button>
</nav>

<!-- Mobile Menu Drawer -->
<div class="nav-drawer mobile-nav-drawer hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <nav class="nav-container">
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/support/policy/update_policies/">Product Life Cycle &amp; Update Policies</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/ecosystem/">Ecosystem</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="mobile-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="mobile-accountUser">
                    <div class="account-name"><strong id="mobile-userFullName"></strong></div>
                    <div class="account-org"><span id="mobile-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="mobile-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="mobile-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="mobile-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="mobile-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="mobile-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="mobile-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- White Utility Menu for large screens -->
<div class="utility-wrap" aria-hidden="true">
    <div class="utility-container">
        <div class="utility-bar hidden-xs">
            <div role="navigation" class="top-nav">
                <ul>
                    <li id="nav-subscription" data-portal-tour-1="1"><a class="top-nav-subscriptions" href="https://access.redhat.com/management/">Subscriptions</a></li>
                    <li id="nav-downloads" data-portal-tour-1="2"><a class="top-nav-downloads" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li id="nav-containers"><a class="top-nav-containers" href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
                    <li id="nav-support" data-portal-tour-1="3"><a class="top-nav-support-cases" href="https://access.redhat.com/support/cases/">Support Cases</a></li>
                </ul>
            </div>

            <div role="navigation" class="utility-nav">
                <ul>
                    <li id="searchABTestHide">
                        <a class="btn-search" data-target="#site-search" title="Search" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-search" aria-label="search"></span>
                            <span class="link-text">Search</span>
                        </a>
                    </li>
                    <!-- AB Test -->
                    <li id="searchABTestShow">
                        <form id="topSearchFormABTest" name="topSearchFormABTest">
                            <label for="topSearchInputABTest" class="sr-only">Search</label>
                            <input id="topSearchInputABTest" name="keyword" placeholder="Search" value="" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="form-control">
                            <button type="submit" class="btn btn-app btn-sm btn-link"><span class="web-icon-search" aria-label="search"></span></button>
                        </form>
                    </li>
                    <!-- End of AB Test -->
                    <li>
                        <a class="btn-profile" data-target="#account-info" data-portal-tour-1="4a" title="Account" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-user" aria-label="log in"></span>
                            <span class="link-text">Log In</span>
                            <span class="account-user" id="accountUserName"></span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-language" data-target="#language" data-portal-tour-1="6" title="Language" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-globe" aria-label="language"></span>
                            <span class="link-text">Language</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Utility Tray -->
        <div class="utility-tray-container">
            <div class="utility-tray">
                <div id="site-search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="https://access.redhat.com/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <div class="input-group push-bottom">

                                <input class="form-control searchField" id="topSearchInput" name="keyword" value="" placeholder="Enter your search term" type="text">
                                <span class="input-group-btn">
                                    <button type="submit" class="btn btn-primary">Search</button>
                                </span>
                            </div>
                            <div>Troubleshooting an issue? Try <a href="https://access.redhat.com/solution-engine">Solution Engine</a>&mdash;our new support tool.</div>
                        </form>
                    </div>
                </div>
                <div id="account-info" class="utility-link account-info">
                    <div class="content">

                        <!-- Account Unauthenticated -->
                        <div id="accountLinksLoggedOut" class="unauthenticated">
                            <h2 class="utility-header">Log in to Your Red Hat Account</h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border">
                                    <p><a href="https://access.redhat.com/login" id="accountLogin" class="btn btn-primary">Log In</a></p>
                                    <p>Your Red Hat account gives you access to your profile, preferences, and services, depending on your status.</p>
                                </div>
                                <div class="col-sm-6 col-border col-border-left">
                                    <p><a href="https://www.redhat.com/wapps/ugc/register.html" class="btn btn-primary">Register</a></p>
                                    <p>If you are a new customer, register now for access to product evaluations and purchasing capabilities. </p>

                                    <strong>Need access to an account?</strong><p>If your company has an existing Red Hat account, your organization administrator can grant you access.</p>

                                    <p><a href="https://access.redhat.com/support/contact/customerService/">If you have any questions, please contact customer service.</a></p>
                                </div>
                            </div>
                        </div>

                        <!-- Account Authenticated -->
                        <div id="accountLinksLoggedIn" class="authenticated">
                            <h2 class="utility-header"><span id="userFirstName"></span></h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border col-border-right">
                                    <div class="account-info" id="accountUser">
                                        <div class="avatar"><!-- placeholder--></div>
                                        <div class="account-name"><strong id="userFullName"></strong></div>
                                        <div class="account-org"><span id="userOrg"></span></div>
                                        <div class="account-number accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                                    </div>

                                    <div class="row account-settings">
                                        <div class="col-md-6" data-portal-tour-1="4">
                                            <h3>Red Hat Account</h3>
                                            <ul class="reset">
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
                                                <!-- <li><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
                                                <li><a href="https://access.redhat.com/account-team">Account Team</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6" data-portal-tour-1="5">
                                            <h3>Customer Portal</h3>
                                            <ul class="reset">
                                                <li><a href="https://access.redhat.com/user">My Profile</a></li>
                                                <li><a href="https://access.redhat.com/user" id="userNotificationsLink">Notifications</a></li>
                                                <li><a href="https://access.redhat.com/help/">Help</a></li>
                                            </ul>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-sm-6 col-border">
                                    <p>For your security, if you’re on a public computer and have finished using your Red Hat services, please be sure to log out.</p>
                                    <p><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout" id="accountLogout" class="btn btn-primary">Log Out</a></p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div id="language" class="utility-link language">
                    <div class="content">
                        <h2 class="utility-header">Select Your Language</h2>
                        <div class="row" id="localesMenu">
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=en" data-lang="en" id="en">English</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ko" data-lang="ko" id="ko">한국어</a></li>
                                </ul>
                            </div>
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ja"    data-lang="ja"    id="ja">日本語</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" data-lang="zh_CN" id="zh_CN">中文 (中国)</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="scroll-anchor"></div>

<!-- Main Menu for large screens -->
<div class="header-nav visible-sm visible-md visible-lg" aria-hidden="true">
    <div id="header-nav">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">

                    <a href="https://access.redhat.com/" class="logo">
                        <span class="logo-crop">
                          <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                            <defs>
                              <style>
                                .rh-logo-hat {
                                  fill: #e00;
                                }
                                .rh-logo-type {
                                  fill: #fff;
                                }
                              </style>
                            </defs>
                            <title>Red Hat</title>
                            <path
                              class="rh-logo-hat"
                              d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                              <path class="rh-logo-band"
                              d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                              <path
                              class="rh-logo-type"
                              d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                          </svg>
                        </span>
                        <span class="site-title"><span>Customer </span><span>Portal</span></span>
                    </a>

                    <nav class="primary-nav hidden-sm">
                        <ul>
                            <li id="nav-products"><a class="products" data-link="mega" data-target="products-menu" href="https://access.redhat.com/products/" id="products-menu">Products &amp; Services</a></li>
                            <li id="nav-tools"><a class="tools" data-link="mega" data-target="tools-menu" href="https://access.redhat.com/labs/" id="tools-menu">Tools</a></li>
                            <li id="nav-security"><a class="security" data-link="mega" data-target="security-menu" href="https://access.redhat.com/security/" id="security-menu">Security</a></li>
                            <li id="nav-community"><a class="community" data-link="mega" data-target="community-menu" href="https://access.redhat.com/community/" id="community-menu">Community</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Mega Menu for large screens -->
<div class="mega-wrap visible-sm visible-md visible-lg" aria-hidden="true">
    <nav class="mega">
        <div class="container">
            <div class="mega-menu-wrap">

                <!-- Products Menu -->
                <div aria-labelledby="products-menu" class="products-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-md-6 col-sm-8">
                            <div class="root clearfix" data-portal-tour-1="7">
                                <ul class="subnav subnav-root">
                                    <li data-target="infrastructure-menu" class="active">
                                        <h3>Infrastructure and Management</h3>
                                    </li>
                                    <li data-target="cloud-menu">
                                        <h3>Cloud Computing</h3>
                                    </li>
                                    <li data-target="storage-menu">
                                        <h3>Storage</h3>
                                    </li>
                                    <li data-target="jboss-dev-menu">
                                        <h3>Runtimes</h3>
                                    </li>
                                    <li data-target="jboss-int-menu">
                                        <h3>Integration and Automation</h3>
                                    </li>
                                </ul>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="infrastructure-menu" style="display: block;">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="cloud-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="storage-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a>
                                        </li>
                                        <li>
                                          <a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-dev-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                        </li>
                                    </ul>
                                </div> -->
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul class="border-bottom" id="portal-menu-border-bottom">
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                      </li>
                                    </ul>
                                    <ul>
                                      <li>
                                        <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Automation</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                      </li>
                                    </ul>
                                </div>
                            </div>
                            <a href="https://access.redhat.com/products" class="btn btn-primary">View All Products</a>
                        </div>

                        <div class="col-md-6 col-sm-4 pull-right" data-portal-tour-1="8">
                            <div class="row">
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/support" class="cta-link cta-link-darkbg">Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
                                        <li><a href="https://access.redhat.com/support/policy/update_policies/">Product Life Cycle &amp; Update Policies</a></li>
                                    </ul>
                                    <h4 class="nav-title">Services</h4>
                                    <ul>
                                        <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
                                        <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/documentation" class="cta-link cta-link-darkbg">Documentation</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>
                                    </ul>
                                    <ul>
                                        <li><a href="https://access.redhat.com/ecosystem/" class="cta-link cta-link-darkbg">Ecosystem</a></li>
                                        <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
                                        <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tools Menu -->
                <div aria-labelledby="tools-menu" class="tools-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row" data-portal-tour-1="9">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h3 class="nav-title">Tools</h3>
                                    <ul>
                                        <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
                                        <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
                                        <li><a href="https://access.redhat.com/errata/">Errata</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <ul class="list-flat">
                                        <li><a href="https://access.redhat.com/labs/" class="cta-link cta-link-darkbg">Customer Portal Labs</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <div class="card card-dark-grey">
                                        <h4 class="card-heading">Red Hat Insights</h4>
                                        <p class="text-white">Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                        <ul class="list-flat rh-l-grid rh-m-gutters rh-m-all-6-col-on-md">
                                          <li><a href="https://www.redhat.com/en/technologies/management/insights" class="cta-link cta-link-md cta-link-darkbg">Learn more</a></li>
                                          <li><a href="https://cloud.redhat.com/insights" class="cta-link cta-link-md cta-link-darkbg">Go to Insights</a></li>
                                        </ul>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>

                <!-- Security Menu -->
                <div aria-labelledby="security-menu" class="security-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="10">

                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Red Hat Product Security Center</h2>
                                    <p class="text-white">Engage with our Red Hat Product Security team, access security updates, and ensure your environments are not exposed to any known security vulnerabilities.</p>
                                    <p><a href="https://access.redhat.com/security/" class="btn btn-primary">Product Security Center</a></p>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Security Updates</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
                                    </ul>
                                    <p class="text-white">Keep your systems secure with Red Hat&#039;s specialized responses for high-priority security vulnerabilities.</p>
                                    <ul>
                                        <li class="more-link"><a href="https://access.redhat.com/security/vulnerability">View Responses</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Resources</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
                                        <li><a href="https://www.redhat.com/en/blog/channel/security">Security Blog</a></li>
                                        <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
                                        <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community Menu -->
                <div aria-labelledby="community-menu" class="community-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="11">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Portal Community</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
                                        <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
                                        <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
                                        <p class="push-top"><a href="https://access.redhat.com/community/" class="btn btn-primary">Community Activity</a></p>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Events</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
                                        <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Stories</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
                                        <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
                                        <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!--<a href="https://access.redhat.com/community/" class="btn btn-primary">Explore Community</a>-->
                    </div>
                </div>
            </div>
        </div>
    </nav>
</div>

            <!--[if IE 8]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
            </div>
            <![endif]-->
            <!--[if IE 9]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
            </div>
            <![endif]-->
            <div id="site-section"></div>
        </header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">
  <script type="text/javascript">
    chrometwo_require(['jquery-ui']);
  </script>


      <article class="rh_docs">
  <div class="container">
        <!-- Display: Book Page Content -->
    
  

<div class="row">
  <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
  <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
  


<a class="toc-toggle toc-show" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
  <span class="sr-only">Show Table of Contents</span>
  <span class="web-icon-mobile-menu" aria-hidden="true"></span>
</a>
<nav id="toc-main" class="toc-main collapse in">
  <div class="toc-menu affix-top">
    <a class="toc-toggle toc-hide" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
      <span class="sr-only">Hide Table of Contents</span>
      <span class="icon-remove" aria-hidden="true"></span>
    </a>
    <div class="doc-options">
      <div class="doc-language btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          English <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="https://access.redhat.com/documentation/ja-jp/red_hat_enterprise_linux/8/html/packaging_and_distributing_software/">日本語</a></li>
                      <li><a href="index.html">English</a></li>
                  </ul>
      </div>
      <div class="doc-format btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          Single-page HTML <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/packaging_and_distributing_software/">Multi-page HTML</a></li>
                                <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/pdf/packaging_and_distributing_software/Red_Hat_Enterprise_Linux-8-Packaging_and_distributing_software-en-US.pdf">PDF</a></li>
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/epub/packaging_and_distributing_software/Red_Hat_Enterprise_Linux-8-Packaging_and_distributing_software-en-US.epub">ePub</a></li>
                  </ul>
      </div>
    </div>
    <ol class="menu"><li class=" leaf"><a href="index.html">Packaging and distributing software</a></li><li class=" leaf"><a href="index.html#getting-started-with-rpm-packaging">1. Getting started with RPM packaging</a><ol class="menu"><li class=" leaf"><a href="index.html#introduction-to-rpm-packaging_getting-started-with-rpm-packaging">1.1. Introduction to RPM packaging</a><ol class="menu"><li class=" leaf"><a href="index.html#rpm_advantages">1.1.1. RPM advantages</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#preparing-software-for-rpm-packaging_packaging-and-distributing-software">2. Preparing software for RPM packaging</a><ol class="menu"><li class=" leaf"><a href="index.html#what-is-source-code_preparing-software-for-rpm-packaging">2.1. What source code is</a><ol class="menu"><li class=" leaf"><a href="index.html#source-code-examples">2.1.1. Source code examples</a></li></ol></li><li class=" leaf"><a href="index.html#how-programs-are-made_preparing-software-for-rpm-packaging">2.2. How programs are made</a><ol class="menu"><li class=" leaf"><a href="index.html#natively-compiled-code">2.2.1. Natively Compiled Code</a></li><li class=" leaf"><a href="index.html#interpreted-code">2.2.2. Interpreted Code</a></li></ol></li><li class=" leaf"><a href="index.html#building-software-from-source_preparing-software-for-rpm-packaging">2.3. Building software from source</a><ol class="menu"><li class=" leaf"><a href="index.html#natively-compiled-code-building-software-from-source">2.3.1. Natively Compiled Code</a></li><li class=" leaf"><a href="index.html#interpreted-code-building-software-from-source">2.3.2. Interpreting code</a></li></ol></li><li class=" leaf"><a href="index.html#patching-software_preparing-software-for-rpm-packaging">2.4. Patching software</a></li><li class=" leaf"><a href="index.html#installing-arbitrary-artifacts_preparing-software-for-rpm-packaging">2.5. Installing arbitrary artifacts</a><ol class="menu"><li class=" leaf"><a href="index.html#install-command">2.5.1. Using the install command</a></li><li class=" leaf"><a href="index.html#make-install">2.5.2. Using the make install command</a></li></ol></li><li class=" leaf"><a href="index.html#preparing-source-code-for-packaging_preparing-software-for-rpm-packaging">2.6. Preparing source code for packaging</a></li><li class=" leaf"><a href="index.html#putting-source-code-into-tarball_preparing-software-for-rpm-packaging">2.7. Putting source code into tarball</a><ol class="menu"><li class=" leaf"><a href="index.html#bello">2.7.1. Putting the bello project into tarball</a></li><li class=" leaf"><a href="index.html#pello">2.7.2. Putting the pello project into tarball</a></li><li class=" leaf"><a href="index.html#cello">2.7.3. Putting the cello project into tarball</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#packaging-software_packaging-and-distributing-software">3. Packaging software</a><ol class="menu"><li class=" leaf"><a href="index.html#rpm-packages_packaging-software">3.1. RPM packages</a><ol class="menu"><li class=" leaf"><a href="index.html#what-is-an-rpm_rpm-packages">3.1.1. What an RPM is</a></li><li class=" leaf"><a href="index.html#rpm-packaging-tools_rpm-packages">3.1.2. Listing RPM packaging tool’s utilities</a></li><li class=" leaf"><a href="index.html#setting-up-rpm-packaging-workspace_rpm-packages">3.1.3. Setting up RPM packaging workspace</a></li><li class=" leaf"><a href="index.html#what-is-a-spec-file_rpm-packages">3.1.4. What a SPEC file is</a></li><li class=" leaf"><a href="index.html#buildroots_rpm-packages">3.1.5. BuildRoots</a></li><li class=" leaf"><a href="index.html#rpm-macros_rpm-packages">3.1.6. RPM macros</a></li></ol></li><li class=" leaf"><a href="index.html#working-with-spec-files">3.2. Working with SPEC files</a><ol class="menu"><li class=" leaf"><a href="index.html#ways_to_create_a_new_spec_file">3.2.1. Ways to create a new SPEC file</a></li><li class=" leaf"><a href="index.html#creating-spec-files-with-rpmdev-newspec_working-with-spec-files">3.2.2. Creating a new SPEC file with rpmdev-newspec</a></li><li class=" leaf"><a href="index.html#modifying-a-spec-file_working-with-spec-files">3.2.3. Modifying an original SPEC file for creating RPMs</a></li><li class=" leaf"><a href="index.html#an-example-spec-file-for-bello_working-with-spec-files">3.2.4. An example SPEC file for a program written in bash</a></li><li class=" leaf"><a href="index.html#an-example-spec-file-for-pello_working-with-spec-files">3.2.5. An example SPEC file for a program written in Python</a></li><li class=" leaf"><a href="index.html#an-example-spec-file-for-cello_working-with-spec-files">3.2.6. An example SPEC file for a program written in C</a></li></ol></li><li class=" leaf"><a href="index.html#building-rpms_packaging-software">3.3. Building RPMs</a><ol class="menu"><li class=" leaf"><a href="index.html#building-source-rpms_building-rpms">3.3.1. Building source RPMs</a></li><li class=" leaf"><a href="index.html#building-binary-rpms_building-rpms">3.3.2. Building binary RPMs</a></li></ol></li><li class=" leaf"><a href="index.html#checking-rpms-for-sanity_packaging-software">3.4. Checking RPMs for sanity</a><ol class="menu"><li class=" leaf"><a href="index.html#checking-bello-for-sanity_checking-rpms-for-sanity">3.4.1. Checking bello for sanity</a></li><li class=" leaf"><a href="index.html#checking-pello-for-sanity_checking-rpms-for-sanity">3.4.2. Checking pello for sanity</a></li><li class=" leaf"><a href="index.html#checking-cello-for-sanity_checking-rpms-for-sanity">3.4.3. Checking cello for sanity</a></li></ol></li><li class=" leaf"><a href="index.html#logging-rpm-activity_packaging-software">3.5. Logging RPM activity to syslog</a></li><li class=" leaf"><a href="index.html#archiving-rpms_packaging-software">3.6. Extracting RPM content</a><ol class="menu"><li class=" leaf"><a href="index.html#archiving-rpms_archiving-rpms">3.6.1. Converting RPMs to tar archives</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#advanced-topics">4. Advanced topics</a><ol class="menu"><li class=" leaf"><a href="index.html#signing-packages_advanced-topics">4.1. Signing packages</a><ol class="menu"><li class=" leaf"><a href="index.html#creating-a-gpg-key_signing-packages">4.1.1. Creating a GPG key</a></li><li class=" leaf"><a href="index.html#adding-a-signature_signing-packages">4.1.2. Adding a signature to an already existing package</a></li><li class=" leaf"><a href="index.html#checking-the-signatures-of-a-package-with-multiple-signatures_signing-packages">4.1.3. Checking the signatures of a package with multiple signatures</a></li><li class=" leaf"><a href="index.html#a-practical-example-of-adding-a-signature_signing-packages">4.1.4. A practical example of adding a signature to an already existing package</a></li><li class=" leaf"><a href="index.html#replacing-the-signature_signing-packages">4.1.5. Replacing the signature on an already existing package</a></li><li class=" leaf"><a href="index.html#signing-a-package-at-build-time_signing-packages">4.1.6. Signing a package at build-time</a></li></ol></li><li class=" leaf"><a href="index.html#more-on-macros_advanced-topics">4.2. More on macros</a><ol class="menu"><li class=" leaf"><a href="index.html#defining-your-own-macros_more-on-macros">4.2.1. Defining your own macros</a></li><li class=" leaf"><a href="index.html#using-the-setup-macro_more-on-macros">4.2.2. Using the %setup macro</a></li><li class=" leaf"><a href="index.html#common-rpm-macros-in-the-files-section_more-on-macros">4.2.3. Common RPM macros in the %files section</a></li><li class=" leaf"><a href="index.html#displaying-the-built-in-macros_more-on-macros">4.2.4. Displaying the built-in macros</a></li><li class=" leaf"><a href="index.html#rpm-distribution-macros_more-on-macros">4.2.5. RPM distribution macros</a></li></ol></li><li class=" leaf"><a href="index.html#epoch-scriplets-and-triggers_advanced-topics">4.3. Epoch, Scriptlets and Triggers</a><ol class="menu"><li class=" leaf"><a href="index.html#packaging-epoch_epoch-scriplets-and-triggers">4.3.1. The Epoch directive</a></li><li class=" leaf"><a href="index.html#scriptlets-new_epoch-scriplets-and-triggers">4.3.2. Scriptlets</a></li><li class=" leaf"><a href="index.html#triggers_epoch-scriplets-and-triggers">4.3.3. The Triggers directives</a></li><li class=" leaf"><a href="index.html#using-non-shell-scripts-in-a-spec-file_epoch-scriplets-and-triggers">4.3.4. Using non-shell scripts in a SPEC file</a></li></ol></li><li class=" leaf"><a href="index.html#rpm-conditionals_advanced-topics">4.4. RPM conditionals</a><ol class="menu"><li class=" leaf"><a href="index.html#rpm-conditionals-syntax_rpm-conditionals">4.4.1. RPM conditionals syntax</a></li><li class=" leaf"><a href="index.html#rpm-conditionals-examples_rpm-conditionals">4.4.2. RPM conditionals examples</a></li></ol></li><li class=" leaf"><a href="index.html#packaging-python3_advanced-topics">4.5. Packaging of Python 3 RPMs</a><ol class="menu"><li class=" leaf"><a href="index.html#Typical-Python-RPM-package-spec-file-description">4.5.1. Typical SPEC file description for a Python RPM package</a></li><li class=" leaf"><a href="index.html#Common-macros-for-Python-RPM-packages">4.5.2. Common macros for Python 3 RPM packages</a></li><li class=" leaf"><a href="index.html#automatic_provides_for_python_rpm_packages">4.5.3. Automatic provides for Python RPM packages</a></li><li class=" leaf"><a href="index.html#python-shebang-mangling">4.5.4. Handling hashbangs in Python scripts</a></li></ol></li><li class=" leaf"><a href="index.html#ruby-gem-packages_advanced-topics">4.6. RubyGems packages</a><ol class="menu"><li class=" leaf"><a href="index.html#what-rubygems-are_ruby-gem-packages">4.6.1. What RubyGems are</a></li><li class=" leaf"><a href="index.html#ruby-gem-rpm-relation_ruby-gem-packages">4.6.2. How RubyGems relate to RPM</a></li><li class=" leaf"><a href="index.html#creating-rpm-packages-from-rubygems_ruby-gem-packages">4.6.3. Creating RPM packages from RubyGems packages</a></li></ol></li><li class=" leaf"><a href="index.html#how-to-handle-packages-with-perls-scripts_advanced-topics">4.7. How to handle RPM packages with Perls scripts</a><ol class="menu"><li class=" leaf"><a href="index.html#common-perl-related-dependencies_how-to-handle-packages-with-perls-scripts">4.7.1. Common Perl-related dependencies</a></li><li class=" leaf"><a href="index.html#using-a-specific-perl-module_how-to-handle-packages-with-perls-scripts">4.7.2. Using a specific Perl module</a></li><li class=" leaf"><a href="index.html#limiting-a-package-to-a-specific-perl-version_how-to-handle-packages-with-perls-scripts">4.7.3. Limiting a package to a specific Perl version</a></li><li class=" leaf"><a href="index.html#ensuring-that-a-package-uses-the-correct-perl-interpreter_how-to-handle-packages-with-perls-scripts">4.7.4. Ensuring that a package uses the correct Perl interpreter</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#new-features-in-rhel-8_packaging-and-distributing-software">5. New features in RHEL 8</a><ol class="menu"><li class=" leaf"><a href="index.html#support-for-weak-dependencies_new-features-in-rhel-8">5.1. Support for Weak dependencies</a><ol class="menu"><li class=" leaf"><a href="index.html#weak-dependencies-intro">5.1.1. Introduction to Weak dependencies policy</a></li></ol></li><li class=" leaf"><a href="index.html#support-for-boolean-dependencies_new-features-in-rhel-8">5.2. Support for Boolean dependencies</a><ol class="menu"><li class=" leaf"><a href="index.html#boolean-dependencies-syntax">5.2.1. Boolean dependencies syntax</a></li><li class=" leaf"><a href="index.html#boolean-operators">5.2.2. Boolean operators</a></li><li class=" leaf"><a href="index.html#boolean-dependencies-nesting">5.2.3. Nesting</a></li><li class=" leaf"><a href="index.html#boolean-dependencies-semantics">5.2.4. Semantics</a></li></ol></li><li class=" leaf"><a href="index.html#support-for-file-triggers_new-features-in-rhel-8">5.3. Support for File triggers</a><ol class="menu"><li class=" leaf"><a href="index.html#file-triggers-syntax">5.3.1. File triggers syntax</a></li><li class=" leaf"><a href="index.html#file-triggers-syntax-examples">5.3.2. Examples of File triggers syntax</a></li><li class=" leaf"><a href="index.html#file-triggers-types">5.3.3. File triggers types</a></li><li class=" leaf"><a href="index.html#file-triggers-example-use">5.3.4. Example use of File triggers in glibc</a></li></ol></li><li class=" leaf"><a href="index.html#stricter-spec-parser_new-features-in-rhel-8">5.4. Stricter SPEC parser</a></li><li class=" leaf"><a href="index.html#support-for-big-files_new-features-in-rhel-8">5.5. Support for files above 4 GB</a><ol class="menu"><li class=" leaf"><a href="index.html#long-bit-rpm-tags">5.5.1. 64-bit RPM tags</a></li></ol></li><li class=" leaf"><a href="index.html#other-features_new-features-in-rhel-8">5.6. Other features</a></li></ol></li><li class=" leaf"><a href="index.html#additional-resources-about-rpm-packaging_packaging-and-distributing-software">6. Additional resources about RPM packaging</a></li><li class=" leaf"><a href="index.html#idm139760721531840">Legal Notice</a></li></ol>  </div>
</nav>


  <div class="doc-wrapper">
    <div class="panel-pane pane-training-banner"  >
  
      
  
  <div class="card card-light card-md push-bottom">
  <h2 class="card-heading card-heading-red card-heading-sm card-heading-flush">Red Hat Training</h2>
  <p>A Red Hat training course is available for <a href="https://www.redhat.com/en/services/training/courses-by-curriculum?intcmp=701f2000001D4OtAAK&amp;#Red-Hat-Enterprise-Linux" class="cta-link">RHEL 8</a></p>
</div>

  
  </div>
<div class="panel-pane pane-page-title"  >
  
      
  
  <h1 class="title" itemprop="name">Packaging and distributing software</h1>
  
  </div>
<div class="panel-pane pane-page-body"  >
  
      
  
  <div class="body"><div xml:lang="en-US" class="book" id="idm139760729697408"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Enterprise Linux</span> <span class="productnumber">8</span></div><div><h2 class="subtitle">A guide to packaging and distributing software in Red Hat Enterprise Linux 8</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat</span> <span class="orgdiv">Customer Content Services</span></div></div><div><a href="index.html#idm139760721531840">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				This document describes how to package software into an RPM. It also shows how to prepare source code for packaging, and explains selected advanced packaging scenarios, such as packaging Python projects or RubyGems into RPM.
			</div></div></div></div><hr/></div><section class="chapter" id="getting-started-with-rpm-packaging"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Getting started with RPM packaging</h1></div></div></div><p>
			The following section introduces the concept of RPM packaging and its main advantages.
		</p><section class="section" id="introduction-to-rpm-packaging_getting-started-with-rpm-packaging"><div class="titlepage"><div><div><h2 class="title">1.1. Introduction to RPM packaging</h2></div></div></div><p>
				The RPM Package Manager (RPM) is a package management system that runs on Red Hat Enterprise Linux, CentOS, and Fedora. You can use RPM to distribute, manage, and update software that you create for any of the operating systems mentioned above.
			</p><section class="section" id="rpm_advantages"><div class="titlepage"><div><div><h3 class="title">1.1.1. RPM advantages</h3></div></div></div><p>
					The RPM package management system brings several advantages over distribution of software in conventional archive files.
				</p><p>
					RPM enables you to:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Install, reinstall, remove, upgrade and verify packages with standard package management tools, such as Yum or PackageKit.
						</li><li class="listitem">
							Use a database of installed packages to query and verify packages.
						</li><li class="listitem">
							Use metadata to describe packages, their installation instructions, and other package parameters.
						</li><li class="listitem">
							Package software sources, patches and complete build instructions into source and binary packages.
						</li><li class="listitem">
							Add packages to Yum repositories.
						</li><li class="listitem">
							Digitally sign your packages by using GNU Privacy Guard (GPG) signing keys.
						</li></ul></div></section></section></section><section class="chapter" id="preparing-software-for-rpm-packaging_packaging-and-distributing-software"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Preparing software for RPM packaging</h1></div></div></div><p>
			This section explains how to prepare software for RPM packaging. To do so, knowing how to code is not necessary. However, you need to understand the basic concepts, such as <a class="link" href="index.html#what-is-source-code_preparing-software-for-rpm-packaging" title="2.1. What source code is">What source code is</a> and <a class="link" href="index.html#how-programs-are-made_preparing-software-for-rpm-packaging" title="2.2. How programs are made">How programs are made</a>.
		</p><section class="section" id="what-is-source-code_preparing-software-for-rpm-packaging"><div class="titlepage"><div><div><h2 class="title">2.1. What source code is</h2></div></div></div><p>
				This part explains what source code is and shows example source codes of a program written in three different programming languages.
			</p><p>
				Source code is human-readable instructions to the computer, which describe how to perform a computation. Source code is expressed using a programming language.
			</p><section class="section" id="source-code-examples"><div class="titlepage"><div><div><h3 class="title">2.1.1. Source code examples</h3></div></div></div><p>
					This document features three versions of the <code class="literal">Hello World</code> program written in three different programming languages:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="index.html#hello-world-bash" title="2.1.1.1. Hello World written in bash">Section 2.1.1.1, “Hello World written in bash”</a>
						</li><li class="listitem">
							<a class="xref" href="index.html#hello-world-python" title="2.1.1.2. Hello World written in Python">Section 2.1.1.2, “Hello World written in Python”</a>
						</li><li class="listitem">
							<a class="xref" href="index.html#hello-world-c" title="2.1.1.3. Hello World written in C">Section 2.1.1.3, “Hello World written in C”</a>
						</li></ul></div><p>
					Each version is packaged differently.
				</p><p>
					These versions of the <code class="literal">Hello World</code> program cover the three major use cases of an RPM packager.
				</p><section class="section" id="hello-world-bash"><div class="titlepage"><div><div><h4 class="title">2.1.1.1. Hello World written in bash</h4></div></div></div><p>
						The <span class="emphasis"><em>bello</em></span> project implements <code class="literal">Hello World</code> in <a class="link" href="https://www.gnu.org/software/bash/">bash</a>. The implementation only contains the <code class="literal">bello</code> shell script. The purpose of the program is to output <code class="literal">Hello World</code> on the command line.
					</p><p>
						The <code class="literal filename">bello</code> file has the following syntax:
					</p><pre class="literallayout">#!/bin/bash

printf "Hello World\n"</pre></section><section class="section" id="hello-world-python"><div class="titlepage"><div><div><h4 class="title">2.1.1.2. Hello World written in Python</h4></div></div></div><p>
						The <span class="emphasis"><em>pello</em></span> project implements <code class="literal">Hello World</code> in <a class="link" href="https://www.python.org/">Python</a>. The implementation only contains the <code class="literal">pello.py</code> program. The purpose of the program is to output <code class="literal">Hello World</code> on the command line.
					</p><p>
						The <code class="literal filename">pello.py</code> file has the following syntax:
					</p><pre class="literallayout">#!/usr/bin/python3

print("Hello World")</pre></section><section class="section" id="hello-world-c"><div class="titlepage"><div><div><h4 class="title">2.1.1.3. Hello World written in C</h4></div></div></div><p>
						The <span class="emphasis"><em>cello</em></span> project implements <code class="literal">Hello World</code> in C. The implementation only contains the <code class="literal filename">cello.c</code> and the <code class="literal filename">Makefile</code> files, so the resulting <code class="literal filename">tar.gz</code> archive will have two files apart from the <code class="literal filename">LICENSE</code> file.
					</p><p>
						The purpose of the program is to output <code class="literal">Hello World</code> on the command line.
					</p><p>
						The <code class="literal filename">cello.c</code> file has the following syntax:
					</p><pre class="literallayout">#include &lt;stdio.h&gt;

int main(void) {
    printf("Hello World\n");
    return 0;
}</pre></section></section></section><section class="section" id="how-programs-are-made_preparing-software-for-rpm-packaging"><div class="titlepage"><div><div><h2 class="title">2.2. How programs are made</h2></div></div></div><p>
				Methods of conversion from human-readable source code to machine code (instructions that the computer follows to execute the program) include the following:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The program is natively compiled.
					</li><li class="listitem">
						The program is interpreted by raw interpreting.
					</li><li class="listitem">
						The program is interpreted by byte compiling.
					</li></ul></div><section class="section" id="natively-compiled-code"><div class="titlepage"><div><div><h3 class="title">2.2.1. Natively Compiled Code</h3></div></div></div><p>
					Natively compiled software is software written in a programming language that compiles to machine code with a resulting binary executable file. Such software can be run stand-alone.
				</p><p>
					RPM packages built this way are architecture-specific.
				</p><p>
					If you compile such software on a computer that uses a 64-bit (x86_64) AMD or Intel processor, it does not execute on a 32-bit (x86) AMD or Intel processor. The resulting package has architecture specified in its name.
				</p></section><section class="section" id="interpreted-code"><div class="titlepage"><div><div><h3 class="title">2.2.2. Interpreted Code</h3></div></div></div><p>
					Some programming languages, such as <a class="link" href="https://www.gnu.org/software/bash/">bash</a> or <a class="link" href="https://www.python.org/">Python</a>, do not compile to machine code. Instead, their programs' source code is executed step by step, without prior transformations, by a Language Interpreter or a Language Virtual Machine.
				</p><p>
					Software written entirely in interpreted programming languages is not architecture-specific. Hence, the resulting RPM Package has the <code class="literal">noarch</code> string in its name.
				</p><p>
					Interpreted languages are either <a class="link" href="index.html#raw-interpreted-code" title="2.2.2.1. Raw-interpreted programs">Raw-interpreted programs</a> or <a class="link" href="index.html#byte-compiled-code" title="2.2.2.2. Byte-compiled programs">Byte-compiled programs</a>. These two types differ in program build process and in packaging procedure.
				</p><section class="section" id="raw-interpreted-code"><div class="titlepage"><div><div><h4 class="title">2.2.2.1. Raw-interpreted programs</h4></div></div></div><p>
						Raw-interpreted language programs do not need to be compiled and are directly executed by the interpreter.
					</p></section><section class="section" id="byte-compiled-code"><div class="titlepage"><div><div><h4 class="title">2.2.2.2. Byte-compiled programs</h4></div></div></div><p>
						Byte-compiled languages need to be compiled into byte code, which is then executed by the language virtual machine.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Some languages offer a choice: they can be raw-interpreted or byte-compiled.
						</p></div></div></section></section></section><section class="section" id="building-software-from-source_preparing-software-for-rpm-packaging"><div class="titlepage"><div><div><h2 class="title">2.3. Building software from source</h2></div></div></div><p>
				This part describes how to build software from source code.
			</p><p>
				For software written in compiled languages, the source code goes through a build process, producing machine code. This process, commonly called compiling or translating, varies for different languages. The resulting built software can be run, which makes the computer perform the task specified by the programmer.
			</p><p>
				For software written in raw interpreted languages, the source code is not built, but executed directly.
			</p><p>
				For software written in byte-compiled interpreted languages, the source code is compiled into byte code, which is then executed by the language virtual machine.
			</p><section class="section" id="natively-compiled-code-building-software-from-source"><div class="titlepage"><div><div><h3 class="title">2.3.1. Natively Compiled Code</h3></div></div></div><p>
					This section shows how to build the <code class="literal">cello.c</code> program written in the C language into an executable.
				</p><p>
					<code class="literal">cello.c</code>
				</p><pre class="literallayout">#include &lt;stdio.h&gt;

int main(void) {
    printf("Hello World\n");
    return 0;
}</pre><section class="section" id="manual-building"><div class="titlepage"><div><div><h4 class="title">2.3.1.1. Manual building</h4></div></div></div><p>
						If you want to build the <code class="literal">cello.c</code> program manually, use this procedure:
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Invoke the C compiler from the <a class="link" href="https://gcc.gnu.org/">GNU Compiler Collection</a> to compile the source code into binary:
							</p><pre class="literallayout">gcc -g -o cello cello.c</pre></li><li class="listitem"><p class="simpara">
								Execute the resulting output binary <code class="literal">cello</code>:
							</p><pre class="literallayout">$ ./cello
Hello World</pre></li></ol></div></section><section class="section" id="automated_building"><div class="titlepage"><div><div><h4 class="title">2.3.1.2. Automated building</h4></div></div></div><p>
						Large-scale software commonly uses automated building that is done by creating the <code class="literal filename">Makefile</code> file and then running the <a class="link" href="http://www.gnu.org/software/make/">GNU <code class="literal">make</code></a> utility.
					</p><p>
						If you want to use the automated building to build the <code class="literal">cello.c</code> program, use this procedure:
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								To set up automated building, create the <code class="literal filename">Makefile</code> file with the following content in the same directory as <code class="literal">cello.c</code>.
							</p><p class="simpara">
								<code class="literal">Makefile</code>
							</p><pre class="literallayout">cello:
	gcc -g -o cello cello.c
clean:
	rm cello</pre><p class="simpara">
								Note that the lines under <code class="literal">cello:</code> and <code class="literal">clean:</code> must begin with a tab space.
							</p></li><li class="listitem"><p class="simpara">
								To build the software, run the <code class="literal command">make</code> command:
							</p><pre class="literallayout">$ make
make: 'cello' is up to date.</pre></li><li class="listitem"><p class="simpara">
								Since there is already a build available, run the <code class="literal command">make clean</code> command, and after run the <code class="literal command">make</code> command again:
							</p><pre class="literallayout">$ make clean
rm cello

$ make
gcc -g -o cello cello.c</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Trying to build the program after another build has no effect.
								</p><pre class="literallayout">$ make
make: 'cello' is up to date.</pre></div></div></li><li class="listitem"><p class="simpara">
								Execute the program:
							</p><pre class="literallayout">$ ./cello
Hello World</pre></li></ol></div><p>
						You have now compiled a program both manually and using a build tool.
					</p></section></section><section class="section" id="interpreted-code-building-software-from-source"><div class="titlepage"><div><div><h3 class="title">2.3.2. Interpreting code</h3></div></div></div><p>
					This section shows how to byte-compile a program written in <a class="link" href="https://www.python.org/">Python</a> and raw-interpret a program written in <a class="link" href="https://www.gnu.org/software/bash/">bash</a>.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						In the two examples below, the <code class="literal">#!</code> line at the top of the file is known as a <span class="strong strong"><strong>shebang</strong></span>, and is not part of the programming language source code.
					</p><p>
						The <span class="strong strong"><strong>shebang</strong></span> enables using a text file as an executable: the system program loader parses the line containing the <span class="strong strong"><strong>shebang</strong></span> to get a path to the binary executable, which is then used as the programming language interpreter. The functionality requires the text file to be marked as executable.
					</p></div></div><section class="section" id="byte-compiling-code"><div class="titlepage"><div><div><h4 class="title">2.3.2.1. Byte-compiling code</h4></div></div></div><p>
						This section shows how to compile the <code class="literal">pello.py</code> program written in Python into byte code, which is then executed by the Python language virtual machine.
					</p><p>
						Python source code can also be raw-interpreted, but the byte-compiled version is faster. Hence, RPM Packagers prefer to package the byte-compiled version for distribution to end users.
					</p><p>
						<code class="literal">pello.py</code>
					</p><pre class="literallayout">#!/usr/bin/python3

print("Hello World")</pre><p>
						Procedure for byte-compiling programs varies depending on the following factors:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Programming language
							</li><li class="listitem">
								Language’s virtual machine
							</li><li class="listitem">
								Tools and processes used with that language
							</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							<a class="link" href="https://www.python.org/">Python</a> is often byte-compiled, but not in the way described here. The following procedure aims not to conform to the community standards, but to be simple. For real-world Python guidelines, see <a class="link" href="https://docs.python.org/2/library/distribution.html">Software Packaging and Distribution</a>.
						</p></div></div><p>
						Use this procedure to compile <code class="literal">pello.py</code> into byte code:
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Byte-compile the <code class="literal filename">pello.py</code> file:
							</p><pre class="literallayout">$ python -m compileall pello.py

$ file pello.pyc
pello.pyc: python 2.7 byte-compiled</pre></li><li class="listitem"><p class="simpara">
								Execute the byte code in <code class="literal">pello.pyc</code>:
							</p><pre class="literallayout">$ python pello.pyc
Hello World</pre></li></ol></div></section><section class="section" id="raw-interpreting"><div class="titlepage"><div><div><h4 class="title">2.3.2.2. Raw-interpreting code</h4></div></div></div><p>
						This section shows how to raw-interpret the <code class="literal">bello</code> program written in the <a class="link" href="https://www.gnu.org/software/bash/">bash</a> shell built-in language.
					</p><p>
						<code class="literal">bello</code>
					</p><pre class="literallayout">#!/bin/bash

printf "Hello World\n"</pre><p>
						Programs written in shell scripting languages, like <span class="emphasis"><em>bash</em></span>, are raw-interpreted.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Make the file with source code executable and run it:
							</p><pre class="literallayout">$ chmod +x bello
$ ./bello
Hello World</pre></li></ul></div></section></section></section><section class="section" id="patching-software_preparing-software-for-rpm-packaging"><div class="titlepage"><div><div><h2 class="title">2.4. Patching software</h2></div></div></div><p>
				This section explains how to patch the software.
			</p><p>
				In RPM packaging, instead of modifying the original source code, we keep it, and use patches on it.
			</p><p>
				A patch is a source code that updates other source code. It is formatted as a <span class="emphasis"><em>diff</em></span>, because it represents what is different between two versions of the text. A <span class="emphasis"><em>diff</em></span> is created using the <code class="literal">diff</code> utility, which is then applied to the source code using the <a class="link" href="http://savannah.gnu.org/projects/patch/">patch</a> utility.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Software developers often use Version Control Systems such as <a class="link" href="https://git-scm.com/">git</a> to manage their code base. Such tools provide their own methods of creating diffs or patching software.
				</p></div></div><p>
				The following example shows how to create a patch from the original source code using <code class="literal">diff</code>, and how to apply the patch using <code class="literal">patch</code>. Patching is used in a later section when creating an RPM; see <a class="xref" href="index.html#working-with-spec-files" title="3.2. Working with SPEC files">Section 3.2, “Working with SPEC files”</a>.
			</p><p>
				This procedure shows how to create a patch from the original source code for <code class="literal">cello.c</code>.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Preserve the original source code:
					</p><pre class="literallayout">$ cp -p cello.c cello.c.orig</pre><p class="simpara">
						The <code class="literal option">-p</code> option is used to preserve mode, ownership, and timestamps.
					</p></li><li class="listitem"><p class="simpara">
						Modify <code class="literal">cello.c</code> as needed:
					</p><pre class="literallayout">#include &lt;stdio.h&gt;

int main(void) {
    printf("Hello World from my very first patch!\n");
    return 0;
}</pre></li><li class="listitem"><p class="simpara">
						Generate a patch using the <code class="literal">diff</code> utility:
					</p><pre class="literallayout">$ diff -Naur cello.c.orig cello.c
--- cello.c.orig        2016-05-26 17:21:30.478523360 -0500
+ cello.c     2016-05-27 14:53:20.668588245 -0500
@@ -1,6 +1,6 @@
 #include&lt;stdio.h&gt;

 int main(void){
-    printf("Hello World!\n");
+    printf("Hello World from my very first patch!\n");
     return 0;
 }
\ No newline at end of file</pre><p class="simpara">
						Lines starting with a <code class="literal">-</code> are removed from the original source code and replaced with the lines that start with <code class="literal">+</code>.
					</p><p class="simpara">
						Using the <code class="literal option">Naur</code> options with the <code class="literal command">diff</code> command is recommended because it fits the majority of usual use cases. However, in this particular case, only the <code class="literal option">-u</code> option is necessary. Particular options ensure the following:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal option">-N</code> (or <code class="literal option">--new-file</code>) - Handles absent files as if they were empty files.
							</li><li class="listitem">
								<code class="literal option">-a</code> (or <code class="literal option">--text</code>) - Treats all files as text. As a result, the files that <code class="literal command">diff</code> classifies as binaries are not ignored.
							</li><li class="listitem">
								<code class="literal option">-u</code> (or <code class="literal option">-U NUM</code> or <code class="literal option">--unified[=NUM]</code>) - Returns output in the form of output NUM (default 3) lines of unified context. This is an easily readable format that allows fuzzy matching when applying the patch to a changed source tree.
							</li><li class="listitem"><p class="simpara">
								<code class="literal option">-r</code> (or <code class="literal option">--recursive</code>) - Recursively compares any subdirectories that are found.
							</p><p class="simpara">
								For more information on common arguments for the <code class="literal">diff</code> utility, see the <code class="literal">diff</code> manual page.
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						Save the patch to a file:
					</p><pre class="literallayout">$ diff -Naur cello.c.orig cello.c &gt; cello-output-first-patch.patch</pre></li><li class="listitem"><p class="simpara">
						Restore the original <code class="literal">cello.c</code>:
					</p><pre class="literallayout">$ cp cello.c.orig cello.c</pre><p class="simpara">
						The original <code class="literal">cello.c</code> must be retained, because when an RPM is built, the original file is used, not the modified one. For more information, see <a class="xref" href="index.html#working-with-spec-files" title="3.2. Working with SPEC files">Section 3.2, “Working with SPEC files”</a>.
					</p></li></ol></div><p>
				The following procedure shows how to patch <code class="literal">cello.c</code> using <code class="literal">cello-output-first-patch.patch</code>, built the patched program, and run it.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Redirect the patch file to the <code class="literal command">patch</code> command:
					</p><pre class="literallayout">$ patch &lt; cello-output-first-patch.patch
patching file cello.c</pre></li><li class="listitem"><p class="simpara">
						Check that the contents of <code class="literal">cello.c</code> now reflect the patch:
					</p><pre class="literallayout">$ cat cello.c
#include&lt;stdio.h&gt;

int main(void){
    printf("Hello World from my very first patch!\n");
    return 1;
}</pre></li><li class="listitem"><p class="simpara">
						Build and run the patched <code class="literal">cello.c</code>:
					</p><pre class="literallayout">$ make clean
rm cello

$ make
gcc -g -o cello cello.c

$ ./cello
Hello World from my very first patch!</pre></li></ol></div></section><section class="section" id="installing-arbitrary-artifacts_preparing-software-for-rpm-packaging"><div class="titlepage"><div><div><h2 class="title">2.5. Installing arbitrary artifacts</h2></div></div></div><p>
				Unix-like systems use the Filesystem Hierarchy Standard (FHS) to specify a directory suitable for a particular file.
			</p><p>
				Files installed from the RPM packages are placed according to FHS. For example, an executable file should go into a directory that is in the system <code class="literal variable">$PATH</code> variable.
			</p><p>
				In the context of this documentation, an <span class="emphasis"><em>Arbitrary Artifact</em></span> is anything installed from an RPM to the system. For RPM and for the system it can be a script, a binary compiled from the package’s source code, a pre-compiled binary, or any other file.
			</p><p>
				This section describes two common ways of placing <span class="emphasis"><em>Arbitrary Artifacts</em></span> in the system:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="xref" href="index.html#install-command" title="2.5.1. Using the install command">Section 2.5.1, “Using the install command”</a>
					</li><li class="listitem">
						<a class="xref" href="index.html#make-install" title="2.5.2. Using the make install command">Section 2.5.2, “Using the make install command”</a>
					</li></ul></div><section class="section" id="install-command"><div class="titlepage"><div><div><h3 class="title">2.5.1. Using the install command</h3></div></div></div><p>
					Packagers often use the <code class="literal command">install</code> command in cases when build automation tooling such as <a class="link" href="http://www.gnu.org/software/make/">GNU make</a> is not optimal; for example if the packaged program does not need extra overhead.
				</p><p>
					The <code class="literal command">install</code> command is provided to the system by <a class="link" href="http://www.gnu.org/software/coreutils/coreutils.html">coreutils</a>, which places the artifact to the specified directory in the file system with a specified set of permissions.
				</p><p>
					The following procedure uses the <code class="literal filename">bello</code> file that was previously created as the arbitrary artifact as a subject to this installation method.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Run the <code class="literal command">install</code> command to place the <code class="literal filename">bello</code> file into the <code class="literal filename">/usr/bin</code> directory with permissions common for executable scripts:
						</p><pre class="literallayout">$ sudo install -m 0755 bello /usr/bin/bello</pre><p class="simpara">
							As a result, <code class="literal filename">bello</code> is now located in the directory that is listed in the <code class="literal variable">$PATH</code> variable.
						</p></li><li class="listitem"><p class="simpara">
							Execute <code class="literal filename">bello</code> from any directory without specifying its full path:
						</p><pre class="literallayout">$ cd ~

$ bello
Hello World</pre></li></ol></div></section><section class="section" id="make-install"><div class="titlepage"><div><div><h3 class="title">2.5.2. Using the make install command</h3></div></div></div><p>
					Using the <code class="literal filename">make install</code> command is an automated way to install built software to the system. In this case, you need to specify how to install the arbitrary artifacts to the system in the <code class="literal filename">Makefile</code> that is usually written by the developer.
				</p><p>
					This procedure shows how to install a build artifact into a chosen location on the system.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Add the <code class="literal">install</code> section to the <code class="literal filename">Makefile</code>:
						</p><p class="simpara">
							<code class="literal filename">Makefile</code>
						</p><pre class="literallayout">cello:
	gcc -g -o cello cello.c

clean:
	rm cello

install:
	mkdir -p $(DESTDIR)/usr/bin
	install -m 0755 cello $(DESTDIR)/usr/bin/cello</pre><p class="simpara">
							Note that the lines under <code class="literal">cello:</code>, <code class="literal">clean:</code>, and <code class="literal">install:</code> must begin with a tab space.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The <a class="link" href="https://www.gnu.org/software/make/manual/html_node/DESTDIR.html">$(DESTDIR)</a> variable is a <a class="link" href="http://www.gnu.org/software/make/">GNU make</a> built-in and is commonly used to specify installation to a directory different than the root directory.
							</p></div></div><p class="simpara">
							Now you can use <code class="literal filename">Makefile</code> not only to build software, but also to install it to the target system.
						</p></li><li class="listitem"><p class="simpara">
							Build and install the <code class="literal">cello.c</code> program:
						</p><pre class="literallayout">$ make
gcc -g -o cello cello.c

$ sudo make install
install -m 0755 cello /usr/bin/cello</pre><p class="simpara">
							As a result, <code class="literal">cello</code> is now located in the directory that is listed in the <code class="literal variable">$PATH</code> variable.
						</p></li><li class="listitem"><p class="simpara">
							Execute <code class="literal">cello</code> from any directory without specifying its full path:
						</p><pre class="literallayout">$ cd ~

$ cello
Hello World</pre></li></ol></div></section></section><section class="section" id="preparing-source-code-for-packaging_preparing-software-for-rpm-packaging"><div class="titlepage"><div><div><h2 class="title">2.6. Preparing source code for packaging</h2></div></div></div><p>
				Developers often distribute software as compressed archives of source code, which are then used to create packages. RPM packagers work with a ready source code archive.
			</p><p>
				Software should be distributed with a software license.
			</p><p>
				This procedure uses the <a class="link" href="https://www.gnu.org/licenses/quick-guide-gplv3.html">GPLv3</a> license text as an example content of the <code class="literal filename">LICENSE</code> file.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Create a <code class="literal filename">LICENSE</code> file, and make sure that it includes the following content:
					</p><pre class="literallayout">$ cat /tmp/LICENSE
This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with this program. If not, see <a class="link" href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The code created in this section can be found <a class="link" href="https://github.com/redhat-developer/rpm-packaging-guide/tree/master/example-code">here</a>.
					</li></ul></div></section><section class="section" id="putting-source-code-into-tarball_preparing-software-for-rpm-packaging"><div class="titlepage"><div><div><h2 class="title">2.7. Putting source code into tarball</h2></div></div></div><p>
				This section describes how to put each of the three <code class="literal">Hello World</code> programs introduced in <a class="xref" href="index.html#source-code-examples" title="2.1.1. Source code examples">Section 2.1.1, “Source code examples”</a> into a <a class="link" href="https://www.gnu.org/software/gzip/">gzip</a>-compressed tarball, which is a common way to release the software to be later packaged for distribution.
			</p><section class="section" id="bello"><div class="titlepage"><div><div><h3 class="title">2.7.1. Putting the bello project into tarball</h3></div></div></div><p>
					The <span class="emphasis"><em>bello</em></span> project implements <code class="literal">Hello World</code> in <a class="link" href="https://www.gnu.org/software/bash/">bash</a>. The implementation only contains the <code class="literal">bello</code> shell script, so the resulting <code class="literal filename">tar.gz</code> archive will have only one file apart from the <code class="literal filename">LICENSE</code> file.
				</p><p>
					This procedure shows how to prepare the <span class="emphasis"><em>bello</em></span> project for distribution.
				</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
						Considering that this is version <code class="literal">0.1</code> of the program.
					</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Put all required files into a single directory:
						</p><pre class="literallayout">$ mkdir /tmp/bello-0.1

$ mv ~/bello /tmp/bello-0.1/

$ cp /tmp/LICENSE /tmp/bello-0.1/</pre></li><li class="listitem"><p class="simpara">
							Create the archive for distribution and move it to the <code class="literal filename">~/rpmbuild/SOURCES/</code> directory, which is the default directory where the <code class="literal command">rpmbuild</code> command stores the files for building packages:
						</p><pre class="literallayout">$ cd /tmp/

$ tar -cvzf bello-0.1.tar.gz bello-0.1
bello-0.1/
bello-0.1/LICENSE
bello-0.1/bello

$ mv /tmp/bello-0.1.tar.gz ~/rpmbuild/SOURCES/</pre></li></ol></div><p>
					For more information about the example source code written in bash, see <a class="xref" href="index.html#hello-world-bash" title="2.1.1.1. Hello World written in bash">Section 2.1.1.1, “Hello World written in bash”</a>.
				</p></section><section class="section" id="pello"><div class="titlepage"><div><div><h3 class="title">2.7.2. Putting the pello project into tarball</h3></div></div></div><p>
					The <span class="emphasis"><em>pello</em></span> project implements <code class="literal">Hello World</code> in <a class="link" href="https://www.python.org/">Python</a>. The implementation only contains the <code class="literal">pello.py</code> program, so the resulting <code class="literal filename">tar.gz</code> archive will have only one file apart from the <code class="literal filename">LICENSE</code> file.
				</p><p>
					This procedure shows how to prepare the <span class="emphasis"><em>pello</em></span> project for distribution.
				</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
						Considering that this is version <code class="literal">0.1.1</code> of the program.
					</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Put all required files into a single directory:
						</p><pre class="literallayout">$ mkdir /tmp/pello-0.1.2

$ mv ~/pello.py /tmp/pello-0.1.2/

$ cp /tmp/LICENSE /tmp/pello-0.1.2/</pre></li><li class="listitem"><p class="simpara">
							Create the archive for distribution and move it to the <code class="literal filename">~/rpmbuild/SOURCES/</code> directory, which is the default directory where the <code class="literal command">rpmbuild</code> command stores the files for building packages:
						</p><pre class="literallayout">$ cd /tmp/

$ tar -cvzf pello-0.1.2.tar.gz pello-0.1.2
pello-0.1.2/
pello-0.1.2/LICENSE
pello-0.1.2/pello.py

$ mv /tmp/pello-0.1.2.tar.gz ~/rpmbuild/SOURCES/</pre></li></ol></div><p>
					For more information about the example source code written in Python, see <a class="xref" href="index.html#hello-world-python" title="2.1.1.2. Hello World written in Python">Section 2.1.1.2, “Hello World written in Python”</a>.
				</p></section><section class="section" id="cello"><div class="titlepage"><div><div><h3 class="title">2.7.3. Putting the cello project into tarball</h3></div></div></div><p>
					The <span class="emphasis"><em>cello</em></span> project implements <code class="literal">Hello World</code> in C. The implementation only contains the <code class="literal filename">cello.c</code> and the <code class="literal filename">Makefile</code> files, so the resulting <code class="literal filename">tar.gz</code> archive will have two files apart from the <code class="literal filename">LICENSE</code> file.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The <code class="literal filename">patch</code> file is not distributed in the archive with the program. The RPM Packager applies the patch when the RPM is built. The patch will be placed into the <code class="literal filename">~/rpmbuild/SOURCES/</code> directory alongside the <code class="literal filename">.tar.gz</code> archive.
					</p></div></div><p>
					This procedure shows how to prepare the <span class="emphasis"><em>cello</em></span> project for distribution.
				</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
						Considering that this is version <code class="literal">1.0</code> of the program.
					</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Put all required files into a single directory:
						</p><pre class="literallayout">$ mkdir /tmp/cello-1.0

$ mv ~/cello.c /tmp/cello-1.0/

$ mv ~/Makefile /tmp/cello-1.0/

$ cp /tmp/LICENSE /tmp/cello-1.0/</pre></li><li class="listitem"><p class="simpara">
							Create the archive for distribution and move it to the <code class="literal filename">~/rpmbuild/SOURCES/</code> directory, which is the default directory where the <code class="literal command">rpmbuild</code> command stores the files for building packages:
						</p><pre class="literallayout">$ cd /tmp/

$ tar -cvzf cello-1.0.tar.gz cello-1.0
cello-1.0/
cello-1.0/Makefile
cello-1.0/cello.c
cello-1.0/LICENSE

$ mv /tmp/cello-1.0.tar.gz ~/rpmbuild/SOURCES/</pre></li><li class="listitem"><p class="simpara">
							Add the patch:
						</p><pre class="literallayout">$ mv ~/cello-output-first-patch.patch ~/rpmbuild/SOURCES/</pre></li></ol></div><p>
					For more information about the example source code written in C, see <a class="xref" href="index.html#hello-world-c" title="2.1.1.3. Hello World written in C">Section 2.1.1.3, “Hello World written in C”</a>.
				</p></section></section></section><section class="chapter" id="packaging-software_packaging-and-distributing-software"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Packaging software</h1></div></div></div><section class="section" id="rpm-packages_packaging-software"><div class="titlepage"><div><div><h2 class="title">3.1. RPM packages</h2></div></div></div><p>
				This section covers the basics of the RPM packaging format.
			</p><section class="section" id="what-is-an-rpm_rpm-packages"><div class="titlepage"><div><div><h3 class="title">3.1.1. What an RPM is</h3></div></div></div><p>
					An RPM package is a file containing other files and their metadata (information about the files that are needed by the system).
				</p><p>
					Specifically, an RPM package consists of the <code class="literal">cpio</code> archive.
				</p><p>
					The <code class="literal">cpio</code> archive contains:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Files
						</li><li class="listitem"><p class="simpara">
							RPM header (package metadata)
						</p><p class="simpara">
							The <code class="literal">rpm</code> package manager uses this metadata to determine dependencies, where to install files, and other information.
						</p></li></ul></div><h5 id="types_of_rpm_packages">Types of RPM packages</h5><p>
					There are two types of RPM packages. Both types share the file format and tooling, but have different contents and serve different purposes:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Source RPM (SRPM)
						</p><p class="simpara">
							An SRPM contains source code and a SPEC file, which describes how to build the source code into a binary RPM. Optionally, the patches to source code are included as well.
						</p></li><li class="listitem"><p class="simpara">
							Binary RPM
						</p><p class="simpara">
							A binary RPM contains the binaries built from the sources and patches.
						</p></li></ul></div></section><section class="section" id="rpm-packaging-tools_rpm-packages"><div class="titlepage"><div><div><h3 class="title">3.1.2. Listing RPM packaging tool’s utilities</h3></div></div></div><p>
					The following procedures show how to list the utilities provided by the <code class="literal package">rpmdevtools</code> package.
				</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
						To be able to use the RPM packaging tools, you need to install the <code class="literal package">rpmdevtools</code> package, which provides several utilities for packaging RPMs.
					</p></div><pre class="literallayout"># yum install rpmdevtools</pre><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							List RPM packaging tool’s utilities:
						</p><pre class="literallayout">$ rpm -ql rpmdevtools | grep bin</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional information</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information on the above utilities, see their manual pages or help dialogs.
						</li></ul></div></section><section class="section" id="setting-up-rpm-packaging-workspace_rpm-packages"><div class="titlepage"><div><div><h3 class="title">3.1.3. Setting up RPM packaging workspace</h3></div></div></div><p>
					This section describes how to set up a directory layout that is the RPM packaging workspace by using the <code class="literal">rpmdev-setuptree</code> utility.
				</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
						The <code class="literal package">rpmdevtools</code> package must be installed on your system:
					</p></div><pre class="literallayout"># yum install rpmdevtools</pre><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Run the <code class="literal">rpmdev-setuptree</code> utility:
						</li></ul></div><pre class="literallayout">$ rpmdev-setuptree

$ tree ~/rpmbuild/
/home/user/rpmbuild/
|-- BUILD
|-- RPMS
|-- SOURCES
|-- SPECS
`-- SRPMS

5 directories, 0 files</pre><p>
					The created directories serve these purposes:
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 80%; " class="col_2"><!--Empty--></col></colgroup><tbody><tr><td align="left" valign="top"> <p>
									Directory
								</p>
								 </td><td align="left" valign="top"> <p>
									Purpose
								</p>
								 </td></tr><tr><td align="left" valign="top"> <p>
									BUILD
								</p>
								 </td><td align="left" valign="top"> <p>
									When packages are built, various <code class="literal">%buildroot</code> directories are created here. This is useful for investigating a failed build if the logs output do not provide enough information.
								</p>
								 </td></tr><tr><td align="left" valign="top"> <p>
									RPMS
								</p>
								 </td><td align="left" valign="top"> <p>
									Binary RPMs are created here, in subdirectories for different architectures, for example in subdirectories <code class="literal">x86_64</code> and <code class="literal">noarch</code>.
								</p>
								 </td></tr><tr><td align="left" valign="top"> <p>
									SOURCES
								</p>
								 </td><td align="left" valign="top"> <p>
									Here, the packager puts compressed source code archives and patches. The <code class="literal">rpmbuild</code> command looks for them here.
								</p>
								 </td></tr><tr><td align="left" valign="top"> <p>
									SPECS
								</p>
								 </td><td align="left" valign="top"> <p>
									The packager puts SPEC files here.
								</p>
								 </td></tr><tr><td align="left" valign="top"> <p>
									SRPMS
								</p>
								 </td><td align="left" valign="top"> <p>
									When <code class="literal">rpmbuild</code> is used to build an SRPM instead of a binary RPM, the resulting SRPM is created here.
								</p>
								 </td></tr></tbody></table></div></section><section class="section" id="what-is-a-spec-file_rpm-packages"><div class="titlepage"><div><div><h3 class="title">3.1.4. What a SPEC file is</h3></div></div></div><p>
					You can understand a SPEC file as a recipe that the <code class="literal">rpmbuild</code> utility uses to build an RPM. A SPEC file provides necessary information to the build system by defining instructions in a series of sections. The sections are defined in the <span class="emphasis"><em>Preamble</em></span> and the <span class="emphasis"><em>Body</em></span> part. The <span class="emphasis"><em>Preamble</em></span> part contains a series of metadata items that are used in the <span class="emphasis"><em>Body</em></span> part. The <span class="emphasis"><em>Body</em></span> part represents the main part of the instructions.
				</p><section class="section" id="preamble-items"><div class="titlepage"><div><div><h4 class="title">3.1.4.1. Preamble Items</h4></div></div></div><p>
						The table below presents some of the directives that are used frequently in the <span class="emphasis"><em>Preamble</em></span> section of the RPM SPEC file.
					</p><div class="table" id="idm139760730109440"><p class="title"><strong>Table 3.1. Items used in the <code class="literal"><span class="emphasis"><em>Preamble</em></span></code> section of the RPM SPEC file</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"><!--Empty--></col><col style="width: 70%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139760730103904" scope="col">SPEC Directive</th><th align="left" valign="top" id="idm139760730102816" scope="col">Definition</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139760730103904"> <p>
										<code class="literal">Name</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760730102816"> <p>
										The base name of the package, which should match the SPEC file name.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760730103904"> <p>
										<code class="literal">Version</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760730102816"> <p>
										The upstream version number of the software.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760730103904"> <p>
										<code class="literal">Release</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760730102816"> <p>
										The number of times this version of the software was released. Normally, set the initial value to 1%{?dist}, and increment it with each new release of the package. Reset to 1 when a new <code class="literal">Version</code> of the software is built.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760730103904"> <p>
										<code class="literal">Summary</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760730102816"> <p>
										A brief, one-line summary of the package.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760730103904"> <p>
										<code class="literal">License</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760730102816"> <p>
										The license of the software being packaged.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760730103904"> <p>
										<code class="literal">URL</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760730102816"> <p>
										The full URL for more information about the program. Most often this is the upstream project website for the software being packaged.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760730103904"> <p>
										<code class="literal">Source0</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760730102816"> <p>
										Path or URL to the compressed archive of the upstream source code (unpatched, patches are handled elsewhere). This should point to an accessible and reliable storage of the archive, for example, the upstream page and not the packager’s local storage. If needed, more SourceX directives can be added, incrementing the number each time, for example: Source1, Source2, Source3, and so on.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760730103904"> <p>
										<code class="literal">Patch</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760730102816"> <p>
										The name of the first patch to apply to the source code if necessary.
									</p>
									 <p>
										The directive can be applied in two ways: with or without numbers at the end of Patch.
									</p>
									 <p>
										If no number is given, one is assigned to the entry internally. It is also possible to give the numbers explicitly using Patch0, Patch1, Patch2, Patch3, and so on.
									</p>
									 <p>
										These patches can be applied one by one using the %patch0, %patch1, %patch2 macro and so on. The macros are applied within the %prep directive in the <span class="emphasis"><em>Body</em></span> section of the RPM SPEC file. Alternatively, you can use the %autopatch macro which automatically applies all patches in the order they are given in the SPEC file.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760730103904"> <p>
										<code class="literal">BuildArch</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760730102816"> <p>
										If the package is not architecture dependent, for example, if written entirely in an interpreted programming language, set this to <code class="literal">BuildArch: noarch</code>. If not set, the package automatically inherits the Architecture of the machine on which it is built, for example <code class="literal">x86_64</code>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760730103904"> <p>
										<code class="literal">BuildRequires</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760730102816"> <p>
										A comma or whitespace-separated list of packages required for building the program written in a compiled language. There can be multiple entries of <code class="literal">BuildRequires</code>, each on its own line in the SPEC file.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760730103904"> <p>
										<code class="literal">Requires</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760730102816"> <p>
										A comma- or whitespace-separated list of packages required by the software to run once installed. There can be multiple entries of <code class="literal">Requires</code>, each on its own line in the SPEC file.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760730103904"> <p>
										<code class="literal">ExcludeArch</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760730102816"> <p>
										If a piece of software can not operate on a specific processor architecture, you can exclude that architecture here.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760730103904"> <p>
										<code class="literal">Conflicts</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760730102816"> <p>
										<code class="literal">Conflicts</code> are inverse to <code class="literal">Requires</code>. If there is a package matching <code class="literal">Conflicts</code>, the package cannot be installed independently on whether the <code class="literal">Conflict</code> tag is on the package that has already been installed or on a package that is going to be installed.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760730103904"> <p>
										<code class="literal">Obsoletes</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760730102816"> <p>
										This directive alters the way updates work depending on whether the <code class="literal">rpm</code> command is used directly on the command line or the update is performed by an updates or dependency solver. When used on a command line, RPM removes all packages matching obsoletes of packages being installed. When using an update or dependency resolver, packages containing matching <code class="literal">Obsoletes:</code> are added as updates and replace the matching packages.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760730103904"> <p>
										<code class="literal">Provides</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760730102816"> <p>
										If <code class="literal">Provides</code> is added to a package, the package can be referred to by dependencies other than its name.
									</p>
									 </td></tr></tbody></table></div></div><p>
						The <code class="literal">Name</code>, <code class="literal">Version</code>, and <code class="literal">Release</code> directives comprise the file name of the RPM package. RPM package maintainers and system administrators often call these three directives <span class="strong strong"><strong>N-V-R</strong></span> or <span class="strong strong"><strong>NVR</strong></span>, because RPM package filenames have the <code class="literal">NAME-VERSION-RELEASE</code> format.
					</p><p>
						The following example shows how to obtain the <span class="strong strong"><strong>NVR</strong></span> information for a specific package by querying the <code class="literal command">rpm</code> command.
					</p><div class="example" id="idm139760725623168"><p class="title"><strong>Example 3.1. Querying rpm to provide the NVR information for the bash package</strong></p><div class="example-contents"><pre class="literallayout"># rpm -q bash
bash-4.4.19-7.el8.x86_64</pre></div></div><p>
						Here, <code class="literal">bash</code> is the package name, <code class="literal">4.4.19</code> is the version, and <code class="literal">7.el8</code> is the release. The final marker is <code class="literal">x86_64</code>, which signals the architecture. Unlike the <span class="strong strong"><strong>NVR</strong></span>, the architecture marker is not under direct control of the RPM packager, but is defined by the <code class="literal">rpmbuild</code> build environment. The exception to this is the architecture-independent <code class="literal">noarch</code> package.
					</p></section><section class="section" id="body-items"><div class="titlepage"><div><div><h4 class="title">3.1.4.2. Body Items</h4></div></div></div><p>
						The items used in the <code class="literal">Body section</code> of the RPM SPEC file are listed in the table below.
					</p><div class="table" id="idm139760725533696"><p class="title"><strong>Table 3.2. Items used in the Body section of the RPM SPEC file</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 80%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139760725528896" scope="col">SPEC Directive</th><th align="left" valign="top" id="idm139760725527808" scope="col">Definition</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139760725528896"> <p>
										<code class="literal">%description</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760725527808"> <p>
										A full description of the software packaged in the RPM. This description can span multiple lines and can be broken into paragraphs.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760725528896"> <p>
										<code class="literal">%prep</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760725527808"> <p>
										Command or series of commands to prepare the software to be built, for example, unpacking the archive in <code class="literal">Source0</code>. This directive can contain a shell script.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760725528896"> <p>
										<code class="literal">%build</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760725527808"> <p>
										Command or series of commands for building the software into machine code (for compiled languages) or byte code (for some interpreted languages).
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760725528896"> <p>
										<code class="literal">%install</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760725527808"> <p>
										Command or series of commands for copying the desired build artifacts from the <code class="literal">%builddir</code> (where the build happens) to the <code class="literal">%buildroot</code> directory (which contains the directory structure with the files to be packaged). This usually means copying files from <code class="literal">~/rpmbuild/BUILD</code> to <code class="literal">~/rpmbuild/BUILDROOT</code> and creating the necessary directories in <code class="literal">~/rpmbuild/BUILDROOT</code>. This is only run when creating a package, not when the end-user installs the package. See <a class="xref" href="index.html#working-with-spec-files" title="3.2. Working with SPEC files">Section 3.2, “Working with SPEC files”</a> for details.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760725528896"> <p>
										<code class="literal">%check</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760725527808"> <p>
										Command or series of commands to test the software. This normally includes things such as unit tests.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760725528896"> <p>
										<code class="literal">%files</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760725527808"> <p>
										The list of files that will be installed in the end user’s system.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760725528896"> <p>
										<code class="literal">%changelog</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760725527808"> <p>
										A record of changes that have happened to the package between different <code class="literal">Version</code> or <code class="literal">Release</code> builds.
									</p>
									 </td></tr></tbody></table></div></div></section><section class="section" id="advanced-items"><div class="titlepage"><div><div><h4 class="title">3.1.4.3. Advanced items</h4></div></div></div><p>
						The SPEC file can also contain advanced items, such as <a class="link" href="index.html#scriptlets-directives_scriptlets-new" title="4.3.2.1. Scriptlets directives">Scriptlets</a> or <a class="link" href="index.html#triggers_epoch-scriplets-and-triggers" title="4.3.3. The Triggers directives">Triggers</a>. They take effect at different points during the installation process on the end user’s system, not the build process.
					</p></section></section><section class="section" id="buildroots_rpm-packages"><div class="titlepage"><div><div><h3 class="title">3.1.5. BuildRoots</h3></div></div></div><p>
					In the context of RPM packaging, <code class="literal">buildroot</code> is a chroot environment. This means that the build artifacts are placed here using the same file system hierarchy as the future hierarchy in end user’s system, with <code class="literal">buildroot</code> acting as the root directory. The placement of build artifacts should comply with the file system hierarchy standard of the end user’s system.
				</p><p>
					The files in <code class="literal">buildroot</code> are later put into a <code class="literal">cpio</code> archive, which becomes the main part of the RPM. When RPM is installed on the end user’s system, these files are extracted in the <code class="literal filename">root</code> directory, preserving the correct hierarchy.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Starting from Red Hat Enterprise Linux 6, the <code class="literal">rpmbuild</code> program has its own defaults. Overriding these defaults leads to several problems; hence, Red Hat does not recommend to define your own value of this macro. You can use the <code class="literal">%{buildroot}</code> macro with the defaults from the <code class="literal filename">rpmbuild</code> directory.
					</p></div></div></section><section class="section" id="rpm-macros_rpm-packages"><div class="titlepage"><div><div><h3 class="title">3.1.6. RPM macros</h3></div></div></div><p>
					An <a class="link" href="http://rpm.org/user_doc/macros.html">rpm macro</a> is a straight text substitution that can be conditionally assigned based on the optional evaluation of a statement when certain built-in functionality is used. Hence, RPM can perform text substitutions for you.
				</p><p>
					An example use is referencing the packaged software <span class="emphasis"><em>Version</em></span> multiple times in a SPEC file. You define <span class="emphasis"><em>Version</em></span> only once in the <code class="literal">%{version}</code> macro, and use this macro throughout the SPEC file. Every occurrence will be automatically substituted by <span class="emphasis"><em>Version</em></span> that you defined previously.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If you see an unfamiliar macro, you can evaluate it with the following command:
					</p><pre class="literallayout">$ rpm --eval %{_MACRO}</pre><div class="formalpara"><p class="title"><strong>Evaluating the %{_bindir} and the %{_libexecdir} macros</strong></p><p>
							
<pre class="literallayout">$ rpm --eval %{_bindir}
/usr/bin

$ rpm --eval %{_libexecdir}
/usr/libexec</pre>

						</p></div></div></div><p>
					On of the commonly-used macros is the <code class="literal">%{?dist}</code> macro, which signals which distribution is used for the build (distribution tag).
				</p><pre class="literallayout"># On a RHEL 8.x machine
$ rpm --eval %{?dist}
.el8</pre></section></section><section class="section" id="working-with-spec-files"><div class="titlepage"><div><div><h2 class="title">3.2. Working with SPEC files</h2></div></div></div><p>
				This section describes how to create and modify a SPEC file.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					This section uses the three example implementations of the <code class="literal">Hello World!</code> program that were described in <a class="xref" href="index.html#source-code-examples" title="2.1.1. Source code examples">Section 2.1.1, “Source code examples”</a>.
				</p></div><p>
				Each of the programs is also fully described in the below table.
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"><!--Empty--></col><col style="width: 85%; " class="col_2"><!--Empty--></col></colgroup><tbody><tr><td align="left" valign="top"> <p>
								Software Name
							</p>
							 </td><td align="left" valign="top"> <p>
								Explanation of example
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								bello
							</p>
							 </td><td align="left" valign="top"> <p>
								A program written in a raw interpreted programming language. It demonstrates when the source code does not need to be built, but only needs to be installed. If a pre-compiled binary needs to be packaged, you can also use this method since the binary would also just be a file.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								pello
							</p>
							 </td><td align="left" valign="top"> <p>
								A program written in a byte-compiled interpreted programming language. It demonstrates byte-compiling the source code and installating the bytecode - the resulting pre-optimized files.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								cello
							</p>
							 </td><td align="left" valign="top"> <p>
								A program written in a natively compiled programming language. It demonstrates a common process of compiling the source code into machine code and installing the resulting executables.
							</p>
							 </td></tr></tbody></table></div><p>
				The implementations of <code class="literal">Hello World!</code> are:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://github.com/redhat-developer/rpm-packaging-guide/raw/master/example-code/bello-0.1.tar.gz">bello-0.1.tar.gz</a>
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://github.com/redhat-developer/rpm-packaging-guide/raw/master/example-code/pello-0.1.2.tar.gz">pello-0.1.2.tar.gz</a>
					</li><li class="listitem"><p class="simpara">
						<a class="link" href="https://github.com/redhat-developer/rpm-packaging-guide/raw/master/example-code/cello-1.0.tar.gz">cello-1.0.tar.gz</a>
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="https://raw.githubusercontent.com/redhat-developer/rpm-packaging-guide/master/example-code/cello-output-first-patch.patch">cello-output-first-patch.patch</a>
							</li></ul></div></li></ul></div><p>
				As a prerequisite, these implementations need to be placed into the <code class="literal filename">~/rpmbuild/SOURCES</code> directory.
			</p><section class="section" id="ways_to_create_a_new_spec_file"><div class="titlepage"><div><div><h3 class="title">3.2.1. Ways to create a new SPEC file</h3></div></div></div><p>
					To package new software, you need to create a new SPEC file.
				</p><p>
					There are two to achieve this:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Writing the new SPEC file manually from scratch
						</li><li class="listitem"><p class="simpara">
							Use the <code class="literal">rpmdev-newspec</code> utility
						</p><p class="simpara">
							This utility creates an unpopulated SPEC file, and you fill in the necessary directives and fields.
						</p></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Some programmer-focused text editors pre-populate a new <code class="literal">.spec</code> file with their own SPEC template. The <code class="literal">rpmdev-newspec</code> utility provides an editor-agnostic method.
					</p></div></div></section><section class="section" id="creating-spec-files-with-rpmdev-newspec_working-with-spec-files"><div class="titlepage"><div><div><h3 class="title">3.2.2. Creating a new SPEC file with rpmdev-newspec</h3></div></div></div><p>
					The following procedure shows how to create a SPEC file for each of the three aforementioned <code class="literal">Hello World!</code> programs using the <code class="literal">rpmdev-newspec</code> utility.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Change to the <code class="literal filename">~/rpmbuild/SPECS</code> directory and use the <code class="literal">rpmdev-newspec</code> utility:
						</p><pre class="literallayout">$ cd ~/rpmbuild/SPECS

$ rpmdev-newspec bello
bello.spec created; type minimal, rpm version &gt;= 4.11.

$ rpmdev-newspec cello
cello.spec created; type minimal, rpm version &gt;= 4.11.

$ rpmdev-newspec pello
pello.spec created; type minimal, rpm version &gt;= 4.11.</pre><p class="simpara">
							The <code class="literal filename">~/rpmbuild/SPECS/</code> directory now contains three SPEC files named <code class="literal filename">bello.spec</code>, <code class="literal filename">cello.spec</code>, and <code class="literal filename">pello.spec</code>.
						</p></li></ol></div><p>
					fd. Examine the files:
				</p><p>
					+ The directives in the files represent those described in the <a class="xref" href="index.html#what-is-a-spec-file_rpm-packages" title="3.1.4. What a SPEC file is">Section 3.1.4, “What a SPEC file is”</a> section. In the following sections, you will populate particular section in the output files of <code class="literal">rpmdev-newspec</code>.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The <code class="literal">rpmdev-newspec</code> utility does not use guidelines or conventions specific to any particular Linux distribution. However, this document targets Red Hat Enterprise Linux, so the <code class="literal">%{buildroot}</code> notation is preferred over the <code class="literal">$RPM_BUILD_ROOT</code> notation when referencing RPM’s Buildroot for consistency with all other defined or provided macros throughout the SPEC file.
					</p></div></div></section><section class="section" id="modifying-a-spec-file_working-with-spec-files"><div class="titlepage"><div><div><h3 class="title">3.2.3. Modifying an original SPEC file for creating RPMs</h3></div></div></div><p>
					The following procedure shows how to modify the output SPEC file provided by <code class="literal">rpmdev-newspec</code> for creating the RPMs.
				</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
						Make sure that:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The source code of the particular program has been placed into the <code class="literal filename">~/rpmbuild/SOURCES/</code> directory.
						</li><li class="listitem">
							The unpopulated SPEC file <code class="literal filename">~/rpmbuild/SPECS/&lt;name&gt;.spec</code> file has been created by the <code class="literal">rpmdev-newspec</code> utility.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Open the output template of the <code class="literal filename">~/rpmbuild/SPECS/&lt;name&gt;.spec</code> file provided by the <code class="literal">rpmdev-newspec</code> utility:
						</li><li class="listitem"><p class="simpara">
							Populate the first section of the SPEC file:
						</p><p class="simpara">
							The first section includes these directives that <code class="literal">rpmdev-newspec</code> grouped together:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">Name</code>
								</li><li class="listitem">
									<code class="literal">Version</code>
								</li><li class="listitem">
									<code class="literal">Release</code>
								</li><li class="listitem"><p class="simpara">
									<code class="literal">Summary</code>
								</p><p class="simpara">
									The <code class="literal">Name</code> was already specified as an argument to <code class="literal command">rpmdev-newspec</code>.
								</p><p class="simpara">
									Set the <code class="literal">Version</code> to match the upstream release version of the source code.
								</p><p class="simpara">
									The <code class="literal">Release</code> is automatically set to <code class="literal">1%{?dist}</code>, which is initially <code class="literal">1</code>. Increment the initial value whenever updating the package without a change in the upstream release <code class="literal">Version</code> - such as when including a patch. Reset <code class="literal">Release</code> to <code class="literal">1</code> when a new upstream release happens.
								</p><p class="simpara">
									The <code class="literal">Summary</code> is a short, one-line explanation of what this software is.
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							Populate the <code class="literal">License</code>, <code class="literal">URL</code>, and <code class="literal">Source0</code> directives:
						</p><p class="simpara">
							The <code class="literal">License</code> field is the Software License associated with the source code from the upstream release. The exact format for how to label the <code class="literal">License</code> in your SPEC file will vary depending on which specific RPM based Linux distribution guidelines you are following.
						</p><p class="simpara">
							For example, you can use <a class="link" href="https://www.gnu.org/licenses/quick-guide-gplv3.html">GPLv3+</a>.
						</p><p class="simpara">
							The <code class="literal">URL</code> field provides URL to the upstream software website. For consistency, utilize the RPM macro variable of <code class="literal">%{name}</code>, and use <code class="literal"><a class="link" href="https://example.com/%{name}">https://example.com/%{name}</a></code>.
						</p><p class="simpara">
							The <code class="literal">Source0</code> field provides URL to the upstream software source code. It should link directly to the specific version of software that is being packaged. Note that the example URLs given in this documentation include hard-coded values that are possible subject to change in the future. Similarly, the release version can change as well. To simplify these potential future changes, use the <code class="literal">%{name}</code> and <code class="literal">%{version}</code> macros. By using these, you need to update only one field in the SPEC file.
						</p></li><li class="listitem"><p class="simpara">
							Populate the <code class="literal">BuildRequires</code>, <code class="literal">Requires</code> and <code class="literal">BuildArch</code> directives:
						</p><p class="simpara">
							<code class="literal">BuildRequires</code> specifies build-time dependencies for the package.
						</p><p class="simpara">
							<code class="literal">Requires</code> specifies run-time dependencies for the package.
						</p><p class="simpara">
							This is a software written in an interpreted programming language with no natively compiled extensions. Hence, add the <code class="literal">BuildArch</code> directive with the <code class="literal">noarch</code> value. This tells RPM that this package does not need to be bound to the processor architecture on which it is built.
						</p></li><li class="listitem"><p class="simpara">
							Populate the <code class="literal">%description</code>, <code class="literal">%prep</code>, <code class="literal">%build</code>, <code class="literal">%install</code>, <code class="literal">%files</code>, and <code class="literal">%license</code> directives:
						</p><p class="simpara">
							These directives can be thought of as section headings, because they are directives that can define multi-line, multi-instruction, or scripted tasks to occur.
						</p><p class="simpara">
							The <code class="literal">%description</code> is a longer, fuller description of the software than <code class="literal">Summary</code>, containing one or more paragraphs.
						</p><p class="simpara">
							The <code class="literal">%prep</code> section specifies how to prepare the build environment. This usually involves expansion of compressed archives of the source code, application of patches, and, potentially, parsing of information provided in the source code for use in a later portion of the SPEC file. In this section you can use the built-in <code class="literal">%setup -q</code> macro.
						</p><p class="simpara">
							The <code class="literal">%build</code> section specifies how to build the software.
						</p><p class="simpara">
							The <code class="literal">%install</code> section contains instructions for <code class="literal">rpmbuild</code> on how to install the software, once it has been built, into the <code class="literal filename">BUILDROOT</code> directory.
						</p><p class="simpara">
							This directory is an empty chroot base directory, which resembles the end user’s root directory. Here you can create any directories that will contain the installed files. To create such directories, you can use the RPM macros without having to hardcode the paths.
						</p><p class="simpara">
							The <code class="literal">%files</code> section specifies the list of files provided by this RPM and their full path location on the end user’s system.
						</p><p class="simpara">
							Within this section, you can indicate the role of various files using built-in macros. This is useful for querying the package file manifest metadata using the command[]<code class="literal">rpm</code> command. For example, to indicate that the LICENSE file is a software license file, use the <code class="literal">%license</code> macro.
						</p></li><li class="listitem"><p class="simpara">
							The last section, <code class="literal">%changelog</code>, is a list of datestamped entries for each Version-Release of the package. They log packaging changes, not software changes. Examples of packaging changes: adding a patch, changing the build procedure in the <code class="literal">%build</code> section.
						</p><p class="simpara">
							Follow this format for the first line:
						</p><p class="simpara">
							Start with an <code class="literal">*</code> character followed by <code class="literal">Day-of-Week Month Day Year Name Surname &lt;email&gt; - Version-Release</code>
						</p><p class="simpara">
							Follow this format for the actual change entry:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Each change entry can contain multiple items, one for each change.
								</li><li class="listitem">
									Each item starts on a new line.
								</li><li class="listitem">
									Each item begins with a <code class="literal">-</code> character.
								</li></ul></div></li></ol></div><p>
					You have now written an entire SPEC file for the required program.
				</p><p>
					For examples of SPEC file written in different programming languages, see:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="index.html#an-example-spec-file-for-bello_working-with-spec-files" title="3.2.4. An example SPEC file for a program written in bash">An example SPEC file for a program written in bash</a>
						</li><li class="listitem">
							<a class="link" href="index.html#an-example-spec-file-for-pello_working-with-spec-files" title="3.2.5. An example SPEC file for a program written in Python">An example SPEC file for a program written in Python</a>
						</li><li class="listitem">
							<a class="link" href="index.html#an-example-spec-file-for-cello_working-with-spec-files" title="3.2.6. An example SPEC file for a program written in C">An example SPEC file for a program written in C</a>
						</li></ul></div><p>
					Building the RPM from the SPEC file is described in <a class="xref" href="index.html#building-rpms_packaging-software" title="3.3. Building RPMs">Section 3.3, “Building RPMs”</a>.
				</p></section><section class="section" id="an-example-spec-file-for-bello_working-with-spec-files"><div class="titlepage"><div><div><h3 class="title">3.2.4. An example SPEC file for a program written in bash</h3></div></div></div><p>
					This section shows an example SPEC file for the <span class="strong strong"><strong>bello</strong></span> program that was written in bash. For more information about <span class="strong strong"><strong>bello</strong></span>, see <a class="xref" href="index.html#source-code-examples" title="2.1.1. Source code examples">Section 2.1.1, “Source code examples”</a>.
				</p><div class="formalpara"><p class="title"><strong>An example SPEC file for the <span class="strong strong"><strong>bello</strong></span> program written in bash</strong></p><p>
						
<pre class="literallayout">Name:           bello
Version:        0.1
Release:        1%{?dist}
Summary:        Hello World example implemented in bash script

License:        GPLv3+
URL:            <a class="link" href="https://www.example.com/%{name}">https://www.example.com/%{name}</a>
Source0:        <a class="link" href="https://www.example.com/%{name}/releases/%{name}-%{version}.tar.gz">https://www.example.com/%{name}/releases/%{name}-%{version}.tar.gz</a>

Requires:       bash

BuildArch:      noarch

%description
The long-tail description for our Hello World Example implemented in
bash script.

%prep
%setup -q

%build

%install

mkdir -p %{buildroot}/%{_bindir}

install -m 0755 %{name} %{buildroot}/%{_bindir}/%{name}

%files
%license LICENSE
%{_bindir}/%{name}

%changelog
* Tue May 31 2016 Adam Miller &lt;<a class="link" href="mailto:maxamillion@fedoraproject.org">maxamillion@fedoraproject.org</a>&gt; - 0.1-1
- First bello package
- Example second item in the changelog for version-release 0.1-1</pre>

					</p></div><p>
					The <code class="literal">BuildRequires</code> directive, which specifies build-time dependencies for the package, was deleted because there is no building step for <code class="literal">bello</code>. Bash is a raw interpreted programming language, and the files are just installed to their location on the system.
				</p><p>
					The <code class="literal">Requires</code> directive, which specifies run-time dependencies for the package, include only <code class="literal">bash</code>, because the <code class="literal">bello</code> script requires only the <code class="literal">bash</code> shell environment to execute.
				</p><p>
					The <code class="literal">%build</code> section, which specifies how to build the software, is blank, because a <code class="literal">bash</code> does not need to be built.
				</p><p>
					For installing <code class="literal">bello</code> you only need to create the destination directory and install the executable <code class="literal">bash</code> script file there. Hence, you can use the <code class="literal command">install</code> command in the <code class="literal">%install</code> section. RPM macros allow to do this without hardcoding paths.
				</p></section><section class="section" id="an-example-spec-file-for-pello_working-with-spec-files"><div class="titlepage"><div><div><h3 class="title">3.2.5. An example SPEC file for a program written in Python</h3></div></div></div><p>
					This section shows an example SPEC file for the <span class="strong strong"><strong>pello</strong></span> program written in the Python programming language. For more information about <span class="strong strong"><strong>pello</strong></span>, see <a class="xref" href="index.html#source-code-examples" title="2.1.1. Source code examples">Section 2.1.1, “Source code examples”</a>.
				</p><div class="formalpara"><p class="title"><strong>An example SPEC file for the <span class="strong strong"><strong>pello</strong></span> program written in Python</strong></p><p>
						
<pre class="literallayout">Name:           pello
Version:        0.1.1
Release:        1%{?dist}
Summary:        Hello World example implemented in Python

License:        GPLv3+
URL:            <a class="link" href="https://www.example.com/%{name}">https://www.example.com/%{name}</a>
Source0:        <a class="link" href="https://www.example.com/%{name}/releases/%{name}-%{version}.tar.gz">https://www.example.com/%{name}/releases/%{name}-%{version}.tar.gz</a>

BuildRequires:  python
Requires:       python
Requires:       bash

BuildArch:      noarch

%description
The long-tail description for our Hello World Example implemented in Python.

%prep
%setup -q

%build

python -m compileall %{name}.py

%install

mkdir -p %{buildroot}/%{_bindir}
mkdir -p %{buildroot}/usr/lib/%{name}

cat &gt; %{buildroot}/%{_bindir}/%{name} &lt;←EOF
#!/bin/bash
/usr/bin/python /usr/lib/%{name}/%{name}.pyc
EOF

chmod 0755 %{buildroot}/%{_bindir}/%{name}

install -m 0644 %{name}.py* %{buildroot}/usr/lib/%{name}/

%files
%license LICENSE
%dir /usr/lib/%{name}/
%{_bindir}/%{name}
/usr/lib/%{name}/%{name}.py*

%changelog
* Tue May 31 2016 Adam Miller &lt;<a class="link" href="mailto:maxamillion@fedoraproject.org">maxamillion@fedoraproject.org</a>&gt; - 0.1.1-1
  - First pello package</pre>

					</p></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The <span class="strong strong"><strong>pello</strong></span> program is written in a byte-compiled interpreted language. Hence, the shebang is not applicable because the resulting file does not contain the entry.
					</p><p>
						Because the shebang is not applicable, you may want to apply one of the following approaches:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Create a non-byte-compiled shell script that will call the executable.
							</li><li class="listitem">
								Provide a small bit of the Python code that is not byte-compiled as the entry point into the program’s execution.
							</li></ul></div><p>
						These approaches are useful especially for large software projects with many thousands of lines of code, where the performance increase of pre-byte-compiled code is sizeable.
					</p></div></div><p>
					The <code class="literal">BuildRequires</code> directive, which specifies build-time dependencies for the package, includes two packages:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal package">python</code> package is needed to perform the byte-compile build process
						</li><li class="listitem">
							The <code class="literal package">bash</code> package is needed to execute the small entry-point script
						</li></ul></div><p>
					The <code class="literal">Requires</code> directive, which specifies run-time dependencies for the package, includes only the <code class="literal package">python</code> package. The <code class="literal">pello</code> program requires the <code class="literal package">python</code> package to execute the byte-compiled code at runtime.
				</p><p>
					The <code class="literal">%build</code> section, which specifies how to build the software, corresponds to the fact that the software is byte-compiled.
				</p><p>
					To install <code class="literal">pello</code>, you need to create a wrapper script because the shebang is not applicable in byte-compiled languages. There are multiple options to accomplish this, such as:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Making a separate script and using that as a separate <code class="literal">SourceX</code> directive.
						</li><li class="listitem">
							Creating the file in-line in the SPEC file.
						</li></ul></div><p>
					This example shows creating a wrapper script in-line in the SPEC file to demonstrate that the SPEC file itself is scriptable. This wrapper script will execute the Python byte-compiled code by using a <code class="literal">here</code> document.
				</p><p>
					The <code class="literal">%install</code> section in this example also corresponds to the fact that you will need to install the byte-compiled file into a library directory on the system such that it can be accessed.
				</p></section><section class="section" id="an-example-spec-file-for-cello_working-with-spec-files"><div class="titlepage"><div><div><h3 class="title">3.2.6. An example SPEC file for a program written in C</h3></div></div></div><p>
					This section shows an example SPEC file for the <span class="strong strong"><strong>cello</strong></span> program that was written in the C programming language. For more information about <span class="strong strong"><strong>cello</strong></span>, see <a class="xref" href="index.html#source-code-examples" title="2.1.1. Source code examples">Section 2.1.1, “Source code examples”</a>.
				</p><div class="formalpara"><p class="title"><strong>An example SPEC file for the <span class="strong strong"><strong>cello</strong></span> program written in C</strong></p><p>
						
<pre class="literallayout">Name:           cello
Version:        1.0
Release:        1%{?dist}
Summary:        Hello World example implemented in C

License:        GPLv3+
URL:            <a class="link" href="https://www.example.com/%{name}">https://www.example.com/%{name}</a>
Source0:        <a class="link" href="https://www.example.com/%{name}/releases/%{name}-%{version}.tar.gz">https://www.example.com/%{name}/releases/%{name}-%{version}.tar.gz</a>

Patch0:         cello-output-first-patch.patch

BuildRequires:  gcc
BuildRequires:  make

%description
The long-tail description for our Hello World Example implemented in
C.

%prep
%setup -q

%patch0

%build
make %{?_smp_mflags}

%install
%make_install

%files
%license LICENSE
%{_bindir}/%{name}

%changelog
* Tue May 31 2016 Adam Miller &lt;<a class="link" href="mailto:maxamillion@fedoraproject.org">maxamillion@fedoraproject.org</a>&gt; - 1.0-1
- First cello package</pre>

					</p></div><p>
					The <code class="literal">BuildRequires</code> directive, which specifies build-time dependencies for the package, includes two packages that are needed to perform the compilation build process:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal package">gcc</code> package
						</li><li class="listitem">
							The <code class="literal package">make</code> package
						</li></ul></div><p>
					The <code class="literal">Requires</code> directive, which specifies run-time dependencies for the package, is omitted in this example. All runtime requirements are handled by <code class="literal">rpmbuild</code>, and the <code class="literal">cello</code> program does not require anything outside of the core C standard libraries.
				</p><p>
					The <code class="literal">%build</code> section reflects the fact that in this example a <code class="literal">Makefile</code> for the <span class="strong strong"><strong>cello</strong></span> program was written, hence the <a class="link" href="http://www.gnu.org/software/make/">GNU make</a> command provided by the <code class="literal">rpmdev-newspec</code> utility can be used. However, you need to remove the call to <code class="literal">%configure</code> because you did not provide a configure script.
				</p><p>
					The installation of the <span class="strong strong"><strong>cello</strong></span> program can be accomplished by using the <code class="literal">%make_install</code> macro that was provided by the <code class="literal command">rpmdev-newspec</code> command. This is possible because the <code class="literal">Makefile</code> for the <span class="strong strong"><strong>cello</strong></span> program is available.
				</p></section></section><section class="section" id="building-rpms_packaging-software"><div class="titlepage"><div><div><h2 class="title">3.3. Building RPMs</h2></div></div></div><p>
				This section describes how to build an RPM after a SPEC file for a program has been created.
			</p><p>
				RPMs are built with the <code class="literal command">rpmbuild</code> command. This command expects a certain directory and file structure, which is the same as the structure that was set up by the <code class="literal">rpmdev-setuptree</code> utility.
			</p><p>
				Different use cases and desired outcomes require different combinations of arguments to the <code class="literal commad">rpmbuild</code> command. This section describes the two main use cases:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Building source RPMs
					</li><li class="listitem">
						Building binary RPMs
					</li></ul></div><section class="section" id="building-source-rpms_building-rpms"><div class="titlepage"><div><div><h3 class="title">3.3.1. Building source RPMs</h3></div></div></div><p>
					This paragraph is the procedure module introduction: a short description of the procedure.
				</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
						A SPEC file for the program that we want to package must already exist. For more information on creating SPEC files, see <a class="link" href="index.html#working-with-spec-files" title="3.2. Working with SPEC files">Working with SPEC files</a>.
					</p></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						The following procedure describes how to build a source RPM.
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Run the <code class="literal command">rpmbuild</code> command with the specified SPEC file:
						</p><pre class="literallayout">$ rpmbuild -bs <span class="emphasis"><em>SPECFILE</em></span></pre><p class="simpara">
							Substitute <span class="emphasis"><em>SPECFILE</em></span> with the SPEC file. The <code class="literal option">-bs</code> option stands for the build source.
						</p></li></ul></div><p>
					The following example shows building source RPMs for the <code class="literal">bello</code>, <code class="literal">pello</code>, and <code class="literal">cello</code> projects.
				</p><div class="formalpara"><p class="title"><strong>Building source RPMs for bello, pello, and cello.</strong></p><p>
						
<pre class="literallayout">$ cd ~/rpmbuild/SPECS/

8$ rpmbuild -bs bello.spec
Wrote: /home/admiller/rpmbuild/SRPMS/bello-0.1-1.el8.src.rpm

$ rpmbuild -bs pello.spec
Wrote: /home/admiller/rpmbuild/SRPMS/pello-0.1.2-1.el8.src.rpm

$ rpmbuild -bs cello.spec
Wrote: /home/admiller/rpmbuild/SRPMS/cello-1.0-1.el8.src.rpm</pre>

					</p></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Make sure that the <code class="literal filename">rpmbuild/SRPMS</code> directory includes the resulting source RPMs. The directory is a part of the structure expected by <code class="literal command">rpmbuild</code>.
						</li></ul></div></section><section class="section" id="building-binary-rpms_building-rpms"><div class="titlepage"><div><div><h3 class="title">3.3.2. Building binary RPMs</h3></div></div></div><p>
					The following methods are vailable for building binary RPMs:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Rebuilding a binary RPM from a source RPM
						</li><li class="listitem">
							Building a binary RPM from the SPEC file
						</li><li class="listitem">
							Building a binary RPM from a source RPM
						</li></ul></div><section class="section" id="rebuilding-a-binary-from-a-source-rpm_building-binary-rpms"><div class="titlepage"><div><div><h4 class="title">3.3.2.1. Rebuilding a binary RPM from a source RPM</h4></div></div></div><p>
						The following procedure shows how to rebuild a binary RPM from a source RPM (SRPM).
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To rebuild <code class="literal">bello</code>, <code class="literal">pello</code>, and <code class="literal">cello</code> from their SRPMs, run:
							</p><pre class="literallayout">$ rpmbuild --rebuild ~/rpmbuild/SRPMS/bello-0.1-1.el8.src.rpm
[output truncated]

$ rpmbuild --rebuild ~/rpmbuild/SRPMS/pello-0.1.2-1.el8.src.rpm
[output truncated]

$ rpmbuild --rebuild ~/rpmbuild/SRPMS/cello-1.0-1.el8.src.rpm
[output truncated]</pre></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Invoking <code class="literal command">rpmbuild --rebuild</code> involves:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Installing the contents of the SRPM - the SPEC file and the source code - into the <code class="literal filename">~/rpmbuild/</code> directory.
								</li><li class="listitem">
									Building using the installed contents.
								</li><li class="listitem">
									Removing the SPEC file and the source code.
								</li></ul></div><p>
							To retain the SPEC file and the source code after building, you can:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									When building, use the <code class="literal command">rpmbuild</code> command with the <code class="literal option">--recompile</code> option instead of the <code class="literal option">--rebuild</code> option.
								</li><li class="listitem"><p class="simpara">
									Install the SRPMs using these commands:
								</p><pre class="literallayout">$ rpm -Uvh ~/rpmbuild/SRPMS/bello-0.1-1.el8.src.rpm
Updating / installing…​
   1:bello-0.1-1.el8               [100%]

$ rpm -Uvh ~/rpmbuild/SRPMS/pello-0.1.2-1.el8.src.rpm
Updating / installing…​
…​1:pello-0.1.2-1.el8              [100%]

$ rpm -Uvh ~/rpmbuild/SRPMS/cello-1.0-1.el8.src.rpm
Updating / installing…​
…​1:cello-1.0-1.el8            [100%]</pre></li></ul></div></div></div><p>
						The output generated when creating a binary RPM is verbose, which is helpful for debugging. The output varies for different examples and corresponds to their SPEC files.
					</p><p>
						The resulting binary RPMs are in the <code class="literal filename">~/rpmbuild/RPMS/YOURARCH</code> directory where <code class="literal">YOURARCH</code> is your architecture or in the <code class="literal filename">~/rpmbuild/RPMS/noarch/</code> directory, if the package is not architecture-specific.
					</p></section><section class="section" id="building-a-binary-from-the-spec-file_building-binary-rpms"><div class="titlepage"><div><div><h4 class="title">3.3.2.2. Building a binary RPM from the SPEC file</h4></div></div></div><p>
						The following procedure shows how to build <code class="literal">bello</code>, <code class="literal">pello</code>, and <code class="literal">cello</code> binary RPMs from their SPEC files.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Run the <code class="literal command">rpmbuild</code> command with the <code class="literal option">bb</code> option:
							</p><pre class="literallayout">$ rpmbuild -bb ~/rpmbuild/SPECS/bello.spec

$ rpmbuild -bb ~/rpmbuild/SPECS/pello.spec

$ rpmbuild -bb ~/rpmbuild/SPECS/cello.spec</pre></li></ul></div></section><section class="section" id="building-rpms-from-source-rpms_building-binary-rpms"><div class="titlepage"><div><div><h4 class="title">3.3.2.3. Building RPMs from source RPMs</h4></div></div></div><p>
						It is also possible to build any kind of RPM from a source RPM. To do so, use the following procedure.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Run the <code class="literal command">rpmbuild</code> command with one of the below options and with the source package specified:
							</p><pre class="literallayout"># rpmbuild {-ra|-rb|-rp|-rc|-ri|-rl|-rs} [rpmbuild-options] <span class="emphasis"><em>SOURCEPACKAGE</em></span></pre></li></ul></div><div class="formalpara"><p class="title"><strong>Additional resources</strong></p><p>
							For more details on building RPMs from source RPMs, see the <code class="literal">BUILDING PACKAGES</code> section on the <code class="literal">rpmbuild(8)</code> man page.
						</p></div></section></section></section><section class="section" id="checking-rpms-for-sanity_packaging-software"><div class="titlepage"><div><div><h2 class="title">3.4. Checking RPMs for sanity</h2></div></div></div><p>
				After creating a package, check the quality of the package.
			</p><p>
				The main tool for checking package quality is <a class="link" href="https://github.com/rpm-software-management/rpmlint">rpmlint</a>.
			</p><p>
				The <code class="literal command">rpmlint</code> tool does the following:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Improves RPM maintainability.
					</li><li class="listitem">
						Enables sanity checking by performing static analysis of the RPM.
					</li><li class="listitem">
						Enables error checking by performing static analysis of the RPM.
					</li></ul></div><p>
				The <code class="literal comamnd">rpmlint</code> tool can check binary RPMs, source RPMs (SRPMs), and SPEC files, so it is useful for all stages of packaging, as shown in the following examples.
			</p><p>
				Note that <code class="literal command">rpmlint</code> has very strict guidelines; hence it is sometimes acceptable to skip some of its errors and warnings, as shown in the following examples.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					In the following examples, <code class="literal command">rpmlint</code> is run without any options, which produces a non-verbose output. For detailed explanations of each error or warning, you can run <code class="literal command">rpmlint -i</code> instead.
				</p></div></div><section class="section" id="checking-bello-for-sanity_checking-rpms-for-sanity"><div class="titlepage"><div><div><h3 class="title">3.4.1. Checking bello for sanity</h3></div></div></div><p>
					This section shows possible warnings and errors that can occur when checking RPM sanity on the example of the bello SPEC file and bello binary RPM.
				</p><section class="section" id="checking-bello-spec-file"><div class="titlepage"><div><div><h4 class="title">3.4.1.1. Checking the bello SPEC File</h4></div></div></div><div class="example" id="idm139760723938880"><p class="title"><strong>Example 3.2. Output of running the <code class="literal command">rpmlint</code> command on the SPEC file for bello</strong></p><div class="example-contents"><pre class="literallayout">$ rpmlint bello.spec
bello.spec: W: invalid-url Source0: <a class="link" href="https://www.example.com/bello/releases/bello-0.1.tar.gz">https://www.example.com/bello/releases/bello-0.1.tar.gz</a> HTTP Error 404: Not Found
0 packages and 1 specfiles checked; 0 errors, 1 warnings.</pre></div></div><p>
						For <code class="literal filename">bello.spec</code>, there is only one warning, which says that the URL listed in the <code class="literal">Source0</code> directive is unreachable. This is expected, because the specified <code class="literal">example.com</code> URL does not exist. Presuming that we expect this URL to work in the future, we can ignore this warning.
					</p><div class="example" id="idm139760722018016"><p class="title"><strong>Example 3.3. Output of running the <code class="literal command">rpmlint</code> command on the SRPM for bello</strong></p><div class="example-contents"><pre class="literallayout">$ rpmlint ~/rpmbuild/SRPMS/bello-0.1-1.el8.src.rpm
bello.src: W: invalid-url URL: <a class="link" href="https://www.example.com/bello">https://www.example.com/bello</a> HTTP Error 404: Not Found
bello.src: W: invalid-url Source0: <a class="link" href="https://www.example.com/bello/releases/bello-0.1.tar.gz">https://www.example.com/bello/releases/bello-0.1.tar.gz</a> HTTP Error 404: Not Found
1 packages and 0 specfiles checked; 0 errors, 2 warnings.</pre></div></div><p>
						For the <code class="literal">bello</code> SRPM, there is a new warning, which says that the URL specified in the <code class="literal">URL</code> directive is unreachable. Assuming the link will be working in the future, we can ignore this warning.
					</p></section><section class="section" id="checking-bello-binary-rpm"><div class="titlepage"><div><div><h4 class="title">3.4.1.2. Checking the bello binary RPM</h4></div></div></div><p>
						When checking binary RPMs, <code class="literal command">rpmlint</code> checks for the following items:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Documentation
							</li><li class="listitem">
								Manual pages
							</li><li class="listitem">
								Consistent use of the filesystem hierarchy standard
							</li></ul></div><div class="example" id="idm139760722006032"><p class="title"><strong>Example 3.4. Output of running the <code class="literal command">rpmlint</code> command on the binary RPM for bello</strong></p><div class="example-contents"><pre class="literallayout">$ rpmlint ~/rpmbuild/RPMS/noarch/bello-0.1-1.el8.noarch.rpm
bello.noarch: W: invalid-url URL: <a class="link" href="https://www.example.com/bello">https://www.example.com/bello</a> HTTP Error 404: Not Found
bello.noarch: W: no-documentation
bello.noarch: W: no-manual-page-for-binary bello
1 packages and 0 specfiles checked; 0 errors, 3 warnings.</pre></div></div><p>
						The <code class="literal">no-documentation</code> and <code class="literal">no-manual-page-for-binary</code> warnings say that he RPM has no documentation or manual pages, because we did not provide any. Apart from the above warnings, the RPM passed <code class="literal command">rpmlint</code> checks.
					</p></section></section><section class="section" id="checking-pello-for-sanity_checking-rpms-for-sanity"><div class="titlepage"><div><div><h3 class="title">3.4.2. Checking pello for sanity</h3></div></div></div><p>
					This section shows possible warnings and errors that can occur when checking RPM sanity on the example of the pello SPEC file and pello binary RPM.
				</p><section class="section" id="checking-pello-spec-file"><div class="titlepage"><div><div><h4 class="title">3.4.2.1. Checking the pello SPEC File</h4></div></div></div><div class="example" id="idm139760725007104"><p class="title"><strong>Example 3.5. Output of running the <code class="literal command">rpmlint</code> command on the SPEC file for pello</strong></p><div class="example-contents"><pre class="literallayout">$ rpmlint pello.spec
pello.spec:30: E: hardcoded-library-path in %{buildroot}/usr/lib/%{name}
pello.spec:34: E: hardcoded-library-path in /usr/lib/%{name}/%{name}.pyc
pello.spec:39: E: hardcoded-library-path in %{buildroot}/usr/lib/%{name}/
pello.spec:43: E: hardcoded-library-path in /usr/lib/%{name}/
pello.spec:45: E: hardcoded-library-path in /usr/lib/%{name}/%{name}.py*
pello.spec: W: invalid-url Source0: <a class="link" href="https://www.example.com/pello/releases/pello-0.1.2.tar.gz">https://www.example.com/pello/releases/pello-0.1.2.tar.gz</a> HTTP Error 404: Not Found
0 packages and 1 specfiles checked; 5 errors, 1 warnings.</pre></div></div><p>
						The <code class="literal">invalid-url Source0</code> warning says that the URL listed in the <code class="literal">Source0</code> directive is unreachable. This is expected, because the specified <code class="literal">example.com</code> URL does not exist. Presuming that this URL will work in the future, you can ignore this warning.
					</p><p>
						The <code class="literal">hardcoded-library-path</code> errors suggest to use the <code class="literal">%{_libdir}</code> macro instead of hard-coding the library path. For the sake of this example, you can safely ignore these errors. However, for packages going into production make sure to check all errors carefully.
					</p><div class="example" id="idm139760724999616"><p class="title"><strong>Example 3.6. Output of running the <code class="literal command">rpmlint</code> command on the SRPM for pello</strong></p><div class="example-contents"><pre class="literallayout">$ rpmlint ~/rpmbuild/SRPMS/pello-0.1.2-1.el8.src.rpm
pello.src: W: invalid-url URL: <a class="link" href="https://www.example.com/pello">https://www.example.com/pello</a> HTTP Error 404: Not Found
pello.src:30: E: hardcoded-library-path in %{buildroot}/usr/lib/%{name}
pello.src:34: E: hardcoded-library-path in /usr/lib/%{name}/%{name}.pyc
pello.src:39: E: hardcoded-library-path in %{buildroot}/usr/lib/%{name}/
pello.src:43: E: hardcoded-library-path in /usr/lib/%{name}/
pello.src:45: E: hardcoded-library-path in /usr/lib/%{name}/%{name}.py*
pello.src: W: invalid-url Source0: <a class="link" href="https://www.example.com/pello/releases/pello-0.1.2.tar.gz">https://www.example.com/pello/releases/pello-0.1.2.tar.gz</a> HTTP Error 404: Not Found
1 packages and 0 specfiles checked; 5 errors, 2 warnings.</pre></div></div><p>
						The new <code class="literal">invalid-url URL</code> error here is about the <code class="literal">URL</code> directive, which is unreachable. Assuming that the URL will be valid in the future, you can safely ignore this error.
					</p></section><section class="section" id="checking-pello-binary-rpm"><div class="titlepage"><div><div><h4 class="title">3.4.2.2. Checking the pello binary RPM</h4></div></div></div><p>
						When checking binary RPMs, <code class="literal command">rpmlint</code> checks for the following items:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Documentation
							</li><li class="listitem">
								Manual pages
							</li><li class="listitem">
								Consistent use of the Filesystem Hierarchy Standard
							</li></ul></div><div class="example" id="idm139760722454592"><p class="title"><strong>Example 3.7. Output of running the <code class="literal command">rpmlint</code> command on the binary RPM for pello</strong></p><div class="example-contents"><pre class="literallayout">$ rpmlint ~/rpmbuild/RPMS/noarch/pello-0.1.2-1.el8.noarch.rpm
pello.noarch: W: invalid-url URL: <a class="link" href="https://www.example.com/pello">https://www.example.com/pello</a> HTTP Error 404: Not Found
pello.noarch: W: only-non-binary-in-usr-lib
pello.noarch: W: no-documentation
pello.noarch: E: non-executable-script /usr/lib/pello/pello.py 0644L /usr/bin/env
pello.noarch: W: no-manual-page-for-binary pello
1 packages and 0 specfiles checked; 1 errors, 4 warnings.</pre></div></div><p>
						The <code class="literal">no-documentation</code> and <code class="literal">no-manual-page-for-binary</code> warnings say that the RPM has no documentation or manual pages, because you did not provide any.
					</p><p>
						The <code class="literal">only-non-binary-in-usr-lib</code> warning says that you provided only non-binary artifacts in <code class="literal filename">/usr/lib/</code>. This directory is normally reserved for shared object files, which are binary files. Therefore, <code class="literal command">rpmlint</code> expects at least one or more files in <code class="literal filename">/usr/lib/</code> directory to be binary.
					</p><p>
						This is an example of an <code class="literal command">rpmlint</code> check for compliance with Filesystem Hierarchy Standard. Normally, use RPM macros to ensure the correct placement of files. For the sake of this example, you can safely ignore this warning.
					</p><p>
						The <code class="literal">non-executable-script</code> error warns that the <code class="literal filename">/usr/lib/pello/pello.py</code> file has no execute permissions. The <code class="literal">rpmlint</code> tool expects the file to be executable, because the file contains the shebang. For the purpose of this example, you can leave this file without execute permissions and ignore this error.
					</p><p>
						Apart from the above warnings and errors, the RPM passed <code class="literal command">rpmlint</code> checks.
					</p></section></section><section class="section" id="checking-cello-for-sanity_checking-rpms-for-sanity"><div class="titlepage"><div><div><h3 class="title">3.4.3. Checking cello for sanity</h3></div></div></div><p>
					This section shows possible warnings and errors that can occur when checking RPM sanity on the example of the cello SPEC file and pello binary RPM.
				</p><section class="section" id="checking-cello-spec-file"><div class="titlepage"><div><div><h4 class="title">3.4.3.1. Checking the cello SPEC File</h4></div></div></div><div class="example" id="idm139760732965056"><p class="title"><strong>Example 3.8. Output of running the <code class="literal command">rpmlint</code> command on the SPEC file for cello</strong></p><div class="example-contents"><pre class="literallayout">$ rpmlint ~/rpmbuild/SPECS/cello.spec
/home/admiller/rpmbuild/SPECS/cello.spec: W: invalid-url Source0: <a class="link" href="https://www.example.com/cello/releases/cello-1.0.tar.gz">https://www.example.com/cello/releases/cello-1.0.tar.gz</a> HTTP Error 404: Not Found
0 packages and 1 specfiles checked; 0 errors, 1 warnings.</pre></div></div><p>
						For <code class="literal filename">cello.spec</code>, there is only one warning, which says that the URL listed in the <code class="literal">Source0</code> directive is unreachable. This is expected, because the specified <code class="literal">example.com</code> URL does not exist. Presuming that this URL will work in the future, you can ignore this warning.
					</p><div class="example" id="idm139760732959216"><p class="title"><strong>Example 3.9. Output of running the <code class="literal command">rpmlint</code> command on the SRPM for cello</strong></p><div class="example-contents"><pre class="literallayout">$ rpmlint ~/rpmbuild/SRPMS/cello-1.0-1.el8.src.rpm
cello.src: W: invalid-url URL: <a class="link" href="https://www.example.com/cello">https://www.example.com/cello</a> HTTP Error 404: Not Found
cello.src: W: invalid-url Source0: <a class="link" href="https://www.example.com/cello/releases/cello-1.0.tar.gz">https://www.example.com/cello/releases/cello-1.0.tar.gz</a> HTTP Error 404: Not Found
1 packages and 0 specfiles checked; 0 errors, 2 warnings.</pre></div></div><p>
						For the <code class="literal">cello</code> SRPM, there is a new warning, which says that the URL specified in the <code class="literal">URL</code> directive is unreachable. Assuming the link will be working in the future, you can ignore this warning.
					</p></section><section class="section" id="checking-cello-binary-rpm"><div class="titlepage"><div><div><h4 class="title">3.4.3.2. Checking the cello binary RPM</h4></div></div></div><p>
						When checking binary RPMs, <code class="literal command">rpmlint</code> checks for the following items:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Documentation
							</li><li class="listitem">
								Manual pages
							</li><li class="listitem">
								Consistent use of the filesystem hierarchy standard
							</li></ul></div><div class="example" id="idm139760733018640"><p class="title"><strong>Example 3.10. Output of running the <code class="literal command">rpmlint</code> command on the binary RPM for cello</strong></p><div class="example-contents"><pre class="literallayout">$ rpmlint ~/rpmbuild/RPMS/x86_64/cello-1.0-1.el8.x86_64.rpm
cello.x86_64: W: invalid-url URL: <a class="link" href="https://www.example.com/cello">https://www.example.com/cello</a> HTTP Error 404: Not Found
cello.x86_64: W: no-documentation
cello.x86_64: W: no-manual-page-for-binary cello
1 packages and 0 specfiles checked; 0 errors, 3 warnings.</pre></div></div><p>
						The <code class="literal">no-documentation</code> and <code class="literal">no-manual-page-for-binary</code> warnings say that he RPM has no documentation or manual pages, because you did not provide any. Apart from the above warnings, the RPM passed <code class="literal command">rpmlint</code> checks.
					</p></section></section></section><section class="section" id="logging-rpm-activity_packaging-software"><div class="titlepage"><div><div><h2 class="title">3.5. Logging RPM activity to syslog</h2></div></div></div><p>
				Any RPM activity or transaction can be logged by the System Logging protocol (syslog).
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To enable the logging of RPM transactions to syslog, make sure that the <code class="literal">syslog</code> plug-in is installed on the system.
					</p><pre class="literallayout"># yum install rpm-plugin-syslog</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The default location for the syslog messages is the <code class="literal filename">/var/log/messages</code> file. However, you can configure syslog to use another location to store the messages.
						</p></div></div></li></ul></div><p>
				To see the updates on RPM activity, follow this procedure.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Open the file that you configured to store the syslog messages, or if you use the default syslog configuration, open the <code class="literal filename">/var/log/messages</code> file.
					</li><li class="listitem">
						Search for new lines including the <code class="literal">[RPM]</code> string.
					</li></ol></div><p>
				assembly_archiving-rpms.adoc :parent-context-of-archiving-rpms: packaging-software
			</p></section><section class="section" id="archiving-rpms_packaging-software"><div class="titlepage"><div><div><h2 class="title">3.6. Extracting RPM content</h2></div></div></div><p>
				In particular cases, for example, if a package required by RPM is damaged, it is necessary to extract the content of the package. In such cases, if an RPM installation is still working despite the damage, you can use the <code class="literal">rpm2archive</code> utility to convert an <span class="strong strong"><strong>.rpm</strong></span> file to a tar archive to use the content of the package.
			</p><p>
				This section describes how to convert an rpm payload to a tar archive.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					If the RPM installation is severely damaged, you can use the <code class="literal">rpm2cpio</code> utility to convert the RPM package file to a cpio archive.
				</p></div></div><section class="section" id="archiving-rpms_archiving-rpms"><div class="titlepage"><div><div><h3 class="title">3.6.1. Converting RPMs to tar archives</h3></div></div></div><p>
					To convert RPM packages to tar achives, you can use the <code class="literal">rpm2archive</code> utility.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Run the following command:
						</p><pre class="literallayout">$ rpm2archive <span class="emphasis"><em>file.rpm</em></span></pre><p class="simpara">
							The resulting file has the <code class="literal">.tgz</code> suffix. For example, to archive the <code class="literal package">bash</code> package:
						</p><pre class="literallayout">$ rpm2archive bash-4.4.19-6.el8.x86_64.rpm
$ bash-4.4.19-6.el8.x86_64.rpm.tgz
bash-4.4.19-6.el8.x86_64.rpm.tgz</pre></li></ul></div></section></section></section><section class="chapter" id="advanced-topics"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Advanced topics</h1></div></div></div><p>
			This section covers topics that are beyond the scope of the introductory tutorial but are useful in real-world RPM packaging.
		</p><section class="section" id="signing-packages_advanced-topics"><div class="titlepage"><div><div><h2 class="title">4.1. Signing packages</h2></div></div></div><p>
				Packages are signed to make sure no third party can alter their content. A user can add an additional layer of security by using the HTTPS protocol when downloading the package.
			</p><p>
				There are three ways to sign a package:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="xref" href="index.html#adding-a-signature_signing-packages" title="4.1.2. Adding a signature to an already existing package">Section 4.1.2, “Adding a signature to an already existing package”</a>.
					</li><li class="listitem">
						<a class="xref" href="index.html#replacing-the-signature_signing-packages" title="4.1.5. Replacing the signature on an already existing package">Section 4.1.5, “Replacing the signature on an already existing package”</a>.
					</li><li class="listitem">
						<a class="xref" href="index.html#signing-a-package-at-build-time_signing-packages" title="4.1.6. Signing a package at build-time">Section 4.1.6, “Signing a package at build-time”</a>.
					</li></ul></div><p>
				To be able to sign a package, you need to create a GNU Privacy Guard (GPG) key as described in <a class="xref" href="index.html#creating-a-gpg-key_signing-packages" title="4.1.1. Creating a GPG key">Section 4.1.1, “Creating a GPG key”</a>.
			</p><section class="section" id="creating-a-gpg-key_signing-packages"><div class="titlepage"><div><div><h3 class="title">4.1.1. Creating a GPG key</h3></div></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Generate a GNU Privacy Guard (GPG) key pair:
						</p><pre class="literallayout"># gpg --gen-key</pre></li><li class="listitem"><p class="simpara">
							Confirm and see the generated key:
						</p><pre class="literallayout"># gpg --list-keys</pre></li><li class="listitem"><p class="simpara">
							Export the public key:
						</p><pre class="literallayout"># gpg --export -a '&lt;Key_name&gt;' &gt; RPM-GPG-KEY-pmanager</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Include the real name that you have selected for the key instead of &lt;Key_name&gt;.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Import the exported public key into an RPM database:
						</p><pre class="literallayout"># rpm --import RPM-GPG-KEY-pmanager</pre></li></ol></div></section><section class="section" id="adding-a-signature_signing-packages"><div class="titlepage"><div><div><h3 class="title">4.1.2. Adding a signature to an already existing package</h3></div></div></div><p>
					This section describes the most usual case when a package is built without a signature. The signature is added just before the release of the package.
				</p><p>
					To add a signature to a package, use the <code class="literal option">--addsign</code> option provided by the <code class="literal package">rpm-sign</code> package.
				</p><p>
					Having more than one signature enables to record the package’s path of ownership from the package builder to the end-user.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Add a signature to a package:
						</p><pre class="literallayout">$ rpm --addsign blather-7.9-1.x86_64.rpm</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You are supposed to enter the password to unlock the secret key for the signature.
							</p></div></div></li></ul></div></section><section class="section" id="checking-the-signatures-of-a-package-with-multiple-signatures_signing-packages"><div class="titlepage"><div><div><h3 class="title">4.1.3. Checking the signatures of a package with multiple signatures</h3></div></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To check the signatures of a package with multiple signatures, run the following:
						</p><pre class="literallayout">$ rpm --checksig blather-7.9-1.x86_64.rpm
blather-7.9-1.x86_64.rpm: size pgp pgp md5 OK</pre><p class="simpara">
							The two <code class="literal">pgp</code> strings in the output of the <code class="literal command">rpm --checksig</code> command show that the package has been signed twice.
						</p></li></ul></div></section><section class="section" id="a-practical-example-of-adding-a-signature_signing-packages"><div class="titlepage"><div><div><h3 class="title">4.1.4. A practical example of adding a signature to an already existing package</h3></div></div></div><p>
					This section describes an example situation where adding a signature to an already existing package might be useful.
				</p><p>
					A division of a company creates a package and signs it with the division’s key. The company’s headquarters then checks the package’s signature and adds the corporate signature to the package, stating that the signed package is authentic.
				</p><p>
					With two signatures, the package makes its way to a retailer. The retailer checks the signatures and, if they match, adds their signature as well.
				</p><p>
					The package now makes its way to a company that wants to deploy the package. After checking every signature on the package, they know that it is an authentic copy. Depending on the deploying company’s internal controls, they may choose to add their own signature, to inform their employees that the package has received their corporate approval
				</p></section><section class="section" id="replacing-the-signature_signing-packages"><div class="titlepage"><div><div><h3 class="title">4.1.5. Replacing the signature on an already existing package</h3></div></div></div><p>
					This procedure describes how to change the public key without having to rebuild each package.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To change the public key, run the following:
						</p><pre class="literallayout">$ rpm --resign blather-7.9-1.x86_64.rpm</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You are supposed to enter the password to unlock the secret key for the signature.
							</p></div></div></li></ul></div><p>
					The <code class="literal option">--resign</code> option also enables you to change the public key for multiple packages, as shown in the following procedure.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To change the public key for multiple packages, execute:
						</p><pre class="literallayout">$ rpm --resign b*.rpm</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You are supposed to enter the password to unlock the secret key for the signature.
							</p></div></div></li></ul></div></section><section class="section" id="signing-a-package-at-build-time_signing-packages"><div class="titlepage"><div><div><h3 class="title">4.1.6. Signing a package at build-time</h3></div></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Build the package with the <code class="literal command">rpmbuild</code> command:
						</p><pre class="literallayout">$ rpmbuild blather-7.9.spec</pre></li><li class="listitem"><p class="simpara">
							Sign the package with the <code class="literal command">rpmsign</code> command using the <code class="literal option">--addsign</code> option:
						</p><pre class="literallayout">$ rpmsign --addsign blather-7.9-1.x86_64.rpm</pre></li><li class="listitem">
							Optionally, verify the signature of a package:
						</li></ol></div><pre class="literallayout">$ rpm --checksig blather-7.9-1.x86_64.rpm
blather-7.9-1.x86_64.rpm: size pgp md5 OK</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						When building and signing multiple packages, use the following syntax to avoid entering the Pretty Good Privacy (PGP) passphrase multiple times.
					</p><pre class="literallayout">$ rpmbuild -ba --sign b*.spec</pre><p>
						Note that you are supposed to enter the password to unlock the secret key for the signature.
					</p></div></div></section></section><section class="section" id="more-on-macros_advanced-topics"><div class="titlepage"><div><div><h2 class="title">4.2. More on macros</h2></div></div></div><p>
				This section covers selected built-in RPM Macros. For an exhaustive list of such macros, see <a class="link" href="http://rpm.org/user_doc/macros.html">RPM Documentation</a>.
			</p><section class="section" id="defining-your-own-macros_more-on-macros"><div class="titlepage"><div><div><h3 class="title">4.2.1. Defining your own macros</h3></div></div></div><p>
					The following section describes how to create a custom macro.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Include the following line in the RPM SPEC file:
						</p><pre class="literallayout">%global &lt;name&gt;[(opts)] &lt;body&gt;</pre></li></ul></div><p>
					All whitespace surrounding <code class="literal">\</code> is removed. Name may be composed of alphanumeric characters, and the character <code class="literal">_</code> and must be at least 3 characters in length. Inclusion of the <code class="literal">(opts)</code> field is optional:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">Simple</code> macros do not contain the <code class="literal">(opts)</code> field. In this case, only recursive macro expansion is performed.
						</li><li class="listitem">
							<code class="literal">Parametrized</code> macros contain the <code class="literal">(opts)</code> field. The <code class="literal">opts</code> string between parentheses is passed to <code class="literal">getopt(3)</code> for <code class="literal">argc/argv</code> processing at the beginning of a macro invocation.
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Older RPM SPEC files use the <code class="literal">%define &lt;name&gt; &lt;body&gt;</code> macro pattern instead. The differences between <code class="literal">%define</code> and <code class="literal">%global</code> macros are as follows:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">%define</code> has local scope. It applies to a specific part of a SPEC file. The body of a <code class="literal">%define</code> macro is expanded when used.
							</li><li class="listitem">
								<code class="literal">%global</code> has global scope. It applies to an entire SPEC file. The body of a <code class="literal">%global</code> macro is expanded at definition time.
							</li></ul></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Macros are evaluated even if they are commented out or the name of the macro is given into the <code class="literal">%changelog</code> section of the SPEC file. To comment out a macro, use <code class="literal">%%</code>. For example: <code class="literal">%%global</code>.
					</p></div></div><div class="formalpara"><p class="title"><strong>Additional resources</strong></p><p>
						For comprehensive information on macros capabilities, see <a class="link" href="http://rpm.org/user_doc/macros.html">RPM Documentation</a>.
					</p></div></section><section class="section" id="using-the-setup-macro_more-on-macros"><div class="titlepage"><div><div><h3 class="title">4.2.2. Using the %setup macro</h3></div></div></div><p>
					This section describes how to build packages with source code tarballs using different variants of the <code class="literal">%setup</code> macro. Note that the macro variants can be combined The <code class="literal command">rpmbuild</code> output illustrates standard behavior of the <code class="literal">%setup</code> macro. At the beginning of each phase, the macro outputs <code class="literal">Executing(%…​)</code>, as shown in the below example.
				</p><div class="example" id="idm139760728548000"><p class="title"><strong>Example 4.1. Example <code class="literal">%setup</code> macro output</strong></p><div class="example-contents"><pre class="literallayout">Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.DhddsG</pre><p>
						The shell output is set with <code class="literal">set -x</code> enabled. To see the content of <code class="literal filename">/var/tmp/rpm-tmp.DhddsG</code>, use the <code class="literal option">--debug</code> option because <code class="literal command">rpmbuild</code> deletes temporary files after a successful build. This displays the setup of environment variables followed by for example:
					</p><pre class="literallayout">cd '/builddir/build/BUILD'
rm -rf 'cello-1.0'
/usr/bin/gzip -dc '/builddir/build/SOURCES/cello-1.0.tar.gz' | /usr/bin/tar -xof -
STATUS=$?
if [ $STATUS -ne 0 ]; then
  exit $STATUS
fi
cd 'cello-1.0'
/usr/bin/chmod -Rf a+rX,u+w,g-w,o-w .</pre></div></div><p>
					The <code class="literal">%setup</code> macro:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Ensures that we are working in the correct directory.
						</li><li class="listitem">
							Removes residues of previous builds.
						</li><li class="listitem">
							Unpacks the source tarball.
						</li><li class="listitem">
							Sets up some default privileges.
						</li></ul></div><section class="section" id="using-the-setup-q-option"><div class="titlepage"><div><div><h4 class="title">4.2.2.1. Using the %setup -q macro</h4></div></div></div><p>
						The <code class="literal option">-q</code> option limits the verbosity of the <code class="literal">%setup</code> macro. Only <code class="literal">tar -xof</code> is executed instead of <code class="literal">tar -xvvof</code>. Use this option as the first option.
					</p></section><section class="section" id="using-the-setup-n-option"><div class="titlepage"><div><div><h4 class="title">4.2.2.2. Using the %setup -n macro</h4></div></div></div><p>
						The <code class="literal option">-n</code> option is used to specify the name of the directory from expanded tarball.
					</p><p>
						This is used in cases when the directory from expanded tarball has a different name from what is expected (<code class="literal">%{name}-%{version}</code>), which can lead to an error of the <code class="literal">%setup</code> macro.
					</p><p>
						For example, if the package name is <code class="literal package">cello</code>, but the source code is archived in <code class="literal">hello-1.0.tgz</code> and contains the <code class="literal filename">hello/</code> directory, the SPEC file content needs to be as follows:
					</p><pre class="literallayout">Name: cello
Source0: <a class="link" href="https://example.com/%{name}/release/hello-%{version}.tar.gz">https://example.com/%{name}/release/hello-%{version}.tar.gz</a>
…
%prep
%setup -n hello</pre></section><section class="section" id="using-the-setup-c-option"><div class="titlepage"><div><div><h4 class="title">4.2.2.3. Using the %setup -c macro</h4></div></div></div><p>
						The <code class="literal option">-c</code> option is used if the source code tarball does not contain any subdirectories and after unpacking, files from an archive fills the current directory.
					</p><p>
						The <code class="literal option">-c</code> option then creates the directory and steps into the archive expansion as shown below:
					</p><pre class="literallayout">/usr/bin/mkdir -p cello-1.0
cd 'cello-1.0'</pre><p>
						The directory is not changed after archive expansion.
					</p></section><section class="section" id="using-the-setup-dt-option"><div class="titlepage"><div><div><h4 class="title">4.2.2.4. Using the %setup -D and %setup -T macros</h4></div></div></div><p>
						The <code class="literal option">-D</code> option disables deleting of source code directory, and is particularly useful if the <code class="literal">%setup</code> macro is used several times. With the <code class="literal option">-D</code> option, the following lines are not used:
					</p><pre class="literallayout">rm -rf 'cello-1.0'</pre><p>
						The <code class="literal option">-T</code> option disables expansion of the source code tarball by removing the following line from the script:
					</p><pre class="literallayout">/usr/bin/gzip -dc '/builddir/build/SOURCES/cello-1.0.tar.gz' | /usr/bin/tar -xvvof -</pre></section><section class="section" id="using-the-setup-ab-option"><div class="titlepage"><div><div><h4 class="title">4.2.2.5. Using the %setup -a and %setup -b macros</h4></div></div></div><p>
						The <code class="literal option">-a</code> and <code class="literal option">-b</code> options expand specific sources:
					</p><p>
						The <code class="literal option">-b</code> option stands for <code class="literal">before</code>, and it expands specific sources before entering the working directory. The <code class="literal option">-a</code> option stands for <code class="literal">after</code>, and it expands those sources after entering. Their arguments are source numbers from the SPEC file preamble.
					</p><p>
						In the following example, the <code class="literal">cello-1.0.tar.gz</code> archive contains an empty <code class="literal filename">examples</code> directory. The examples are shipped in a separate <code class="literal">examples.tar.gz</code> tarball and they expand into the directory of the same name. In this case, use <code class="literal option">-a 1</code>, if you want to expand <code class="literal">Source1</code> after entering the working directory:
					</p><pre class="literallayout">Source0: <a class="link" href="https://example.com/%{name}/release/%{name}-%{version}.tar.gz">https://example.com/%{name}/release/%{name}-%{version}.tar.gz</a>
Source1: examples.tar.gz
…
%prep
%setup -a 1</pre><p>
						In the following example, examples are provided in a separate <code class="literal">cello-1.0-examples.tar.gz</code> tarball, which expands into <code class="literal filename">cello-1.0/examples</code>. In this case, use <code class="literal option">-b 1</code>, to expand <code class="literal">Source1</code> before entering the working directory:
					</p><pre class="literallayout">Source0: <a class="link" href="https://example.com/%{name}/release/%{name}-%{version}.tar.gz">https://example.com/%{name}/release/%{name}-%{version}.tar.gz</a>
Source1: %{name}-%{version}-examples.tar.gz
…
%prep
%setup -b 1</pre></section></section><section class="section" id="common-rpm-macros-in-the-files-section_more-on-macros"><div class="titlepage"><div><div><h3 class="title">4.2.3. Common RPM macros in the %files section</h3></div></div></div><p>
					This section lists advanced RPM Macros that are needed in the <code class="literal">%files</code> section of a SPEC file.
				</p><div class="table" id="idm139760732992144"><p class="title"><strong>Table 4.1. Advanced RPM Macros in the <code class="literal">%files</code> section</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 80%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139760732986816" scope="col">Macro</th><th align="left" valign="top" id="idm139760732985728" scope="col">Definition</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139760732986816"> <p>
									%license
								</p>
								 </td><td align="left" valign="top" headers="idm139760732985728"> <p>
									The macro identifies the file listed as a LICENSE file and it will be installed and labeled as such by RPM. Example: <code class="literal">%license LICENSE</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760732986816"> <p>
									%doc
								</p>
								 </td><td align="left" valign="top" headers="idm139760732985728"> <p>
									The macro identifies a file listed as documentation and it will be installed and labeled as such by RPM. The macro is used for documentation about the packaged software and also for code examples and various accompanying items. In the event code examples are included, care should be taken to remove executable mode from the file. Example: <code class="literal">%doc README</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760732986816"> <p>
									%dir
								</p>
								 </td><td align="left" valign="top" headers="idm139760732985728"> <p>
									The macro ensures that the path is a directory owned by this RPM. This is important so that the RPM file manifest accurately knows what directories to clean up on uninstall. Example: <code class="literal">%dir %{_libdir}/%{name}</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760732986816"> <p>
									%config(noreplace)
								</p>
								 </td><td align="left" valign="top" headers="idm139760732985728"> <p>
									The macro ensures that the following file is a configuration file and therefore should not be overwritten (or replaced) on a package install or update if the file has been modified from the original installation checksum. If there is a change, the file will be created with <code class="literal">.rpmnew</code> appended to the end of the filename upon upgrade or install so that the pre-existing or modified file on the target system is not modified. Example: <code class="literal">%config(noreplace) %{_sysconfdir}/%{name}/%{name}.conf</code>
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="displaying-the-built-in-macros_more-on-macros"><div class="titlepage"><div><div><h3 class="title">4.2.4. Displaying the built-in macros</h3></div></div></div><p>
					Red Hat Enterprise Linux provides multiple built-in RPM macros.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To display all built-in RPM macros, run:
						</p><pre class="literallayout">rpm --showrc</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The output is quite sizeable. To narrow the result, use the command above with the <code class="literal command">grep</code> command.
							</p></div></div></li><li class="listitem"><p class="simpara">
							To find information about the RPMs macros for your system’s version of RPM, run:
						</p><pre class="literallayout">rpm -ql rpm</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								RPM macros are the files titled <code class="literal">macros</code> in the output directory structure.
							</p></div></div></li></ol></div></section><section class="section" id="rpm-distribution-macros_more-on-macros"><div class="titlepage"><div><div><h3 class="title">4.2.5. RPM distribution macros</h3></div></div></div><p>
					Different distributions provide different sets of recommended RPM macros based on the language implementation of the software being packaged or the specific guidelines of the distribution.
				</p><p>
					The sets of recommended RPM macros are often provided as RPM packages, ready to be installed with the <code class="literal">yum</code> package manager.
				</p><p>
					Once installed, the macro files can be found in the <code class="literal filename">/usr/lib/rpm/macros.d/</code> directory.
				</p><p>
					To display the raw RPM macro definitions, run:
				</p><pre class="literallayout">rpm --showrc</pre><p>
					The above output displays the raw RPM macro definitions.
				</p><p>
					To determine what a macro does and how it can be helpful when packaging RPMs, run the <code class="literal command">rpm --eval</code> command with the name of the macro used as its argument:
				</p><pre class="literallayout">rpm --eval %{_MACRO}</pre><p>
					For more information, see the <code class="literal">rpm</code> man page.
				</p><section class="section" id="using-the-custom-macros_more-on-macros"><div class="titlepage"><div><div><h4 class="title">4.2.5.1. Creating custom macros</h4></div></div></div><p>
						You can override the distribution macros in the <code class="literal filename">~/.rpmmacros</code> file with your custom macros. Any changes that you make affect every build on your machine.
					</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							Defining any new macros in the <code class="literal filename">~/.rpmmacros</code> file is not recommended. Such macros would not be present on other machines, where users may want to try to rebuild your package.
						</p></div></div><p>
						To override a macro, run :
					</p><pre class="literallayout">%_topdir /opt/some/working/directory/rpmbuild</pre><p>
						You can create the directory from the example above, including all subdirectories through the <code class="literal">rpmdev-setuptree</code> utility. The value of this macro is by default <code class="literal">~/rpmbuild</code>.
					</p><pre class="literallayout">%_smp_mflags -l3</pre><p>
						The macro above is often used to pass to Makefile, for example <code class="literal">make %{?_smp_mflags}</code>, and to set a number of concurrent processes during the build phase. By default, it is set to <code class="literal">-jX</code>, where <code class="literal">X</code> is a number of cores. If you alter the number of cores, you can speed up or slow down a build of packages.
					</p></section></section></section><section class="section" id="epoch-scriplets-and-triggers_advanced-topics"><div class="titlepage"><div><div><h2 class="title">4.3. Epoch, Scriptlets and Triggers</h2></div></div></div><p>
				This section covers <code class="literal">Epoch</code>, <code class="literal">Scriptlets</code>, and <code class="literal">Triggers</code>, which represent advanced directives for RMP SPEC files.
			</p><p>
				All these directives influence not only the SPEC file, but also the end machine on which the resulting RPM is installed.
			</p><section class="section" id="packaging-epoch_epoch-scriplets-and-triggers"><div class="titlepage"><div><div><h3 class="title">4.3.1. The Epoch directive</h3></div></div></div><p>
					The <code class="literal">Epoch</code> directive enables to define weighted dependencies based on version numbers.
				</p><p>
					If this directive is not listed in the RPM SPEC file, the <code class="literal">Epoch</code> directive is not set at all. This is contrary to common belief that not setting <code class="literal">Epoch</code> results in an <code class="literal">Epoch</code> of 0. However, the YUM utility treats an unset <code class="literal">Epoch</code> as the same as an <code class="literal">Epoch</code> of 0 for the purposes of depsolving.
				</p><p>
					However, listing <code class="literal">Epoch</code> in a SPEC file is usually omitted because in majority of cases introducing an <code class="literal">Epoch</code> value skews the expected RPM behavior when comparing versions of packages.
				</p><div class="example" id="idm139760722303776"><p class="title"><strong>Example 4.2. Using Epoch</strong></p><div class="example-contents"><p>
						If you install the <code class="literal package">foobar</code> package with <code class="literal">Epoch: 1</code> and <code class="literal">Version: 1.0</code>, and someone else packages <code class="literal package">foobar</code> with <code class="literal">Version: 2.0</code> but without the <code class="literal">Epoch</code> directive, the new version will never be considered an update. The reason being that the <code class="literal">Epoch</code> version is preferred over the traditional <code class="literal">Name-Version-Release</code> marker that signifies versioning for RPM Packages.
					</p></div></div><p>
					Using of <code class="literal">Epoch</code> is thus quite rare. However, <code class="literal">Epoch</code> is typically used to resolve an upgrade ordering issue. The issue can appear as a side effect of upstream change in software version number schemes or versions incorporating alphabetical characters that cannot always be compared reliably based on encoding.
				</p></section><section class="section" id="scriptlets-new_epoch-scriplets-and-triggers"><div class="titlepage"><div><div><h3 class="title">4.3.2. Scriptlets</h3></div></div></div><p>
					<span class="strong strong"><strong>Scriptlets</strong></span> are a series of RPM directives that are executed before or after packages are installed or deleted.
				</p><p>
					Use <span class="strong strong"><strong>Scriptlets</strong></span> only for tasks that cannot be done at build time or in an start up script.
				</p><section class="section" id="scriptlets-directives_scriptlets-new"><div class="titlepage"><div><div><h4 class="title">4.3.2.1. Scriptlets directives</h4></div></div></div><p>
						A set of common <span class="strong strong"><strong>Scriptlet</strong></span> directives exists. They are similar to the SPEC file section headers, such as <code class="literal">%build</code> or <code class="literal">%install</code>. They are defined by multi-line segments of code, which are often written as a standard POSIX shell script. However, they can also be written in other programming languages that RPM for the target machine’s distribution accepts. RPM Documentation includes an exhaustive list of available languages.
					</p><p>
						The following table includes <span class="strong strong"><strong>Scriptlet</strong></span> directives listed in their execution order. Note that a package containing the scripts is installed between the <code class="literal">%pre</code> and <code class="literal">%post</code> directive, and it is uninstalled between the <code class="literal">%preun</code> and <code class="literal">%postun</code> directive.
					</p><div class="table" id="idm139760722216368"><p class="title"><strong>Table 4.2. Scriptlet directives</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 80%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139760722211536" scope="col">Directive</th><th align="left" valign="top" id="idm139760722210448" scope="col">Definition</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139760722211536"> <p>
										<code class="literal">%pretrans</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760722210448"> <p>
										Scriptlet that is executed just before installing or removing any package.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760722211536"> <p>
										<code class="literal">%pre</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760722210448"> <p>
										Scriptlet that is executed just before installing the package on the target system.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760722211536"> <p>
										<code class="literal">%post</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760722210448"> <p>
										Scriptlet that is executed just after the package was installed on the target system.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760722211536"> <p>
										<code class="literal">%preun</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760722210448"> <p>
										Scriptlet that is executed just before uninstalling the package from the target system.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760722211536"> <p>
										<code class="literal">%postun</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760722210448"> <p>
										Scriptlet that is executed just after the package was uninstalled from the target system.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760722211536"> <p>
										<code class="literal">%posttrans</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139760722210448"> <p>
										Scriptlet that is executed at the end of the transaction.
									</p>
									 </td></tr></tbody></table></div></div></section><section class="section" id="turning-off-a-scriptlet-execution_scriptlets-new"><div class="titlepage"><div><div><h4 class="title">4.3.2.2. Turning off a scriptlet execution</h4></div></div></div><p>
						To turn off the execution of any scriptlet, use the <code class="literal command">rpm</code> command together with the <code class="literal option">--no_scriptlet_name_</code> option.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								For example, to turn off the execution of the <code class="literal">%pretrans</code> scriptlets, run:
							</p><pre class="literallayout"># rpm --nopretrans</pre><p class="simpara">
								You can also use the <code class="literal option">-- noscripts</code> option, which is equivalent to all of the following:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal option">--nopre</code>
									</li><li class="listitem">
										<code class="literal option">--nopost</code>
									</li><li class="listitem">
										<code class="literal option">--nopreun</code>
									</li><li class="listitem">
										<code class="literal option">--nopostun</code>
									</li><li class="listitem">
										<code class="literal option">--nopretrans</code>
									</li><li class="listitem">
										<code class="literal option">--noposttrans</code>
									</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								For more details, see the <code class="literal">rpm(8)</code> man page.
							</li></ul></div></section><section class="section" id="scriptlets-macros_scriptlets-new"><div class="titlepage"><div><div><h4 class="title">4.3.2.3. Scriptlets macros</h4></div></div></div><p>
						The <span class="strong strong"><strong>Scriptlets</strong></span> directives also work with RPM macros.
					</p><p>
						The following example shows the use of systemd scriptlet macro, which ensures that systemd is notified about a new unit file.
					</p><pre class="literallayout">$ rpm --showrc | grep systemd
-14: <span class="emphasis"><em>transaction_systemd_inhibit %{</em></span>plugindir}/systemd_inhibit.so
-14: _journalcatalogdir /usr/lib/systemd/catalog
-14: _presetdir /usr/lib/systemd/system-preset
-14: _unitdir   /usr/lib/systemd/system
-14: _userunitdir       /usr/lib/systemd/user
/usr/lib/systemd/systemd-binfmt %{?<span class="strong strong"><strong>} &gt;/dev/null 2&gt;&amp;1 || : /usr/lib/systemd/systemd-sysctl %{?</strong></span>} &gt;/dev/null 2&gt;&amp;1 || :
-14: systemd_post
-14: systemd_postun
-14: systemd_postun_with_restart
-14: systemd_preun
-14: systemd_requires
Requires(post): systemd
Requires(preun): systemd
Requires(postun): systemd
-14: systemd_user_post  %systemd_post --user --global %{?<span class="strong strong"><strong>} -14: systemd_user_postun %{nil} -14: systemd_user_postun_with_restart %{nil} -14: systemd_user_preun systemd-sysusers %{?</strong></span>} &gt;/dev/null 2&gt;&amp;1 || :
echo %{?<span class="strong strong"><strong>} | systemd-sysusers - &gt;/dev/null 2&gt;&amp;1 || : systemd-tmpfiles --create %{?</strong></span>} &gt;/dev/null 2&gt;&amp;1 || :

$ rpm --eval %{systemd_post}

if [ $1 -eq 1 ] ; then
        # Initial installation
        systemctl preset  &gt;/dev/null 2&gt;&amp;1 || :
fi

$ rpm --eval %{systemd_postun}

systemctl daemon-reload &gt;/dev/null 2&gt;&amp;1 || :

$ rpm --eval %{systemd_preun}

if [ $1 -eq 0 ] ; then
        # Package removal, not upgrade
        systemctl --no-reload disable  &gt; /dev/null 2&gt;&amp;1 || :
        systemctl stop  &gt; /dev/null 2&gt;&amp;1 || :
fi</pre></section></section><section class="section" id="triggers_epoch-scriplets-and-triggers"><div class="titlepage"><div><div><h3 class="title">4.3.3. The Triggers directives</h3></div></div></div><p>
					<span class="strong strong"><strong>Triggers</strong></span> are RPM directives which provide a method for interaction during package installation and uninstallation.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						<span class="strong strong"><strong>Triggers</strong></span> may be executed at an unexpected time, for example on update of the containing package. <span class="strong strong"><strong>Triggers</strong></span> are difficult to debug, therefore they need to be implemented in a robust way so that they do not break anything when executed unexpectedly. For these reasons, Red Hat recommends to minimize the use of <span class="strong strong"><strong>Triggers</strong></span>.
					</p></div></div><p>
					The order of execution and the details for each existing <span class="strong strong"><strong>Triggers</strong></span> are listed below:
				</p><pre class="literallayout">all-%pretrans
…​
any-%triggerprein (%triggerprein from other packages set off by new install)
new-%triggerprein
new-%pre      for new version of package being installed
…​           (all new files are installed)
new-%post     for new version of package being installed

any-%triggerin (%triggerin from other packages set off by new install)
new-%triggerin
old-%triggerun
any-%triggerun (%triggerun from other packages set off by old uninstall)

old-%preun    for old version of package being removed
…​           (all old files are removed)
old-%postun   for old version of package being removed

old-%triggerpostun
any-%triggerpostun (%triggerpostun from other packages set off by old un
            install)
…​
all-%posttrans</pre><p>
					The above items are found in the <code class="literal filename">/usr/share/doc/rpm-4.*/triggers</code> file.
				</p></section><section class="section" id="using-non-shell-scripts-in-a-spec-file_epoch-scriplets-and-triggers"><div class="titlepage"><div><div><h3 class="title">4.3.4. Using non-shell scripts in a SPEC file</h3></div></div></div><p>
					The <code class="literal option">-p</code> scriptlet option in a SPEC file enables the user to invoke a specific interpreter instead of the default shell scripts interpreter (<code class="literal">-p /bin/sh</code>).
				</p><p>
					The following procedure describes how to create a script, which prints out a message after installation of the <code class="literal">pello.py</code> program:
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Open the <code class="literal">pello.spec</code> file.
						</li><li class="listitem"><p class="simpara">
							Find the following line:
						</p><pre class="literallayout">install -m 0644 %{name}.py* %{buildroot}/usr/lib/%{name}/</pre></li><li class="listitem"><p class="simpara">
							Under the above line, insert:
						</p><pre class="literallayout">%post -p /usr/bin/python3
print("This is {} code".format("python"))</pre></li><li class="listitem">
							Build your package as described in <a class="xref" href="index.html#building-rpms_packaging-software" title="3.3. Building RPMs">Section 3.3, “Building RPMs”</a>.
						</li><li class="listitem"><p class="simpara">
							Install your package:
						</p><pre class="literallayout"># yum install /home/&lt;username&gt;/rpmbuild/RPMS/noarch/pello-0.1.2-1.el8.noarch.rpm</pre></li><li class="listitem"><p class="simpara">
							Check the output message after the installation:
						</p><pre class="literallayout">Installing       : pello-0.1.2-1.el8.noarch                              1/1
Running scriptlet: pello-0.1.2-1.el8.noarch                              1/1
This is python code</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						To use a Python 3 script, include the following line under <code class="literal">install -m</code> in a SPEC file:
					</p><pre class="literallayout">%post -p /usr/bin/python3</pre><p>
						To use a Lua script, include the following line under <code class="literal">install -m</code> in a SPEC file:
					</p><pre class="literallayout">%post -p &lt;lua&gt;</pre><p>
						This way, you can specify any interpreter in a SPEC file.
					</p></div></div></section></section><section class="section" id="rpm-conditionals_advanced-topics"><div class="titlepage"><div><div><h2 class="title">4.4. RPM conditionals</h2></div></div></div><p>
				RPM Conditionals enable conditional inclusion of various sections of the SPEC file.
			</p><p>
				Conditional inclusions usually deal with:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Architecture-specific sections
					</li><li class="listitem">
						Operating system-specific sections
					</li><li class="listitem">
						Compatibility issues between various versions of operating systems
					</li><li class="listitem">
						Existence and definition of macros
					</li></ul></div><section class="section" id="rpm-conditionals-syntax_rpm-conditionals"><div class="titlepage"><div><div><h3 class="title">4.4.1. RPM conditionals syntax</h3></div></div></div><p>
					RPM conditionals use the following syntax:
				</p><p>
					If <span class="emphasis"><em>expression</em></span> is true, then do some action:
				</p><pre class="literallayout">%if expression
…​
%endif</pre><p>
					If <span class="emphasis"><em>expression</em></span> is true, then do some action, in other case, do another action:
				</p><pre class="literallayout">%if expression
…​
%else
…​
%endif</pre></section><section class="section" id="rpm-conditionals-examples_rpm-conditionals"><div class="titlepage"><div><div><h3 class="title">4.4.2. RPM conditionals examples</h3></div></div></div><p>
					This section provides multiple examples of RPM conditionals.
				</p><section class="section" id="the_if_conditionals"><div class="titlepage"><div><div><h4 class="title">4.4.2.1. The %if conditionals</h4></div></div></div><div class="example" id="idm139760724324112"><p class="title"><strong>Example 4.3. Using the %if conditional to handle compatibility between Red Hat Enterprise Linux 8 and other operating systems</strong></p><div class="example-contents"><pre class="literallayout">%if 0%{?rhel} == 8
sed -i '/AS_FUNCTION_DESCRIBE/ s/^/<span class="marked marked">/' configure.in sed -i '/AS_FUNCTION_DESCRIBE/ s/^/</span>/' acinclude.m4
%endif</pre></div></div><p>
						This conditional handles compatibility between RHEL 8 and other operating systems in terms of support of the AS_FUNCTION_DESCRIBE macro. If the package is built for RHEL, the <code class="literal">%rhel</code> macro is defined, and it is expanded to RHEL version. If its value is 8, meaning the package is build for RHEL 8, then the references to AS_FUNCTION_DESCRIBE, which is not supported by RHEL 8, are deleted from autoconfig scripts.
					</p><div class="example" id="idm139760724320096"><p class="title"><strong>Example 4.4. Using the %if conditional to handle definition of macros</strong></p><div class="example-contents"><pre class="literallayout">%define ruby_archive %{name}-%{ruby_version}
%if 0%{?milestone:1}%{?revision:1} != 0
%define ruby_archive %{ruby_archive}-%{?milestone}%{?!milestone:%{?revision:r%{revision}}}
%endif</pre></div></div><p>
						This conditional handles definition of macros. If the <code class="literal">%milestone</code> or the <code class="literal">%revision</code> macros are set, the <code class="literal">%ruby_archive</code> macro, which defines the name of the upstream tarball, is redefined.
					</p></section><section class="section" id="specialized_variants_of_if_conditionals"><div class="titlepage"><div><div><h4 class="title">4.4.2.2. Specialized variants of %if conditionals</h4></div></div></div><p>
						The <code class="literal">%ifarch</code> conditional, <code class="literal">%ifnarch</code> conditional and <code class="literal">%ifos</code> conditional are specialized variants of the <code class="literal">%if</code> conditionals. These variants are commonly used, hence they have their own macros.
					</p><section class="section" id="the_ifarch_conditional"><div class="titlepage"><div><div><h5 class="title">4.4.2.2.1. The %ifarch conditional</h5></div></div></div><p>
							The <code class="literal">%ifarch</code> conditional is used to begin a block of the SPEC file that is architecture-specific. It is followed by one or more architecture specifiers, each separated by commas or whitespace.
						</p><div class="example" id="idm139760721165664"><p class="title"><strong>Example 4.5. An example use of the %ifarch conditional</strong></p><div class="example-contents"><pre class="literallayout">%ifarch i386 sparc
…​
%endif</pre></div></div><p>
							All the contents of the SPEC file between <code class="literal">%ifarch</code> and <code class="literal">%endif</code> are processed only on the 32-bit AMD and Intel architectures or Sun SPARC-based systems.
						</p></section><section class="section" id="the_ifnarch_conditional"><div class="titlepage"><div><div><h5 class="title">4.4.2.2.2. The %ifnarch conditional</h5></div></div></div><p>
							The <code class="literal">%ifnarch</code> conditional has a reverse logic than <code class="literal">%ifarch</code> conditional.
						</p><div class="example" id="idm139760721159344"><p class="title"><strong>Example 4.6. An example use of the %ifnarch conditional</strong></p><div class="example-contents"><pre class="literallayout">%ifnarch alpha
…​
%endif</pre></div></div><p>
							All the contents of the SPEC file between <code class="literal">%ifnarch</code> and <code class="literal">%endif</code> are processed only if not done on a Digital Alpha/AXP-based system.
						</p></section><section class="section" id="the_ifos_conditional"><div class="titlepage"><div><div><h5 class="title">4.4.2.2.3. The %ifos conditional</h5></div></div></div><p>
							The <code class="literal">%ifos</code> conditional is used to control processing based on the operating system of the build. It can be followed by one or more operating system names.
						</p><div class="example" id="idm139760721153392"><p class="title"><strong>Example 4.7. An example use of the %ifos conditional</strong></p><div class="example-contents"><pre class="literallayout">%ifos linux
…​
%endif</pre></div></div><p>
							All the contents of the SPEC file between <code class="literal">%ifos</code> and <code class="literal">%endif</code> are processed only if the build was done on a Linux system.
						</p></section></section></section></section><section class="section" id="packaging-python3_advanced-topics"><div class="titlepage"><div><div><h2 class="title">4.5. Packaging of Python 3 RPMs</h2></div></div></div><p>
				Most Python projects use Setuptools for packaging, and define package information in the <code class="literal filename">setup.py</code> file. For more information on Setuptools packaging, see <a class="link" href="https://setuptools.readthedocs.io/en/latest/">Setuptools documentation</a>.
			</p><p>
				You can also package your Python project into an RPM package, which provides the following advantages compared to Setuptools packaging:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Specification of dependencies of a package on other RPMs (even non-Python)
					</li><li class="listitem"><p class="simpara">
						Cryptographic signing
					</p><p class="simpara">
						With cryptographic signing, content of RPM packages can be verified, integrated, and tested with the rest of the operating system.
					</p></li></ul></div><section class="section" id="Typical-Python-RPM-package-spec-file-description"><div class="titlepage"><div><div><h3 class="title">4.5.1. Typical SPEC file description for a Python RPM package</h3></div></div></div><p>
					An RPM SPEC file for Python projects has some specifics compared to non-Python RPM SPEC files. Most notably, a name of any RPM package of a Python library must always include the <code class="literal">python3</code> prefix.
				</p><p>
					Other specifics are shown in the following SPEC file <span class="strong strong"><strong>example for the <code class="literal package">python3-detox</code> package</strong></span>. For description of such specifics, see the notes below the example.
				</p><pre class="programlisting language-specfile">%global modname detox                                                           <span id="CO1-1"><!--Empty--></span><span class="callout">1</span>

Name:           python3-detox                                                   <span id="CO1-2"><!--Empty--></span><span class="callout">2</span>
Version:        0.12
Release:        4%{?dist}
Summary:        Distributing activities of the tox tool
License:        MIT
URL:             https://pypi.io/project/detox
Source0:        https://pypi.io/packages/source/d/%{modname}/%{modname}-%{version}.tar.gz

BuildArch:      noarch

BuildRequires:  python36-devel                                                  <span id="CO1-3"><!--Empty--></span><span class="callout">3</span>
BuildRequires:  python3-setuptools
BuildRequires:  python36-rpm-macros
BuildRequires:  python3-six
BuildRequires:  python3-tox
BuildRequires:  python3-py
BuildRequires:  python3-eventlet

%?python_enable_dependency_generator                                            <span id="CO1-4"><!--Empty--></span><span class="callout">4</span>

%description

Detox is the distributed version of the tox python testing tool. It makes efficient use of multiple CPUs by running all possible activities in parallel.
Detox has the same options and configuration that tox has, so after installation you can run it in the same way and with the same options that you use for tox.

    $ detox

%prep
%autosetup -n %{modname}-%{version}

%build
%py3_build                                                                      <span id="CO1-5"><!--Empty--></span><span class="callout">5</span>

%install
%py3_install

%check
%{__python3} setup.py test                                                      <span id="CO1-6"><!--Empty--></span><span class="callout">6</span>

%files -n python3-%{modname}
%doc CHANGELOG
%license LICENSE
%{_bindir}/detox
%{python3_sitelib}/%{modname}/
%{python3_sitelib}/%{modname}-%{version}*

%changelog
...</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="index.html#CO1-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The <span class="strong strong"><strong>modname</strong></span> macro contains the name of the Python project. In this example it is <code class="literal">detox</code>.
						</div></dd><dt><a href="index.html#CO1-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							When packaging a Python project into RPM, the <code class="literal">python3</code> prefix always needs to be added to the original name of the project. The original name here is <code class="literal">detox</code> and the <span class="strong strong"><strong>name of the RPM</strong></span> is <code class="literal">python3-detox</code>.
						</div></dd><dt><a href="index.html#CO1-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							<span class="strong strong"><strong>BuildRequires</strong></span> specifies what packages are required to build and test this package. In BuildRequires, always include items providing tools necessary for building Python packages: <code class="literal">python36-devel</code> and <code class="literal">python3-setuptools</code>. The <code class="literal">python36-rpm-macros</code> package is required so that files with <code class="literal">/usr/bin/python3</code> shebangs are automatically changed to <code class="literal">/usr/bin/python3.6</code>. For more information, see <a class="xref" href="index.html#python-shebang-mangling" title="4.5.4. Handling hashbangs in Python scripts">Section 4.5.4, “Handling hashbangs in Python scripts”</a>.
						</div></dd><dt><a href="index.html#CO1-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							Every Python package requires some other packages to work correctly. Such packages need to be specified in the SPEC file as well. To specify the <span class="strong strong"><strong>dependencies</strong></span>, you can use the <span class="strong strong"><strong>%python_enable_dependency_generator</strong></span> macro to automatically use dependencies defined in the <code class="literal filename">setup.py</code> file. If a package has dependencies that are not specified using Setuptools, specify them within additional <code class="literal">Requires</code> directives.
						</div></dd><dt><a href="index.html#CO1-5"><span class="callout">5</span></a> </dt><dd><div class="para">
							The <span class="strong strong"><strong>%py3_build</strong></span> and <span class="strong strong"><strong>%py3_install</strong></span> macros run the <code class="literal command">setup.py build</code> and <code class="literal command">setup.py install</code> commands, respectively, with additional arguments to specify installation locations, the interpreter to use, and other details.
						</div></dd><dt><a href="index.html#CO1-6"><span class="callout">6</span></a> </dt><dd><div class="para">
							The <span class="strong strong"><strong>check</strong></span> section provides a macro that runs the correct version of Python. The <span class="strong strong"><strong>%{__python3}</strong></span> macro contains a path for the Python 3 interpreter, for example <code class="literal">/usr/bin/python3</code>. We recommend to always use the macro rather than a literal path.
						</div></dd></dl></div></section><section class="section" id="Common-macros-for-Python-RPM-packages"><div class="titlepage"><div><div><h3 class="title">4.5.2. Common macros for Python 3 RPM packages</h3></div></div></div><p>
					In a SPEC file, always use the macros below rather than hardcoding their values.
				</p><p>
					In macro names, always use <code class="literal">python3</code> or <code class="literal">python2</code> instead of unversioned <code class="literal">python</code>.
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139760721874704" scope="col">Macro</th><th align="left" valign="top" id="idm139760721873616" scope="col">Normal Definition</th><th align="left" valign="top" id="idm139760721872528" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139760721874704"> <p>
									%{__python3}
								</p>
								 </td><td align="left" valign="top" headers="idm139760721873616"> <p>
									/usr/bin/python3
								</p>
								 </td><td align="left" valign="top" headers="idm139760721872528"> <p>
									Python 3 interpreter
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760721874704"> <p>
									%{python3_version}
								</p>
								 </td><td align="left" valign="top" headers="idm139760721873616"> <p>
									3.6
								</p>
								 </td><td align="left" valign="top" headers="idm139760721872528"> <p>
									The full version of the Python 3 interpreter.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760721874704"> <p>
									%{python3_sitelib}
								</p>
								 </td><td align="left" valign="top" headers="idm139760721873616"> <p>
									/usr/lib/python3.6/site-packages
								</p>
								 </td><td align="left" valign="top" headers="idm139760721872528"> <p>
									Where pure-Python modules are installed.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760721874704"> <p>
									%{python3_sitearch}
								</p>
								 </td><td align="left" valign="top" headers="idm139760721873616"> <p>
									/usr/lib64/python3.6/site-packages
								</p>
								 </td><td align="left" valign="top" headers="idm139760721872528"> <p>
									Where modules containing architecture-specific extensions are installed.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760721874704"> <p>
									%py3_build
								</p>
								 </td><td align="left" valign="top" headers="idm139760721873616"> </td><td align="left" valign="top" headers="idm139760721872528"> <p>
									Runs the <code class="literal command">setup.py build</code> command with arguments suitable for a system package.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760721874704"> <p>
									%py3_install
								</p>
								 </td><td align="left" valign="top" headers="idm139760721873616"> </td><td align="left" valign="top" headers="idm139760721872528"> <p>
									Runs the <code class="literal command">setup.py install</code> command with arguments suitable for a system package.
								</p>
								 </td></tr></tbody></table></div></section><section class="section" id="automatic_provides_for_python_rpm_packages"><div class="titlepage"><div><div><h3 class="title">4.5.3. Automatic provides for Python RPM packages</h3></div></div></div><p>
					When packaging a Python project, make sure that, if present, the following directories are included in the resulting RPM:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal filename">.dist-info</code>
						</li><li class="listitem">
							<code class="literal filename">.egg-info</code>
						</li><li class="listitem">
							<code class="literal filename">.egg-link</code>
						</li></ul></div><p>
					From these directories, the RPM build process automatically generates virtual <code class="literal">pythonX.Ydist</code> provides, for example <code class="literal">python3.6dist(detox)</code>. These virtual provides are used by packages that are specified by the <span class="strong strong"><strong>%python_enable_dependency_generator</strong></span> macro.
				</p></section><section class="section" id="python-shebang-mangling"><div class="titlepage"><div><div><h3 class="title">4.5.4. Handling hashbangs in Python scripts</h3></div></div></div><p>
					In Red Hat Enterprise Linux 8, executable Python scripts are expected to use hashbangs (shebangs) specifying explicitly at least the major Python version.
				</p><p>
					The <code class="literal filename">/usr/lib/rpm/redhat/brp-mangle-shebangs</code> buildroot policy (BRP) script is run automatically when building any RPM package, and attempts to correct hashbangs in all executable files. The BRP script will generate errors when encountering a Python script with an ambiguous hashbang, such as:
				</p><pre class="literallayout">#! /usr/bin/python</pre><p>
					or
				</p><pre class="literallayout">#! /usr/bin/env python</pre><p>
					To modify hashbangs in the Python scripts causing these build errors at RPM build time, use the <code class="literal filename">pathfix.py</code> script from the <code class="literal package">platform-python-devel</code> package:
				</p><pre class="literallayout">pathfix.py -pn -i %{__python3} <span class="emphasis"><em>PATH</em></span> …​</pre><p>
					Multiple <code class="literal"><span class="emphasis"><em>PATH</em></span>s</code> can be specified. If a <code class="literal"><span class="emphasis"><em>PATH</em></span></code> is a directory, <code class="literal command">pathfix.py</code> recursively scans for any Python scripts matching the pattern <code class="literal">^[a-zA-Z0-9_]+\.py$</code>, not only those with an ambiguous hashbang. Add this command to the <code class="literal">%prep</code> section or at the end of the <code class="literal">%install</code> section.
				</p><p>
					Alternatively, modify the packaged Python scripts so that they conform to the expected format. For this purpose, <code class="literal filename">pathfix.py</code> can be used outside the RPM build process, too. When running <code class="literal filename">pathfix.py</code> outside a RPM build, replace <code class="literal"><span class="emphasis"><em>__python3</em></span></code> from the example above with a path for the hashbang, such as <code class="literal filename">/usr/bin/python3</code>.
				</p><p>
					If the packaged Python scripts require Python version 2, replace the number 3 with 2 in the commands above.
				</p><p>
					Additionally, hashbangs in the form <code class="literal">/usr/bin/python3</code> are by default replaced with hashbangs pointing to Python from the <code class="literal package">platform-python</code> package used for system tools with Red Hat Enterprise Linux.
				</p><p>
					To change the <code class="literal">/usr/bin/python3</code> hashbangs in their custom packages to point to a version of Python installed from Application Stream, in the form <code class="literal">/usr/bin/python3.6</code>, add the <code class="literal package">python36-rpm-macros</code> package into the <span class="strong strong"><strong>BuildRequires</strong></span> section of the SPEC file:
				</p><pre class="literallayout">BuildRequires:  python36-rpm-macros</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						To prevent hashbang check and modification by the BRP script, use the following RPM directive:
					</p><pre class="literallayout">%undefine %brp_mangle_shebangs</pre></div></div></section></section><section class="section" id="ruby-gem-packages_advanced-topics"><div class="titlepage"><div><div><h2 class="title">4.6. RubyGems packages</h2></div></div></div><p>
				This section explains what RubyGems packages are, and how to re-package them into RPM.
			</p><section class="section" id="what-rubygems-are_ruby-gem-packages"><div class="titlepage"><div><div><h3 class="title">4.6.1. What RubyGems are</h3></div></div></div><p>
					Ruby is a dynamic, interpreted, reflective, object-oriented, general-purpose programming language.
				</p><p>
					Programs written in Ruby are typically packaged using the RubyGems project, which provides a specific Ruby packaging format.
				</p><p>
					Packages created by RubyGems are called gems, and they can be re-packaged into RPM as well.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This documentation refers to terms related to the RubyGems concept with the <code class="literal">gem</code> prefix, for example .gemspec is used for the <code class="literal">gem specification</code>, and terms related to RPM are unqualified.
					</p></div></div></section><section class="section" id="ruby-gem-rpm-relation_ruby-gem-packages"><div class="titlepage"><div><div><h3 class="title">4.6.2. How RubyGems relate to RPM</h3></div></div></div><p>
					RubyGems represent Ruby’s own packaging format. However, RubyGems contain metadata similar to those needed by RPM, which enables the conversion from RubyGems to RPM.
				</p><p>
					According to <a class="link" href="https://docs.fedoraproject.org/en-US/packaging-guidelines/Ruby/#_rubygems">Ruby Packaging Guidelines</a>, it is possible to re-package RubyGems packages into RPM in this way:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Such RPMs fit with the rest of the distribution.
						</li><li class="listitem">
							End users are able to satisfy dependencies of a gem by installing the appropriate RPM-packaged gem.
						</li></ul></div><p>
					RubyGems use similar terminology as RPM, such as SPEC files, package names, dependencies and other items.
				</p><p>
					To fit into the rest of RHEL RPM distribution, packages created by RubyGems must follow the conventions listed below:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Names of gems must follow this pattern:
						</p><pre class="literallayout">rubygem-%{gem_name}</pre></li><li class="listitem"><p class="simpara">
							To implement a shebang line, the following string must be used:
						</p><pre class="literallayout">#!/usr/bin/ruby</pre></li></ul></div></section><section class="section" id="creating-rpm-packages-from-rubygems_ruby-gem-packages"><div class="titlepage"><div><div><h3 class="title">4.6.3. Creating RPM packages from RubyGems packages</h3></div></div></div><p>
					This section describes how to create RPM packages from packages created by RubyGems.
				</p><p>
					To create a source RPM for a RubyGems package, two files are needed:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							A gem file
						</li><li class="listitem">
							An RPM SPEC file
						</li></ul></div><section class="section" id="rubygems-spec-file-conventions"><div class="titlepage"><div><div><h4 class="title">4.6.3.1. RubyGems SPEC file conventions</h4></div></div></div><p>
						A RubyGems SPEC file must meet the following conventions:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Contain a definition of <code class="literal">%{gem_name}</code>, which is the name from the gem’s specification.
							</li><li class="listitem">
								The source of the package must be the full URL to the released gem archive; the version of the package must be the gem’s version.
							</li><li class="listitem"><p class="simpara">
								Contain the <code class="literal">BuildRequires:</code> a directive defined as follows to be able to pull in the macros needed to build.
							</p><pre class="literallayout">BuildRequires:rubygems-devel</pre></li><li class="listitem">
								Not contain any RubyGems <code class="literal">Requires</code> or <code class="literal">Provides</code>, because those are autogenerated.
							</li><li class="listitem"><p class="simpara">
								Not contain the <code class="literal">BuildRequires:</code> directive defined as follows, unless you want to explicitly specify Ruby version compatibility:
							</p><pre class="literallayout">Requires: ruby(release)</pre><p class="simpara">
								The automatically generated dependency on RubyGems (<code class="literal">Requires: ruby(rubygems)</code>) is sufficient.
							</p></li></ul></div><h5 id="macros">Macros</h5><p>
						Macros useful for packages created by RubyGems are provided by the <code class="literal package">rubygems-devel</code> packages.
					</p><div class="table" id="idm139760725458576"><p class="title"><strong>Table 4.3. RubyGems' macros</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 11%; " class="col_1"><!--Empty--></col><col style="width: 44%; " class="col_2"><!--Empty--></col><col style="width: 44%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139760725452816" scope="col">Macro name</th><th align="left" valign="top" id="idm139760725451728" scope="col">Extended path</th><th align="left" valign="top" id="idm139760725450640" scope="col">Usage</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139760725452816"> <p>
										%{gem_dir}
									</p>
									 </td><td align="left" valign="top" headers="idm139760725451728"> <p>
										/usr/share/gems
									</p>
									 </td><td align="left" valign="top" headers="idm139760725450640"> <p>
										Top directory for the gem structure.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760725452816"> <p>
										%{gem_instdir}
									</p>
									 </td><td align="left" valign="top" headers="idm139760725451728"> <p>
										%{gem_dir}/gems/%{gem_name}-%{version}
									</p>
									 </td><td align="left" valign="top" headers="idm139760725450640"> <p>
										Directory with the actual content of the gem.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760725452816"> <p>
										%{gem_libdir}
									</p>
									 </td><td align="left" valign="top" headers="idm139760725451728"> <p>
										%{gem_instdir}/lib
									</p>
									 </td><td align="left" valign="top" headers="idm139760725450640"> <p>
										The library directory of the gem.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760725452816"> <p>
										%{gem_cache}
									</p>
									 </td><td align="left" valign="top" headers="idm139760725451728"> <p>
										%{gem_dir}/cache/%{gem_name}-%{version}.gem
									</p>
									 </td><td align="left" valign="top" headers="idm139760725450640"> <p>
										The cached gem.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760725452816"> <p>
										%{gem_spec}
									</p>
									 </td><td align="left" valign="top" headers="idm139760725451728"> <p>
										%{gem_dir}/specifications/%{gem_name}-%{version}.gemspec
									</p>
									 </td><td align="left" valign="top" headers="idm139760725450640"> <p>
										The gem specification file.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760725452816"> <p>
										%{gem_docdir}
									</p>
									 </td><td align="left" valign="top" headers="idm139760725451728"> <p>
										%{gem_dir}/doc/%{gem_name}-%{version}
									</p>
									 </td><td align="left" valign="top" headers="idm139760725450640"> <p>
										The RDoc documentation of the gem.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760725452816"> <p>
										%{gem_extdir_mri}
									</p>
									 </td><td align="left" valign="top" headers="idm139760725451728"> <p>
										%{_libdir}/gems/ruby/%{gem_name}-%{version}
									</p>
									 </td><td align="left" valign="top" headers="idm139760725450640"> <p>
										The directory for gem extension.
									</p>
									 </td></tr></tbody></table></div></div></section><section class="section" id="rubygems-spec-file-example"><div class="titlepage"><div><div><h4 class="title">4.6.3.2. RubyGems SPEC file example</h4></div></div></div><p>
						This section provides an example SPEC file for building gems together with an explanation of its particular sections.
					</p><div class="formalpara"><p class="title"><strong>An example RubyGems SPEC file</strong></p><p>
							
<pre class="literallayout">%prep
%setup -q -n  %{gem_name}-%{version}

# Modify the gemspec if necessary
# Also apply patches to code if necessary
%patch0 -p1

%build
# Create the gem as gem install only works on a gem file
gem build ../%{gem_name}-%{version}.gemspec

# %%gem_install compiles any C extensions and installs the gem into ./%%gem_dir
# by default, so that we can move it into the buildroot in %%install
%gem_install

%install
mkdir -p %{buildroot}%{gem_dir}
cp -a ./%{gem_dir}/* %{buildroot}%{gem_dir}/

# If there were programs installed:
mkdir -p %{buildroot}%{_bindir}
cp -a ./%{_bindir}/* %{buildroot}%{_bindir}

# If there are C extensions, copy them to the extdir.
mkdir -p %{buildroot}%{gem_extdir_mri}
cp -a .%{gem_extdir_mri}/{gem.build_complete,*.so} %{buildroot}%{gem_extdir_mri}/</pre>

						</p></div><p>
						The following table explains the specifics of particular items in a RubyGems SPEC file:
					</p><div class="table" id="idm139760721988736"><p class="title"><strong>Table 4.4. RubyGems' SPEC directives specifics</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"><!--Empty--></col><col style="width: 83%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139760721983936" scope="col">SPEC directive</th><th align="left" valign="top" id="idm139760721982848" scope="col">RubyGems specifics</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139760721983936"> <p>
										%prep
									</p>
									 </td><td align="left" valign="top" headers="idm139760721982848"> <p>
										RPM can directly unpack gem archives, so you can run the <code class="literal command">gem unpack</code> comamnd to extract the source from the gem. The <code class="literal">%setup -n %{gem_name}-%{version}</code> macro provides the directory into which the gem has been unpacked. At the same directory level, the <code class="literal filename">%{gem_name}-%{version}.gemspec</code> file is automatically created, which can be used to rebuild the gem later, to modify the <code class="literal">.gemspec</code>, or to apply patches to the code.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760721983936"> <p>
										%build
									</p>
									 </td><td align="left" valign="top" headers="idm139760721982848"> <p>
										This directive includes commands or series of commands for building the software into machine code. The <code class="literal">%gem_install</code> macro operates only on gem archives, and the gem is recreated with the next gem build. The gem file that is created is then used by <code class="literal">%gem_install</code> to build and install the code into the temporary directory, which is <code class="literal filename">./%{gem_dir}</code> by default. The <code class="literal">%gem_install</code> macro both builds and installs the code in one step. Before being installed, the built sources are placed into a temporary directory that is created automatically.
									</p>
									 <p>
										The <code class="literal">%gem_install</code> macro accepts two additional options: <code class="literal">-n &lt;gem_file&gt;</code>, which allows to override gem used for installation, and <code class="literal">-d &lt;install_dir&gt;</code>, which might override the gem installation destination; using this option is not recommended.
									</p>
									 <p>
										The <code class="literal">%gem_install</code> macro must not be used to install into the <code class="literal">%{buildroot}</code>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139760721983936"> <p>
										%install
									</p>
									 </td><td align="left" valign="top" headers="idm139760721982848"> <p>
										The installation is performed into the <code class="literal">%{buildroot}</code> hierarchy. You can create the directories that you need and then copy what was installed in the temporary directories into the <code class="literal">%{buildroot}</code> hierarchy. If this gem creates shared objects, they are moved into the architecture-specific <code class="literal">%{gem_extdir_mri}</code> path.
									</p>
									 </td></tr></tbody></table></div></div><p>
						For more information on RubyGems SPEC files, see <a class="link" href="https://docs.fedoraproject.org/en-US/packaging-guidelines/Ruby/">Ruby Packaging Guidelines</a>.
					</p></section><section class="section" id="converting-rubygem-rpm-spec"><div class="titlepage"><div><div><h4 class="title">4.6.3.3. Converting RubyGems packages to RPM SPEC files with gem2rpm</h4></div></div></div><p>
						The <code class="literal">gem2rpm</code> utility converts RubyGems packages to RPM SPEC files.
					</p><section class="section" id="installing-gem2rpm"><div class="titlepage"><div><div><h5 class="title">4.6.3.3.1. Installing gem2rpm</h5></div></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									To install <code class="literal">gem2rpm</code> from <a class="link" href="https://rubygems.org/">RubyGems.org</a>, run:
								</li></ul></div><pre class="literallayout">$ gem install gem2rpm</pre></section><section class="section" id="displaying-gem2rpm-options"><div class="titlepage"><div><div><h5 class="title">4.6.3.3.2. Displaying all options of gem2rpm</h5></div></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To see all options of <code class="literal">gem2rpm</code>, run:
								</p><pre class="literallayout">gem2rpm --help</pre></li></ul></div></section><section class="section" id="converting-rubygems-with-gem2rpm"><div class="titlepage"><div><div><h5 class="title">4.6.3.3.3. Using gem2rpm to covert RubyGems packages to RPM SPEC files</h5></div></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
									Download a gem in its latest version, and generate the RPM SPEC file for this gem:
								</li></ul></div><pre class="literallayout">$ gem2rpm --fetch &lt;gem_name&gt; &gt; &lt;gem_name&gt;.spec</pre><p>
							The described procedure creates an RPM SPEC file based on the information provided in the gem’s metadata. However, the gem misses some important information that is usually provided in RPMs, such as the license and the changelog. The generated SPEC file thus needs to be edited.
						</p></section><section class="section" id="editing-gem2rpm-templates"><div class="titlepage"><div><div><h5 class="title">4.6.3.3.4. Editing gem2rpm templates</h5></div></div></div><p>
							It is recommended to edit the template from which the RPM SPEC file is generated rather than the generated SPEC file itself.
						</p><p>
							The template is a standard Embedded Ruby (ERB) file, which includes variables listed in the following table.
						</p><div class="table" id="idm139760724635600"><p class="title"><strong>Table 4.5. Variables in the gem2rpm template</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--></col><col style="width: 80%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139760724630800" scope="col">Variable</th><th align="left" valign="top" id="idm139760724629712" scope="col">Explanation</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139760724630800"> <p>
											package
										</p>
										 </td><td align="left" valign="top" headers="idm139760724629712"> <p>
											The <code class="literal">Gem::Package</code> variable for the gem.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139760724630800"> <p>
											spec
										</p>
										 </td><td align="left" valign="top" headers="idm139760724629712"> <p>
											The <code class="literal">Gem::Specification</code> variable for the gem (the same as format.spec).
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139760724630800"> <p>
											config
										</p>
										 </td><td align="left" valign="top" headers="idm139760724629712"> <p>
											The <code class="literal">Gem2Rpm::Configuration</code> variable that can redefine default macros or rules used in spec template helpers.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139760724630800"> <p>
											runtime_dependencies
										</p>
										 </td><td align="left" valign="top" headers="idm139760724629712"> <p>
											The <code class="literal">Gem2Rpm::RpmDependencyList</code> variable providing a list of package runtime dependencies.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139760724630800"> <p>
											development_dependencies
										</p>
										 </td><td align="left" valign="top" headers="idm139760724629712"> <p>
											The <code class="literal">Gem2Rpm::RpmDependencyList</code> variable providing a list of package development dependencies.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139760724630800"> <p>
											tests
										</p>
										 </td><td align="left" valign="top" headers="idm139760724629712"> <p>
											The <code class="literal">Gem2Rpm::TestSuite</code> variable providing a list of test frameworks allowing their execution.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139760724630800"> <p>
											files
										</p>
										 </td><td align="left" valign="top" headers="idm139760724629712"> <p>
											The <code class="literal">Gem2Rpm::RpmFileList</code> variable providing an unfiltered list of files in a package.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139760724630800"> <p>
											main_files
										</p>
										 </td><td align="left" valign="top" headers="idm139760724629712"> <p>
											The <code class="literal">Gem2Rpm::RpmFileList</code> variable providing a list of files suitable for the main package.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139760724630800"> <p>
											doc_files
										</p>
										 </td><td align="left" valign="top" headers="idm139760724629712"> <p>
											The <code class="literal">Gem2Rpm::RpmFileList</code> variable providing a list of files suitable for the <code class="literal">-doc</code> subpackage.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm139760724630800"> <p>
											format
										</p>
										 </td><td align="left" valign="top" headers="idm139760724629712"> <p>
											The <code class="literal">Gem::Format</code> variable for the gem. Note that this variable is now deprecated.
										</p>
										 </td></tr></tbody></table></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To see all available templates, run:
								</p><pre class="literallayout">$ gem2rpm --templates</pre></li></ul></div><p>
							To edit the <code class="literal">gem2rpm</code> templates, follow this procedure:
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Save the default template:
								</p><pre class="literallayout">$ gem2rpm -T &gt; rubygem-&lt;gem_name&gt;.spec.template</pre></li><li class="listitem">
									Edit the template as needed.
								</li><li class="listitem"><p class="simpara">
									Generate the SPEC file using the edited template:
								</p><pre class="literallayout">$ gem2rpm -t rubygem-&lt;gem_name&gt;.spec.template &lt;gem_name&gt;-&lt;latest_version.gem &gt; &lt;gem_name&gt;-GEM.spec</pre></li></ol></div><p>
							You can now build an RPM package using the edited template as described in <a class="xref" href="index.html#building-rpms_packaging-software" title="3.3. Building RPMs">Section 3.3, “Building RPMs”</a>.
						</p></section></section></section></section><section class="section" id="how-to-handle-packages-with-perls-scripts_advanced-topics"><div class="titlepage"><div><div><h2 class="title">4.7. How to handle RPM packages with Perls scripts</h2></div></div></div><p>
				In RHEL 8, the Perl programming language is not included in the default buildroot. Therefore, the RPM packages that include Perl scripts must explicitly indicate the dependency on Perl using the <code class="literal">BuildRequires:</code> directive in RPM SPEC file.
			</p><section class="section" id="common-perl-related-dependencies_how-to-handle-packages-with-perls-scripts"><div class="titlepage"><div><div><h3 class="title">4.7.1. Common Perl-related dependencies</h3></div></div></div><p>
					The most frequently occurring Perl-related build dependencies used in <code class="literal">BuildRequires:</code> are :
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							<code class="literal">perl-generators</code>
						</p><p class="simpara">
							Automatically generates run-time <code class="literal">Requires</code> and <code class="literal">Provides</code> for installed Perl files. When you install a Perl script or a Perl module, you must include a build dependency on this package.
						</p></li><li class="listitem"><p class="simpara">
							<code class="literal">perl-interpreter</code>
						</p><p class="simpara">
							The Perl interpreter must be listed as a build dependency if it is called in any way, either explicitly via the <code class="literal">perl</code> package or the <code class="literal">%__perl</code> macro, or as a part of your package’s build system.
						</p></li><li class="listitem"><p class="simpara">
							<code class="literal">perl-devel</code>
						</p><p class="simpara">
							Provides Perl header files. If building architecture-specific code which links to the <code class="literal">libperl.so</code> library, such as an XS Perl module, you must include <code class="literal">BuildRequires: perl-devel</code>.
						</p></li></ul></div></section><section class="section" id="using-a-specific-perl-module_how-to-handle-packages-with-perls-scripts"><div class="titlepage"><div><div><h3 class="title">4.7.2. Using a specific Perl module</h3></div></div></div><p>
					If a specific Perl module is required at build time, use the following procedure:
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Apply the following syntax in your RPM SPEC file:
						</p><pre class="literallayout">BuildRequires: perl(MODULE)</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Apply this syntax to Perl core modules as well, because they can move in and out of the <code class="literal package">perl</code> package over time.
							</p></div></div></li></ul></div></section><section class="section" id="limiting-a-package-to-a-specific-perl-version_how-to-handle-packages-with-perls-scripts"><div class="titlepage"><div><div><h3 class="title">4.7.3. Limiting a package to a specific Perl version</h3></div></div></div><p>
					To limit your package to a specific Perl version, follow this procedure:
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the <code class="literal">perl(:VERSION)</code> dependency with the desired version constraint in your RPM SPEC file:
						</p><p class="simpara">
							For example, to limit a package to Perl version 5.22 and higher, use:
						</p><pre class="literallayout">BuildRequires: perl(:VERSION) &gt;= 5.22</pre></li></ul></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Do not use a comparison against the version of the <code class="literal package">perl</code> package because it includes an epoch number.
					</p></div></div></section><section class="section" id="ensuring-that-a-package-uses-the-correct-perl-interpreter_how-to-handle-packages-with-perls-scripts"><div class="titlepage"><div><div><h3 class="title">4.7.4. Ensuring that a package uses the correct Perl interpreter</h3></div></div></div><p>
					Red Hat provides multiple Perl interpreters, which are are not fully compatible. Therefore, any package that delivers a Perl module must use at run time the same Perl interpreter that was used at build time.
				</p><p>
					To ensure this, follow the procedure below:
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Include versioned <code class="literal">MODULE_COMPAT</code> <code class="literal">Requires</code> in RPM SPEC file for any package that delivers a Perl module:
						</p><pre class="literallayout">Requires:  perl(:MODULE_COMPAT_%(eval `perl -V:version`; echo $version))</pre></li></ul></div></section></section></section><section class="chapter" id="new-features-in-rhel-8_packaging-and-distributing-software"><div class="titlepage"><div><div><h1 class="title">Chapter 5. New features in RHEL 8</h1></div></div></div><p>
			This section documents the most notable changes in RPM packaging between Red Hat Enterprise Linux 7 and 8.
		</p><section class="section" id="support-for-weak-dependencies_new-features-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">5.1. Support for Weak dependencies</h2></div></div></div><section class="section" id="weak-dependencies-intro"><div class="titlepage"><div><div><h3 class="title">5.1.1. Introduction to Weak dependencies policy</h3></div></div></div><p>
					<code class="literal">Weak dependencies</code> are variants of the <code class="literal">Requires</code> directive. These variants are matched against virtual <code class="literal">Provides:</code> and package names using <code class="literal">Epoch-Version-Release</code> range comparisons.
				</p><p>
					<code class="literal">Weak dependencies</code> have two strengths (<code class="literal">weak</code> and <code class="literal">hint</code>) and two directions (<code class="literal">forward</code> and <code class="literal">backward</code>), as summarized in the following table.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The <code class="literal">forward</code> direction is analogous to <code class="literal">Requires:</code>. The <code class="literal">backward</code> has no analog in the previous dependency system.
					</p></div></div><div class="table" id="idm139760722274112"><p class="title"><strong>Table 5.1. Possible combinations of Weak dependencies' strengths and directions</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139760724934528" scope="col">Strength/Direction</th><th align="left" valign="top" id="idm139760724933440" scope="col">Forward</th><th align="left" valign="top" id="idm139760724932352" scope="col">Backward</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139760724934528"> <p>
									Weak
								</p>
								 </td><td align="left" valign="top" headers="idm139760724933440"> <p>
									Recommends:
								</p>
								 </td><td align="left" valign="top" headers="idm139760724932352"> <p>
									Supplements:
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760724934528"> <p>
									Hint
								</p>
								 </td><td align="left" valign="top" headers="idm139760724933440"> <p>
									Suggests:
								</p>
								 </td><td align="left" valign="top" headers="idm139760724932352"> <p>
									Enhances:
								</p>
								 </td></tr></tbody></table></div></div><p>
					The main advantages of the <code class="literal">Weak dependencies</code> policy are:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							It allows smaller minimal installations while keeping the default installation feature rich.
						</li><li class="listitem">
							Packages can specify preferences for specific providers while maintaining the flexibility of virtual provides.
						</li></ul></div><section class="section" id="weak-dependencies-feature"><div class="titlepage"><div><div><h4 class="title">5.1.1.1. Weak dependencies</h4></div></div></div><p>
						By default, <code class="literal">Weak dependencies</code> are treated similarly to regular <code class="literal">Requires:</code>. Matching packages are included in the <span class="strong strong"><strong><span class="application application">YUM</span></strong></span> transaction. If adding the package leads to an error, <span class="strong strong"><strong><span class="application application">YUM</span></strong></span> by default ignores the dependency. Hence, users can exclude packages that would be added by <code class="literal">Weak dependencies</code> or remove them later.
					</p><h6 id="conditions_of_use">Conditions of use</h6><p>
						You can use <code class="literal">Weak dependencies</code> only if the package still functions without the dependency.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							It is acceptable to create packages with very limited functionality without adding any of its weak requirements.
						</p></div></div><h6 id="use_cases">Use cases</h6><p>
						Use <code class="literal">Weak dependencies</code> especially where it is possible to minimize the installation for reasonable use cases, such as building virtual machines or containers that have a single purpose and do not require the full feature set of the package.
					</p><p>
						Typical use cases for <code class="literal">Weak dependencies</code> are:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Documentation
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										Documentation viewers if missing them is handled gracefully
									</li></ul></div></li><li class="listitem">
								Examples
							</li><li class="listitem"><p class="simpara">
								Plug-ins or add-ons
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										Support for file formats
									</li><li class="listitem">
										Support for protocols
									</li></ul></div></li></ul></div></section><section class="section" id="hints-feature"><div class="titlepage"><div><div><h4 class="title">5.1.1.2. Hints</h4></div></div></div><p>
						<code class="literal">Hints</code> are by default ignored by <span class="strong strong"><strong><span class="application application">YUM</span></strong></span>. They can be used by GUI tools to offer add-on packages that are not installed by default but can be useful in combination with the installed packages.
					</p><p>
						Do not use <code class="literal">Hints</code> for the requirements of the main use cases of a package. Include such requirements in the strong or <code class="literal">Weak dependencies</code> instead.
					</p><h6 id="package_preference">Package Preference</h6><p>
						<span class="strong strong"><strong><span class="application application">YUM</span></strong></span> uses <code class="literal">Weak dependencies</code> and <code class="literal">Hints</code> to decide which package to use if there is a choice between multiple equally valid packages. Packages that are pointed at by dependencies from installed or to be installed packages are preferred.
					</p><p>
						Note, the normal rules of dependency resolution are not influenced by this feature. For example, <code class="literal">Weak dependencies</code> cannot enforce an older version of a package to be chosen.
					</p><p>
						If there are multiple providers for a dependency, the requiring package can add a <code class="literal">Suggests:</code> to provide a hint to the dependency resolver about which option is preferred.
					</p><p>
						<code class="literal">Enhances:</code> is only used when the main package and other providers agree that adding the hint to the required package is for some reason the cleaner solution.
					</p><div class="example" id="idm139760724894080"><p class="title"><strong>Example 5.1. Using Hints to prefer one package over another</strong></p><div class="example-contents"><pre class="literallayout">Package A: Requires: mysql

Package mariadb: Provides: mysql

Package community-mysql: Provides: mysql</pre><p>
							If you want to prefer the <code class="literal package">mariadb</code> package over the <code class="literal package">community-mysql</code> package → use:
						</p><pre class="literallayout">Suggests: mariadb to Package A.</pre></div></div></section><section class="section" id="forward-backward-dependencies-feature"><div class="titlepage"><div><div><h4 class="title">5.1.1.3. Forward and Backward dependencies</h4></div></div></div><p>
						<code class="literal">Forward dependencies</code> are, similarly to <code class="literal">Requires</code>, evaluated for packages that are being installed. The best of the matching packages are also installed.
					</p><p>
						In general, prefer <code class="literal">Forward dependencies</code>. Add the dependency to the package when getting the other package added to the system.
					</p><p>
						For <code class="literal">Backward dependencies</code>, the packages containing the dependency are installed if a matching package is installed as well.
					</p><p>
						<code class="literal">Backward dependencies</code> are mainly designed for third party vendors who can attach their plug-ins, add-ons, or extensions to distribution or other third party packages.
					</p></section></section></section><section class="section" id="support-for-boolean-dependencies_new-features-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">5.2. Support for Boolean dependencies</h2></div></div></div><p>
				Starting with version 4.13, RPM is able to process boolean expressions in the following dependencies:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">Requires</code>
					</li><li class="listitem">
						<code class="literal">Recommends</code>
					</li><li class="listitem">
						<code class="literal">Suggests</code>
					</li><li class="listitem">
						<code class="literal">Supplements</code>
					</li><li class="listitem">
						<code class="literal">Enhances</code>
					</li><li class="listitem">
						<code class="literal">Conflicts</code>
					</li></ul></div><p>
				This section describes <a class="link" href="index.html#boolean-dependencies-syntax" title="5.2.1. Boolean dependencies syntax">boolean dependencies syntax</a>, provides a list of <a class="link" href="index.html#boolean-operators" title="5.2.2. Boolean operators">boolean operators</a>, and explains <a class="link" href="index.html#boolean-dependencies-nesting" title="5.2.3. Nesting">boolean dependencies nesting</a> as well as <a class="link" href="index.html#boolean-dependencies-semantics" title="5.2.4. Semantics">boolean dependencies semantics</a>.
			</p><section class="section" id="boolean-dependencies-syntax"><div class="titlepage"><div><div><h3 class="title">5.2.1. Boolean dependencies syntax</h3></div></div></div><p>
					Boolean expressions are always enclosed with parenthesis.
				</p><p>
					They are build out of normal dependencies:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Name only or name
						</li><li class="listitem">
							Comparison
						</li><li class="listitem">
							Version description
						</li></ul></div></section><section class="section" id="boolean-operators"><div class="titlepage"><div><div><h3 class="title">5.2.2. Boolean operators</h3></div></div></div><p>
					RPM 4.13 introduced the following boolean operators:
				</p><div class="table" id="idm139760724408352"><p class="title"><strong>Table 5.2. Boolean operators introduced with RPM 4.13</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139760724402560" scope="col">Boolean operator</th><th align="left" valign="top" id="idm139760724401472" scope="col">Description</th><th align="left" valign="top" id="idm139760724400384" scope="col">Example use</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139760724402560"> <p>
									<code class="literal">and</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139760724401472"> <p>
									Requires all operands to be fulfilled for the term to be true.
								</p>
								 </td><td align="left" valign="top" headers="idm139760724400384"> <p>
									Conflicts: (pkgA and pkgB)
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760724402560"> <p>
									<code class="literal">or</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139760724401472"> <p>
									Requires one of the operands to be fulfilled for the term to be true.
								</p>
								 </td><td align="left" valign="top" headers="idm139760724400384"> <p>
									Requires: (pkgA &gt;= 3.2 or pkgB)
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760724402560"> <p>
									<code class="literal">if</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139760724401472"> <p>
									Requires the first operand to be fulfilled if the second is. (reverse implication)
								</p>
								 </td><td align="left" valign="top" headers="idm139760724400384"> <p>
									Recommends: (myPkg-langCZ if langsupportCZ)
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760724402560"> <p>
									<code class="literal">if else</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139760724401472"> <p>
									Same as the <code class="literal">if</code> operator, plus requires the third operand to be fulfilled if the second is not.
								</p>
								 </td><td align="left" valign="top" headers="idm139760724400384"> <p>
									Requires: myPkg-backend-mariaDB if mariaDB else sqlite
								</p>
								 </td></tr></tbody></table></div></div><p>
					RPM 4.14 introduced the following additional boolean operators:
				</p><div class="table" id="idm139760724547744"><p class="title"><strong>Table 5.3. Boolean operators introduced with RPM 4.14</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139760724541952" scope="col">Boolean operator</th><th align="left" valign="top" id="idm139760724540864" scope="col">Description</th><th align="left" valign="top" id="idm139760724539776" scope="col">Example use</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139760724541952"> <p>
									<code class="literal">with</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139760724540864"> <p>
									Requires all operands to be fulfilled by the same package for the term to be true.
								</p>
								 </td><td align="left" valign="top" headers="idm139760724539776"> <p>
									Requires: (pkgA-foo with pkgA-bar)
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760724541952"> <p>
									<code class="literal">without</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139760724540864"> <p>
									Requires a single package that satisfies the first operand but not the second. (set subtraction)
								</p>
								 </td><td align="left" valign="top" headers="idm139760724539776"> <p>
									Requires: (pkgA-foo without pkgA-bar)
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760724541952"> <p>
									<code class="literal">unless</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139760724540864"> <p>
									Requires the first operand to be fulfilled if the second is not. (reverse negative implication)
								</p>
								 </td><td align="left" valign="top" headers="idm139760724539776"> <p>
									Conflicts: (myPkg-driverA unless driverB)
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760724541952"> <p>
									<code class="literal">unless else</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139760724540864"> <p>
									Same as the <code class="literal">unless</code> operator, plus requires the third operand to be fulfilled if the second is.
								</p>
								 </td><td align="left" valign="top" headers="idm139760724539776"> <p>
									Conflicts: (myPkg-backend-SDL1 unless myPkg-backend-SDL2 else SDL2)
								</p>
								 </td></tr></tbody></table></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The <code class="literal">if</code> operator cannot be used in the same context with the <code class="literal">or</code> operator, and the <code class="literal">unless</code> operator cannot be used in the same context with <code class="literal">and</code>.
					</p></div></div></section><section class="section" id="boolean-dependencies-nesting"><div class="titlepage"><div><div><h3 class="title">5.2.3. Nesting</h3></div></div></div><p>
					Operands themselves can be used as boolean expressions, as shown in the below examples.
				</p><p>
					Note that in such case, operands also need to be surrounded by parenthesis. You can chain the <code class="literal">and</code> and <code class="literal">or</code> operators together repeating the same operator with only one set of surrounding parenthesis.
				</p><div class="example" id="idm139760720936160"><p class="title"><strong>Example 5.2. Example use of operands applied as boolean expressions</strong></p><div class="example-contents"><pre class="literallayout">Requires: (pkgA or pkgB or pkgC)</pre><pre class="literallayout">Requires: (pkgA or (pkgB and pkgC))</pre><pre class="literallayout">Supplements: (foo and (lang-support-cz or lang-support-all))</pre><pre class="literallayout">Requires: (pkgA with capB) or (pkgB without capA)</pre><pre class="literallayout">Supplements: ((driverA and driverA-tools) unless driverB)</pre><pre class="literallayout">Recommends: myPkg-langCZ and (font1-langCZ or font2-langCZ) if langsupportCZ</pre></div></div></section><section class="section" id="boolean-dependencies-semantics"><div class="titlepage"><div><div><h3 class="title">5.2.4. Semantics</h3></div></div></div><p>
					Using <code class="literal">Boolean dependencies</code> does not change the semantic of regular dependencies.
				</p><p>
					If <code class="literal">Boolean dependencies</code> are used, checking for one match all names are checked and the boolean value of there being a match is then aggregated over the Boolean operators.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						For all dependencies with the exception of <code class="literal">Conflicts:</code>, the result has to be <code class="literal">True</code> to not prevent an install. For <code class="literal">Conflicts:</code>, the result has to be <code class="literal">False</code> to not prevent an install.
					</p></div></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						<code class="literal">Provides</code> are not dependencies and cannot contain boolean expressions.
					</p></div></div><section class="section" id="boolean-dependencies-cautionary-tale-about-if"><div class="titlepage"><div><div><h4 class="title">5.2.4.1. Understanding the output of the if operator</h4></div></div></div><p>
						The <code class="literal">if</code> operator is also returning a boolean value, which is usually close to what the intuitive understanding is. However, the below examples show that in some cases intuitive understanding of <code class="literal">if</code> can be misleading.
					</p><div class="example" id="idm139760720919648"><p class="title"><strong>Example 5.3. Misleading outputs of the if operator</strong></p><div class="example-contents"><p>
							This statement is true if pkgB is not installed. However, if this statement is used where the default result is false, things become complicated:
						</p><pre class="literallayout">Requires: (pkgA if pkgB)</pre><p>
							This statement is a conflict unless pkgB is installed and pkgA is not:
						</p><pre class="literallayout">Conflicts: (pkgA if pkgB)</pre><p>
							So you might rather want to use:
						</p><pre class="literallayout">Conflicts: (pkgA and pkgB)</pre><p>
							The same is true if the <code class="literal">if</code> operator is nested in <code class="literal">or</code> terms:
						</p><pre class="literallayout">Requires: ((pkgA if pkgB) or pkgC or pkg)</pre><p>
							This also makes the whole term true, because the <code class="literal">if</code> term is true if pkgB is not installed. If pkgA only helps if pkgB is installed, use <code class="literal">and</code> instead:
						</p><pre class="literallayout">Requires: ((pkgA and pkgB) or pkgC or pkg)</pre></div></div></section></section></section><section class="section" id="support-for-file-triggers_new-features-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">5.3. Support for File triggers</h2></div></div></div><p>
				<code class="literal">File triggers</code> are a kind of <a class="link" href="index.html#scriptlets-directives_scriptlets-new" title="4.3.2.1. Scriptlets directives">RPM scriptlets</a>, which are defined in a SPEC file of a package.
			</p><p>
				Similar to <span class="strong strong"><strong>Triggers</strong></span>, they are declared in one package but executed when another package that contains the matching files is installed or removed.
			</p><p>
				A common use of <code class="literal">File triggers</code> is to update registries or caches. In such use case, the package containing or managing the registry or cache should contain also one or more <code class="literal">File triggers</code>. Including <code class="literal">File triggers</code> saves time compared to the situation when the package controls updating itself.
			</p><section class="section" id="file-triggers-syntax"><div class="titlepage"><div><div><h3 class="title">5.3.1. File triggers syntax</h3></div></div></div><p>
					<code class="literal">File triggers</code> have the following syntax:
				</p><pre class="literallayout">%file_trigger_tag [FILE_TRIGGER_OPTIONS] — PATHPREFIX…​
body_of_script</pre><p>
					Where:
				</p><p>
					<code class="literal">file_trigger_tag</code> defines a type of file trigger. Allowed types are:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">filetriggerin</code>
						</li><li class="listitem">
							<code class="literal">filetriggerun</code>
						</li><li class="listitem">
							<code class="literal">filetriggerpostun</code>
						</li><li class="listitem">
							<code class="literal">transfiletriggerin</code>
						</li><li class="listitem">
							<code class="literal">transfiletriggerun</code>
						</li><li class="listitem">
							<code class="literal">transfiletriggerpostun</code>
						</li></ul></div><p>
					<code class="literal">FILE_TRIGGER_OPTIONS</code> have the same purpose as RPM scriptlets options, except for the <code class="literal option">-P</code> option.
				</p><p>
					The priority of a trigger is defined by a number. The bigger number, the sooner the file trigger script is executed. Triggers with priority greater than 100000 are executed before standard scriptlets, and the other triggers are executed after standard scriptlets. The default priority is set to 1000000.
				</p><p>
					Every file trigger of each type must contain one or more path prefixes and scripts.
				</p></section><section class="section" id="file-triggers-syntax-examples"><div class="titlepage"><div><div><h3 class="title">5.3.2. Examples of File triggers syntax</h3></div></div></div><p>
					This section shows concrete examples of <code class="literal">File triggers</code> syntax:
				</p><pre class="literallayout">%filetriggerin — /lib, /lib64, /usr/lib, /usr/lib64
/usr/sbin/ldconfig</pre><p>
					This file trigger executes <code class="literal filename">/usr/bin/ldconfig</code> directly after the installation of a package that contains a file having a path starting with <code class="literal">/usr/lib</code> or <code class="literal">/lib</code>. The file trigger is executed just once even if the package includes multiple files with the path starting with <code class="literal">/usr/lib</code> or <code class="literal">/lib</code>. However, all file names starting with <code class="literal">/usr/lib</code> or <code class="literal">/lib</code> are passed to standard input of trigger script so that you can filter inside of your script as shown below:
				</p><pre class="literallayout">%filetriggerin — /lib, /lib64, /usr/lib, /usr/lib64
grep "foo" &amp;&amp; /usr/sbin/ldconfig</pre><p>
					This file trigger executes <code class="literal filename">/usr/bin/ldconfig</code> for each package containing files starting with <code class="literal">/usr/lib</code> and containing <code class="literal">foo</code> at the same time. Note that the prefix-matched files include all types of files including regular files, directories, symlinks and others.
				</p></section><section class="section" id="file-triggers-types"><div class="titlepage"><div><div><h3 class="title">5.3.3. File triggers types</h3></div></div></div><p>
					<code class="literal">File triggers</code> have two main types:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="index.html#file-triggers-executed-once-per-package" title="5.3.3.1. Executed once per package File triggers">File triggers executed once per package</a>
						</li><li class="listitem">
							<a class="link" href="index.html#file-triggers-executed-once-per-transaction" title="5.3.3.2. Executed once per transaction File triggers">File triggers executed once per transaction</a>
						</li></ul></div><p>
					<code class="literal">File triggers</code> are further divided based on the time of execution as follows:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Before or after installation or erasure of a package
						</li><li class="listitem">
							Before or after a transaction
						</li></ul></div><section class="section" id="file-triggers-executed-once-per-package"><div class="titlepage"><div><div><h4 class="title">5.3.3.1. Executed once per package File triggers</h4></div></div></div><p>
						<code class="literal">File triggers</code> executed once per package are:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								%filetriggerin
							</li><li class="listitem">
								%filetriggerun
							</li><li class="listitem">
								%filetriggerpostun
							</li></ul></div><h6 id="filetriggerin">%filetriggerin</h6><p>
						This file trigger is executed after installation of a package if this package contains one or more files that match the prefix of this trigger. It is also executed after installation of a package that contains this file trigger and there is one or more files matching the prefix of this file trigger in the <code class="literal">rpmdb</code> database.
					</p><h6 id="filetriggerun">%filetriggerun</h6><p>
						This file trigger is executed before uninstallation of a package if this package contains one or more files that match the prefix of this trigger. It is also executed before uninstallation of a package that contains this file trigger and there is one or more files matching the prefix of this file trigger in <code class="literal">rpmdb</code>.
					</p><h6 id="filetriggerpostun">%filetriggerpostun</h6><p>
						This file trigger is executed after uninstallation of a package if this package contains one or more files that match the prefix of this trigger.
					</p></section><section class="section" id="file-triggers-executed-once-per-transaction"><div class="titlepage"><div><div><h4 class="title">5.3.3.2. Executed once per transaction File triggers</h4></div></div></div><p>
						<code class="literal">File triggers</code> executed once per transaction are:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								%transfiletriggerin
							</li><li class="listitem">
								%transfiletriggerun
							</li><li class="listitem">
								%transfiletriggerpostun
							</li></ul></div><h6 id="transfiletriggerin">%transfiletriggerin</h6><p>
						This file trigger is executed once after a transaction for all installed packages that contain one or more files that match the prefix of this trigger. It is also executed after a transaction if there was a package containing this file trigger in that transaction and there is one or more files matching the prefix of this trigger in <code class="literal">rpmdb</code>.
					</p><h5 id="transfiletriggerun">%transfiletriggerun</h5><p>
						This file trigger is executed once before a transaction for all packages that meet the following conditions:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The package will be uninstalled in this transaction
							</li><li class="listitem">
								The package contains one or more files that match the prefix of this trigger
							</li></ul></div><p>
						It is also executed before a transaction if there is a package containing this file trigger in that transaction and there is one or more files matching the prefix of this trigger in <code class="literal">rpmdb</code>.
					</p><h6 id="transfiletriggerpostun">%transfiletriggerpostun</h6><p>
						This file trigger is executed once after a transaction for all uninstalled packages that contain one or more file that matches the prefix of this trigger.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The list of triggering files is not available in this trigger type.
						</p></div></div><p>
						Therefore, if you install or uninstall multiple packages that contain libraries, the ldconfig cache is updated at the end of the whole transaction. This significantly improves the performance compared to RHEL 7 where the cache was updated for each package separately. Also the scriptlets which called ldconfig in %post and %postun in SPEC file of every package are no longer needed.
					</p></section></section><section class="section" id="file-triggers-example-use"><div class="titlepage"><div><div><h3 class="title">5.3.4. Example use of File triggers in glibc</h3></div></div></div><p>
					This section shows a real-world example of use of <code class="literal">File triggers</code> within the <code class="literal package">glibc</code> package.
				</p><p>
					In RHEL 8, <code class="literal">File triggers</code> are implemented in <code class="literal package">glibc</code> to call the <code class="literal command">ldconfig</code> command at the end of an installation or uninstallation transaction.
				</p><p>
					This is ensured by including the following scriptlets in the <code class="literal package">glibc’s</code> SPEC file:
				</p><pre class="literallayout">%transfiletriggerin common -P 2000000 – /lib /usr/lib /lib64 /usr/lib64
/sbin/ldconfig
%end
%transfiletriggerpostun common -P 2000000 – /lib /usr/lib /lib64 /usr/lib64
/sbin/ldconfig
%end</pre><p>
					Therefore, if you install or uninstall multiple packages, the <code class="literal">ldconfig</code> cache is updated for all installed libraries after the whole transaction is finished. Consequently, it is no longer necessary to include the scriptlets calling <code class="literal">ldconfig</code> in RPM SPEC files of individual packages. This improves the performance compared to RHEL 7, where the cache was updated for each package separately.
				</p></section></section><section class="section" id="stricter-spec-parser_new-features-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">5.4. Stricter SPEC parser</h2></div></div></div><p>
				The SPEC parser has now some changes incorporated. Hence, it can identify new issues that were previously ignored.
			</p></section><section class="section" id="support-for-big-files_new-features-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">5.5. Support for files above 4 GB</h2></div></div></div><p>
				On Red Hat Enterprise Linux 8, <span class="strong strong"><strong>RPM</strong></span> can use 64-bit variables and tags, which enables operating on files and packages bigger than 4 GB.
			</p><section class="section" id="long-bit-rpm-tags"><div class="titlepage"><div><div><h3 class="title">5.5.1. 64-bit RPM tags</h3></div></div></div><p>
					Several RPM tags exist in both 64-bit versions and previous 32-bit versions. Note that the 64-bit versions have the <code class="literal">LONG</code> string in front of their name.
				</p><div class="table" id="idm139760725218928"><p class="title"><strong>Table 5.4. RPM tags available in both 32-bit and 64-bit versions</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139760725213136" scope="col">32-bit variant tag name</th><th align="left" valign="top" id="idm139760725212048" scope="col">62-bit variant tag name</th><th align="left" valign="top" id="idm139760725210960" scope="col">Tag description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139760725213136"> <p>
									RPMTAG_SIGSIZE
								</p>
								 </td><td align="left" valign="top" headers="idm139760725212048"> <p>
									RPMTAG_LONGSIGSIZE
								</p>
								 </td><td align="left" valign="top" headers="idm139760725210960"> <p>
									Header and compressed payload size.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760725213136"> <p>
									RPMTAG_ARCHIVESIZE
								</p>
								 </td><td align="left" valign="top" headers="idm139760725212048"> <p>
									RPMTAG_LONGARCHIVESIZE
								</p>
								 </td><td align="left" valign="top" headers="idm139760725210960"> <p>
									Uncompressed payload size.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760725213136"> <p>
									RPMTAG_FILESIZES
								</p>
								 </td><td align="left" valign="top" headers="idm139760725212048"> <p>
									RPMTAG_LONGFILESIZES
								</p>
								 </td><td align="left" valign="top" headers="idm139760725210960"> <p>
									Array of file sizes.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139760725213136"> <p>
									RPMTAG_SIZE
								</p>
								 </td><td align="left" valign="top" headers="idm139760725212048"> <p>
									RPMTAG_LONGSIZE
								</p>
								 </td><td align="left" valign="top" headers="idm139760725210960"> <p>
									Sum of all file sizes.
								</p>
								 </td></tr></tbody></table></div></div><section class="section" id="long-bits-on-cmd"><div class="titlepage"><div><div><h4 class="title">5.5.1.1. Using 64-bit tags on command line</h4></div></div></div><p>
						The <code class="literal">LONG</code> extensions are always enabled on the command line. If you previously used scripts containing the <code class="literal command">rpm -q --qf</code> command, you can add <code class="literal">long</code> to the name of such tags:
					</p><pre class="literallayout">rpm -qp --qf="[%{filenames} %{longfilesizes}\n]"</pre></section></section></section><section class="section" id="other-features_new-features-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">5.6. Other features</h2></div></div></div><p>
				Other new features related to RPM packaging in Red Hat Enterprise Linux 8 are:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Simplified signature checking output in non-verbose mode
					</li><li class="listitem">
						Support for the enforced payload verification
					</li><li class="listitem">
						Support for the enforcing signature checking mode
					</li><li class="listitem">
						Additions and deprecations in macros
					</li></ul></div></section></section><section class="chapter" id="additional-resources-about-rpm-packaging_packaging-and-distributing-software"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Additional resources about RPM packaging</h1></div></div></div><p>
			This section provides references to various topics related to RPMs, RPM packaging, and RPM building. Some of these are advanced and extend the introductory material included in this documentation.
		</p><p>
			<a class="link" href="https://developers.redhat.com/products/softwarecollections/overview/">Red Hat Software Collections Overview</a> - The Red Hat Software Collections offering provides continuously updated development tools in latest stable versions.
		</p><p>
			<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_software_collections/3/html/packaging_guide/">Red Hat Software Collections</a> - The Packaging Guide provides an explanation of Software Collections and details how to build and package them. Developers and system administrators with basic understanding of software packaging with RPM can use this Guide to get started with Software Collections.
		</p><p>
			<a class="link" href="https://rpm-packaging-guide.github.io/#mock">Mock</a> - Mock provides a community-supported package building solution for various architectures and different Fedora or RHEL versions than has the build host.
		</p><p>
			<a class="link" href="http://rpm.org/documentation">RPM Documentation</a> - The official RPM documentation.
		</p><p>
			<a class="link" href="https://docs.fedoraproject.org/en-US/packaging-guidelines/">Fedora Packaging Guidelines</a> - The official packaging guidelines for Fedora, useful for all RPM-based distributions.
		</p></section><div><div xml:lang="en-US" class="legalnotice" id="idm139760721531840"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2019 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div>
  
  </div>
  </div>
</div>
<div id="comments-footer" class="book-comments">
  </div>
<meta itemscope="" itemref="md1">

    <!-- Display: Next/Previous Nav -->
          
      </div>
</article>


  

            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto" href="index.html#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path
                      class="rh-logo-hat"
                      d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                      <path class="rh-logo-band"
                      d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                      <path
                      class="rh-logo-type"
                      d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                  </svg>
                </a>
              </div>

            <div role="navigation">
                <h3>Quick Links</h3>
                <ul>
                    <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li><a class="manage-subscriptions" href="https://access.redhat.com/management/subscriptions/#active">Subscriptions</a></li>
                    <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                    <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                    <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Help</h3>
                <ul>
                    <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                    <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                    <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Site Info</h3>
                <ul>
                  <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                  <li><a class="browser-support-policy" href="https://access.redhat.com/help/browsers/">Browser Support Policy</a></li>
                  <li><a class="accessibility" href="https://access.redhat.com/help/accessibility/">Accessibility</a></li>
                  <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                  <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Related Sites</h3>
                <ul>
                    <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                    <li><a href="https://www.openshift.com" class="openshift-com">openshift.com</a></li>
                    <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                    <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>About</h3>
                <ul>
                    <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                    <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                    <li><a href="http://jobs.redhat.com" class="about-jobs">Red Hat Jobs</a></li>
                </ul>
            </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a hidden href="https://status.redhat.com" class="status-page-widget">
                          <span class="status-description"></span>
                          <span class="status-dot shape-circle"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2020 Red Hat, Inc.</div>

                        <div role="navigation" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://access.redhat.com/help/terms/" class="terms-of-use">Customer Portal Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                      <img src="l_summit.png" alt="Red Hat Summit" />
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHatSupport" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>
                        <a href="https://www.facebook.com/RedHatSupport" class="sm-icon facebook"><span class="nicon-facebook"></span><span class="offscreen">Facebook</span></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--googleon: all-->
</div>
  
  <div id="formatHelp" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="formatTitle" aria-hidden="true"><div class="modal-dialog"><div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="formatTitle">Formatting Tips</h3>
    </div>
    <div class="modal-body">
      <p>Here are the common uses of Markdown.</p><dl class="formatting-help">
        <dt class="codeblock">Code blocks</dt><dd class="codeblock"><pre><code>~~~
Code surrounded in tildes is easier to read
~~~</code></pre></dd>
        <dt class="urls">Links/URLs</dt><dd class="urls"><code>[Red Hat Customer Portal](https://access.redhat.com)</code></dd>
       </dl>
    </div>
    <div class="modal-footer">
      <a target="_blank" href="https://access.redhat.com/help/markdown" class="btn btn-primary">Learn more</a>
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
  </div></div></div></body>
</html>
